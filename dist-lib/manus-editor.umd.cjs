(function(ge,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("react/jsx-dev-runtime"),require("react"),require("react-dom"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react/jsx-dev-runtime","react","react-dom","react/jsx-runtime"],y):(ge=typeof globalThis<"u"?globalThis:ge||self,y(ge.ManusEditor={},ge.jsxDevRuntime,ge.React,ge.ReactDOM,ge.jsxRuntime))})(this,(function(ge,y,N,wn,I){"use strict";function xh(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const x=xh(N),Sh=xh(wn);function Ev(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Es={exports:{}},kc={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function vv(){if(Ch)return kc;Ch=1;var t=N;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function a(d,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),m=p[0].inst,g=p[1];return i(function(){m.value=h,m.getSnapshot=f,l(m)&&g({inst:m})},[d,h,f]),o(function(){return l(m)&&g({inst:m}),d(function(){l(m)&&g({inst:m})})},[d]),s(h),h}function l(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return kc.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,kc}var Ec={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th;function Nv(){return Th||(Th=1,process.env.NODE_ENV!=="production"&&(function(){function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}function e(h,p){u||o.startTransition===void 0||(u=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var m=p();if(!d){var g=p();i(m,g)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),d=!0)}g=s({inst:{value:m,getSnapshot:p}});var b=g[0].inst,w=g[1];return l(function(){b.value=m,b.getSnapshot=p,n(b)&&w({inst:b})},[h,m,p]),a(function(){return n(b)&&w({inst:b}),h(function(){n(b)&&w({inst:b})})},[h]),c(m),m}function n(h){var p=h.getSnapshot;h=h.value;try{var m=p();return!i(h,m)}catch{return!0}}function r(h,p){return p()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var o=N,i=typeof Object.is=="function"?Object.is:t,s=o.useState,a=o.useEffect,l=o.useLayoutEffect,c=o.useDebugValue,u=!1,d=!1,f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r:e;Ec.useSyncExternalStore=o.useSyncExternalStore!==void 0?o.useSyncExternalStore:f,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()),Ec}var Mh;function vc(){return Mh||(Mh=1,process.env.NODE_ENV==="production"?Es.exports=vv():Es.exports=Nv()),Es.exports}var Ah=vc();function ht(t){this.content=t}ht.prototype={constructor:ht,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new ht(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ht(n)},addToStart:function(t,e){return new ht([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ht(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new ht(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ht.from(t),t.size?new ht(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ht.from(t),t.size?new ht(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ht.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}},ht.from=function(t){if(t instanceof ht)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ht(e)};function _h(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=_h(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function Oh(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=Oh(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class R{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new R(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new R(r,o)}cutByIndex(e,n){return e==n?R.empty:e==0&&n==this.content.length?this:new R(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new R(o,i)}addToStart(e){return new R([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new R(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return _h(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Oh(this,e,n,r)}findIndex(e){if(e==0)return vs(0,e);if(e==this.size)return vs(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e?vs(n+1,i):vs(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return R.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new R(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return R.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new R(n||e,r)}static from(e){if(!e)return R.empty;if(e instanceof R)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new R([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}R.empty=new R([],0);const Nc={index:0,offset:0};function vs(t,e){return Nc.index=t,Nc.offset=e,Nc}function Ns(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ns(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ns(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let He=class kh{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ns(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return kh.none;if(e instanceof kh)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};He.none=[];class xs extends Error{}class Y{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Dh(this.content,e+this.openStart,n);return r&&new Y(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Y(Ih(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Y.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Y(R.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Y(e,r,o)}}Y.empty=new Y(R.empty,0,0);function Ih(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(Ih(i.content,e-o-1,n-o-1)))}function Dh(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Dh(s.content,e-i-1,n,s);return a&&t.replaceChild(o,s.copy(a))}function xv(t,e,n){if(n.openStart>t.depth)throw new xs("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new xs("Inconsistent open depths");return Lh(t,e,n,0)}function Lh(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=Lh(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Lr(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=Sv(n,t);return Lr(i,Ph(t,s,a,e,r))}else return Lr(i,Ss(t,e,r))}function Rh(t,e){if(!e.type.compatibleContent(t.type))throw new xs("Cannot join "+e.type.name+" onto "+t.type.name)}function xc(t,e,n){let r=t.node(n);return Rh(r,e.node(n)),r}function Dr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ci(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Dr(t.nodeAfter,r),i++));for(let a=i;a<s;a++)Dr(o.child(a),r);e&&e.depth==n&&e.textOffset&&Dr(e.nodeBefore,r)}function Lr(t,e){return t.type.checkContent(e),t.copy(e)}function Ph(t,e,n,r,o){let i=t.depth>o&&xc(t,e,o+1),s=r.depth>o&&xc(n,r,o+1),a=[];return ci(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(Rh(i,s),Dr(Lr(i,Ph(t,e,n,r,o+1)),a)):(i&&Dr(Lr(i,Ss(t,e,o+1)),a),ci(e,n,o,a),s&&Dr(Lr(s,Ss(n,r,o+1)),a)),ci(r,null,o,a),new R(a)}function Ss(t,e,n){let r=[];if(ci(null,t,n,r),t.depth>n){let o=xc(t,e,n+1);Dr(Lr(o,Ss(t,e,n+1)),r)}return ci(e,null,n,r),new R(r)}function Sv(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(R.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class ui{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return He.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Cs(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new ui(n,r,i)}static resolveCached(e,n){let r=Bh.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else Bh.set(e,r=new Cv);let o=r.elts[r.i]=ui.resolve(e,n);return r.i=(r.i+1)%Tv,o}}class Cv{constructor(){this.elts=[],this.i=0}}const Tv=12,Bh=new WeakMap;class Cs{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Mv=Object.create(null);let Jn=class Eh{constructor(e,n,r,o=He.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||R.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ns(this.attrs,n||e.defaultAttrs||Mv)&&He.sameSet(this.marks,r||He.none)}copy(e=null){return e==this.content?this:new Eh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Eh(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Y.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new Y(c,o.depth-s,i.depth-s)}replace(e,n,r){return xv(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return ui.resolveCached(this,e)}resolveNoCache(e){return ui.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),zh(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=R.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=He.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!He.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=R.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};Jn.prototype.text=void 0;class Ts extends Jn{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):zh(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ts(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ts(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function zh(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Rr{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Av(e,n);if(r.next==null)return Rr.empty;let o=$h(r);r.next&&r.err("Unexpected trailing text");let i=Pv(Rv(o));return Bv(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return R.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}Rr.empty=new Rr(!0);class Av{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function $h(t){let e=[];do e.push(_v(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function _v(t){let e=[];do e.push(Ov(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Ov(t){let e=Lv(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Iv(t,e);else break;return e}function Vh(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Iv(t,e){let n=Vh(t),r=n;return t.eat(",")&&(t.next!="}"?r=Vh(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Dv(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function Lv(t){if(t.eat("(")){let e=$h(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Dv(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Rv(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Hh(t,e){return e-t}function Fh(t,e){let n=[];return r(e),n.sort(Hh);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function Pv(t){let e=Object.create(null);return n(Fh(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);Fh(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new Rr(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(Hh);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function Bv(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Uh(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Wh(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Kh(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function qh(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new $v(t,r,e[r]);return n}let Gh=class hv{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=qh(e,r.attrs),this.defaultAttrs=Uh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Rr.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Wh(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jn(this,this.computeAttrs(e),R.from(n),He.setFrom(r))}createChecked(e=null,n,r){return n=R.from(n),this.checkContent(n),new Jn(this,this.computeAttrs(e),n,He.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=R.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(R.empty,!0);return i?new Jn(this,e,n.append(i),He.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Kh(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:He.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new hv(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function zv(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class $v{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?zv(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ms{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=qh(e,o.attrs),this.excluded=null;let i=Uh(this.attrs);this.instance=i?new He(this,i):null}create(e=null){return!e&&this.instance?this.instance:new He(this,Wh(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new Ms(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Kh(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class jh{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=ht.from(e.nodes),n.marks=ht.from(e.marks||{}),this.nodes=Gh.compile(this.spec.nodes,this),this.marks=Ms.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=Rr.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Yh(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Yh(this,s.split(" "))}this.nodeFromJSON=o=>Jn.fromJSON(this,o),this.markFromJSON=o=>He.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Gh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Ts(r,r.defaultAttrs,e,He.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Yh(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Vv(t){return t.tag!=null}function Hv(t){return t.style!=null}class Qn{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(Vv(o))this.tags.push(o);else if(Hv(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new Qh(this,n,!1);return r.addAll(e,He.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Qh(this,n,!0);return r.addAll(e,He.none,n.from,n.to),Y.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(Wv(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=ep(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=ep(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qn(e,Qn.schemaRules(e)))}}const Xh={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fv={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Zh={ol:!0,ul:!0},di=1,Sc=2,fi=4;function Jh(t,e,n){return e!=null?(e?di:0)|(e==="full"?Sc:0):t&&t.whitespace=="pre"?di|Sc:n&~fi}class As{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=He.none,this.match=i||(s&fi?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(R.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&di)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=R.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(R.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Xh.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Qh{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=Jh(null,n.preserveWhitespace,0)|(r?fi:0);o?i=new As(o.type,o.attrs,He.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new As(null,null,He.none,!0,null,s):i=new As(e.schema.topNodeType,null,He.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&Sc?"full":this.localPreserveWS||(o.options&di)>0,{schema:s}=this.parser;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(s.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=o.content[o.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;Zh.hasOwnProperty(s)&&this.parser.normalizeLists&&Uv(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Fv.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Xh.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=He.none;for(let a of o.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):tp(a.type,e.type))&&(s=a.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=Jh(e,i,s.options);s.options&fi&&s.content.length==0&&(a|=fi);let l=He.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):tp(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new As(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=di)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Uv(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Zh.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Wv(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ep(t){let e={};for(let n in t)e[n]=t[n];return e}function tp(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class Pr{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Cc(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=_s(Cc(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&_s(Cc(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return _s(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Pr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=np(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return np(e.marks)}}function np(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Cc(t){return t.document||window.document}const rp=new WeakMap;function Kv(t){let e=rp.get(t);return e===void 0&&rp.set(t,e=qv(t)),e}function qv(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function _s(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=Kv(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=_s(t,f,n,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const op=65535,ip=Math.pow(2,16);function Gv(t,e){return t+e*ip}function sp(t){return t&op}function jv(t){return(t-(t&op))/ip}const ap=1,lp=2,Os=4,cp=8;class Tc{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&cp)>0}get deletedBefore(){return(this.delInfo&(ap|Os))>0}get deletedAfter(){return(this.delInfo&(lp|Os))>0}get deletedAcross(){return(this.delInfo&Os)>0}}class Bt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Bt.empty)return Bt.empty}recover(e){let n=0,r=sp(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+jv(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+o+(f<0?0:u);if(r)return h;let p=e==(n<0?l:d)?null:Gv(a/3,e-l),m=e==l?lp:e==d?ap:Os;return(n<0?e!=l:e!=d)&&(m|=cp),new Tc(h,m,p)}o+=u-c}return r?e+o:new Tc(e+o,0,null)}touches(e,n){let r=0,o=sp(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new Bt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Bt.empty:new Bt(e<0?[0,-e,0]:[0,0,e])}}Bt.empty=new Bt([]);class hi{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new hi(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new hi;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Tc(e,o,null)}}const Mc=Object.create(null);class Et{getMap(){return Bt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Mc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Mc)throw new RangeError("Duplicate use of step JSON ID "+e);return Mc[e]=n,n.prototype.jsonID=e,n}}class nt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new nt(e,null)}static fail(e){return new nt(null,e)}static fromReplace(e,n,r,o){try{return nt.ok(e.replace(n,r,o))}catch(i){if(i instanceof xs)return nt.fail(i.message);throw i}}}function Ac(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(Ac(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return R.fromArray(r)}class er extends Et{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Y(Ac(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return nt.fromReplace(e,this.from,this.to,i)}invert(){return new rn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new er(n.pos,r.pos,this.mark)}merge(e){return e instanceof er&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new er(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new er(n.from,n.to,e.markFromJSON(n.mark))}}Et.jsonID("addMark",er);class rn extends Et{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Y(Ac(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return nt.fromReplace(e,this.from,this.to,r)}invert(){return new er(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new rn(n.pos,r.pos,this.mark)}merge(e){return e instanceof rn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new rn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new rn(n.from,n.to,e.markFromJSON(n.mark))}}Et.jsonID("removeMark",rn);class tr extends Et{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return nt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return nt.fromReplace(e,this.pos,this.pos+1,new Y(R.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new tr(this.pos,n.marks[o]);return new tr(this.pos,this.mark)}}return new Br(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new tr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tr(n.pos,e.markFromJSON(n.mark))}}Et.jsonID("addNodeMark",tr);class Br extends Et{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return nt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return nt.fromReplace(e,this.pos,this.pos+1,new Y(R.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new tr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Br(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Br(n.pos,e.markFromJSON(n.mark))}}Et.jsonID("removeNodeMark",Br);class ct extends Et{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&_c(e,this.from,this.to)?nt.fail("Structure replace would overwrite content"):nt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Bt([this.from,this.to-this.from,this.slice.size])}invert(e){return new ct(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ct(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ct)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Y.empty:new Y(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ct(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Y.empty:new Y(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ct(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ct(n.from,n.to,Y.fromJSON(e,n.slice),!!n.structure)}}Et.jsonID("replace",ct);class ut extends Et{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(_c(e,this.from,this.gapFrom)||_c(e,this.gapTo,this.to)))return nt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return nt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?nt.fromReplace(e,this.from,this.to,r):nt.fail("Content does not fit in gap")}getMap(){return new Bt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ut(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new ut(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ut(n.from,n.to,n.gapFrom,n.gapTo,Y.fromJSON(e,n.slice),n.insert,!!n.structure)}}Et.jsonID("replaceAround",ut);function _c(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Yv(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[m])?s.to=h:o.push(s=new rn(f,h,d[m])));a&&a.to==f?a.to=h:i.push(a=new er(f,h,r))}}),o.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function Xv(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof Ms){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<o.length;h++){let p=o[h];p.step==i-1&&d.eq(o[h].style)&&(f=p)}f?(f.to=c,f.step=i):o.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>t.step(new rn(s.from,s.to,s.style)))}function Oc(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new ct(a,u,Y.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new rn(a,u,c.marks[f]));if(o&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new Y(R.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new ct(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(R.empty,!0);t.replace(a,a,new Y(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function Zv(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function uo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,o=0,i=0;;--r){let s=t.$from.node(r),a=t.$from.index(r)+o,l=t.$to.indexAfter(r)-i;if(r<t.depth&&s.canReplace(a,l,n))return r;if(r==0||s.type.spec.isolating||!Zv(s,a,l))break;a&&(o=1),l<s.childCount&&(i=1)}return null}function Jv(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=R.empty,d=0;for(let p=i,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=R.from(r.node(p).copy(u)),d++):l--;let f=R.empty,h=0;for(let p=i,m=!1;p>n;p--)m||o.after(p+1)<o.end(p)?(m=!0,f=R.from(o.node(p).copy(f)),h++):c++;t.step(new ut(l,c,s,a,new Y(u.append(f),d,h),u.size-d,!0))}function Ic(t,e,n=null,r=t){let o=Qv(t,e),i=o&&eN(r,e);return i?o.map(up).concat({type:e,attrs:n}).concat(i.map(up)):null}function up(t){return{type:t,attrs:null}}function Qv(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function eN(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function tN(t,e,n){let r=R.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=R.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new ut(o,i,o,i,new Y(r,0,0),n.length,!0))}function nN(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&rN(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&fp(t,s,a,i),Oc(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),f=u.map(a+s.nodeSize,1);return t.step(new ut(d,f,d+1,f-1,new Y(R.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&dp(t,s,a,i),!1}})}function dp(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function fp(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function rN(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function oN(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ut(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Y(R.from(s),0,0),1,!0))}function Pn(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let d=o.node(c),f=o.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function iN(t,e,n=1,r){let o=t.doc.resolve(e),i=R.empty,s=R.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=R.from(o.node(a).copy(i));let u=r&&r[c];s=R.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}t.step(new ct(e,e,new Y(i.append(s),n,n),!0))}function nr(t,e){let n=t.resolve(e),r=n.index();return hp(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function sN(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function hp(t,e){return!!(t&&e&&!t.isLeaf&&sN(t,e))}function Is(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&hp(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function aN(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);fp(t,u.node(),u.before(),a)}s.inlineContent&&Oc(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new ct(c,l.map(e+n,-1),Y.empty,!0)),r===!0){let u=t.doc.resolve(c);dp(t,u.node(),u.before(),t.steps.length)}return t}function lN(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function pp(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Ds(t,e,n=e,r=Y.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return mp(o,i,r)?new ct(e,n,r):new cN(o,i,r).fit()}function mp(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class cN{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=R.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=R.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Y(i,s,a);return e>-1?new ut(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ct(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Dc(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(R.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Dc(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Y(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Dc(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new Y(pi(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Y(pi(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(o){for(let m=0;m<o.childCount;m++)u.push(o.child(m));d=d.matchFragment(o)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),g=d.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(d=g,u.push(gp(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=mi(this.placed,n,R.from(u)),this.frontier[n].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let b=g.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),g=b.content}this.unplaced=p?e==0?Y.empty:new Y(pi(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new Y(pi(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Lc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Lc(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Lc(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=mi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=mi(this.placed,this.depth,R.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(R.empty,!0);n.childCount&&(this.placed=mi(this.placed,this.frontier.length,n))}}function pi(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(pi(t.firstChild.content,e-1,n)))}function mi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(mi(t.lastChild.content,e-1,n)))}function Dc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function gp(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,gp(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(R.empty,!0)))),t.copy(r)}function Lc(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!uN(n,i.content,s)?a:null}function uN(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function dN(t){return t.spec.defining||t.spec.definingForContent}function fN(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(mp(o,i,r))return t.step(new ct(e,n,r));let s=yp(o,i);s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let f=o.depth,h=o.pos-1;f>0;f--,h--){let p=o.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?a=f:o.before(f)==h&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=dN(h.type);if(p&&!h.sameMarkup(o.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<s.length;m++){let g=s[(m+l)%s.length],b=!0;g<0&&(b=!1,g=-g);let w=o.node(g-1),E=o.index(g-1);if(w.canReplaceWith(E,E,p.type,p.marks))return t.replace(o.before(g),b?i.after(g):n,new Y(bp(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=s[f];h<0||(e=o.before(h),n=i.after(h))}}function bp(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(bp(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(R.empty,!0))}return t}function hN(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=lN(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Y(R.from(r),0,0))}function pN(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=yp(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function yp(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class fo extends Et{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return nt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return nt.fromReplace(e,this.pos,this.pos+1,new Y(R.from(o),0,n.isLeaf?0:1))}getMap(){return Bt.empty}invert(e){return new fo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new fo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new fo(n.pos,n.attr,n.value)}}Et.jsonID("attr",fo);class gi extends Et{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return nt.ok(r)}getMap(){return Bt.empty}invert(e){return new gi(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gi(n.attr,n.value)}}Et.jsonID("docAttr",gi);let ho=class extends Error{};ho=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},ho.prototype=Object.create(Error.prototype),ho.prototype.constructor=ho,ho.prototype.name="TransformError";class Rc{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new hi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ho(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let o=this.mapping.maps[r];r&&(e=o.map(e,1),n=o.map(n,-1)),o.forEach((i,s,a,l)=>{e=Math.min(e,a),n=Math.max(n,l)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Y.empty){let o=Ds(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Y(R.from(r),0,0))}delete(e,n){return this.replace(e,n,Y.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return fN(this,e,n,r),this}replaceRangeWith(e,n,r){return hN(this,e,n,r),this}deleteRange(e,n){return pN(this,e,n),this}lift(e,n){return Jv(this,e,n),this}join(e,n=1){return aN(this,e,n),this}wrap(e,n){return tN(this,e,n),this}setBlockType(e,n=e,r,o=null){return nN(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return oN(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new fo(e,n,r)),this}setDocAttribute(e,n){return this.step(new gi(e,n)),this}addNodeMark(e,n){return this.step(new tr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof He)n.isInSet(r.marks)&&this.step(new Br(e,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new Br(e,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return iN(this,e,n,r),this}addMark(e,n,r){return Yv(this,e,n,r),this}removeMark(e,n,r){return Xv(this,e,n,r),this}clearIncompatible(e,n,r){return Oc(this,e,n,r),this}}const Pc=Object.create(null);class fe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new wp(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Y.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Y.empty:n),a==0&&vp(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),vp(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new le(e):po(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?po(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):po(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new zt(e.node(0))}static atStart(e){return po(e,e,0,0,1)||new zt(e)}static atEnd(e){return po(e,e,e.content.size,e.childCount,-1)||new zt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Pc[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Pc)throw new RangeError("Duplicate use of selection JSON ID "+e);return Pc[e]=n,n.prototype.jsonID=e,n}getBookmark(){return le.between(this.$anchor,this.$head).getBookmark()}}fe.prototype.visible=!0;class wp{constructor(e,n){this.$from=e,this.$to=n}}let kp=!1;function Ep(t){!kp&&!t.parent.inlineContent&&(kp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class le extends fe{constructor(e,n=e){Ep(e),Ep(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return fe.near(r);let o=e.resolve(n.map(this.anchor));return new le(o.parent.inlineContent?o:r,r)}replace(e,n=Y.empty){if(super.replace(e,n),n==Y.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof le&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ls(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new le(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=fe.findFrom(n,r,!0)||fe.findFrom(n,-r,!0);if(i)n=i.$head;else return fe.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(fe.findFrom(e,-r,!0)||fe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new le(e,n)}}fe.jsonID("text",le);class Ls{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ls(e.map(this.anchor),e.map(this.head))}resolve(e){return le.between(e.resolve(this.anchor),e.resolve(this.head))}}class ie extends fe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?fe.near(i):new ie(i)}content(){return new Y(R.from(this.node),0,0)}eq(e){return e instanceof ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Bc(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ie(e.resolve(n.anchor))}static create(e,n){return new ie(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ie.prototype.visible=!1,fe.jsonID("node",ie);class Bc{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ls(r,r):new Bc(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ie.isSelectable(r)?new ie(n):fe.near(n)}}class zt extends fe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Y.empty){if(n==Y.empty){e.delete(0,e.doc.content.size);let r=fe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new zt(e)}map(e){return new zt(e)}eq(e){return e instanceof zt}getBookmark(){return mN}}fe.jsonID("all",zt);const mN={map(){return this},resolve(t){return new zt(t)}};function po(t,e,n,r,o,i=!1){if(e.inlineContent)return le.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&ie.isSelectable(a))return ie.create(t,n-(o<0?a.nodeSize:0))}else{let l=po(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function vp(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof ct||o instanceof ut))return;let i=t.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(fe.near(t.doc.resolve(s),n))}const Np=1,Rs=2,xp=4;class gN extends Rc{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Np)&~Rs,this.storedMarks=null,this}get selectionSet(){return(this.updated&Np)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Rs,this}ensureMarks(e){return He.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Rs)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Rs,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||He.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(fe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=xp,this}get scrolledIntoView(){return(this.updated&xp)>0}}function Sp(t,e){return!e||!t?t:t.bind(e)}class bi{constructor(e,n,r){this.name=e,this.init=Sp(n.init,r),this.apply=Sp(n.apply,r)}}const bN=[new bi("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new bi("selection",{init(t,e){return t.selection||fe.atStart(e.doc)},apply(t){return t.selection}}),new bi("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new bi("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class zc{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bN.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new bi(r.key,r.spec.state,r))})}}class mo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new mo(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new gN(this)}static create(e){let n=new zc(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new mo(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new zc(this.schema,e.plugins),r=n.fields,o=new mo(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new zc(e.schema,e.plugins),i=new mo(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Jn.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=fe.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function Cp(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Cp(o,e,{})),n[r]=o}return n}class Se{constructor(e){this.spec=e,this.props={},e.props&&Cp(e.props,this,this.props),this.key=e.key?e.key.key:Tp("plugin")}getState(e){return e[this.key]}}const $c=Object.create(null);function Tp(t){return t in $c?t+"$"+ ++$c[t]:($c[t]=0,t+"$")}class _e{constructor(e="key"){this.key=Tp(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Vc=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Mp(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Ap=(t,e,n)=>{let r=Mp(t,n);if(!r)return!1;let o=Hc(r);if(!o){let s=r.blockRange(),a=s&&uo(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(zp(t,o,e,-1))return!0;if(r.parent.content.size==0&&(go(i,"end")||ie.isSelectable(i)))for(let s=r.depth;;s--){let a=Ds(t.doc,r.before(s),r.after(s),Y.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(go(i,"end")?fe.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):ie.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},yN=(t,e,n)=>{let r=Mp(t,n);if(!r)return!1;let o=Hc(r);return o?_p(t,o,e):!1},wN=(t,e,n)=>{let r=Ip(t,n);if(!r)return!1;let o=Fc(r);return o?_p(t,o,e):!1};function _p(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Ds(t.doc,i,l,Y.empty);if(!c||c.from!=i||c instanceof ct&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(le.create(u.doc,i)),n(u.scrollIntoView())}return!0}function go(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Op=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=Hc(r)}let s=i&&i.nodeBefore;return!s||!ie.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ie.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function Hc(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ip(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Dp=(t,e,n)=>{let r=Ip(t,n);if(!r)return!1;let o=Fc(r);if(!o)return!1;let i=o.nodeAfter;if(zp(t,o,e,1))return!0;if(r.parent.content.size==0&&(go(i,"start")||ie.isSelectable(i))){let s=Ds(t.doc,r.before(),r.after(),Y.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(go(i,"start")?fe.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):ie.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},Lp=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=Fc(r)}let s=i&&i.nodeAfter;return!s||!ie.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ie.create(t.doc,i.pos)).scrollIntoView()),!0)};function Fc(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const kN=(t,e)=>{let n=t.selection,r=n instanceof ie,o;if(r){if(n.node.isTextblock||!nr(t.doc,n.from))return!1;o=n.from}else if(o=Is(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(ie.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},EN=(t,e)=>{let n=t.selection,r;if(n instanceof ie){if(n.node.isTextblock||!nr(t.doc,n.to))return!1;r=n.to}else if(r=Is(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},vN=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&uo(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},Rp=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Uc(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const NN=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=Uc(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(fe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Pp=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof zt||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=Uc(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(le.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Bp=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Pn(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&uo(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function xN(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof ie&&e.selection.node.isBlock)return!r.parentOffset||!Pn(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),a=Uc(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),i.unshift(l&&a?{type:a}:null),s=h;break}else{if(h==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof le||e.selection instanceof zt)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Pn(u.doc,d,i.length,i);if(f||(i[0]=a?{type:a}:null,f=Pn(u.doc,d,i.length,i)),!f)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(s).type!=a){let h=u.mapping.map(r.before(s)),p=u.doc.resolve(h);a&&r.node(s-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return n&&n(u.scrollIntoView()),!0}}const SN=xN(),CN=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(ie.create(t.doc,o))),!0)};function TN(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||nr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function zp(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&TN(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,p=R.empty;for(let b=s.length-1;b>=0;b--)p=R.from(s[b].create(null,p));p=R.from(o.copy(p));let m=t.tr.step(new ut(e.pos-1,h,e.pos,h,new Y(p,1,0),s.length,!0)),g=m.doc.resolve(h+2*s.length);g.nodeAfter&&g.nodeAfter.type==o.type&&nr(m.doc,g.pos)&&m.join(g.pos),n(m.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:fe.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&uo(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&go(i,"start",!0)&&go(o,"end")){let h=o,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=i,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let b=R.empty;for(let E=p.length-1;E>=0;E--)b=R.from(p[E].copy(b));let w=t.tr.step(new ut(e.pos-p.length,e.pos+i.nodeSize,e.pos+g,e.pos+i.nodeSize-g,new Y(b,p.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function $p(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(le.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const MN=$p(-1),AN=$p(1);function _N(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&Ic(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Vp(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function Wc(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}Wc(Vc,Ap,Op),Wc(Vc,Dp,Lp),Wc(Rp,Pp,Bp,SN),typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ON(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return IN(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function IN(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);i=new Cs(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Cs(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=Ic(i,n,r,e);return a?(t&&DN(t,e,a,o,n),!0):!1}function DN(t,e,n,r,o){let i=R.empty;for(let u=n.length-1;u>=0;u--)i=R.from(n[u].type.create(n[u].attrs,i));t.step(new ut(e.start-(r?2:0),e.end,e.start,e.end,new Y(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Pn(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function LN(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?RN(e,n,t,i):PN(e,n,i):!0:!1}}function RN(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new ut(i-1,s,i,s,new Y(R.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Cs(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=uo(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return nr(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function PN(t,e,n){let r=t.tr,o=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=o.child(p).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?R.empty:R.from(o))))return!1;let d=i.pos,f=d+s.nodeSize;return r.step(new ut(d-(a?1:0),f+(l?1:0),d+1,f-1,new Y((a?R.empty:R.from(o.copy(R.empty))).append(l?R.empty:R.from(o.copy(R.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function BN(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=R.from(c?t.create():null),d=new Y(R.from(t.create(null,R.from(a.type.create(null,u)))),c?3:1,0),f=i.start,h=i.end;n(e.tr.step(new ut(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}const pt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},bo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Kc=null;const Bn=function(t,e,n){let r=Kc||(Kc=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},zN=function(){Kc=null},zr=function(t,e,n,r){return n&&(Hp(t,e,n,r,-1)||Hp(t,e,n,r,1))},$N=/^(img|br|input|textarea|hr)$/i;function Hp(t,e,n,r,o){for(var i;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Kt(t))){let s=t.parentNode;if(!s||s.nodeType!=1||yi(t)||$N.test(t.nodeName)||t.contentEditable=="false")return!1;e=pt(t)+(o<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=o;else return!1;else t=s,e=o<0?Kt(t):0}else return!1}}function Kt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function VN(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Kt(t)}else if(t.parentNode&&!yi(t))e=pt(t),t=t.parentNode;else return null}}function HN(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!yi(t))e=pt(t)+1,t=t.parentNode;else return null}}function FN(t,e,n){for(let r=e==0,o=e==Kt(t);r||o;){if(t==n)return!0;let i=pt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==Kt(t)}}function yi(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ps=function(t){return t.focusNode&&zr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function $r(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function UN(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function WN(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Kt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Kt(r.startContainer),r.startOffset)}}}const kn=typeof navigator<"u"?navigator:null,Fp=typeof document<"u"?document:null,rr=kn&&kn.userAgent||"",qc=/Edge\/(\d+)/.exec(rr),Up=/MSIE \d/.exec(rr),Gc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rr),Lt=!!(Up||Gc||qc),or=Up?document.documentMode:Gc?+Gc[1]:qc?+qc[1]:0,qt=!Lt&&/gecko\/(\d+)/i.test(rr);qt&&+(/Firefox\/(\d+)/.exec(rr)||[0,0])[1];const jc=!Lt&&/Chrome\/(\d+)/.exec(rr),dt=!!jc,Wp=jc?+jc[1]:0,mt=!Lt&&!!kn&&/Apple Computer/.test(kn.vendor),yo=mt&&(/Mobile\/\w+/.test(rr)||!!kn&&kn.maxTouchPoints>2),Gt=yo||(kn?/Mac/.test(kn.platform):!1),Kp=kn?/Win/.test(kn.platform):!1,zn=/Android \d/.test(rr),wi=!!Fp&&"webkitFontSmoothing"in Fp.documentElement.style,KN=wi?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function qN(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function $n(t,e){return typeof t=="number"?t:t[e]}function GN(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function qp(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=bo(s);continue}let a=s,l=a==i.body,c=l?qN(i):GN(a),u=0,d=0;if(e.top<c.top+$n(r,"top")?d=-(c.top-e.top+$n(o,"top")):e.bottom>c.bottom-$n(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+$n(o,"top")-c.top:e.bottom-c.bottom+$n(o,"bottom")),e.left<c.left+$n(r,"left")?u=-(c.left-e.left+$n(o,"left")):e.right>c.right-$n(r,"right")&&(u=e.right-c.right+$n(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,g=a.scrollTop-p;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let f=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:bo(s)}}function jN(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:Gp(t.dom)}}function Gp(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=bo(r));return e}function YN({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;jp(n,r==0?0:r-e)}function jp(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let wo=null;function XN(t){if(t.setActive)return t.setActive();if(wo)return t.focus(wo);let e=Gp(t);t.focus(wo==null?{get preventScroll(){return wo={preventScroll:!0},!0}}:void 0),wo||(wo=!1,jp(e,0))}function Yp(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Bn(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,o=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(i=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?ZN(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:Yp(n,o)}function ZN(t,e){let n=t.nodeValue.length,r=document.createRange(),o;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ir(r,1);if(s.top!=s.bottom&&Yc(e,s)){o={node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),o||{node:t,offset:0}}function Yc(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function JN(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function QN(t,e,n){let{node:r,offset:o}=Yp(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function ex(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function Xp(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Yc(e,c))return Xp(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function tx(t,e){let n=t.dom.ownerDocument,r,o=0,i=WN(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!Yc(e,c)||(s=Xp(t.dom,e,c),!s))return null}if(mt)for(let c=s;r&&c;c=bo(c))c.draggable&&(r=void 0);if(s=JN(s,e),r){if(qt&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;wi&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=ex(t,r,o,e))}a==null&&(a=QN(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Zp(t){return t.top<t.bottom||t.left<t.right}function ir(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Zp(r))return r}return Array.prototype.find.call(n,Zp)||t.getBoundingClientRect()}const nx=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Jp(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=wi||qt;if(r.nodeType==3)if(s&&(nx.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=ir(Bn(r,o,o),n);if(qt&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=ir(Bn(r,o-1,o-1),-1);if(c.top==l.top){let u=ir(Bn(r,o,o+1),-1);if(u.top!=l.top)return ki(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,ki(ir(Bn(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==Kt(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Xc(l.getBoundingClientRect(),!1)}if(i==null&&o<Kt(r)){let l=r.childNodes[o];if(l.nodeType==1)return Xc(l.getBoundingClientRect(),!0)}return Xc(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==Kt(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Bn(l,Kt(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ki(ir(c,1),!1)}if(i==null&&o<Kt(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Bn(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return ki(ir(c,-1),!0)}return ki(ir(r.nodeType==3?Bn(r):r,-n),n>=0)}function ki(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Xc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Qp(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function rx(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return Qp(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=Jp(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Bn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const ox=/[\u0590-\u08ac]/;function ix(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return a?!ox.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:Qp(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):r.pos==r.start()||r.pos==r.end()}let em=null,tm=null,nm=!1;function sx(t,e,n){return em==e&&tm==n?nm:(em=e,tm=n,nm=n=="up"||n=="down"?rx(t,e,n):ix(t,e,n))}const jt=0,rm=1,Vr=2,En=3;class Ei{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=jt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>pt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof sm){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof om&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?pt(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?pt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=pt(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=pt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],g=p+m.size;if(i>p&&s<g)return m.setSelection(e-p-m.border,n-p-m.border,r,o);p=g}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((qt||mt)&&e==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:pt(g)+1});break}let b=m.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let m=h.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(qt&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(o=!0)}if(!(o||d&&mt)&&zr(a.node,a.offset,u.anchorNode,u.anchorOffset)&&zr(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(d&&qt)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,l=s-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Vr:rm,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=En:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Vr:En}r=s}this.dirty=Vr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Vr:rm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class om extends Ei{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==jt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ax extends Ei{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Hr extends Ei{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=Pr.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Hr(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&En||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=En&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=jt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=jt}}slice(e,n,r){let o=Hr.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Jc(i,n,s,r)),e>0&&(i=Jc(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class sr extends Ei{constructor(e,n,r,o,i,s,a,l,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Pr.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=cm(u,r,n),c?l=new lx(e,n,r,o,u,d||null,f,c,i,s+1):n.isText?new Bs(e,n,r,o,u,f,i):new sr(e,n,r,o,u,d||null,f,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>R.empty)}return e}matchesNode(e,n,r){return this.dirty==jt&&e.eq(this.node)&&zs(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new ux(this,s&&s.node,e);hx(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e,u):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?He.none:this.node.child(u).marks,r,e,u),l.placeWidget(c,e,o)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e,f);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Vr)&&(s&&this.protectLocalComposition(e,s),am(this.contentDOM,this.children,e),yo&&px(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof le)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=mx(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new ax(this,i,n,o);e.input.compositionNodes.push(s),this.children=Jc(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==En||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=jt}updateOuterDeco(e){if(zs(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=lm(this.dom,this.nodeDOM,Zc(this.outerDeco,this.node,n),Zc(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function im(t,e,n,r,o){cm(r,e,t);let i=new sr(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class Bs extends sr{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==En||this.dirty!=jt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=jt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=jt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new Bs(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=En)}get domAtom(){return!1}isText(e){return this.node.text==e}}class sm extends Ei{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==jt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class lx extends sr{constructor(e,n,r,o,i,s,a,l,c,u){super(e,n,r,o,i,s,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==En)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function am(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=um(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof Hr){let l=r?r.previousSibling:t.lastChild;am(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=um(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const vi=function(t){t&&(this.nodeName=t)};vi.prototype=Object.create(null);const Fr=[new vi];function Zc(t,e,n){if(t.length==0)return Fr;let r=n?Fr[0]:new vi,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new vi(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new vi(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function lm(t,e,n,r){if(n==Fr&&r==Fr)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Fr[0]),o=l}cx(o,a||Fr[0],s)}return o}function cx(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function cm(t,e,n){return lm(t,t,Fr,Zc(e,n,t.nodeType!=1))}function zs(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function um(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ux{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dx(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,o){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=jt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1,c=this.top.children.length;o<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let u=this.index;u<c;u++){let d=this.top.children[u];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Hr.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==En&&s.dom==s.contentDOM&&(s.dirty=Vr),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof sr){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=En&&zs(n,l.outerDeco));if(!f&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Vr,d.updateChildren(o,s+1),d.dirty=jt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!zs(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=sr.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=sr.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new om(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Hr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Bs)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((mt||dt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new sm(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dx(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Hr)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function fx(t,e){return t.type.side-e.type.side}function hx(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let g=o[s++];g.widget&&(u?(d||(d=[u])).push(g):u=g)}if(u)if(d){d.sort(fx);for(let g=0;g<d.length;g++)n(d[g],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=i&&a.splice(g--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let p=i+f.nodeSize;if(f.isText){let g=p;s<o.length&&o[s].from<g&&(g=o[s].from);for(let b=0;b<a.length;b++)a[b].to<g&&(g=a[b].to);g<p&&(l=f.cut(g-i),f=f.cut(0,g-i),p=g,h=-1)}else for(;s<o.length&&o[s].to<p;)s++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();r(f,m,e.forChild(i,f),h),i=p}}function px(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function mx(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Jc(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function Qc(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Ps(n)){for(l=s;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&ie.isSelectable(d)&&o.parent&&!(d.isInline&&FN(n.focusNode,n.focusOffset,o.dom))){let f=o.posBefore;c=new ie(s==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,s]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=tu(t,u,a,d)}return c}function dm(t){return t.editable?t.hasFocus():ym(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Vn(t,e=!1){let n=t.state.selection;if(mm(t,n),!!dm(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&dt){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&zr(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bx(t);else{let{anchor:r,head:o}=n,i,s;fm&&!(n instanceof le)&&(n.$from.parent.inlineContent||(i=hm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=hm(t,n.to))),t.docView.setSelection(r,o,t,e),fm&&(i&&pm(i),s&&pm(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gx(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const fm=mt||dt&&Wp<63;function hm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(mt&&o&&o.contentEditable=="false")return eu(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return eu(o);if(i)return eu(i)}}function eu(t){return t.contentEditable="true",mt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function pm(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gx(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!dm(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bx(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,pt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Lt&&or<=11&&(n.disabled=!0,n.disabled=!1)}function mm(t,e){if(e instanceof ie){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(gm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else gm(t)}function gm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function tu(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||le.between(e,n,r)}function bm(t){return t.editable&&!t.hasFocus()?!1:ym(t)}function ym(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function yx(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return zr(e.node,e.offset,n.anchorNode,n.anchorOffset)}function nu(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&fe.findFrom(i,e)}function ar(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function wm(t,e,n){let r=t.state.selection;if(r instanceof le)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return ar(t,new le(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=nu(t.state,e);return o&&o instanceof ie?ar(t,o):!1}else if(!(Gt&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?ie.isSelectable(i)?ar(t,new ie(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):wi?ar(t,new le(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ie&&r.node.isInline)return ar(t,new le(e>0?r.$to:r.$from));{let o=nu(t.state,e);return o?ar(t,o):!1}}}function $s(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ni(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ko(t,e){return e<0?wx(t):kx(t)}function wx(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(qt&&n.nodeType==1&&r<$s(n)&&Ni(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Ni(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(km(n))break;{let a=n.previousSibling;for(;a&&Ni(a,-1);)o=n.parentNode,i=pt(a),a=a.previousSibling;if(a)n=a,r=$s(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?ru(t,n,r):o&&ru(t,o,i)}function kx(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=$s(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Ni(a,1))i=n,s=++r;else break}else{if(km(n))break;{let a=n.nextSibling;for(;a&&Ni(a,1);)i=a.parentNode,s=pt(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=$s(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&ru(t,i,s)}function km(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ex(t,e){for(;t&&e==t.childNodes.length&&!yi(t);)e=pt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function vx(t,e){for(;t&&!e&&!yi(t);)e=pt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ru(t,e,n){if(e.nodeType!=3){let i,s;(s=Ex(e,n))?(e=s,n=0):(i=vx(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ps(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Vn(t)},50)}function Em(t,e){let n=t.state.doc.resolve(e);if(!(dt||Kp)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function vm(t,e,n){let r=t.state.selection;if(r instanceof le&&!r.empty||n.indexOf("s")>-1||Gt&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=nu(t.state,e);if(s&&s instanceof ie)return ar(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof zt?fe.near(s,e):fe.findFrom(s,e);return a?ar(t,a):!1}return!1}function Nm(t,e){if(!(t.state.selection instanceof le))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function xm(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Nx(t){if(!mt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;xm(t,r,"true"),setTimeout(()=>xm(t,r,"false"),20)}return!1}function xx(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Sx(t,e){let n=e.keyCode,r=xx(e);if(n==8||Gt&&n==72&&r=="c")return Nm(t,-1)||ko(t,-1);if(n==46&&!e.shiftKey||Gt&&n==68&&r=="c")return Nm(t,1)||ko(t,1);if(n==13||n==27)return!0;if(n==37||Gt&&n==66&&r=="c"){let o=n==37?Em(t,t.state.selection.from)=="ltr"?-1:1:-1;return wm(t,o,r)||ko(t,o)}else if(n==39||Gt&&n==70&&r=="c"){let o=n==39?Em(t,t.state.selection.from)=="ltr"?1:-1:1;return wm(t,o,r)||ko(t,o)}else{if(n==38||Gt&&n==80&&r=="c")return vm(t,-1,r)||ko(t,-1);if(n==40||Gt&&n==78&&r=="c")return Nx(t)||vm(t,1,r)||ko(t,1);if(r==(Gt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function ou(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||Pr.fromSchema(t.state.schema),a=Im(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=_m[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Sm(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return a=new Y(R.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",f=>f(e,o,r,t));if(d)a=d;else{let f=o.marks(),{schema:h}=t.state,p=Pr.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=Ax(n),wi&&_x(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Qn.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Cx.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Ox(Am(a,+u[1],+u[2]),u[4]);else if(a=Y.maxOpen(Tx(a.content,o),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Am(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const Cx=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Tx(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&Tm(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Mm(s[s.length-1],i.length));let u=Cm(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return R.from(s)}return t}function Cm(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,R.from(t));return t}function Tm(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=Tm(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(R.from(Cm(n,t,o+1))))}}function Mm(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Mm(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(R.empty,!0);return t.copy(n.append(r))}function iu(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=iu(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(R.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Am(t,e,n){return e<t.openStart&&(t=new Y(iu(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Y(iu(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const _m={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Om=null;function Im(){return Om||(Om=document.implementation.createHTMLDocument("title"))}let su=null;function Mx(t){let e=window.trustedTypes;return e?(su||(su=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),su.createHTML(t)):t}function Ax(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Im().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&_m[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=Mx(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function _x(t){let e=t.querySelectorAll(dt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Ox(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=R.from(l.create(r[a+1],o)),i++,s++}return new Y(o,i,s)}const _t={},Ot={},Ix={touchstart:!0,touchmove:!0};class Dx{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Lx(t){for(let e in _t){let n=_t[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Px(t,r)&&!lu(t,r)&&(t.editable||!(r.type in Ot))&&n(t,r)},Ix[e]?{passive:!0}:void 0)}mt&&t.dom.addEventListener("input",()=>null),au(t)}function lr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Rx(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function au(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>lu(t,r))})}function lu(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Px(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Bx(t,e){!lu(t,e)&&_t[e.type]&&(t.editable||!(e.type in Ot))&&_t[e.type](t,e)}Ot.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Lm(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(zn&&dt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),yo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,$r(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Sx(t,n)?n.preventDefault():lr(t,"key")},Ot.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)},Ot.keypress=(t,e)=>{let n=e;if(Lm(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Gt&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof le)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o,i))&&t.dispatch(i()),n.preventDefault()}};function Vs(t){return{left:t.clientX,top:t.clientY}}function zx(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function cu(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Eo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function $x(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ie.isSelectable(r)?(Eo(t,new ie(n)),!0):!1}function Vx(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof ie&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(ie.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Eo(t,ie.create(t.state.doc,o)),!0):!1}function Hx(t,e,n,r,o){return cu(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?Vx(t,n):$x(t,n))}function Fx(t,e,n,r){return cu(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function Ux(t,e,n,r){return cu(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||Wx(t,n,r)}function Wx(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Eo(t,le.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Eo(t,le.create(r,a+1,a+1+s.content.size));else if(ie.isSelectable(s))Eo(t,ie.create(r,a));else continue;return!0}}function uu(t){return Hs(t)}const Dm=Gt?"metaKey":"ctrlKey";_t.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=uu(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&zx(n,t.input.lastClick)&&!n[Dm]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=t.posAtCoords(Vs(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Kx(t,s,n,!!r)):(i=="doubleClick"?Fx:Ux)(t,s.pos,s.inside,n)?n.preventDefault():lr(t,"pointer"))};class Kx{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Dm],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof ie&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&qt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),lr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Vn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Vs(e))),this.updateAllowDefault(e),this.allowDefault||!n?lr(this.view,"pointer"):Hx(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||mt&&this.mightDrag&&!this.mightDrag.node.isAtom||dt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Eo(this.view,fe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):lr(this.view,"pointer")}move(e){this.updateAllowDefault(e),lr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}_t.touchstart=t=>{t.input.lastTouch=Date.now(),uu(t),lr(t,"pointer")},_t.touchmove=t=>{t.input.lastTouch=Date.now(),lr(t,"pointer")},_t.contextmenu=t=>uu(t);function Lm(t,e){return t.composing?!0:mt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const qx=zn?5e3:-1;Ot.compositionstart=Ot.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof le&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||dt&&Kp&&Gx(t)))t.markCursor=t.state.storedMarks||n.marks(),Hs(t,!0),t.markCursor=null;else if(Hs(t,!e.selection.empty),qt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}Rm(t,qx)};function Gx(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Ot.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Rm(t,20))};function Rm(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Hs(t),e))}function Pm(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Yx());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function jx(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=VN(e.focusNode,e.focusOffset),r=HN(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function Yx(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Hs(t,e=!1){if(!(zn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Pm(t),e||t.docView&&t.docView.dirty){let n=Qc(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Xx(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const xi=Lt&&or<15||yo&&KN<604;_t.copy=Ot.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=xi?null:n.clipboardData,s=r.content(),{dom:a,text:l}=ou(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):Xx(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Zx(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Jx(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Si(t,r.value,null,o,e):Si(t,r.textContent,r.innerHTML,o,e)},50)}function Si(t,e,n,r,o){let i=Sm(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,i||Y.empty)))return!0;if(!i)return!1;let s=Zx(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Bm(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ot.paste=(t,e)=>{let n=e;if(t.composing&&!zn)return;let r=xi?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Si(t,Bm(r),r.getData("text/html"),o,n)?n.preventDefault():Jx(t,n)};class zm{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Qx=Gt?"altKey":"ctrlKey";function $m(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Qx]}_t.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(Vs(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof ie?o.to-1:o.to))){if(r&&r.mightDrag)s=ie.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=ie.create(t.state.doc,d.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=ou(t,a);(!n.dataTransfer.files.length||!dt||Wp>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(xi?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",xi||n.dataTransfer.setData("text/plain",c),t.dragging=new zm(u,$m(t,n),s)},_t.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)},Ot.dragover=Ot.dragenter=(t,e)=>e.preventDefault(),Ot.drop=(t,e)=>{try{e1(t,e,t.dragging)}finally{t.dragging=null}};function e1(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Vs(e));if(!r)return;let o=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",h=>{i=h(i,t,!1)}):i=Sm(t,Bm(e.dataTransfer),xi?null:e.dataTransfer.getData("text/html"),!1,o);let s=!!(n&&$m(t,e));if(t.someProp("handleDrop",h=>h(t,e,i||Y.empty,s))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?pp(t.state.doc,o.pos,i):o.pos;a==null&&(a=o.pos);let l=t.state.tr;if(s){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(d))return;let f=l.doc.resolve(c);if(u&&ie.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new ie(f));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,m,g,b)=>h=b),l.setSelection(tu(t,f,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}_t.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Vn(t)},20))},_t.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},_t.beforeinput=(t,e)=>{if(dt&&zn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,$r(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Ot)_t[t]=Ot[t];function Ci(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Fs{constructor(e,n){this.toDOM=e,this.spec=n||Ur,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new Fe(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Fs&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ci(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class cr{constructor(e,n){this.attrs=e,this.spec=n||Ur}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Fe(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof cr&&Ci(this.attrs,e.attrs)&&Ci(this.spec,e.spec)}static is(e){return e.type instanceof cr}destroy(){}}class du{constructor(e,n){this.attrs=e,this.spec=n||Ur}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Fe(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof du&&Ci(this.attrs,e.attrs)&&Ci(this.spec,e.spec)}destroy(){}}class Fe{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Fe(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Fe(e,e,new Fs(n,r))}static inline(e,n,r,o){return new Fe(e,n,new cr(r,o))}static node(e,n,r,o){return new Fe(e,n,new du(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof cr}get widget(){return this.type instanceof Fs}}const vo=[],Ur={};class ve{constructor(e,n){this.local=e.length?e:vo,this.children=n.length?n:vo}static create(e,n){return n.length?Us(n,e,0,Ur):vt}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==vt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ur)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?t1(this.children,s||[],e,n,r,o,i):s?new ve(s.sort(Wr),vo):vt}add(e,n){return n.length?this==vt?ve.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=Hm(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,Us(u,a,c+1,Ur)),i+=3}});let s=Vm(i?Fm(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new ve(s.length?this.local.concat(s).sort(Wr):this.local,o||this.children)}remove(e){return e.length==0||this==vt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=vt?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ve(o,r):vt}forChild(e,n){if(this==vt)return this;if(n.isLeaf)return ve.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof cr){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new ve(o.sort(Wr),vo);return r?new ur([a,r]):a}return r||vt}eq(e){if(this==e)return!0;if(!(e instanceof ve)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return fu(this.localsInner(e))}localsInner(e){if(this==vt)return vo;if(e.inlineContent||!this.local.some(cr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof cr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ve.empty=new ve([],[]),ve.removeOverlap=fu;const vt=ve.empty;class ur{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Ur));return ur.from(r)}forChild(e,n){if(n.isLeaf)return ve.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=vt&&(i instanceof ur?r=r.concat(i.members):r.push(i))}return ur.from(r)}eq(e){if(!(e instanceof ur)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?fu(r?n:n.sort(Wr)):vo}static from(e){switch(e.length){case 0:return vt;case 1:return e[0];default:return new ur(e.every(n=>n instanceof ve)?e:e.reduce((n,r)=>n.concat(r instanceof ve?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function t1(t,e,n,r,o,i,s){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let b=0;b<a.length;b+=3){let w=a[b+1];if(w<0||f>w+u-d)continue;let E=a[b]+u-d;h>=E?a[b+1]=f<=E?-2:-1:f>=u&&g&&(a[b]+=g,a[b+1]+=g)}d+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),h=f-o,{index:p,offset:m}=r.content.findIndex(d),g=r.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let b=a[c+2].mapInner(n,g,u+1,t[c]+i+1,s);b!=vt?(a[c]=d,a[c+1]=h,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=n1(a,t,e,n,o,i,s),u=Us(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ve(e.sort(Wr),a)}function Vm(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Fe(o.from+e,o.to+e,o.type))}return n}function n1(t,e,n,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function Hm(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Fm(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Us(t,e,n,r){let o=[],i=!1;e.forEach((a,l)=>{let c=Hm(t,a,l+n);if(c){i=!0;let u=Us(c,a,n+l+1,r);u!=vt&&o.push(l,l+a.nodeSize,u)}});let s=Vm(i?Fm(t):t,-n).sort(Wr);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ve(s,o):vt}function Wr(t,e){return t.from-e.from||t.to-e.to}function fu(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Um(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Um(e,o,r.copy(i.from,r.to)));break}}}return e}function Um(t,e,n){for(;e<t.length&&Wr(n,t[e])>0;)e++;t.splice(e,0,n)}function hu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=vt&&e.push(r)}),t.cursorWrapper&&e.push(ve.create(t.state.doc,[t.cursorWrapper.deco])),ur.from(e)}const r1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},o1=Lt&&or<=11;class i1{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s1{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new i1,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Lt&&or<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():mt&&e.composing&&r.some(o=>o.type=="childList"&&o.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),o1&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,r1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(bm(this.view)){if(this.suppressingSelectionUpdates)return Vn(this.view);if(Lt&&or<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&zr(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=bo(i))n.add(i);for(let i=e.anchorNode;i;i=bo(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&bm(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(qt&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||c1(e,d)!=h)&&f.remove()}}}else if((dt||mt)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ps(r)&&(c=Qc(e))&&c.eq(fe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Vn(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),a1(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,u1(e,l)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Vn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(Lt&&or<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let s=o&&o.parentNode==e.target?pt(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?pt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Wm=new WeakMap,Km=!1;function a1(t){if(!Wm.has(t)&&(Wm.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=qt,Km)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Km=!0}}function qm(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return zr(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function l1(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return qm(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?qm(t,n):null}function c1(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function u1(t,e){var n;let{focusNode:r,focusOffset:o}=t.domSelectionRange();for(let i of e)if(((n=i.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let s=i.nextSibling;for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.nextSibling;if(s){let a=s;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(i,a.firstChild),r==i&&t.domSelection().collapse(i,o)}else i.parentNode.removeChild(i)}}function d1(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Ps(l)||c.push({node:l.focusNode,offset:l.focusOffset})),dt&&t.input.lastKeyCode===8)for(let g=i;g>o;g--){let b=r.childNodes[g-1],w=b.pmViewDesc;if(b.nodeName=="BR"&&!w){i=g;break}if(!w||w.size)break}let d=t.state.doc,f=t.someProp("domParser")||Qn.fromSchema(t.state.schema),h=d.resolve(s),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:f1,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=g),p={anchor:g+s,head:b+s}}return{doc:m,sel:p,from:s,to:a}}function f1(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(mt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||mt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const h1=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function p1(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,M=Qc(t,C);if(M&&!t.state.selection.eq(M)){if(dt&&zn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",D=>D(t,$r(13,"Enter"))))return;let A=t.state.tr.setSelection(M);C=="pointer"?A.setMeta("pointer",!0):C=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),t.dispatch(A)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=d1(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=b1(d.content,c.doc.content,c.from,f,h);if(p&&t.input.domChangeCount++,(yo&&t.input.lastIOSEnter>Date.now()-225||zn)&&o.some(C=>C.nodeType==1&&!h1.test(C.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",C=>C(t,$r(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof le&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let C=Gm(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let M=t.state.tr.setSelection(C);i&&M.setMeta("composition",i),t.dispatch(M)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof le&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Lt&&or<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),b=u.resolve(p.start),w=m.sameParent(g)&&m.parent.inlineContent&&b.end()>=p.endA;if((yo&&t.input.lastIOSEnter>Date.now()-225&&(!w||o.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(c.doc.textBetween(m.pos,g.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,$r(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&g1(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",C=>C(t,$r(8,"Backspace")))){zn&&dt&&t.domObserver.suppressSelectionUpdates();return}dt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),zn&&!w&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,$r(13,"Enter"))})},20));let E=p.start,v=p.endA,k=C=>{let M=C||t.state.tr.replace(E,v,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let A=Gm(t,M.doc,c.sel);A&&!(dt&&t.composing&&A.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==E||A.head==M.mapping.map(v)-1)||Lt&&A.empty&&A.head==E)&&M.setSelection(A)}return i&&M.setMeta("composition",i),M.scrollIntoView()},S;if(w)if(m.pos==g.pos){Lt&&or<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Vn(t),20));let C=k(t.state.tr.delete(E,v)),M=u.resolve(p.start).marksAcross(u.resolve(p.endA));M&&C.ensureMarks(M),t.dispatch(C)}else if(p.endA==p.endB&&(S=m1(m.parent.content.cut(m.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start())))){let C=k(t.state.tr);S.type=="add"?C.addMark(E,v,S.mark):C.removeMark(E,v,S.mark),t.dispatch(C)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,g.parentOffset),M=()=>k(t.state.tr.insertText(C,E,v));t.someProp("handleTextInput",A=>A(t,E,v,C,M))||t.dispatch(M())}else t.dispatch(k());else t.dispatch(k())}function Gm(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:tu(t,e.resolve(n.anchor),e.resolve(n.head))}function m1(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(R.from(c).eq(t))return{mark:a,type:s}}function g1(t,e,n,r,o){if(n-e<=o.pos-r.pos||pu(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(pu(i,!0,!0));return!s.parent.isTextblock||s.pos>n||pu(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function pu(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function b1(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&t.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&jm(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&jm(t.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function jm(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Ym{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Dx,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(eg),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Jm(this),Zm(this),this.nodeViews=Qm(this),this.docView=im(this.state.doc,Xm(this),hu(this),this.dom,this),this.domObserver=new s1(this,(r,o,i,s)=>p1(this,r,o,i,s)),this.domObserver.start(),Lx(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&au(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(eg),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Pm(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Qm(this);w1(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&au(this),this.editable=Jm(this),Zm(this);let l=hu(this),c=Xm(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(o.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&jN(this);if(s){this.domObserver.stop();let h=d&&(Lt||dt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&y1(o.selection,e.selection);if(d){let p=dt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=jx(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=im(e.doc,c,l,this.dom,this)),p&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&yx(this))?Vn(this,h):(mm(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&YN(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ie){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&qp(this,n.getBoundingClientRect(),e)}else qp(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new zm(e.slice,e.move,o<0?void 0:ie.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Lt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&XN(this.dom),Vn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tx(this,e)}coordsAtPos(e,n=1){return Jp(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return sx(this,n||this.state,e)}pasteHTML(e,n){return Si(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Si(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return ou(this,e)}destroy(){this.docView&&(Rx(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],hu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zN())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Bx(this,e)}domSelectionRange(){let e=this.domSelection();return e?mt&&this.root.nodeType===11&&UN(this.dom.ownerDocument)==this.dom&&l1(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ym.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Xm(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Fe.node(0,t.state.doc.content.size,e)]}function Zm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Fe.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Jm(t){return!t.someProp("editable",e=>e(t.state)===!1)}function y1(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Qm(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function w1(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function eg(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var dr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ws={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},k1=typeof navigator<"u"&&/Mac/.test(navigator.platform),E1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),gt=0;gt<10;gt++)dr[48+gt]=dr[96+gt]=String(gt);for(var gt=1;gt<=24;gt++)dr[gt+111]="F"+gt;for(var gt=65;gt<=90;gt++)dr[gt]=String.fromCharCode(gt+32),Ws[gt]=String.fromCharCode(gt);for(var mu in dr)Ws.hasOwnProperty(mu)||(Ws[mu]=dr[mu]);function v1(t){var e=k1&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||E1&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ws:dr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const N1=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),x1=typeof navigator<"u"&&/Win/.test(navigator.platform);function S1(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))N1?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function C1(t){let e=Object.create(null);for(let n in t)e[S1(n)]=t[n];return e}function gu(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function tg(t){return new Se({props:{handleKeyDown:bu(t)}})}function bu(t){let e=C1(t);return function(n,r){let o=v1(r),i,s=e[gu(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[gu(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(x1&&r.ctrlKey&&r.altKey)&&(i=dr[r.keyCode])&&i!=o){let a=e[gu(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var T1=Object.defineProperty,yu=(t,e)=>{for(var n in e)T1(t,n,{get:e[n],enumerable:!0})};function Ks(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}var qs=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([s,a])=>[s,(...c)=>{const u=a(...c)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s=[],a=!!t,l=t||o.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),s.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...p)=>{const m=this.buildProps(l,e),g=f(...p)(m);return s.push(g),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,o=t||n.tr,i=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s={tr:t,editor:r,view:i,state:Ks({state:o,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(s)]))}};return s}},ng={};yu(ng,{blur:()=>M1,clearContent:()=>A1,clearNodes:()=>_1,command:()=>O1,createParagraphNear:()=>I1,cut:()=>D1,deleteCurrentNode:()=>L1,deleteNode:()=>R1,deleteRange:()=>P1,deleteSelection:()=>B1,enter:()=>z1,exitCode:()=>$1,extendMarkRange:()=>V1,first:()=>H1,focus:()=>U1,forEach:()=>W1,insertContent:()=>K1,insertContentAt:()=>j1,joinBackward:()=>Z1,joinDown:()=>X1,joinForward:()=>J1,joinItemBackward:()=>Q1,joinItemForward:()=>eS,joinTextblockBackward:()=>tS,joinTextblockForward:()=>nS,joinUp:()=>Y1,keyboardShortcut:()=>oS,lift:()=>iS,liftEmptyBlock:()=>sS,liftListItem:()=>aS,newlineInCode:()=>lS,resetAttributes:()=>cS,scrollIntoView:()=>uS,selectAll:()=>dS,selectNodeBackward:()=>fS,selectNodeForward:()=>hS,selectParentNode:()=>pS,selectTextblockEnd:()=>mS,selectTextblockStart:()=>gS,setContent:()=>bS,setMark:()=>RS,setMeta:()=>PS,setNode:()=>BS,setNodeSelection:()=>zS,setTextDirection:()=>$S,setTextSelection:()=>VS,sinkListItem:()=>HS,splitBlock:()=>FS,splitListItem:()=>US,toggleList:()=>WS,toggleMark:()=>KS,toggleNode:()=>qS,toggleWrap:()=>GS,undoInputRule:()=>jS,unsetAllMarks:()=>YS,unsetMark:()=>XS,unsetTextDirection:()=>ZS,updateAttributes:()=>JS,wrapIn:()=>QS,wrapInList:()=>eC});var M1=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),A1=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),_1=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=uo(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},O1=t=>e=>t(e),I1=()=>({state:t,dispatch:e})=>Pp(t,e),D1=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new le(r.doc.resolve(Math.max(s-1,0)))),!0},L1=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),l=o.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function rt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var R1=t=>({tr:e,state:n,dispatch:r})=>{const o=rt(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},P1=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},B1=()=>({state:t,dispatch:e})=>Vc(t,e),z1=()=>({commands:t})=>t.keyboardShortcut("Enter"),$1=()=>({state:t,dispatch:e})=>NN(t,e);function wu(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Gs(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:wu(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function rg(t,e,n={}){return t.find(r=>r.type===e&&Gs(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function og(t,e,n={}){return!!rg(t,e,n)}function ku(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!rg([...o.node.marks],e,n)))return;let s=o.index,a=t.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&og([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&og([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Hn(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var V1=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=Hn(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=ku(l,i,e);if(d&&d.from<=c&&d.to>=u){const f=le.create(s,d.from,d.to);n.setSelection(f)}}return!0},H1=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Eu(t){return t instanceof le}function Fn(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function ig(t,e=null){if(!e)return null;const n=fe.atStart(t),r=fe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?le.create(t,Fn(0,o,i),Fn(t.content.size,o,i)):le.create(t,Fn(e,o,i),Fn(e,o,i))}function vu(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ti(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function F1(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var U1=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(Ti()||vu())&&r.dom.focus(),F1()&&!Ti()&&!vu()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(i&&t===null&&!Eu(n.state.selection))return s(),!0;const a=ig(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},W1=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),K1=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),sg=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&sg(r)}return t};function js(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return sg(n)}function Mi(t,e,n){if(t instanceof Jn||t instanceof R)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return R.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Mi("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new jh({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Qn.fromSchema(l).parseSlice(js(t),n.parseOptions):Qn.fromSchema(l).parse(js(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Qn.fromSchema(e);return n.slice?i.parseSlice(js(t),n.parseOptions).content:i.parse(js(t),n.parseOptions)}return Mi("",e,n)}function q1(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof ct||o instanceof ut))return;const i=t.mapping.maps[r];let s=0;i.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(fe.near(t.doc.resolve(s),n))}var G1=t=>!("type"in t),j1=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=g=>{i.emit("contentError",{editor:i,error:g,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Mi(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(g){l(g)}try{a=Mi(e,i.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:i.options.enableContentCheck})}catch(g){return l(g),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,h=!0;if((G1(a)?a:[a]).forEach(g=>{g.check(),f=f?g.isText&&g.marks.length===0:!1,h=h?g.isBlock:!1}),u===d&&h){const{parent:g}=r.doc.resolve(u);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(u-=1,d+=1)}let m;if(f){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof R){let g="";e.forEach(b=>{b.text&&(g+=b.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,u,d)}else{m=a;const g=r.doc.resolve(u),b=g.node(),w=g.parentOffset===0,E=b.isText||b.isTextblock,v=b.content.size>0;w&&E&&v&&(u=Math.max(0,u-1)),r.replaceWith(u,d,m)}n.updateSelection&&q1(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:m})}return!0},Y1=()=>({state:t,dispatch:e})=>kN(t,e),X1=()=>({state:t,dispatch:e})=>EN(t,e),Z1=()=>({state:t,dispatch:e})=>Ap(t,e),J1=()=>({state:t,dispatch:e})=>Dp(t,e),Q1=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Is(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},eS=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Is(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},tS=()=>({state:t,dispatch:e})=>yN(t,e),nS=()=>({state:t,dispatch:e})=>wN(t,e);function ag(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function rS(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Ti()||ag()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var oS=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=rS(t).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function fr(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?rt(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),p=Math.min(o,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=o-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>Gs(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}var iS=(t,e={})=>({state:n,dispatch:r})=>{const o=rt(t,n.schema);return fr(n,o,e)?vN(n,r):!1},sS=()=>({state:t,dispatch:e})=>Bp(t,e),aS=t=>({state:e,dispatch:n})=>{const r=rt(t,e.schema);return LN(r)(e,n)},lS=()=>({state:t,dispatch:e})=>Rp(t,e);function Ys(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function lg(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}var cS=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Ys(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=rt(t,r.schema)),a==="mark"&&(s=Hn(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{i&&i===u.type&&(l=!0,o&&n.setNodeMarkup(d,void 0,lg(u.attrs,e))),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&(l=!0,o&&n.addMark(d,d+u.nodeSize,s.create(lg(f.attrs,e))))})})}),l},uS=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),dS=()=>({tr:t,dispatch:e})=>{if(e){const n=new zt(t.doc);t.setSelection(n)}return!0},fS=()=>({state:t,dispatch:e})=>Op(t,e),hS=()=>({state:t,dispatch:e})=>Lp(t,e),pS=()=>({state:t,dispatch:e})=>CN(t,e),mS=()=>({state:t,dispatch:e})=>AN(t,e),gS=()=>({state:t,dispatch:e})=>MN(t,e);function Nu(t,e,n={},r={}){return Mi(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var bS=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{const{doc:l}=i;if(r.preserveWhitespace!=="full"){const c=Nu(t,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return s&&i.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return s&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function cg(t,e){const n=Hn(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function ug(t,e){const n=new Rc(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function yS(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xu(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function wS(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function dg(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Xs(t){return e=>dg(e.$from,t)}function se(t,e,n){return t.config[e]===void 0&&t.parent?se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?se(t.parent,e,n):null}):t.config[e]}function Su(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=se(e,"addExtensions",n);return r?[e,...Su(r())]:e}).flat(10)}function Cu(t,e){const n=Pr.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function fg(t){return typeof t=="function"}function Pe(t,e=void 0,...n){return fg(t)?e?t.bind(e)(...n):t(...n):t}function kS(t={}){return Object.keys(t).length===0&&t.constructor===Object}function No(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function hg(t){const e=[],{nodeExtensions:n,markExtensions:r}=No(t),o=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=se(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...i,...h}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=se(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...i,...d};typeof f?.default=="function"&&(f.default=f.default()),f?.isRequired&&f?.default===void 0&&delete f.default,e.push({type:s.name,name:u,attribute:f})})}),e}function Ie(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=i}),r},{})}function xo(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ie(n,r),{})}function ES(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function pg(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):ES(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function mg(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&kS(n)?!1:n!=null))}function gg(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function vS(t,e){var n;const r=hg(t),{nodeExtensions:o,markExtensions:i}=No(t),s=(n=o.find(c=>se(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((b,w)=>{const E=se(w,"extendNodeSchema",d);return{...b,...E?E(c):{}}},{}),h=mg({...f,content:Pe(se(c,"content",d)),marks:Pe(se(c,"marks",d)),group:Pe(se(c,"group",d)),inline:Pe(se(c,"inline",d)),atom:Pe(se(c,"atom",d)),selectable:Pe(se(c,"selectable",d)),draggable:Pe(se(c,"draggable",d)),code:Pe(se(c,"code",d)),whitespace:Pe(se(c,"whitespace",d)),linebreakReplacement:Pe(se(c,"linebreakReplacement",d)),defining:Pe(se(c,"defining",d)),isolating:Pe(se(c,"isolating",d)),attrs:Object.fromEntries(u.map(gg))}),p=Pe(se(c,"parseHTML",d));p&&(h.parseDOM=p.map(b=>pg(b,u)));const m=se(c,"renderHTML",d);m&&(h.toDOM=b=>m({node:b,HTMLAttributes:xo(b,u)}));const g=se(c,"renderText",d);return g&&(h.toText=g),[c.name,h]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((g,b)=>{const w=se(b,"extendMarkSchema",d);return{...g,...w?w(c):{}}},{}),h=mg({...f,inclusive:Pe(se(c,"inclusive",d)),excludes:Pe(se(c,"excludes",d)),group:Pe(se(c,"group",d)),spanning:Pe(se(c,"spanning",d)),code:Pe(se(c,"code",d)),attrs:Object.fromEntries(u.map(gg))}),p=Pe(se(c,"parseHTML",d));p&&(h.parseDOM=p.map(g=>pg(g,u)));const m=se(c,"renderHTML",d);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:xo(g,u)})),[c.name,h]}));return new jh({topNode:s,nodes:a,marks:l})}function NS(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Zs(t){return t.sort((n,r)=>{const o=se(n,"priority")||100,i=se(r,"priority")||100;return o>i?-1:o<i?1:0})}function bg(t){const e=Zs(Su(t)),n=NS(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function yg(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=i);const h=s?.[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l?.text)==null?void 0:f.slice(Math.max(r,c)-c,o-c))}),a}function wg(t,e){const n={from:0,to:t.content.size};return yg(t,n,e)}function Tu(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function xS(t,e){const n=rt(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function kg(t,e){const n=Ys(typeof e=="string"?e:e.name,t.schema);return n==="node"?xS(t,e):n==="mark"?cg(t,e):{}}function SS(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function CS(t){const e=SS(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function Eg(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),CS(r)}function Mu(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=ku(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}var TS=(t,e,n,r=20)=>{const o=t.doc.resolve(n);let i=r,s=null;for(;i>0&&s===null;){const a=o.node(i);a?.type.name===e?s=a:i-=1}return[s,i]};function Js(t,e){return e.nodes[t]||e.marks[t]||null}function Qs(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}var MS=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)==null?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function Au(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?Hn(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>Gs(d.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;t.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const b=Math.max(h,g),w=Math.min(p,g+m.nodeSize),E=w-b;s+=E,a.push(...m.marks.map(v=>({mark:v,from:b,to:w})))})}),s===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>Gs(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function AS(t,e,n={}){if(!e)return fr(t,null,n)||Au(t,null,n);const r=Ys(e,t.schema);return r==="node"?fr(t,e,n):r==="mark"?Au(t,e,n):!1}var _S=(t,e)=>{const{$from:n,$to:r,$anchor:o}=t.selection;if(e){const i=Xs(a=>a.type.name===e)(t.selection);if(!i)return!1;const s=t.doc.resolve(i.pos+1);return o.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},OS=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function vg(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Ng(t,e){const{nodeExtensions:n}=No(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Pe(se(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function ea(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(ea(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function xg(t){return t instanceof ie}var Sg=class pv{constructor(e){this.position=e}static fromJSON(e){return new pv(e.position)}toJSON(){return{position:this.position}}};function IS(t,e){const n=e.mapping.mapResult(t.position);return{position:new Sg(n.pos),mapResult:n}}function DS(t){return new Sg(t)}function Cg(t,e,n){const o=t.state.doc.content.size,i=Fn(e,0,o),s=Fn(n,0,o),a=t.coordsAtPos(i),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),h=f-d,p=u-c,b={top:c,bottom:u,left:d,right:f,width:h,height:p,x:d,y:c};return{...b,toJSON:()=>b}}function LS(t,e,n){var r;const{selection:o}=e;let i=null;if(Eu(o)&&(i=o.$cursor),i){const a=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}var RS=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Hn(t,r.schema);if(o)if(s){const c=cg(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(b=>b.type===l)?f.marks.forEach(b=>{l===b.type&&n.addMark(p,m,l.create({...b.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return LS(r,n,l)},PS=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),BS=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=rt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>Vp(i,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Vp(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},zS=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Fn(t,0,r.content.size),i=ie.create(r,o);e.setSelection(i)}return!0},$S=(t,e)=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=r;let s,a;return typeof e=="number"?(s=e,a=e):e&&"from"in e&&"to"in e?(s=e.from,a=e.to):(s=i.from,a=i.to),o&&n.doc.nodesBetween(s,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},VS=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=le.atStart(r).from,a=le.atEnd(r).to,l=Fn(o,s,a),c=Fn(i,s,a),u=le.create(r,l,c);e.setSelection(u)}return!0},HS=t=>({state:e,dispatch:n})=>{const r=rt(t,e.schema);return BN(r)(e,n)};function Tg(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e?.includes(o.type.name));t.tr.ensureMarks(r)}}var FS=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,c=o.extensionManager.attributes,u=Qs(c,a.node().type.name,a.node().attrs);if(i instanceof ie&&i.node.isBlock)return!a.parentOffset||!Pn(s,a.pos)?!1:(r&&(t&&Tg(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:yS(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=Pn(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Pn(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(p&&(i instanceof le&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&Tg(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},US=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=rt(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let b=R.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-w;M>=l.depth-3;M-=1)b=R.from(l.node(M).copy(b));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v={...Qs(f,l.node().type.name,l.node().attrs),...e},k=((s=a.contentMatch.defaultType)==null?void 0:s.createAndFill(v))||void 0;b=b.append(R.from(a.createAndFill(null,k)||void 0));const S=l.before(l.depth-(w-1));n.replace(S,l.after(-E),new Y(b,4-w,0));let C=-1;n.doc.nodesBetween(S,n.doc.content.size,(M,A)=>{if(C>-1)return!1;M.isTextblock&&M.content.size===0&&(C=A+1)}),C>-1&&n.setSelection(le.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...Qs(f,d.type.name,d.attrs),...e},m={...Qs(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const g=h?[{type:a,attrs:p},{type:h,attrs:m}]:[{type:a,attrs:p}];if(!Pn(n.doc,l.pos,2))return!1;if(o){const{selection:b,storedMarks:w}=r,{splittableMarks:E}=i.extensionManager,v=w||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,g).scrollIntoView(),!v||!o)return!0;const k=v.filter(S=>E.includes(S.type.name));n.ensureMarks(k)}return!0},_u=(t,e)=>{const n=Xs(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&nr(t.doc,n.pos)&&t.join(n.pos),!0},Ou=(t,e)=>{const n=Xs(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&nr(t.doc,r)&&t.join(r),!0},WS=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=o.extensionManager,h=rt(t,s.schema),p=rt(e,s.schema),{selection:m,storedMarks:g}=s,{$from:b,$to:w}=m,E=b.blockRange(w),v=g||m.$to.parentOffset&&m.$from.marks();if(!E)return!1;const k=Xs(S=>Ng(S.type.name,d))(m);if(E.depth>=1&&k&&E.depth-k.depth<=1){if(k.node.type===h)return c.liftListItem(p);if(Ng(k.node.type.name,d)&&h.validContent(k.node.content)&&a)return l().command(()=>(i.setNodeMarkup(k.pos,h),!0)).command(()=>_u(i,h)).command(()=>Ou(i,h)).run()}return!n||!v||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>_u(i,h)).command(()=>Ou(i,h)).run():l().command(()=>{const S=u().wrapInList(h,r),C=v.filter(M=>f.includes(M.type.name));return i.ensureMarks(C),S?!0:c.clearNodes()}).wrapInList(h,r).command(()=>_u(i,h)).command(()=>Ou(i,h)).run()},KS=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Hn(t,r.schema);return Au(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},qS=(t,e,n={})=>({state:r,commands:o})=>{const i=rt(t,r.schema),s=rt(e,r.schema),a=fr(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},GS=(t,e={})=>({state:n,commands:r})=>{const o=rt(t,n.schema);return fr(n,o,e)?r.lift(o):r.wrapIn(o,e)},jS=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},YS=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},XS=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Hn(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&s){let{from:f,to:h}=a;const p=(i=c.marks().find(g=>g.type===l))==null?void 0:i.attrs,m=ku(c,l,p);m&&(f=m.from,h=m.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},ZS=t=>({tr:e,state:n,dispatch:r})=>{const{selection:o}=n;let i,s;return typeof t=="number"?(i=t,s=t):t&&"from"in t&&"to"in t?(i=t.from,s=t.to):(i=o.from,s=o.to),r&&e.doc.nodesBetween(i,s,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},JS=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Ys(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=rt(t,r.schema)),a==="mark"&&(s=Hn(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(u,d,(g,b)=>{i&&i===g.type&&(l=!0,p=Math.max(b,u),m=Math.min(b+g.nodeSize,d),f=b,h=g)}):r.doc.nodesBetween(u,d,(g,b)=>{b<u&&i&&i===g.type&&(l=!0,p=Math.max(b,u),m=Math.min(b+g.nodeSize,d),f=b,h=g),b>=u&&b<=d&&(i&&i===g.type&&(l=!0,o&&n.setNodeMarkup(b,void 0,{...g.attrs,...e})),s&&g.marks.length&&g.marks.forEach(w=>{if(s===w.type&&(l=!0,o)){const E=Math.max(b,u),v=Math.min(b+g.nodeSize,d);n.addMark(E,v,s.create({...w.attrs,...e}))}}))}),h&&(f!==void 0&&o&&n.setNodeMarkup(f,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(g=>{s===g.type&&o&&n.addMark(p,m,s.create({...g.attrs,...e}))}))}),l},QS=(t,e={})=>({state:n,dispatch:r})=>{const o=rt(t,n.schema);return _N(o,e)(n,r)},eC=(t,e={})=>({state:n,dispatch:r})=>{const o=rt(t,n.schema);return ON(o,e)(n,r)},tC=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Yt=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},nC=(t,e)=>{if(wu(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ta(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=MS(c)+i;return s.forEach(f=>{if(u)return;const h=nC(d,f.find);if(!h)return;const p=l.state.tr,m=Ks({state:l.state,transaction:p}),g={from:r-(h[0].length-i.length),to:o},{commands:b,chain:w,can:E}=new qs({editor:n,state:m});f.handler({state:m,range:g,match:h,commands:b,chain:w,can:E})===null||!p.steps.length||(f.undoable&&p.setMeta(a,{transform:p,from:r,to:o,text:i}),l.dispatch(p),u=!0)}),u}function rC(t){const{editor:e,rules:n}=t,r=new Se({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Cu(R.from(u),s.schema);const{from:d}=l,f=d+u.length;ta({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return ta({editor:e,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&ta({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?ta({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function oC(t){return Object.prototype.toString.call(t).slice(8,-1)}function na(t){return oC(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Mg(t,e){const n={...t};return na(t)&&na(e)&&Object.keys(e).forEach(r=>{na(e[r])&&na(t[r])?n[r]=Mg(t[r],e[r]):n[r]=e[r]}),n}var Iu=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Pe(se(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Pe(se(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Mg(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},on=class mv extends Iu{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new mv(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>c?.type.name===n.name))return!1;const l=s.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function iC(t){return typeof t=="number"}var sC=class{constructor(t){this.find=t.find,this.handler=t.handler}},aC=(t,e,n)=>{if(wu(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function lC(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new qs({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(h,p)=>{var m,g,b,w,E;if((g=(m=h.type)==null?void 0:m.spec)!=null&&g.code||!(h.isText||h.isTextblock||h.isInline))return;const v=(E=(w=(b=h.content)==null?void 0:b.size)!=null?w:h.nodeSize)!=null?E:0,k=Math.max(r,p),S=Math.min(o,p+v);if(k>=S)return;const C=h.isText?h.text||"":h.textBetween(k-p,S-p,void 0,"");aC(C,i.find,s).forEach(A=>{if(A.index===void 0)return;const D=k+A.index+1,G=D+A[0].length,q={from:n.tr.mapping.map(D),to:n.tr.mapping.map(G)},X=i.handler({state:n,range:q,match:A,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(X)})}),d.every(h=>h!==null)}var ra=null,cC=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function uC(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:h,pasteEvt:p})=>{const m=u.tr,g=Ks({state:u,transaction:m});if(!(!lC({editor:e,state:g,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(u=>new Se({view(d){const f=p=>{var m;r=(m=d.dom.parentElement)!=null&&m.contains(p.target)?d.dom.parentElement:null,r&&(ra=e)},h=()=>{ra&&(ra=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,a=f,!i){const h=ra;h?.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,f)=>{var h;const p=(h=f.clipboardData)==null?void 0:h.getData("text/html");return s=f,o=!!p?.includes("data-pm-slice"),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!o,g=p.getMeta("uiEvent")==="drop"&&!i,b=p.getMeta("applyPasteRules"),w=!!b;if(!m&&!g&&!w)return;if(w){let{text:k}=b;typeof k=="string"?k=k:k=Cu(R.from(k),h.schema);const{from:S}=b,C=S+k.length,M=cC(k);return l({rule:u,state:h,from:S,to:{b:C},pasteEvt:M})}const E=f.doc.content.findDiffStart(h.doc.content),v=f.doc.content.findDiffEnd(h.doc.content);if(!(!iC(E)||!v||E===v.b))return l({rule:u,state:h,from:E,to:v,pasteEvt:s})}}))}var oa=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=bg(t),this.schema=vS(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Js(e.name,this.schema)},r=se(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Zs([...this.extensions].reverse()).flatMap(r=>{const o={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Js(r.name,this.schema)},i=[],s=se(r,"addKeyboardShortcuts",o);let a={};if(r.type==="mark"&&se(r,"exitable",o)&&(a.ArrowRight=()=>on.handleExit({editor:t,mark:r})),s){const f=Object.fromEntries(Object.entries(s()).map(([h,p])=>[h,()=>p({editor:t})]));a={...a,...f}}const l=tg(a);i.push(l);const c=se(r,"addInputRules",o);if(vg(r,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const h=rC({editor:t,rules:f}),p=Array.isArray(h)?h:[h];i.push(...p)}}const u=se(r,"addPasteRules",o);if(vg(r,t.options.enablePasteRules)&&u){const f=u();if(f&&f.length){const h=uC({editor:t,rules:f});i.push(...h)}}const d=se(r,"addProseMirrorPlugins",o);if(d){const f=d();i.push(...f)}return i})}get attributes(){return hg(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=No(this.extensions);return Object.fromEntries(e.filter(n=>!!se(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:rt(n.name,this.schema)},i=se(n,"addNodeView",o);if(!i)return[];const s=i();if(!s)return[];const a=(l,c,u,d,f)=>{const h=xo(l,r);return s({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Zs([...this.extensions].reverse()).reduceRight((r,o)=>{const i={name:o.name,options:o.options,storage:this.editor.extensionStorage[o.name],editor:e,type:Js(o.name,this.schema)},s=se(o,"dispatchTransaction",i);return s?a=>{s.call(i,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=No(this.extensions);return Object.fromEntries(e.filter(n=>!!se(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Hn(n.name,this.schema)},i=se(n,"addMarkView",o);if(!i)return[];const s=(a,l,c)=>{const u=xo(a,r);return i()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{SC(a,t,d)}})};return[n.name,s]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Js(e.name,this.schema)};e.type==="mark"&&((n=Pe(se(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const o=se(e,"onBeforeCreate",r),i=se(e,"onCreate",r),s=se(e,"onUpdate",r),a=se(e,"onSelectionUpdate",r),l=se(e,"onTransaction",r),c=se(e,"onFocus",r),u=se(e,"onBlur",r),d=se(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};oa.resolve=bg,oa.sort=Zs,oa.flatten=Su;var dC={};yu(dC,{ClipboardTextSerializer:()=>Ag,Commands:()=>_g,Delete:()=>Og,Drop:()=>Ig,Editable:()=>Dg,FocusEvents:()=>Rg,Keymap:()=>Pg,Paste:()=>Bg,Tabindex:()=>zg,TextDirection:()=>$g,focusEventsPluginKey:()=>Lg});var Ce=class gv extends Iu{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new gv(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Ag=Ce.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Se({key:new _e("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=Tu(n);return yg(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),_g=Ce.create({name:"commands",addCommands(){return{...ng}}}),Og=Ce.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,o;const i=()=>{var s,a,l,c;if((c=(l=(a=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=ug(t.before,[t,...e]);Eg(u).forEach(h=>{u.mapping.mapResult(h.oldRange.from).deletedAfter&&u.mapping.mapResult(h.oldRange.to).deletedBefore&&u.before.nodesBetween(h.oldRange.from,h.oldRange.to,(p,m)=>{const g=m+p.nodeSize-2,b=h.oldRange.from<=m&&g<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:m,to:g,newFrom:u.mapping.map(m),newTo:u.mapping.map(g),deletedRange:h.oldRange,newRange:h.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:u})})});const f=u.mapping;u.steps.forEach((h,p)=>{var m,g;if(h instanceof rn){const b=f.slice(p).map(h.from,-1),w=f.slice(p).map(h.to),E=f.invert().map(b,-1),v=f.invert().map(w),k=(m=u.doc.nodeAt(b-1))==null?void 0:m.marks.some(C=>C.eq(h.mark)),S=(g=u.doc.nodeAt(w))==null?void 0:g.marks.some(C=>C.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:E,to:v},newRange:{from:b,to:w},partial:!!(S||k),editor:this.editor,transaction:t,combinedTransform:u})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(i,0):i()}}),Ig=Ce.create({name:"drop",addProseMirrorPlugins(){return[new Se({key:new _e("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Dg=Ce.create({name:"editable",addProseMirrorPlugins(){return[new Se({key:new _e("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Lg=new _e("focusEvents"),Rg=Ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Se({key:Lg,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Pg=Ce.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,b=m&&p.parent.childCount===1?g===d.pos:fe.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ti()||ag()?i:o},addProseMirrorPlugins(){return[new Se({key:new _e("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),o=t.some(m=>m.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=fe.atStart(e.doc).from,c=fe.atEnd(e.doc).to;if(i||!(s===l&&a===c)||!ea(n.doc))return;const f=n.tr,h=Ks({state:n,transaction:f}),{commands:p}=new qs({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),Bg=Ce.create({name:"paste",addProseMirrorPlugins(){return[new Se({key:new _e("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),zg=Ce.create({name:"tabindex",addProseMirrorPlugins(){return[new Se({key:new _e("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),$g=Ce.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=No(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Se({key:new _e("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),fC=class ks{constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ks(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ks(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ks(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=n.isInline,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!o&&!s&&l.depth<=this.depth)return;const c=new ks(l,this.editor,o,o||s?n:null);o&&(c.actualDepth=this.depth+1),e.push(c)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},hC=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function pC(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}var mC=class extends tC{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:IS,createMappablePosition:DS},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:o,moved:i})=>this.options.onDrop(r,o,i)),this.on("paste",({event:r,slice:o})=>this.options.onPaste(r,o)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=ig(e,this.options.autofocus);this.editorState=mo.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=pC(hC,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=fg(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;n=n.filter(s=>!s.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[Dg,Ag.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),_g,Rg,Pg,zg,Ig,Bg,Og,$g.configure({direction:this.options.textDirection})].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o?.type));this.extensionManager=new oa(r,this)}createCommandManager(){this.commandManager=new qs({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Nu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Nu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),o=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new Ym(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),o=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!o)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=s?.getMeta("focus"),l=s?.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return kg(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return AS(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Cu(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return wg(this.state.doc,{blockSeparator:e,textSerializers:{...Tu(this.schema),...n}})}get isEmpty(){return ea(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new fC(e,this)}get $doc(){return this.$pos(0)}};function Kr(t){return new Yt({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Pe(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(Mu(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const f=n.from+l+s.length;i.addMark(n.from+l,f,t.type.create(o||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function Vg(t){return new Yt({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Pe(t.getAttributes,void 0,r)||{},{tr:i}=e,s=n.from;let a=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,s+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?s:s-1;i.insert(c,t.type.create(o)).delete(i.mapping.map(s),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function Du(t){return new Yt({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=Pe(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)},undoable:t.undoable})}function Xe(t){return new Yt({find:t.find,handler:({state:e,range:n,match:r})=>{let o=t.replace,i=n.from;const s=n.to;if(r[1]){const a=r[0].lastIndexOf(r[1]);o+=r[0].slice(a+r[1].length),i+=a;const l=i-s;l>0&&(o=r[0].slice(a-l,a)+o,i=s)}e.tr.insertText(o,i,s)},undoable:t.undoable})}function So(t){return new Yt({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const i=Pe(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&Ic(l,t.type,i);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));s.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,i).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&nr(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)},undoable:t.undoable})}var gC=t=>"touches"in t,bC=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,o,i,s;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t?.options)!=null&&r.directions&&(this.directions=t.options.directions),(o=t.options)!=null&&o.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(s=t.options)!=null&&s.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var t;return(t=this.contentElement)!=null?t:null}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),o=e.includes("left"),i=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),o&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,gC(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:o}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(r,o,n);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,o=this.startHeight;const i=t.includes("right"),s=t.includes("left"),a=t.includes("bottom"),l=t.includes("top");return i?r=this.startWidth+e:s&&(r=this.startWidth-e),a?o=this.startHeight+n:l&&(o=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(o=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,o,t):{width:r,height:o}}applyConstraints(t,e,n){var r,o,i,s;if(!n){let c=Math.max(this.minSize.width,t),u=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(o=this.maxSize)!=null&&o.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=t,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(s=this.maxSize)!=null&&s.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",o=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:o?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function yC(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ie){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let o=r.depth;for(;o>=0;){const i=r.index(o);if(r.node(o).contentMatchAt(i).matchType(e))return!0;o-=1}return!1}var wC={};yu(wC,{createAtomBlockMarkdownSpec:()=>kC,createBlockMarkdownSpec:()=>EC,createInlineMarkdownSpec:()=>xC,parseAttributes:()=>Lu,parseIndentedBlocks:()=>Pu,renderNestedMarkdownContent:()=>Bu,serializeAttributes:()=>Ru});function Lu(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),o=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(o){const c=o.map(u=>u.trim().slice(1));e.class=c.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,c,u])=>{var d;const f=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[f];h&&(e[c]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function Ru(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function kC(t){const{nodeName:e,name:n,parseAttributes:r=Lu,serializeAttributes:o=Ru,defaultAttributes:i={},requiredAttributes:s=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(f=>{f in u&&(d[f]=u[f])}),d};return{parseMarkdown:(u,d)=>{const f={...i,...u.attributes};return d.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=u.match(f))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(u,d,f){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=u.match(h);if(!p)return;const m=p[1]||"",g=r(m);if(!s.find(w=>!(w in g)))return{type:e,raw:p[0],attributes:g}}},renderMarkdown:u=>{const d=c(u.attrs||{}),f=o(d),h=f?` {${f}}`:"";return`:::${l}${h} :::`}}}function EC(t){const{nodeName:e,name:n,getContent:r,parseAttributes:o=Lu,serializeAttributes:i=Ru,defaultAttributes:s={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const f={};return l.forEach(h=>{h in d&&(f[h]=d[h])}),f};return{parseMarkdown:(d,f)=>{let h;if(r){const m=r(d);h=typeof m=="string"?[{type:"text",text:m}]:m}else a==="block"?h=f.parseChildren(d.tokens||[]):h=f.parseInline(d.tokens||[]);const p={...s,...d.attributes};return f.createNode(e,p,h)},markdownTokenizer:{name:e,level:"block",start(d){var f;const h=new RegExp(`^:::${c}`,"m"),p=(f=d.match(h))==null?void 0:f.index;return p!==void 0?p:-1},tokenize(d,f,h){var p;const m=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),g=d.match(m);if(!g)return;const[b,w=""]=g,E=o(w);let v=1;const k=b.length;let S="";const C=/^:::([\w-]*)(\s.*)?/gm,M=d.slice(k);for(C.lastIndex=0;;){const A=C.exec(M);if(A===null)break;const D=A.index,G=A[1];if(!((p=A[2])!=null&&p.endsWith(":::"))){if(G)v+=1;else if(v-=1,v===0){const q=M.slice(0,D);S=q.trim();const X=d.slice(0,k+D+A[0].length);let H=[];if(S)if(a==="block")for(H=h.blockTokens(q),H.forEach(j=>{j.text&&(!j.tokens||j.tokens.length===0)&&(j.tokens=h.inlineTokens(j.text))});H.length>0;){const j=H[H.length-1];if(j.type==="paragraph"&&(!j.text||j.text.trim()===""))H.pop();else break}else H=h.inlineTokens(S);return{type:e,raw:X,attributes:E,content:S,tokens:H}}}}}},renderMarkdown:(d,f)=>{const h=u(d.attrs||{}),p=i(h),m=p?` {${p}}`:"",g=f.renderChildren(d.content||[],`

`);return`:::${c}${m}

${g}

:::`}}}function vC(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,o,i,s]=r;e[o]=i||s,r=n.exec(t)}return e}function NC(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function xC(t){const{nodeName:e,name:n,getContent:r,parseAttributes:o=vC,serializeAttributes:i=NC,defaultAttributes:s={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=f=>{if(!l)return f;const h={};return l.forEach(p=>{const m=typeof p=="string"?p:p.name,g=typeof p=="string"?void 0:p.skipIfDefault;if(m in f){const b=f[m];if(g!==void 0&&b===g)return;h[m]=b}}),h},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,h)=>{const p={...s,...f.attributes};if(a)return h.createNode(e,p);const m=r?r(f):f.content||"";return m?h.createNode(e,p,[h.createTextNode(m)]):h.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(f){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),p=f.match(h),m=p?.index;return m!==void 0?m:-1},tokenize(f,h,p){const m=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),g=f.match(m);if(!g)return;let b="",w="";if(a){const[,v]=g;w=v}else{const[,v,k]=g;w=v,b=k||""}const E=o(w.trim());return{type:e,raw:g[0],content:b.trim(),attributes:E}}},renderMarkdown:f=>{let h="";r?h=r(f):f.content&&f.content.length>0&&(h=f.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const p=u(f.attrs||{}),m=i(p),g=m?` ${m}`:"";return a?`[${c}${g}]`:`[${c}${g}]${h}[/${c}]`}}}function Pu(t,e,n){var r,o,i,s;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const f=a[u],h=f.match(e.itemPattern);if(!h){if(l.length>0)break;if(f.trim()===""){u+=1,c=`${c}${f}
`;continue}else return}const p=e.extractItemData(h),{indentLevel:m,mainContent:g}=p;c=`${c}${f}
`;const b=[g];for(u+=1;u<a.length;){const k=a[u];if(k.trim()===""){const C=a.slice(u+1).findIndex(D=>D.trim()!=="");if(C===-1)break;if((((o=(r=a[u+1+C].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:o.length)||0)>m){b.push(k),c=`${c}${k}
`,u+=1;continue}else break}if((((s=(i=k.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:s.length)||0)>m)b.push(k),c=`${c}${k}
`,u+=1;else break}let w;const E=b.slice(1);if(E.length>0){const k=E.map(S=>S.slice(m+d)).join(`
`);k.trim()&&(e.customNestedParser?w=e.customNestedParser(k):w=n.blockTokens(k))}const v=e.createToken(p,w);l.push(v)}if(l.length!==0)return{items:l,raw:c}}function Bu(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const o=typeof n=="function"?n(r):n,[i,...s]=t.content,a=e.renderChildren([i]),l=[`${o}${a}`];return s&&s.length>0&&s.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(d)}}),l.join(`
`)}function SC(t,e,n={}){const{state:r}=e,{doc:o,tr:i}=r,s=t;o.descendants((a,l)=>{const c=i.mapping.map(l),u=i.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==s)return!1;d=h}),!d)return;let f=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(f=!0)}),f){const h=t.type.create({...t.attrs,...n});i.removeMark(c,u,t.type),i.addMark(c,u,h)}}),i.docChanged&&e.view.dispatch(i)}var tt=class bv extends Iu{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new bv(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},CC=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,o,i,s,a;const{view:l}=this.editor,c=t.target,u=c.nodeType===3?(e=c.parentElement)==null?void 0:e.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!u)return;let d=0,f=0;if(this.dom!==u){const w=this.dom.getBoundingClientRect(),E=u.getBoundingClientRect(),v=(o=t.offsetX)!=null?o:(r=t.nativeEvent)==null?void 0:r.offsetX,k=(s=t.offsetY)!=null?s:(i=t.nativeEvent)==null?void 0:i.offsetY;d=E.x-w.x+v,f=E.y-w.y+k}const h=this.dom.cloneNode(!0);try{const w=this.dom.getBoundingClientRect();h.style.width=`${Math.round(w.width)}px`,h.style.height=`${Math.round(w.height)}px`,h.style.boxSizing="border-box",h.style.pointerEvents="none"}catch{}let p=null;try{p=document.createElement("div"),p.style.position="absolute",p.style.top="-9999px",p.style.left="-9999px",p.style.pointerEvents="none",p.appendChild(h),document.body.appendChild(p),(a=t.dataTransfer)==null||a.setDragImage(h,d,f)}finally{p&&setTimeout(()=>{try{p?.remove()}catch{}},0)}const m=this.getPos();if(typeof m!="number")return;const g=ie.create(l.state.doc,m),b=l.state.tr.setSelection(g);l.dispatch(b)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const o=t.type.startsWith("drag"),i=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!o)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,u=ie.isSelectable(this.node),d=t.type==="copy",f=t.type==="paste",h=t.type==="cut",p=t.type==="mousedown";if(!c&&u&&o&&t.target===this.dom&&t.preventDefault(),c&&o&&!l&&t.target===this.dom)return t.preventDefault(),!1;if(c&&a&&!l&&p){const m=n.closest("[data-drag-handle]");m&&(this.dom===m||this.dom.contains(m))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||i||d||f||h||p&&u)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(Ti()||vu())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function hr(t){return new sC({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=Pe(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(Mu(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:TC,getOwnPropertySymbols:MC}=Object,{hasOwnProperty:AC}=Object.prototype;function zu(t,e){return function(r,o,i){return t(r,o,i)&&e(r,o,i)}}function ia(t){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,o);const{cache:i}=o,s=i.get(n),a=i.get(r);if(s&&a)return s===r&&a===n;i.set(n,r),i.set(r,n);const l=t(n,r,o);return i.delete(n),i.delete(r),l}}function _C(t){return t?.[Symbol.toStringTag]}function Hg(t){return TC(t).concat(MC(t))}const OC=Object.hasOwn||((t,e)=>AC.call(t,e));function qr(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const IC="__v",DC="__o",LC="_owner",{getOwnPropertyDescriptor:Fg,keys:Ug}=Object;function RC(t,e){return t.byteLength===e.byteLength&&sa(new Uint8Array(t),new Uint8Array(e))}function PC(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function BC(t,e){return t.byteLength===e.byteLength&&sa(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function zC(t,e){return qr(t.getTime(),e.getTime())}function $C(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function VC(t,e){return t===e}function Wg(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const o=new Array(r),i=t.entries();let s,a,l=0;for(;(s=i.next())&&!s.done;){const c=e.entries();let u=!1,d=0;for(;(a=c.next())&&!a.done;){if(o[d]){d++;continue}const f=s.value,h=a.value;if(n.equals(f[0],h[0],l,d,t,e,n)&&n.equals(f[1],h[1],f[0],h[0],t,e,n)){u=o[d]=!0;break}d++}if(!u)return!1;l++}return!0}const HC=qr;function FC(t,e,n){const r=Ug(t);let o=r.length;if(Ug(e).length!==o)return!1;for(;o-- >0;)if(!qg(t,e,n,r[o]))return!1;return!0}function Ai(t,e,n){const r=Hg(t);let o=r.length;if(Hg(e).length!==o)return!1;let i,s,a;for(;o-- >0;)if(i=r[o],!qg(t,e,n,i)||(s=Fg(t,i),a=Fg(e,i),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function UC(t,e){return qr(t.valueOf(),e.valueOf())}function WC(t,e){return t.source===e.source&&t.flags===e.flags}function Kg(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const o=new Array(r),i=t.values();let s,a;for(;(s=i.next())&&!s.done;){const l=e.values();let c=!1,u=0;for(;(a=l.next())&&!a.done;){if(!o[u]&&n.equals(s.value,a.value,s.value,a.value,t,e,n)){c=o[u]=!0;break}u++}if(!c)return!1}return!0}function sa(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function KC(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function qg(t,e,n,r){return(r===LC||r===DC||r===IC)&&(t.$$typeof||e.$$typeof)?!0:OC(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const qC="[object ArrayBuffer]",GC="[object Arguments]",jC="[object Boolean]",YC="[object DataView]",XC="[object Date]",ZC="[object Error]",JC="[object Map]",QC="[object Number]",eT="[object Object]",tT="[object RegExp]",nT="[object Set]",rT="[object String]",oT={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},iT="[object URL]",sT=Object.prototype.toString;function aT({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:o,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:h,unknownTagComparators:p}){return function(g,b,w){if(g===b)return!0;if(g==null||b==null)return!1;const E=typeof g;if(E!==typeof b)return!1;if(E!=="object")return E==="number"?a(g,b,w):E==="function"?i(g,b,w):!1;const v=g.constructor;if(v!==b.constructor)return!1;if(v===Object)return l(g,b,w);if(Array.isArray(g))return e(g,b,w);if(v===Date)return r(g,b,w);if(v===RegExp)return u(g,b,w);if(v===Map)return s(g,b,w);if(v===Set)return d(g,b,w);const k=sT.call(g);if(k===XC)return r(g,b,w);if(k===tT)return u(g,b,w);if(k===JC)return s(g,b,w);if(k===nT)return d(g,b,w);if(k===eT)return typeof g.then!="function"&&typeof b.then!="function"&&l(g,b,w);if(k===iT)return h(g,b,w);if(k===ZC)return o(g,b,w);if(k===GC)return l(g,b,w);if(oT[k])return f(g,b,w);if(k===qC)return t(g,b,w);if(k===YC)return n(g,b,w);if(k===jC||k===QC||k===rT)return c(g,b,w);if(p){let S=p[k];if(!S){const C=_C(g);C&&(S=p[C])}if(S)return S(g,b,w)}return!1}}function lT({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:RC,areArraysEqual:n?Ai:PC,areDataViewsEqual:BC,areDatesEqual:zC,areErrorsEqual:$C,areFunctionsEqual:VC,areMapsEqual:n?zu(Wg,Ai):Wg,areNumbersEqual:HC,areObjectsEqual:n?Ai:FC,arePrimitiveWrappersEqual:UC,areRegExpsEqual:WC,areSetsEqual:n?zu(Kg,Ai):Kg,areTypedArraysEqual:n?zu(sa,Ai):sa,areUrlsEqual:KC,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const o=ia(r.areArraysEqual),i=ia(r.areMapsEqual),s=ia(r.areObjectsEqual),a=ia(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:a})}return r}function cT(t){return function(e,n,r,o,i,s,a){return t(e,n,a)}}function uT({circular:t,comparator:e,createState:n,equals:r,strict:o}){if(n)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(a,l,{cache:c,equals:r,meta:u,strict:o})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:o})};const i={cache:void 0,equals:r,meta:void 0,strict:o};return function(a,l){return e(a,l,i)}}const dT=pr();pr({strict:!0}),pr({circular:!0}),pr({circular:!0,strict:!0}),pr({createInternalComparator:()=>qr}),pr({strict:!0,createInternalComparator:()=>qr}),pr({circular:!0,createInternalComparator:()=>qr}),pr({circular:!0,createInternalComparator:()=>qr,strict:!0});function pr(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:o=!1}=t,i=lT(t),s=aT(i),a=n?n(s):cT(s);return uT({circular:e,comparator:s,createState:r,equals:a,strict:o})}var aa={exports:{}},$u={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function fT(){if(Gg)return $u;Gg=1;var t=N,e=vc();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return $u.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=i(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function b(S){if(!w){if(w=!0,E=S,S=f(S),h!==void 0&&m.hasValue){var C=m.value;if(h(C,S))return v=C}return v=S}if(C=v,r(E,S))return C;var M=f(S);return h!==void 0&&h(C,M)?(E=S,C):(E=S,v=M)}var w=!1,E,v,k=d===void 0?null:d;return[function(){return b(u())},k===null?void 0:function(){return b(k())}]},[u,d,f,h]);var g=o(c,p[0],p[1]);return s(function(){m.hasValue=!0,m.value=g},[g]),l(g),g},$u}var Vu={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function hT(){return jg||(jg=1,process.env.NODE_ENV!=="production"&&(function(){function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var e=N,n=vc(),r=typeof Object.is=="function"?Object.is:t,o=n.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,l=e.useDebugValue;Vu.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=i(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function b(S){if(!w){if(w=!0,E=S,S=f(S),h!==void 0&&m.hasValue){var C=m.value;if(h(C,S))return v=C}return v=S}if(C=v,r(E,S))return C;var M=f(S);return h!==void 0&&h(C,M)?(E=S,C):(E=S,v=M)}var w=!1,E,v,k=d===void 0?null:d;return[function(){return b(u())},k===null?void 0:function(){return b(k())}]},[u,d,f,h]);var g=o(c,p[0],p[1]);return s(function(){m.hasValue=!0,m.value=g},[g]),l(g),g},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()),Vu}var Yg;function pT(){return Yg||(Yg=1,process.env.NODE_ENV==="production"?aa.exports=fT():aa.exports=hT()),aa.exports}var mT=pT();const Xg=["top","right","bottom","left"],Zg=["start","end"],Jg=Xg.reduce((t,e)=>t.concat(e,e+"-"+Zg[0],e+"-"+Zg[1]),[]),sn=Math.min,Nt=Math.max,la=Math.round,ca=Math.floor,vn=t=>({x:t,y:t}),gT={left:"right",right:"left",bottom:"top",top:"bottom"},bT={start:"end",end:"start"};function Hu(t,e,n){return Nt(t,sn(e,n))}function an(t,e){return typeof t=="function"?t(e):t}function $t(t){return t.split("-")[0]}function ln(t){return t.split("-")[1]}function Fu(t){return t==="x"?"y":"x"}function Uu(t){return t==="y"?"height":"width"}const yT=new Set(["top","bottom"]);function cn(t){return yT.has($t(t))?"y":"x"}function Wu(t){return Fu(cn(t))}function Qg(t,e,n){n===void 0&&(n=!1);const r=ln(t),o=Wu(t),i=Uu(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=da(s)),[s,da(s)]}function wT(t){const e=da(t);return[ua(t),e,ua(e)]}function ua(t){return t.replace(/start|end/g,e=>bT[e])}const eb=["left","right"],tb=["right","left"],kT=["top","bottom"],ET=["bottom","top"];function vT(t,e,n){switch(t){case"top":case"bottom":return n?e?tb:eb:e?eb:tb;case"left":case"right":return e?kT:ET;default:return[]}}function NT(t,e,n,r){const o=ln(t);let i=vT($t(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(ua)))),i}function da(t){return t.replace(/left|right|bottom|top/g,e=>gT[e])}function xT(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ku(t){return typeof t!="number"?xT(t):{top:t,right:t,bottom:t,left:t}}function Co(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function nb(t,e,n){let{reference:r,floating:o}=t;const i=cn(e),s=Wu(e),a=Uu(s),l=$t(e),c=i==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(ln(e)){case"start":h[s]-=f*(n&&c?-1:1);break;case"end":h[s]+=f*(n&&c?-1:1);break}return h}const ST=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:d}=nb(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:b}=a[m],{x:w,y:E,data:v,reset:k}=await b({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});u=w??u,d=E??d,h={...h,[g]:{...h[g],...v}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):k.rects),{x:u,y:d}=nb(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function To(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=an(e,t),p=Ku(h),g=a[f?d==="floating"?"reference":"floating":d],b=Co(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),v=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Co(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:E,strategy:l}):w);return{top:(b.top-k.top+p.top)/v.y,bottom:(k.bottom-b.bottom+p.bottom)/v.y,left:(b.left-k.left+p.left)/v.x,right:(k.right-b.right+p.right)/v.x}}const CT=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=an(t,e)||{};if(c==null)return{};const d=Ku(u),f={x:n,y:r},h=Wu(o),p=Uu(h),m=await s.getDimensions(c),g=h==="y",b=g?"top":"left",w=g?"bottom":"right",E=g?"clientHeight":"clientWidth",v=i.reference[p]+i.reference[h]-f[h]-i.floating[p],k=f[h]-i.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let C=S?S[E]:0;(!C||!await(s.isElement==null?void 0:s.isElement(S)))&&(C=a.floating[E]||i.floating[p]);const M=v/2-k/2,A=C/2-m[p]/2-1,D=sn(d[b],A),G=sn(d[w],A),q=D,X=C-m[p]-G,H=C/2-m[p]/2+M,j=Hu(q,H,X),K=!l.arrow&&ln(o)!=null&&H!==j&&i.reference[p]/2-(H<q?D:G)-m[p]/2<0,re=K?H<q?H-q:H-X:0;return{[h]:f[h]+re,data:{[h]:j,centerOffset:H-j-re,...K&&{alignmentOffset:re}},reset:K}}});function TT(t,e,n){return(t?[...n.filter(o=>ln(o)===t),...n.filter(o=>ln(o)!==t)]:n.filter(o=>$t(o)===o)).filter(o=>t?ln(o)===t||(e?ua(o)!==o:!1):!0)}const MT=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,o;const{rects:i,middlewareData:s,placement:a,platform:l,elements:c}=e,{crossAxis:u=!1,alignment:d,allowedPlacements:f=Jg,autoAlignment:h=!0,...p}=an(t,e),m=d!==void 0||f===Jg?TT(d||null,h,f):f,g=await To(e,p),b=((n=s.autoPlacement)==null?void 0:n.index)||0,w=m[b];if(w==null)return{};const E=Qg(w,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==w)return{reset:{placement:m[0]}};const v=[g[$t(w)],g[E[0]],g[E[1]]],k=[...((r=s.autoPlacement)==null?void 0:r.overflows)||[],{placement:w,overflows:v}],S=m[b+1];if(S)return{data:{index:b+1,overflows:k},reset:{placement:S}};const C=k.map(D=>{const G=ln(D.placement);return[D.placement,G&&u?D.overflows.slice(0,2).reduce((q,X)=>q+X,0):D.overflows[0],D.overflows]}).sort((D,G)=>D[1]-G[1]),A=((o=C.filter(D=>D[2].slice(0,ln(D[0])?2:3).every(G=>G<=0))[0])==null?void 0:o[0])||C[0][0];return A!==a?{data:{index:b+1,overflows:k},reset:{placement:A}}:{}}}},AT=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=an(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=$t(o),w=cn(a),E=$t(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(E||!m?[da(a)]:wT(a)),S=p!=="none";!f&&S&&k.push(...NT(a,m,p,v));const C=[a,...k],M=await To(e,g),A=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&A.push(M[b]),d){const H=Qg(o,s,v);A.push(M[H[0]],M[H[1]])}if(D=[...D,{placement:o,overflows:A}],!A.every(H=>H<=0)){var G,q;const H=(((G=i.flip)==null?void 0:G.index)||0)+1,j=C[H];if(j&&(!(d==="alignment"?w!==cn(j):!1)||D.every(_=>cn(_.placement)===w?_.overflows[0]>0:!0)))return{data:{index:H,overflows:D},reset:{placement:j}};let K=(q=D.filter(re=>re.overflows[0]<=0).sort((re,_)=>re.overflows[1]-_.overflows[1])[0])==null?void 0:q.placement;if(!K)switch(h){case"bestFit":{var X;const re=(X=D.filter(_=>{if(S){const V=cn(_.placement);return V===w||V==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(V=>V>0).reduce((V,O)=>V+O,0)]).sort((_,V)=>_[1]-V[1])[0])==null?void 0:X[0];re&&(K=re);break}case"initialPlacement":K=a;break}if(o!==K)return{reset:{placement:K}}}return{}}}};function rb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ob(t){return Xg.some(e=>t[e]>=0)}const _T=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=an(t,e);switch(r){case"referenceHidden":{const i=await To(e,{...o,elementContext:"reference"}),s=rb(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:ob(s)}}}case"escaped":{const i=await To(e,{...o,altBoundary:!0}),s=rb(i,n.floating);return{data:{escapedOffsets:s,escaped:ob(s)}}}default:return{}}}}};function ib(t){const e=sn(...t.map(i=>i.left)),n=sn(...t.map(i=>i.top)),r=Nt(...t.map(i=>i.right)),o=Nt(...t.map(i=>i.bottom));return{x:e,y:n,width:r-e,height:o-n}}function OT(t){const e=t.slice().sort((o,i)=>o.y-i.y),n=[];let r=null;for(let o=0;o<e.length;o++){const i=e[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(o=>Co(ib(o)))}const IT=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:o,platform:i,strategy:s}=e,{padding:a=2,x:l,y:c}=an(t,e),u=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),d=OT(u),f=Co(ib(u)),h=Ku(a);function p(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom)||f;if(d.length>=2){if(cn(n)==="y"){const D=d[0],G=d[d.length-1],q=$t(n)==="top",X=D.top,H=G.bottom,j=q?D.left:G.left,K=q?D.right:G.right,re=K-j,_=H-X;return{top:X,bottom:H,left:j,right:K,width:re,height:_,x:j,y:X}}const g=$t(n)==="left",b=Nt(...d.map(D=>D.right)),w=sn(...d.map(D=>D.left)),E=d.filter(D=>g?D.left===w:D.right===b),v=E[0].top,k=E[E.length-1].bottom,S=w,C=b,M=C-S,A=k-v;return{top:v,bottom:k,left:S,right:C,width:M,height:A,x:S,y:v}}return f}const m=await i.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:s});return o.reference.x!==m.reference.x||o.reference.y!==m.reference.y||o.reference.width!==m.reference.width||o.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}},sb=new Set(["left","top"]);async function DT(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=$t(n),a=ln(n),l=cn(n)==="y",c=sb.has(s)?-1:1,u=i&&l?-1:1,d=an(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const LT=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,l=await DT(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},RT=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:b,y:w}=g;return{x:b,y:w}}},...l}=an(t,e),c={x:n,y:r},u=await To(e,l),d=cn($t(o)),f=Fu(d);let h=c[f],p=c[d];if(i){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=h+u[g],E=h-u[b];h=Hu(w,h,E)}if(s){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",w=p+u[g],E=p-u[b];p=Hu(w,p,E)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[d]:s}}}}}},PT=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=an(t,e),u={x:n,y:r},d=cn(o),f=Fu(d);let h=u[f],p=u[d];const m=an(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const E=f==="y"?"height":"width",v=i.reference[f]-i.floating[E]+g.mainAxis,k=i.reference[f]+i.reference[E]-g.mainAxis;h<v?h=v:h>k&&(h=k)}if(c){var b,w;const E=f==="y"?"width":"height",v=sb.has($t(o)),k=i.reference[d]-i.floating[E]+(v&&((b=s.offset)==null?void 0:b[d])||0)+(v?0:g.crossAxis),S=i.reference[d]+i.reference[E]+(v?0:((w=s.offset)==null?void 0:w[d])||0)-(v?g.crossAxis:0);p<k?p=k:p>S&&(p=S)}return{[f]:h,[d]:p}}}},BT=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...c}=an(t,e),u=await To(e,c),d=$t(o),f=ln(o),h=cn(o)==="y",{width:p,height:m}=i.floating;let g,b;d==="top"||d==="bottom"?(g=d,b=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,g=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,E=p-u.left-u.right,v=sn(m-u[g],w),k=sn(p-u[b],E),S=!e.middlewareData.shift;let C=v,M=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(M=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=w),S&&!f){const D=Nt(u.left,0),G=Nt(u.right,0),q=Nt(u.top,0),X=Nt(u.bottom,0);h?M=p-2*(D!==0||G!==0?D+G:Nt(u.left,u.right)):C=m-2*(q!==0||X!==0?q+X:Nt(u.top,u.bottom))}await l({...e,availableWidth:M,availableHeight:C});const A=await s.getDimensions(a.floating);return p!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function fa(){return typeof window<"u"}function Mo(t){return ab(t)?(t.nodeName||"").toLowerCase():"#document"}function Vt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Nn(t){var e;return(e=(ab(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ab(t){return fa()?t instanceof Node||t instanceof Vt(t).Node:!1}function un(t){return fa()?t instanceof Element||t instanceof Vt(t).Element:!1}function xn(t){return fa()?t instanceof HTMLElement||t instanceof Vt(t).HTMLElement:!1}function lb(t){return!fa()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Vt(t).ShadowRoot}const zT=new Set(["inline","contents"]);function _i(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=dn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!zT.has(o)}const $T=new Set(["table","td","th"]);function VT(t){return $T.has(Mo(t))}const HT=[":popover-open",":modal"];function ha(t){return HT.some(e=>{try{return t.matches(e)}catch{return!1}})}const FT=["transform","translate","scale","rotate","perspective"],UT=["transform","translate","scale","rotate","perspective","filter"],WT=["paint","layout","strict","content"];function qu(t){const e=Gu(),n=un(t)?dn(t):t;return FT.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||UT.some(r=>(n.willChange||"").includes(r))||WT.some(r=>(n.contain||"").includes(r))}function KT(t){let e=mr(t);for(;xn(e)&&!Ao(e);){if(qu(e))return e;if(ha(e))return null;e=mr(e)}return null}function Gu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qT=new Set(["html","body","#document"]);function Ao(t){return qT.has(Mo(t))}function dn(t){return Vt(t).getComputedStyle(t)}function pa(t){return un(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mr(t){if(Mo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||lb(t)&&t.host||Nn(t);return lb(e)?e.host:e}function cb(t){const e=mr(t);return Ao(e)?t.ownerDocument?t.ownerDocument.body:t.body:xn(e)&&_i(e)?e:cb(e)}function Oi(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=cb(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=Vt(o);if(i){const a=ju(s);return e.concat(s,s.visualViewport||[],_i(o)?o:[],a&&n?Oi(a):[])}return e.concat(o,Oi(o,[],n))}function ju(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ub(t){const e=dn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=xn(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=la(n)!==i||la(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function Yu(t){return un(t)?t:t.contextElement}function _o(t){const e=Yu(t);if(!xn(e))return vn(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=ub(e);let s=(i?la(n.width):n.width)/r,a=(i?la(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const GT=vn(0);function db(t){const e=Vt(t);return!Gu()||!e.visualViewport?GT:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jT(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Vt(t)?!1:e}function Gr(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=Yu(t);let s=vn(1);e&&(r?un(r)&&(s=_o(r)):s=_o(t));const a=jT(i,n,r)?db(i):vn(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(i){const f=Vt(i),h=r&&un(r)?Vt(r):r;let p=f,m=ju(p);for(;m&&r&&h!==p;){const g=_o(m),b=m.getBoundingClientRect(),w=dn(m),E=b.left+(m.clientLeft+parseFloat(w.paddingLeft))*g.x,v=b.top+(m.clientTop+parseFloat(w.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=E,c+=v,p=Vt(m),m=ju(p)}}return Co({width:u,height:d,x:l,y:c})}function ma(t,e){const n=pa(t).scrollLeft;return e?e.left+n:Gr(Nn(t)).left+n}function fb(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-ma(t,n),o=n.top+e.scrollTop;return{x:r,y:o}}function YT(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=Nn(r),a=e?ha(e.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=vn(1);const u=vn(0),d=xn(r);if((d||!d&&!i)&&((Mo(r)!=="body"||_i(s))&&(l=pa(r)),xn(r))){const h=Gr(r);c=_o(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=s&&!d&&!i?fb(s,l):vn(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function XT(t){return Array.from(t.getClientRects())}function ZT(t){const e=Nn(t),n=pa(t),r=t.ownerDocument.body,o=Nt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Nt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+ma(t);const a=-n.scrollTop;return dn(r).direction==="rtl"&&(s+=Nt(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}const hb=25;function JT(t,e){const n=Vt(t),r=Nn(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const u=Gu();(!u||u&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}const c=ma(r);if(c<=0){const u=r.ownerDocument,d=u.body,f=getComputedStyle(d),h=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(r.clientWidth-d.clientWidth-h);p<=hb&&(i-=p)}else c<=hb&&(i+=c);return{width:i,height:s,x:a,y:l}}const QT=new Set(["absolute","fixed"]);function eM(t,e){const n=Gr(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=xn(t)?_o(t):vn(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function pb(t,e,n){let r;if(e==="viewport")r=JT(t,n);else if(e==="document")r=ZT(Nn(t));else if(un(e))r=eM(e,n);else{const o=db(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Co(r)}function mb(t,e){const n=mr(t);return n===e||!un(n)||Ao(n)?!1:dn(n).position==="fixed"||mb(n,e)}function tM(t,e){const n=e.get(t);if(n)return n;let r=Oi(t,[],!1).filter(a=>un(a)&&Mo(a)!=="body"),o=null;const i=dn(t).position==="fixed";let s=i?mr(t):t;for(;un(s)&&!Ao(s);){const a=dn(s),l=qu(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&QT.has(o.position)||_i(s)&&!l&&mb(t,s))?r=r.filter(u=>u!==s):o=a,s=mr(s)}return e.set(t,r),r}function nM(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?ha(e)?[]:tM(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=pb(e,u,o);return c.top=Nt(d.top,c.top),c.right=sn(d.right,c.right),c.bottom=sn(d.bottom,c.bottom),c.left=Nt(d.left,c.left),c},pb(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function rM(t){const{width:e,height:n}=ub(t);return{width:e,height:n}}function oM(t,e,n){const r=xn(e),o=Nn(e),i=n==="fixed",s=Gr(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=vn(0);function c(){l.x=ma(o)}if(r||!r&&!i)if((Mo(e)!=="body"||_i(o))&&(a=pa(e)),r){const h=Gr(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&c();i&&!r&&o&&c();const u=o&&!r&&!i?fb(o,a):vn(0),d=s.left+a.scrollLeft-l.x-u.x,f=s.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:s.width,height:s.height}}function Xu(t){return dn(t).position==="static"}function gb(t,e){if(!xn(t)||dn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Nn(t)===n&&(n=n.ownerDocument.body),n}function bb(t,e){const n=Vt(t);if(ha(t))return n;if(!xn(t)){let o=mr(t);for(;o&&!Ao(o);){if(un(o)&&!Xu(o))return o;o=mr(o)}return n}let r=gb(t,e);for(;r&&VT(r)&&Xu(r);)r=gb(r,e);return r&&Ao(r)&&Xu(r)&&!qu(r)?n:r||KT(t)||n}const iM=async function(t){const e=this.getOffsetParent||bb,n=this.getDimensions,r=await n(t.floating);return{reference:oM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sM(t){return dn(t).direction==="rtl"}const aM={convertOffsetParentRelativeRectToViewportRelativeRect:YT,getDocumentElement:Nn,getClippingRect:nM,getOffsetParent:bb,getElementRects:iM,getClientRects:XT,getDimensions:rM,getScale:_o,isElement:un,isRTL:sM};function yb(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function lM(t,e){let n=null,r;const o=Nn(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const p=ca(d),m=ca(o.clientWidth-(u+f)),g=ca(o.clientHeight-(d+h)),b=ca(u),E={rootMargin:-p+"px "+-m+"px "+-g+"px "+-b+"px",threshold:Nt(0,sn(1,l))||1};let v=!0;function k(S){const C=S[0].intersectionRatio;if(C!==l){if(!v)return s();C?s(!1,C):r=setTimeout(()=>{s(!1,1e-7)},1e3)}C===1&&!yb(c,t.getBoundingClientRect())&&s(),v=!1}try{n=new IntersectionObserver(k,{...E,root:o.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(t)}return s(!0),i}function cM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Yu(t),u=o||i?[...c?Oi(c):[],...Oi(e)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const d=c&&a?lM(c,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(b=>{let[w]=b;w&&w.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Gr(t):null;l&&g();function g(){const b=Gr(t);m&&!yb(m,b)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;u.forEach(w=>{o&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),d?.(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const Zu=LT,wb=MT,Ju=RT,Qu=AT,ed=BT,td=_T,ga=CT,kb=IT,uM=PT,nd=(t,e,n)=>{const r=new Map,o={platform:aM,...n},i={...o.platform,_c:r};return ST(t,e,{...o,platform:i})};let rd,od;if(typeof WeakMap<"u"){let t=new WeakMap;rd=e=>t.get(e),od=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;rd=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},od=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Ze=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[e+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:i}=this.findCell(t),{left:s,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const a=(t+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(t){return rd(t)||od(t,dM(t))}};function dM(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=fM(t),n=t.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==d.childCount)break;const m=d.child(p),{colspan:g,rowspan:b,colwidth:w}=m.attrs;for(let E=0;E<b;E++){if(E+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:b-E});break}const v=o+E*e;for(let k=0;k<g;k++){r[v+k]==0?r[v+k]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:g-k});const S=w&&w[k];if(S){const C=(v+k)%e*2,M=s[C];M==null||M!=S&&s[C+1]==1?(s[C]=S,s[C+1]=1):M==S&&s[C+1]++}}}o+=g,u+=m.nodeSize}const f=(c+1)*e;let h=0;for(;o<f;)r[o++]==0&&h++;h&&(i||(i=[])).push({type:"missing",row:c,n:h}),u++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new Ze(e,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&hM(a,s,t),a}function fM(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=t.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function hM(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const i=t.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=e[(o+c)%t.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=pM(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function pM(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function xt(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}const gr=new _e("selectingCells");function jr(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function mM(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function fn(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function ba(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=jr(e.$head)||gM(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function gM(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function id(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function bM(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function sd(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Eb(t,e,n){const r=t.node(-1),o=Ze.get(r),i=t.start(-1),s=o.nextCell(t.pos-i,e,n);return s==null?null:t.node(0).resolve(i+s)}function Yr(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function vb(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function yM(t,e,n){const r=xt(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var Ue=class Zn extends fe{constructor(e,n=e){const r=e.node(-1),o=Ze.get(r),i=e.start(-1),s=o.rectBetween(e.pos-i,n.pos-i),a=e.node(0),l=o.cellsInRect(s).filter(u=>u!=n.pos-i);l.unshift(n.pos-i);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw new RangeError(`No cell with offset ${u} found`);const f=i+u+1;return new wp(a.resolve(f),a.resolve(f+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(id(r)&&id(o)&&sd(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?Zn.rowSelection(r,o):i&&this.isColSelection()?Zn.colSelection(r,o):new Zn(r,o)}return le.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Ze.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,d=o.left;d<o.right;d++,u++){const f=n.map[u];if(i[f])continue;i[f]=!0;const h=n.findCell(f);let p=e.nodeAt(f);if(!p)throw new RangeError(`No cell with offset ${f} found`);const m=o.left-h.left,g=h.right-o.right;if(m>0||g>0){let b=p.attrs;if(m>0&&(b=Yr(b,0,m)),g>0&&(b=Yr(b,b.colspan-g,g)),h.left<o.left){if(p=p.type.createAndFill(b),!p)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else p=p.type.create(b,p.content)}if(h.top<o.top||h.bottom>o.bottom){const b={...p.attrs,rowspan:Math.min(h.bottom,o.bottom)-Math.max(h.top,o.top)};h.top<o.top?p=p.type.createAndFill(b):p=p.type.create(b,p.content)}c.push(p)}s.push(e.child(l).copy(R.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:s;return new Y(R.from(a),1,1)}replace(e,n=Y.empty){const r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:a,$to:l}=o[s],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),s?Y.empty:n)}const i=fe.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new Y(R.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Ze.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)e(n.nodeAt(i[s]),o+i[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Ze.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.top<=a.top?(s.top>0&&(e=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(e=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new Zn(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Ze.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(e){return e instanceof Zn&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Ze.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.left<=a.left?(s.left>0&&(e=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=l.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(e=l.resolve(i+o.map[o.width*(s.top+1)-1]))),new Zn(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Zn(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Zn(e.resolve(n),e.resolve(r))}getBookmark(){return new wM(this.$anchorCell.pos,this.$headCell.pos)}};Ue.prototype.visible=!1,fe.jsonID("cell",Ue);var wM=class yv{constructor(e,n){this.anchor=e,this.head=n}map(e){return new yv(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&sd(n,r)?new Ue(n,r):fe.near(r,1)}};function kM(t){if(!(t.selection instanceof Ue))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Fe.node(r,r+n.nodeSize,{class:"selectedCell"}))}),ve.create(t.doc,e)}function EM({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function vM({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function NM(t,e,n){const r=(e||t).selection,o=(e||t).doc;let i,s;if(r instanceof ie&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=Ue.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=Ue.rowSelection(a,a)}else if(!n){const a=Ze.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=Ue.create(o,l+1,c)}}else r instanceof le&&EM(r)?i=le.create(o,r.from):r instanceof le&&vM(r)&&(i=le.create(o,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}const xM=new _e("fix-tables");function Nb(t,e,n,r){const o=t.childCount,i=e.childCount;e:for(let s=0,a=0;s<i;s++){const l=e.child(s);for(let c=a,u=Math.min(o,s+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?Nb(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function xb(t,e){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=SM(t,o,i,n))};return e?e.doc!=t.doc&&Nb(e.doc,t.doc,0,r):t.doc.descendants(r),n}function SM(t,e,n,r){const o=Ze.get(e);if(!o.problems)return r;r||(r=t.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)i[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Yr(d,d.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=e.child(l),d=c+u.nodeSize,f=i[l];if(f>0){let h="cell";u.firstChild&&(h=u.firstChild.type.spec.tableRole);const p=[];for(let g=0;g<f;g++){const b=xt(t.schema)[h].createAndFill();b&&p.push(b)}const m=(l==0||s==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(m),p)}c=d}return r.setMeta(xM,{fixTables:!0})}function Sn(t){const e=t.selection,n=ba(t),r=n.node(-1),o=n.start(-1),i=Ze.get(r);return{...e instanceof Ue?i.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function Sb(t,{map:e,tableStart:n,table:r},o){let i=o>0?-1:0;yM(e,r,o+i)&&(i=o==0||o==e.width?null:0);for(let s=0;s<e.height;s++){const a=s*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,vb(c.attrs,o-e.colCount(l))),s+=c.attrs.rowspan-1}else{const l=i==null?xt(r.type.schema).cell:r.nodeAt(e.map[a+i]).type,c=e.positionAt(s,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function CM(t,e){if(!fn(t))return!1;if(e){const n=Sn(t);e(Sb(t.tr,n,n.left))}return!0}function TM(t,e){if(!fn(t))return!1;if(e){const n=Sn(t);e(Sb(t.tr,n,n.right))}return!0}function MM(t,{map:e,table:n,tableStart:r},o){const i=t.mapping.maps.length;for(let s=0;s<e.height;){const a=s*e.width+o,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(i).map(r+l),null,Yr(u,o-e.colCount(l)));else{const d=t.mapping.slice(i).map(r+l);t.delete(d,d+c.nodeSize)}s+=u.rowspan}}function AM(t,e){if(!fn(t))return!1;if(e){const n=Sn(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;MM(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw new RangeError("No table found");n.table=i,n.map=Ze.get(i)}e(r)}return!0}function _M(t,e,n){var r;const o=xt(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))===null||r===void 0?void 0:r.type)!=o)return!1;return!0}function Cb(t,{map:e,tableStart:n,table:r},o){let i=n;for(let c=0;c<o;c++)i+=r.child(c).nodeSize;const s=[];let a=o>0?-1:0;_M(e,r,o+a)&&(a=o==0||o==e.height?null:0);for(let c=0,u=e.width*o;c<e.width;c++,u++)if(o>0&&o<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],f=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{var l;const d=a==null?xt(r.type.schema).cell:(l=r.nodeAt(e.map[u+a*e.width]))===null||l===void 0?void 0:l.type,f=d?.createAndFill();f&&s.push(f)}return t.insert(i,xt(r.type.schema).row.create(null,s)),t}function OM(t,e){if(!fn(t))return!1;if(e){const n=Sn(t);e(Cb(t.tr,n,n.top))}return!0}function IM(t,e){if(!fn(t))return!1;if(e){const n=Sn(t);e(Cb(t.tr,n,n.bottom))}return!0}function DM(t,{map:e,table:n,tableStart:r},o){let i=0;for(let c=0;c<o;c++)i+=n.child(c).nodeSize;const s=i+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(i+r,s+r);const l=new Set;for(let c=0,u=o*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),o>0&&d==e.map[u-e.width]){const f=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(o<e.height&&d==e.map[u+e.width]){const f=n.nodeAt(d),h=f.attrs,p=f.type.create({...h,rowspan:f.attrs.rowspan-1},f.content),m=e.positionAt(o+1,c,n);t.insert(t.mapping.slice(a).map(r+m),p),c+=h.colspan-1}}}}function LM(t,e){if(!fn(t))return!1;if(e){const n=Sn(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;DM(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw new RangeError("No table found");n.table=i,n.map=Ze.get(n.table)}e(r)}return!0}function Tb(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function RM({width:t,height:e,map:n},r){let o=r.top*t+r.left,i=o,s=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[a]==n[a+1])return!0;i+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[s]==n[s+t])return!0;o++,s++}return!1}function Mb(t,e){const n=t.selection;if(!(n instanceof Ue)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Sn(t),{map:o}=r;if(RM(o,r))return!1;if(e){const i=t.tr,s={};let a=R.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const f=o.map[u*o.width+d],h=r.table.nodeAt(f);if(!(s[f]||!h))if(s[f]=!0,l==null)l=f,c=h;else{Tb(h)||(a=a.append(h.content));const p=i.mapping.map(f+r.tableStart);i.delete(p,p+h.nodeSize)}}if(l==null||c==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...vb(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size>0){const u=l+1+c.content.size,d=Tb(c)?l+1:u;i.replaceWith(d+r.tableStart,u+r.tableStart,a)}i.setSelection(new Ue(i.doc.resolve(l+r.tableStart))),e(i)}return!0}function Ab(t,e){const n=xt(t.schema);return PM(({node:r})=>n[r.type.spec.tableRole])(t,e)}function PM(t){return(e,n)=>{const r=e.selection;let o,i;if(r instanceof Ue){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{var s;if(o=mM(r.$from),!o)return!1;i=(s=jr(r.$from))===null||s===void 0?void 0:s.pos}if(o==null||i==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){let a=o.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=Sn(e),d=e.tr;for(let h=0;h<u.right-u.left;h++)l.push(c?{...a,colwidth:c&&c[h]?[c[h]]:null}:a);let f;for(let h=u.top;h<u.bottom;h++){let p=u.map.positionAt(h,u.left,u.table);h==u.top&&(p+=o.nodeSize);for(let m=u.left,g=0;m<u.right;m++,g++)m==u.left&&h==u.top||d.insert(f=d.mapping.map(p+u.tableStart,1),t({node:o,row:h,col:m}).createAndFill(l[g]))}d.setNodeMarkup(i,t({node:o,row:u.top,col:u.left}),l[0]),r instanceof Ue&&d.setSelection(new Ue(d.doc.resolve(r.$anchorCell.pos),f?d.doc.resolve(f):void 0)),n(d)}return!0}}function BM(t,e){return function(n,r){if(!fn(n))return!1;const o=ba(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){const i=n.tr;n.selection instanceof Ue?n.selection.forEachCell((s,a)=>{s.attrs[t]!==e&&i.setNodeMarkup(a,null,{...s.attrs,[t]:e})}):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[t]:e}),r(i)}return!0}}function zM(t){return function(e,n){if(!fn(e))return!1;if(n){const r=xt(e.schema),o=Sn(e),i=e.tr,s=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length===0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function _b(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Ii(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?zM(t):function(n,r){if(!fn(n))return!1;if(r){const o=xt(n.schema),i=Sn(n),s=n.tr,a=_b("row",i,o),l=_b("column",i,o),c=(t==="column"?a:t==="row"&&l)?1:0,u=t=="column"?{left:0,top:c,right:1,bottom:i.map.height}:t=="row"?{left:c,top:0,right:i.map.width,bottom:1}:i,d=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(u).forEach(f=>{const h=f+i.tableStart,p=s.doc.nodeAt(h);p&&s.setNodeMarkup(h,d,p.attrs)}),r(s)}return!0}}Ii("row",{useDeprecatedLogic:!0}),Ii("column",{useDeprecatedLogic:!0});const $M=Ii("cell",{useDeprecatedLogic:!0});function VM(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const i=t.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function Ob(t){return function(e,n){if(!fn(e))return!1;const r=VM(ba(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(le.between(o,bM(o))).scrollIntoView())}return!0}}function HM(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function ya(t,e){const n=t.selection;if(!(n instanceof Ue))return!1;if(e){const r=t.tr,o=xt(t.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new Y(o,0,0))}),r.docChanged&&e(r)}return!0}function FM(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=ad(xt(s).row,new Y(c,u,d)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?ad(xt(s).row,new Y(e,n,r)).content:e);else return null;return UM(s,a)}function UM(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(R.empty),n[o]<r){const i=xt(t).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);e[o]=e[o].append(R.from(s))}return{height:e.length,width:r,rows:e}}function ad(t,e){const n=t.createAndFill();return new Rc(n).replace(0,n.content.size,e).doc}function WM({width:t,height:e,rows:n},r,o){if(t!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=i[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(Yr(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)i[a+h]=(i[a+h]||0)+f.attrs.colspan}s.push(R.from(c))}n=s,t=r}if(e!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);s+d.attrs.rowspan>o&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,o-d.attrs.rowspan)},d.content)),l.push(d)}i.push(R.from(l))}n=i,e=o}return{width:t,height:e,rows:n}}function KM(t,e,n,r,o,i,s){const a=t.doc.type.schema,l=xt(a);let c,u;if(o>e.width)for(let d=0,f=0;d<e.height;d++){const h=n.child(d);f+=h.nodeSize;const p=[];let m;h.lastChild==null||h.lastChild.type==l.cell?m=c||(c=l.cell.createAndFill()):m=u||(u=l.header_cell.createAndFill());for(let g=e.width;g<o;g++)p.push(m);t.insert(t.mapping.slice(s).map(f-1+r),p)}if(i>e.height){const d=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,o);p++){const g=p>=e.width?!1:n.nodeAt(e.map[m+p]).type==l.header_cell;d.push(g?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,R.from(d)),h=[];for(let p=e.height;p<i;p++)h.push(f);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),h)}return!!(c||u)}function Ib(t,e,n,r,o,i,s,a){if(s==0||s==e.height)return!1;let l=!1;for(let c=o;c<i;c++){const u=s*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const f=n.nodeAt(d),{top:h,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:s-h}),t.insert(t.mapping.slice(a).map(e.positionAt(s,p,n)),f.type.createAndFill({...f.attrs,rowspan:h+f.attrs.rowspan-s})),c+=f.attrs.colspan-1}}return l}function Db(t,e,n,r,o,i,s,a){if(s==0||s==e.width)return!1;let l=!1;for(let c=o;c<i;c++){const u=c*e.width+s,d=e.map[u];if(e.map[u-1]==d){l=!0;const f=n.nodeAt(d),h=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,Yr(f.attrs,s-h,f.attrs.colspan-(s-h))),t.insert(p+f.nodeSize,f.type.createAndFill(Yr(f.attrs,0,s-h))),c+=f.attrs.rowspan-1}}return l}function Lb(t,e,n,r,o){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let s=Ze.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=t.tr;let f=0;function h(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=Ze.get(i),f=d.mapping.maps.length}KM(d,s,i,n,c,u,f)&&h(),Ib(d,s,i,n,l,c,a,f)&&h(),Ib(d,s,i,n,l,c,u,f)&&h(),Db(d,s,i,n,a,u,l,f)&&h(),Db(d,s,i,n,a,u,c,f)&&h();for(let p=a;p<u;p++){const m=s.positionAt(p,l,i),g=s.positionAt(p,c,i);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(g+n),new Y(o.rows[p-a],0,0))}h(),d.setSelection(new Ue(d.doc.resolve(n+s.positionAt(a,l,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),e(d)}const qM=bu({ArrowLeft:ka("horiz",-1),ArrowRight:ka("horiz",1),ArrowUp:ka("vert",-1),ArrowDown:ka("vert",1),"Shift-ArrowLeft":Ea("horiz",-1),"Shift-ArrowRight":Ea("horiz",1),"Shift-ArrowUp":Ea("vert",-1),"Shift-ArrowDown":Ea("vert",1),Backspace:ya,"Mod-Backspace":ya,Delete:ya,"Mod-Delete":ya});function wa(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function ka(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof Ue)return wa(n,r,fe.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const s=Rb(o,t,e);if(s==null)return!1;if(t=="horiz")return wa(n,r,fe.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(s),l=Eb(a,t,e);let c;return l?c=fe.near(l,1):e<0?c=fe.near(n.doc.resolve(a.before(-1)),-1):c=fe.near(n.doc.resolve(a.after(-1)),1),wa(n,r,c)}}}function Ea(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof Ue)s=i;else{const l=Rb(o,t,e);if(l==null)return!1;s=new Ue(n.doc.resolve(l))}const a=Eb(s.$headCell,t,e);return a?wa(n,r,new Ue(s.$anchorCell,a)):!1}}function GM(t,e){const n=t.state.doc,r=jr(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new Ue(r))),!0):!1}function jM(t,e,n){if(!fn(t.state))return!1;let r=FM(n);const o=t.state.selection;if(o instanceof Ue){r||(r={width:1,height:1,rows:[R.from(ad(xt(t.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=Ze.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=WM(r,a.right-a.left,a.bottom-a.top),Lb(t.state,t.dispatch,s,a,r),!0}else if(r){const i=ba(t.state),s=i.start(-1);return Lb(t.state,t.dispatch,s,Ze.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function YM(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=Pb(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof Ue)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=jr(t.state.selection.$anchor))!=null&&((n=ld(t,e))===null||n===void 0?void 0:n.pos)!=o.pos)i(o,e),e.preventDefault();else if(!r)return;function i(l,c){let u=ld(t,c);const d=gr.getState(t.state)==null;if(!u||!sd(l,u))if(d)u=l;else return;const f=new Ue(l,u);if(d||!t.state.selection.eq(f)){const h=t.state.tr.setSelection(f);d&&h.setMeta(gr,l.pos),t.dispatch(h)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),gr.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(gr,-1))}function a(l){const c=l,u=gr.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(Pb(t,c.target)!=r&&(d=ld(t,e),!d))return s();d&&i(d,c)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function Rb(t,e,n){if(!(t.state.selection instanceof le))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const s=r.before(o),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function Pb(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function ld(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:o}=n;return r>=0&&jr(t.state.doc.resolve(r))||jr(t.state.doc.resolve(o))}var XM=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),cd(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,cd(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function cd(t,e,n,r,o,i){let s=0,a=!0,l=e.firstChild;const c=t.firstChild;if(c){for(let d=0,f=0;d<c.childCount;d++){const{colspan:h,colwidth:p}=c.child(d).attrs;for(let m=0;m<h;m++,f++){const g=o==f?i:p&&p[m],b=g?g+"px":"";if(s+=g||r,g||(a=!1),l)l.style.width!=b&&(l.style.width=b),l=l.nextSibling;else{const w=document.createElement("col");w.style.width=b,e.appendChild(w)}}}for(;l;){var u;const d=l.nextSibling;(u=l.parentNode)===null||u===void 0||u.removeChild(l),l=d}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}const Ht=new _e("tableColumnResizing");function ZM({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=XM,lastColumnResizable:o=!0}={}){const i=new Se({key:Ht,state:{init(s,a){var l;const c=(l=i.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,u=xt(a.schema).table.name;return r&&c&&(c[u]=(d,f)=>new r(d,n,f)),new JM(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=Ht.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{QM(s,a,t,o)},mouseleave:s=>{eA(s)},mousedown:(s,a)=>{tA(s,a,e,n)}},decorations:s=>{const a=Ht.getState(s);if(a&&a.activeHandle>-1)return sA(s,a.activeHandle)},nodeViews:{}}});return i}var JM=class wc{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Ht);if(r&&r.setHandle!=null)return new wc(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new wc(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return id(e.doc.resolve(o))||(o=-1),new wc(o,n.dragging)}return n}};function QM(t,e,n,r){if(!t.editable)return;const o=Ht.getState(t.state);if(o&&!o.dragging){const i=rA(e.target);let s=-1;if(i){const{left:a,right:l}=i.getBoundingClientRect();e.clientX-a<=n?s=Bb(t,e,"left",n):l-e.clientX<=n&&(s=Bb(t,e,"right",n))}if(s!=o.activeHandle){if(!r&&s!==-1){const a=t.state.doc.resolve(s),l=a.node(-1),c=Ze.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}$b(t,s)}}}function eA(t){if(!t.editable)return;const e=Ht.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&$b(t,-1)}function tA(t,e,n,r){var o;if(!t.editable)return!1;const i=(o=t.dom.ownerDocument.defaultView)!==null&&o!==void 0?o:window,s=Ht.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=t.state.doc.nodeAt(s.activeHandle),l=nA(t,s.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Ht,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",u);const f=Ht.getState(t.state);f?.dragging&&(oA(t,f.activeHandle,zb(f.dragging,d,n)),t.dispatch(t.state.tr.setMeta(Ht,{setDragging:null})))}function u(d){if(!d.which)return c(d);const f=Ht.getState(t.state);if(f&&f.dragging){const h=zb(f.dragging,d,n);Vb(t,f.activeHandle,h,r)}}return Vb(t,s.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",u),e.preventDefault(),!0}function nA(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=t.domAtPos(e);let s=i.node.childNodes[i.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(s-=r[l],a--);return s/a}function rA(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Bb(t,e,n,r){const o=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!i)return-1;const{pos:s}=i,a=jr(t.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const l=Ze.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function zb(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function $b(t,e){t.dispatch(t.state.tr.setMeta(Ht,{setHandle:e}))}function oA(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),i=Ze.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<i.height;c++){const u=c*i.width+a;if(c&&i.map[u]==i.map[u-i.width])continue;const d=i.map[u],f=o.nodeAt(d).attrs,h=f.colspan==1?0:a-i.colCount(d);if(f.colwidth&&f.colwidth[h]==n)continue;const p=f.colwidth?f.colwidth.slice():iA(f.colspan);p[h]=n,l.setNodeMarkup(s+d,null,{...f,colwidth:p})}l.docChanged&&t.dispatch(l)}function Vb(t,e,n,r){const o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=Ze.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&cd(i,l.firstChild,l,r,a,n)}function iA(t){return Array(t).fill(0)}function sA(t,e){const n=[],r=t.doc.resolve(e),o=r.node(-1);if(!o)return ve.empty;const i=Ze.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const u=a+c*i.width;if((a==i.width-1||i.map[u]!=i.map[u+1])&&(c==0||i.map[u]!=i.map[u-i.width])){var l;const d=i.map[u],f=s+d+o.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",!((l=Ht.getState(t))===null||l===void 0)&&l.dragging&&n.push(Fe.node(s+d,s+d+o.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),n.push(Fe.widget(f,h))}}return ve.create(t.doc,n)}function aA({allowTableNodeSelection:t=!1}={}){return new Se({key:gr,state:{init(){return null},apply(e,n){const r=e.getMeta(gr);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:i}=e.mapping.mapResult(n);return o?null:i}},props:{decorations:kM,handleDOMEvents:{mousedown:YM},createSelectionBetween(e){return gr.getState(e.state)!=null?e.state.selection:null},handleTripleClick:GM,handleKeyDown:qM,handlePaste:jM},appendTransaction(e,n,r){return NM(r,xb(r,n),t)}})}function lA(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),o=Math.min(t.left,e.left),s=Math.max(t.right,e.right)-o,a=r-n,l=o,c=n;return new DOMRect(l,c,s,a)}var cA=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:o=60,shouldShow:i,appendTo:s,getReferencedVirtualElement:a,options:l}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:d,from:f,to:h})=>{const{doc:p,selection:m}=d,{empty:g}=m,b=!p.textBetween(f,h).length&&Eu(d.selection),w=this.element.contains(document.activeElement);return!(!(u.hasFocus()||w)||g||b||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var d;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}u?.relatedTarget&&((d=this.element.parentNode)!=null&&d.contains(u.relatedTarget))||u?.relatedTarget!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,d)=>{const f=!d?.selection.eq(u.state.selection),h=!d?.doc.eq(u.state.doc);!f&&!h||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,f,h,d)},this.updateDelay))},this.updateHandler=(u,d,f,h)=>{const{composing:p}=u;if(p||!d&&!f)return;if(!this.getShouldShow(h)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:u})=>{const d=u.getMeta("bubbleMenu");d==="updatePosition"?this.updatePosition():d&&typeof d=="object"&&d.type==="updateOptions"&&this.updateOptions(d.options)};var c;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=o,this.appendTo=s,this.scrollTarget=(c=l?.scrollTarget)!=null?c:window,this.getReferencedVirtualElement=a,this.floatingUIOptions={...this.floatingUIOptions,...l},this.element.tabIndex=0,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(Qu(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(Ju(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(Zu(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(ga(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(ed(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(wb(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(td(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(kb(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t,e,n;const{selection:r}=this.editor.state,o=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(o)return o;if(!((n=(e=this.view)==null?void 0:e.dom)!=null&&n.parentNode))return;const i=Cg(this.view,r.from,r.to);let s={getBoundingClientRect:()=>i,getClientRects:()=>[i]};if(r instanceof ie){let a=this.view.nodeDOM(r.from);const l=a.dataset.nodeViewWrapper?a:a.querySelector("[data-node-view-wrapper]");l&&(a=l),a&&(s={getBoundingClientRect:()=>a.getBoundingClientRect(),getClientRects:()=>[a.getBoundingClientRect()]})}if(r instanceof Ue){const{$anchorCell:a,$headCell:l}=r,c=a?a.pos:l.pos,u=l?l.pos:a.pos,d=this.view.nodeDOM(c),f=this.view.nodeDOM(u);if(!d||!f)return;const h=d===f?d.getBoundingClientRect():lA(d.getBoundingClientRect(),f.getBoundingClientRect());s={getBoundingClientRect:()=>h,getClientRects:()=>[h]}}return s}updatePosition(){const t=this.virtualElement;t&&nd(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r,middlewareData:o})=>{var i,s;if((i=o.hide)!=null&&i.referenceHidden||(s=o.hide)!=null&&s.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const o=!e?.selection.eq(t.state.selection),i=!e?.doc.eq(t.state.doc);this.updateHandler(t,o,i,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:o}=r,i=Math.min(...o.map(l=>l.$from.pos)),s=Math.max(...o.map(l=>l.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:i,to:s}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.getReferencedVirtualElement!==void 0&&(this.getReferencedVirtualElement=t.getReferencedVirtualElement),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Hb=t=>new Se({key:typeof t.pluginKey=="string"?new _e(t.pluginKey):t.pluginKey,view:e=>new cA({view:e,...t})});Ce.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Hb({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var uA=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:o=60,options:i,appendTo:s,shouldShow:a}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.shouldShow=({view:c,state:u})=>{const{selection:d}=u,{$anchor:f,empty:h}=d,p=f.depth===1,m=f.parent.isTextblock&&!f.parent.type.spec.code&&!f.parent.textContent&&f.parent.childCount===0&&!this.getTextContent(f.parent);return!(!c.hasFocus()||!h||!p||!m||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(c,u,d,f)=>{const{composing:h}=c;if(h||!u&&!d)return;if(!this.getShouldShow(f)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:c})=>{var u;if(this.preventHide){this.preventHide=!1;return}c?.relatedTarget&&((u=this.element.parentNode)!=null&&u.contains(c.relatedTarget))||c?.relatedTarget!==this.editor.view.dom&&this.hide()},this.transactionHandler=({transaction:c})=>{const u=c.getMeta("floatingMenu");u==="updatePosition"?this.updatePosition():u&&typeof u=="object"&&u.type==="updateOptions"&&this.updateOptions(u.options)},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)};var l;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=o,this.appendTo=s,this.scrollTarget=(l=i?.scrollTarget)!=null?l:window,this.floatingUIOptions={...this.floatingUIOptions,...i},this.element.tabIndex=0,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return wg(t,{textSerializers:Tu(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(Qu(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(Ju(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(Zu(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(ga(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(ed(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(wb(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(td(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(kb(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:o}=r,i=Math.min(...o.map(l=>l.$from.pos)),s=Math.max(...o.map(l=>l.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:i,to:s})}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}updatePosition(){const{selection:t}=this.editor.state,e=Cg(this.view,t.from,t.to);nd({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:o,strategy:i,middlewareData:s})=>{var a,l;if((a=s.hide)!=null&&a.referenceHidden||(l=s.hide)!=null&&l.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=i,this.element.style.left=`${r}px`,this.element.style.top=`${o}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!e?.selection.eq(t.state.selection),r=!e?.doc.eq(t.state.doc);this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Fb=t=>new Se({key:typeof t.pluginKey=="string"?new _e(t.pluginKey):t.pluginKey,view:e=>new uA({view:e,...t})});Ce.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",updateDelay:void 0,resizeDelay:void 0,appendTo:void 0,shouldShow:null}},addCommands(){return{updateFloatingMenuPosition:()=>({tr:t,dispatch:e})=>(e&&t.setMeta("floatingMenu","updatePosition"),!0)}},addProseMirrorPlugins(){return this.options.element?[Fb({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,resizeDelay:this.options.resizeDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var dA=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},fA=({contentComponent:t})=>{const e=Ah.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return I.jsx(I.Fragment,{children:Object.values(e)})};function hA(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:wn.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}var pA=class extends N.Component{constructor(t){var e;super(t),this.editorContentRef=N.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=hA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return I.jsxs(I.Fragment,{children:[I.jsx("div",{ref:dA(e,this.editorContentRef),...n}),t?.contentComponent&&I.jsx(fA,{contentComponent:t.contentComponent})]})}},mA=N.forwardRef((t,e)=>{const n=N.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return N.createElement(pA,{key:n,innerRef:e,...t})}),Ub=N.memo(mA),gA=typeof window<"u"?N.useLayoutEffect:N.useEffect,bA=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function ud(t){var e;const[n]=N.useState(()=>new bA(t.editor)),r=mT.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:dT);return gA(()=>n.watch(t.editor),[t.editor,n]),N.useDebugValue(r),r}var Wb=process.env.NODE_ENV!=="production",dd=typeof window>"u",yA=dd||!!(typeof window<"u"&&window.next),wA=class wv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0){if(dd||yA){if(Wb)throw new Error("Tiptap Error: SSR has been detected, please set `immediatelyRender` explicitly to `false` to avoid hydration mismatches.");return null}return this.createEditor()}if(this.options.current.immediatelyRender&&dd&&Wb)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onBeforeCreate)==null?void 0:i.call(o,...r)},onBlur:(...r)=>{var o,i;return(i=(o=this.options.current).onBlur)==null?void 0:i.call(o,...r)},onCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onCreate)==null?void 0:i.call(o,...r)},onDestroy:(...r)=>{var o,i;return(i=(o=this.options.current).onDestroy)==null?void 0:i.call(o,...r)},onFocus:(...r)=>{var o,i;return(i=(o=this.options.current).onFocus)==null?void 0:i.call(o,...r)},onSelectionUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onSelectionUpdate)==null?void 0:i.call(o,...r)},onTransaction:(...r)=>{var o,i;return(i=(o=this.options.current).onTransaction)==null?void 0:i.call(o,...r)},onUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onUpdate)==null?void 0:i.call(o,...r)},onContentError:(...r)=>{var o,i;return(i=(o=this.options.current).onContentError)==null?void 0:i.call(o,...r)},onDrop:(...r)=>{var o,i;return(i=(o=this.options.current).onDrop)==null?void 0:i.call(o,...r)},onPaste:(...r)=>{var o,i;return(i=(o=this.options.current).onPaste)==null?void 0:i.call(o,...r)},onDelete:(...r)=>{var o,i;return(i=(o=this.options.current).onDelete)==null?void 0:i.call(o,...r)}};return new mC(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((o,i)=>{var s;return o===((s=n.extensions)==null?void 0:s[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?wv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function kA(t={},e=[]){const n=N.useRef(t);n.current=t;const[r]=N.useState(()=>new wA(n)),o=Ah.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return N.useDebugValue(o),N.useEffect(r.onRender(e)),ud({editor:o,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),o}var fd=N.createContext({editor:null});fd.Consumer;var Kb=()=>N.useContext(fd),qb=N.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Gb=()=>N.useContext(qb);function hd({as:t="div",...e}){const{nodeViewContentRef:n,nodeViewContentChildren:r}=Gb();return I.jsx(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style},children:r})}var va=N.forwardRef((t,e)=>{const{onDragStart:n}=Gb(),r=t.as||"div";return I.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function jb(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function Yb(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function EA(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function vA(t){if(jb(t)||Yb(t))return!0;if(EA(t)){const e=t.type;if(e)return jb(e)||Yb(e)}return!1}function NA(){try{if(N.version)return parseInt(N.version.split(".")[0],10)>=19}catch{}return!1}var xA=class{constructor(t,{editor:e,props:n={},as:r="div",className:o=""}){this.ref=null,this.destroyed=!1,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?wn.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.destroyed||this.render()})}render(){var t;if(this.destroyed)return;const e=this.component,n=this.props,r=this.editor,o=NA(),i=vA(e),s={...n};s.ref&&!(o||i)&&delete s.ref,!s.ref&&(o||i)&&(s.ref=a=>{this.ref=a}),this.reactElement=I.jsx(e,{...s}),(t=r?.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.destroyed||(this.props={...this.props,...t},this.render())}destroy(){var t;this.destroyed=!0;const e=this.editor;(t=e?.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};N.createContext({markViewContentRef:()=>{}});var SA=class extends CC{constructor(t,e,n){if(super(t,e,n),this.selectionRafId=null,this.cachedExtensionWithSyncedStorage=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}get extensionWithSyncedStorage(){if(!this.cachedExtensionWithSyncedStorage){const t=this.editor,e=this.extension;this.cachedExtensionWithSyncedStorage=new Proxy(e,{get(n,r,o){var i;return r==="storage"?(i=t.storage[e.name])!=null?i:{}:Reflect.get(n,r,o)}})}return this.cachedExtensionWithSyncedStorage}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extensionWithSyncedStorage,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:N.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},o=this.component,i=N.memo(l=>I.jsx(qb.Provider,{value:r,children:N.createElement(o,l)}));i.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new xA(i,{editor:this.editor,props:t,as:s,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(t,e,n){const r=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,i=this.decorations,s=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:o,oldDecorations:i,newNode:t,newDecorations:e,oldInnerDecorations:s,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n,extension:this.extensionWithSyncedStorage})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n,extension:this.extensionWithSyncedStorage})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=xo(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function pd(t,e){return n=>n.editor.contentComponent?new SA(t,n,e):{}}var CA=N.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:o,shouldShow:i=null,getReferencedVirtualElement:s,options:a,children:l,...c},u)=>{const d=N.useRef(document.createElement("div"));typeof u=="function"?u(d.current):u&&(u.current=d.current);const{editor:f}=Kb(),h=e||f,p={updateDelay:n,resizeDelay:r,appendTo:o,pluginKey:t,shouldShow:i,getReferencedVirtualElement:s,options:a},m=N.useRef(p);m.current=p;const[g,b]=N.useState(!1),w=N.useRef(!0);return N.useEffect(()=>{if(h?.isDestroyed)return;if(!h){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const E=d.current;E.style.visibility="hidden",E.style.position="absolute";const v=Hb({...m.current,editor:h,element:E});h.registerPlugin(v);const k=m.current.pluginKey;return w.current=!0,b(!0),()=>{b(!1),h.unregisterPlugin(k),window.requestAnimationFrame(()=>{E.parentNode&&E.parentNode.removeChild(E)})}},[h]),N.useEffect(()=>{if(!(!g||!h||h.isDestroyed)){if(w.current){w.current=!1;return}h.view.dispatch(h.state.tr.setMeta("bubbleMenu",{type:"updateOptions",options:m.current}))}},[g,h,n,r,i,a,o,s]),wn.createPortal(I.jsx("div",{...c,children:l}),d.current)}),TA=N.forwardRef(({pluginKey:t="floatingMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:o,shouldShow:i=null,options:s,children:a,...l},c)=>{const u=N.useRef(document.createElement("div"));typeof c=="function"?c(u.current):c&&(c.current=u.current);const{editor:d}=Kb(),f=e||d,h={updateDelay:n,resizeDelay:r,appendTo:o,pluginKey:t,shouldShow:i,options:s},p=N.useRef(h);p.current=h;const[m,g]=N.useState(!1),b=N.useRef(!0);return N.useEffect(()=>{if(f?.isDestroyed)return;if(!f){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const w=u.current;w.style.visibility="hidden",w.style.position="absolute";const E=Fb({...p.current,editor:f,element:w});f.registerPlugin(E);const v=p.current.pluginKey;return b.current=!0,g(!0),()=>{g(!1),f.unregisterPlugin(v),window.requestAnimationFrame(()=>{w.parentNode&&w.parentNode.removeChild(w)})}},[f]),N.useEffect(()=>{if(!(!m||!f||f.isDestroyed)){if(b.current){b.current=!1;return}f.view.dispatch(f.state.tr.setMeta("floatingMenu",{type:"updateOptions",options:p.current}))}},[m,f,n,r,i,s,o]),wn.createPortal(I.jsx("div",{...l,children:a}),u.current)}),md=N.createContext({editor:null,isReady:!1});md.displayName="TiptapContext";var Na=()=>N.useContext(md);function Xb({instance:t,children:e}){var n;const[r,o]=N.useState((n=t?.isInitialized)!=null?n:!1);N.useEffect(()=>{if(!t){o(!1);return}if(t.isInitialized){o(!0);return}const a=()=>{o(!0)};return t.on("create",a),()=>{t.off("create",a)}},[t]);const i=N.useMemo(()=>({editor:t,isReady:r}),[t,r]),s=N.useMemo(()=>({editor:t}),[t]);return I.jsx(fd.Provider,{value:s,children:I.jsx(md.Provider,{value:i,children:e})})}Xb.displayName="Tiptap";function Zb({...t}){const{editor:e}=Na();return I.jsx(Ub,{editor:e,...t})}Zb.displayName="Tiptap.Content";function Jb({children:t}){const{isReady:e}=Na();return e?null:t}Jb.displayName="Tiptap.Loading";function Qb({children:t,...e}){const{editor:n}=Na();return n?I.jsx(CA,{editor:n,...e,children:t}):null}Qb.displayName="Tiptap.BubbleMenu";function ey({children:t,...e}){const{editor:n}=Na();return n?I.jsx(TA,{...e,editor:n,children:t}):null}ey.displayName="Tiptap.FloatingMenu",Object.assign(Xb,{Content:Zb,Loading:Jb,BubbleMenu:Qb,FloatingMenu:ey});var xa=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},MA=/^\s*>\s$/,AA=tt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return xa("blockquote",{...Ie(this.options.HTMLAttributes,t),children:xa("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(o=>{const a=e.renderChildren([o]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[So({find:MA,type:this.type})]}}),_A=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,OA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,IA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,DA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,LA=on.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return xa("strong",{...Ie(this.options.HTMLAttributes,t),children:xa("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Kr({find:_A,type:this.type}),Kr({find:IA,type:this.type})]},addPasteRules(){return[hr({find:OA,type:this.type}),hr({find:DA,type:this.type})]}}),RA=/(^|[^`])`([^`]+)`(?!`)$/,PA=/(^|[^`])`([^`]+)`(?!`)/g,BA=on.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Kr({find:RA,type:this.type})]},addPasteRules(){return[hr({find:PA,type:this.type})]}}),gd=4,zA=/^```([a-z]+)?[\s\n]$/,$A=/^~~~([a-z]+)?[\s\n]$/,ty=tt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:gd,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ie(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const o=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${o}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${o}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:gd,{state:r}=t,{selection:o}=r,{$from:i,empty:s}=o;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return s?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=o,h=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(c,u,r.schema.text(h)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:gd,{state:r}=t,{selection:o}=r,{$from:i,empty:s}=o;return i.parent.type!==this.type?!1:s?t.commands.command(({tr:a})=>{var l;const{pos:c}=i,u=i.start(),d=i.end(),h=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let p=0,m=0;const g=c-u;for(let S=0;S<h.length;S+=1){if(m+h[S].length>=g){p=S;break}m+=h[S].length+1}const w=((l=h[p].match(/^ */))==null?void 0:l[0])||"",E=Math.min(w.length,n);if(E===0)return!0;let v=u;for(let S=0;S<p;S+=1)v+=h[S].length+1;return a.delete(v,v+E),c-v<=E&&a.setSelection(le.create(a.doc,v)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=o,f=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(h=>{var p;const m=((p=h.match(/^ */))==null?void 0:p[0])||"",g=Math.min(m.length,n);return h.slice(g)}).join(`
`);return a.replaceWith(l,c,r.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(fe.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[Du({find:zA,type:this.type,getAttributes:t=>({language:t[1]})}),Du({find:$A,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Se({key:new _e("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o?.mode;if(!n||!i)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(le.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),VA=ty,HA=tt.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),FA=tt.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ie(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),UA=tt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ie(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,o="#".repeat(r);return t.content?`${o} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Du({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),WA=tt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ie(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!yC(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,o=t();return xg(n)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({state:i,tr:s,dispatch:a})=>{if(a){const{$to:l}=s.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(le.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(ie.create(s.doc,l.pos)):s.setSelection(le.create(s.doc,l.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u?.create();d&&(s.insert(c,d),s.setSelection(le.create(s.doc,c+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Vg({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),KA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,qA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,GA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,jA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YA=on.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Kr({find:KA,type:this.type}),Kr({find:GA,type:this.type})]},addPasteRules(){return[hr({find:qA,type:this.type}),hr({find:jA,type:this.type})]}});const XA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ZA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",bd="numeric",yd="ascii",wd="alpha",Di="asciinumeric",Li="alphanumeric",kd="domain",ny="emoji",JA="scheme",QA="slashscheme",Ed="whitespace";function e_(t,e){return t in e||(e[t]=[]),e[t]}function Xr(t,e,n){e[bd]&&(e[Di]=!0,e[Li]=!0),e[yd]&&(e[Di]=!0,e[wd]=!0),e[Di]&&(e[Li]=!0),e[wd]&&(e[Li]=!0),e[Li]&&(e[kd]=!0),e[ny]&&(e[kd]=!0);for(const r in e){const o=e_(r,n);o.indexOf(t)<0&&o.push(t)}}function t_(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Rt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Rt.groups={},Rt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],i=e.jr[r][1];if(i&&o.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||Rt.groups;let o;return e&&e.j?o=e:(o=new Rt(e),n&&r&&Xr(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const i=t.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(t[s]);return o.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||Rt.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const i=e;let s,a=o.go(t);if(a?(s=new Rt,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Rt,i){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(t_(s.t,r),n);Xr(i,l,r)}else n&&Xr(i,n,r);s.t=i}return o.j[t]=s,s}};const ke=(t,e,n,r,o)=>t.ta(e,n,r,o),Je=(t,e,n,r,o)=>t.tr(e,n,r,o),ry=(t,e,n,r,o)=>t.ts(e,n,r,o),z=(t,e,n,r,o)=>t.tt(e,n,r,o),Un="WORD",vd="UWORD",oy="ASCIINUMERICAL",iy="ALPHANUMERICAL",Ri="LOCALHOST",Nd="TLD",xd="UTLD",Sa="SCHEME",Oo="SLASH_SCHEME",Sd="NUM",Cd="WS",Td="NL",Pi="OPENBRACE",Bi="CLOSEBRACE",Ca="OPENBRACKET",Ta="CLOSEBRACKET",Ma="OPENPAREN",Aa="CLOSEPAREN",_a="OPENANGLEBRACKET",Oa="CLOSEANGLEBRACKET",Ia="FULLWIDTHLEFTPAREN",Da="FULLWIDTHRIGHTPAREN",La="LEFTCORNERBRACKET",Ra="RIGHTCORNERBRACKET",Pa="LEFTWHITECORNERBRACKET",Ba="RIGHTWHITECORNERBRACKET",za="FULLWIDTHLESSTHAN",$a="FULLWIDTHGREATERTHAN",Va="AMPERSAND",Ha="APOSTROPHE",Fa="ASTERISK",br="AT",Ua="BACKSLASH",Wa="BACKTICK",Ka="CARET",yr="COLON",Md="COMMA",qa="DOLLAR",Cn="DOT",Ga="EQUALS",Ad="EXCLAMATION",Xt="HYPHEN",zi="PERCENT",ja="PIPE",Ya="PLUS",Xa="POUND",$i="QUERY",_d="QUOTE",sy="FULLWIDTHMIDDLEDOT",Od="SEMI",Tn="SLASH",Vi="TILDE",Za="UNDERSCORE",ay="EMOJI",Ja="SYM";var ly=Object.freeze({__proto__:null,ALPHANUMERICAL:iy,AMPERSAND:Va,APOSTROPHE:Ha,ASCIINUMERICAL:oy,ASTERISK:Fa,AT:br,BACKSLASH:Ua,BACKTICK:Wa,CARET:Ka,CLOSEANGLEBRACKET:Oa,CLOSEBRACE:Bi,CLOSEBRACKET:Ta,CLOSEPAREN:Aa,COLON:yr,COMMA:Md,DOLLAR:qa,DOT:Cn,EMOJI:ay,EQUALS:Ga,EXCLAMATION:Ad,FULLWIDTHGREATERTHAN:$a,FULLWIDTHLEFTPAREN:Ia,FULLWIDTHLESSTHAN:za,FULLWIDTHMIDDLEDOT:sy,FULLWIDTHRIGHTPAREN:Da,HYPHEN:Xt,LEFTCORNERBRACKET:La,LEFTWHITECORNERBRACKET:Pa,LOCALHOST:Ri,NL:Td,NUM:Sd,OPENANGLEBRACKET:_a,OPENBRACE:Pi,OPENBRACKET:Ca,OPENPAREN:Ma,PERCENT:zi,PIPE:ja,PLUS:Ya,POUND:Xa,QUERY:$i,QUOTE:_d,RIGHTCORNERBRACKET:Ra,RIGHTWHITECORNERBRACKET:Ba,SCHEME:Sa,SEMI:Od,SLASH:Tn,SLASH_SCHEME:Oo,SYM:Ja,TILDE:Vi,TLD:Nd,UNDERSCORE:Za,UTLD:xd,UWORD:vd,WORD:Un,WS:Cd});const Wn=/[a-z]/,Hi=new RegExp("\\p{L}","u"),Id=new RegExp("\\p{Emoji}","u"),Kn=/\d/,Dd=/\s/,cy="\r",Ld=`
`,n_="",r_="",Rd="";let Qa=null,el=null;function o_(t=[]){const e={};Rt.groups=e;const n=new Rt;Qa==null&&(Qa=dy(XA)),el==null&&(el=dy(ZA)),z(n,"'",Ha),z(n,"{",Pi),z(n,"}",Bi),z(n,"[",Ca),z(n,"]",Ta),z(n,"(",Ma),z(n,")",Aa),z(n,"<",_a),z(n,">",Oa),z(n,"",Ia),z(n,"",Da),z(n,"",La),z(n,"",Ra),z(n,"",Pa),z(n,"",Ba),z(n,"",za),z(n,"",$a),z(n,"&",Va),z(n,"*",Fa),z(n,"@",br),z(n,"`",Wa),z(n,"^",Ka),z(n,":",yr),z(n,",",Md),z(n,"$",qa),z(n,".",Cn),z(n,"=",Ga),z(n,"!",Ad),z(n,"-",Xt),z(n,"%",zi),z(n,"|",ja),z(n,"+",Ya),z(n,"#",Xa),z(n,"?",$i),z(n,'"',_d),z(n,"/",Tn),z(n,";",Od),z(n,"~",Vi),z(n,"_",Za),z(n,"\\",Ua),z(n,"",sy);const r=Je(n,Kn,Sd,{[bd]:!0});Je(r,Kn,r);const o=Je(r,Wn,oy,{[Di]:!0}),i=Je(r,Hi,iy,{[Li]:!0}),s=Je(n,Wn,Un,{[yd]:!0});Je(s,Kn,o),Je(s,Wn,s),Je(o,Kn,o),Je(o,Wn,o);const a=Je(n,Hi,vd,{[wd]:!0});Je(a,Wn),Je(a,Kn,i),Je(a,Hi,a),Je(i,Kn,i),Je(i,Wn),Je(i,Hi,i);const l=z(n,Ld,Td,{[Ed]:!0}),c=z(n,cy,Cd,{[Ed]:!0}),u=Je(n,Dd,Cd,{[Ed]:!0});z(n,Rd,u),z(c,Ld,l),z(c,Rd,u),Je(c,Dd,u),z(u,cy),z(u,Ld),Je(u,Dd,u),z(u,Rd,u);const d=Je(n,Id,ay,{[ny]:!0});z(d,"#"),Je(d,Id,d),z(d,n_,d);const f=z(d,r_);z(f,"#"),Je(f,Id,d);const h=[[Wn,s],[Kn,o]],p=[[Wn,null],[Hi,a],[Kn,i]];for(let m=0;m<Qa.length;m++)wr(n,Qa[m],Nd,Un,h);for(let m=0;m<el.length;m++)wr(n,el[m],xd,vd,p);Xr(Nd,{tld:!0,ascii:!0},e),Xr(xd,{utld:!0,alpha:!0},e),wr(n,"file",Sa,Un,h),wr(n,"mailto",Sa,Un,h),wr(n,"http",Oo,Un,h),wr(n,"https",Oo,Un,h),wr(n,"ftp",Oo,Un,h),wr(n,"ftps",Oo,Un,h),Xr(Sa,{scheme:!0,ascii:!0},e),Xr(Oo,{slashscheme:!0,ascii:!0},e),t=t.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<t.length;m++){const g=t[m][0],w=t[m][1]?{[JA]:!0}:{[QA]:!0};g.indexOf("-")>=0?w[kd]=!0:Wn.test(g)?Kn.test(g)?w[Di]=!0:w[yd]=!0:w[bd]=!0,ry(n,g,g,w)}return ry(n,"localhost",Ri,{ascii:!0}),n.jd=new Rt(Ja),{start:n,tokens:Object.assign({groups:e},ly)}}function uy(t,e){const n=i_(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[s].length,f++),c+=n[s].length,i+=n[s].length,s++;i-=d,s-=f,c-=d,o.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return o}function i_(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function wr(t,e,n,r,o){let i;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new Rt(r),i.jr=o.slice(),t.j[l]=i),t=i}return i=new Rt(n),i.jr=o.slice(),t.j[e[s-1]]=i,i}function dy(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let i=0;for(;o.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Fi={defaultProtocol:"http",events:null,format:fy,formatHref:fy,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Pd(t,e=null){let n=Object.assign({},Fi);t&&(n=Object.assign(n,t instanceof Pd?t.o:t));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}Pd.prototype={o:Fi,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:Fi[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function fy(t){return t}function hy(t,e){this.t="token",this.v=t,this.tk=e}hy.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Fi.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Object.assign(s,u),{tagName:o,attributes:s,content:i,eventListeners:d}}};function tl(t,e){class n extends hy{constructor(o,i){super(o,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const py=tl("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),my=tl("text"),s_=tl("nl"),nl=tl("url",{isLink:!0,toHref(t=Fi.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ri&&t[1].t===yr}}),Zt=t=>new Rt(t);function a_({groups:t}){const e=t.domain.concat([Va,Fa,br,Ua,Wa,Ka,qa,Ga,Xt,Sd,zi,ja,Ya,Xa,Tn,Ja,Vi,Za]),n=[Ha,yr,Md,Cn,Ad,zi,$i,_d,Od,_a,Oa,Pi,Bi,Ta,Ca,Ma,Aa,Ia,Da,La,Ra,Pa,Ba,za,$a],r=[Va,Ha,Fa,Ua,Wa,Ka,qa,Ga,Xt,Pi,Bi,zi,ja,Ya,Xa,$i,Tn,Ja,Vi,Za],o=Zt(),i=z(o,Vi);ke(i,r,i),ke(i,t.domain,i);const s=Zt(),a=Zt(),l=Zt();ke(o,t.domain,s),ke(o,t.scheme,a),ke(o,t.slashscheme,l),ke(s,r,i),ke(s,t.domain,s);const c=z(s,br);z(i,br,c),z(a,br,c),z(l,br,c);const u=z(i,Cn);ke(u,r,i),ke(u,t.domain,i);const d=Zt();ke(c,t.domain,d),ke(d,t.domain,d);const f=z(d,Cn);ke(f,t.domain,d);const h=Zt(py);ke(f,t.tld,h),ke(f,t.utld,h),z(c,Ri,h);const p=z(d,Xt);z(p,Xt,p),ke(p,t.domain,d),ke(h,t.domain,d),z(h,Cn,f),z(h,Xt,p);const m=z(h,yr);ke(m,t.numeric,py);const g=z(s,Xt),b=z(s,Cn);z(g,Xt,g),ke(g,t.domain,s),ke(b,r,i),ke(b,t.domain,s);const w=Zt(nl);ke(b,t.tld,w),ke(b,t.utld,w),ke(w,t.domain,s),ke(w,r,i),z(w,Cn,b),z(w,Xt,g),z(w,br,c);const E=z(w,yr),v=Zt(nl);ke(E,t.numeric,v);const k=Zt(nl),S=Zt();ke(k,e,k),ke(k,n,S),ke(S,e,k),ke(S,n,S),z(w,Tn,k),z(v,Tn,k);const C=z(a,yr),M=z(l,yr),A=z(M,Tn),D=z(A,Tn);ke(a,t.domain,s),z(a,Cn,b),z(a,Xt,g),ke(l,t.domain,s),z(l,Cn,b),z(l,Xt,g),ke(C,t.domain,k),z(C,Tn,k),z(C,$i,k),ke(D,t.domain,k),ke(D,e,k),z(D,Tn,k);const G=[[Pi,Bi],[Ca,Ta],[Ma,Aa],[_a,Oa],[Ia,Da],[La,Ra],[Pa,Ba],[za,$a]];for(let q=0;q<G.length;q++){const[X,H]=G[q],j=z(k,X);z(S,X,j),z(j,H,k);const K=Zt(nl);ke(j,e,K);const re=Zt();ke(j,n),ke(K,e,K),ke(K,n,re),ke(re,e,K),ke(re,n,re),z(K,H,k),z(re,H,k)}return z(o,Ri,w),z(o,Td,s_),{start:o,tokens:ly}}function l_(t,e,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,o++,u++;if(f<0)o-=u,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(Bd(my,e,s)),s=[]),o-=f,u-=f;const h=d.t,p=n.slice(o-u,o);i.push(Bd(h,e,p))}}return s.length>0&&i.push(Bd(my,e,s)),i}function Bd(t,e,n){const r=n[0].s,o=n[n.length-1].e,i=e.slice(r,o);return new t(i,n)}const c_=typeof console<"u"&&console&&console.warn||(()=>{}),u_="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",qe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function d_(){return Rt.groups={},qe.scanner=null,qe.parser=null,qe.tokenQueue=[],qe.pluginQueue=[],qe.customSchemes=[],qe.initialized=!1,qe}function gy(t,e=!1){if(qe.initialized&&c_(`linkifyjs: already initialized - will not register custom scheme "${t}" ${u_}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);qe.customSchemes.push([t,e])}function f_(){qe.scanner=o_(qe.customSchemes);for(let t=0;t<qe.tokenQueue.length;t++)qe.tokenQueue[t][1]({scanner:qe.scanner});qe.parser=a_(qe.scanner.tokens);for(let t=0;t<qe.pluginQueue.length;t++)qe.pluginQueue[t][1]({scanner:qe.scanner,parser:qe.parser});return qe.initialized=!0,qe}function zd(t){return qe.initialized||f_(),l_(qe.parser.start,t,uy(qe.scanner.start,t))}zd.scan=uy;function by(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Pd(n),o=zd(t),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var $d="[\0- -\u2029]",h_=new RegExp($d),p_=new RegExp(`${$d}$`),m_=new RegExp($d,"g");function g_(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function b_(t){return new Se({key:new _e("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=ug(n.doc,[...e]);if(Eg(a).forEach(({newRange:c})=>{const u=wS(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1)d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const h=r.doc.textBetween(c.from,c.to," "," ");if(!p_.test(h))return;d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&f){const h=f.split(h_).filter(Boolean);if(h.length<=0)return!1;const p=h[h.length-1],m=d.pos+f.lastIndexOf(p);if(!p)return!1;const g=zd(p).map(b=>b.toObject(t.defaultProtocol));if(!g_(g))return!1;g.filter(b=>b.isLink).map(b=>({...b,from:m+b.start+1,to:m+b.end+1})).filter(b=>r.schema.marks.code?!r.doc.rangeHasMark(b.from,b.to,r.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{Mu(b.from,b.to,r.doc).some(w=>w.mark.type===t.type)||s.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!s.steps.length)return s}})}function y_(t){return new Se({key:new _e("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,i;if(r.button!==0||!e.editable)return!1;let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{const l=r.target;if(!l)return!1;const c=t.editor.view.dom;s=l.closest("a"),s&&!c.contains(s)&&(s=null)}if(!s)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const l=kg(e.state,t.type.name),c=(o=s.href)!=null?o:l.href,u=(i=s.target)!=null?i:l.target;c&&(window.open(c,u),a=!0)}return a}}})}function w_(t){return new Se({key:new _e("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:o}=t,{state:i}=e,{selection:s}=i,{empty:a}=s;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=by(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||o!==void 0&&!o(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Zr(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(m_,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var yy=on.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){gy(t);return}gy(t.scheme,t.optionalSlashes)})},onDestroy(){d_()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Zr(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const o=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(o)||!/\./.test(o))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Zr(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Zr(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ie(this.options.HTMLAttributes,t),0]:["a",Ie(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Zr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Zr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[hr({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=by(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!Zr(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(b_({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Zr(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(y_({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(w_({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),k_=yy,E_=Object.defineProperty,v_=(t,e)=>{for(var n in e)E_(t,n,{get:e[n],enumerable:!0})},N_="listItem",wy="textStyle",ky=/^\s*([-+*])\s$/,Ey=tt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(N_,this.editor.getAttributes(wy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=So({find:ky,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=So({find:ky,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(wy),editor:this.editor})),[t]}}),vy=tt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(o=>o.type==="paragraph"))n=e.parseChildren(t.tokens);else{const o=t.tokens[0];if(o&&o.type==="text"&&o.tokens&&o.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(o.tokens)}],t.tokens.length>1){const s=t.tokens.slice(1),a=e.parseChildren(s);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Bu(t,e,r=>{var o,i;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((i=(o=r.meta)==null?void 0:o.parentAttrs)==null?void 0:i.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),x_={};v_(x_,{findListItemPos:()=>Ui,getNextListDepth:()=>Vd,handleBackspace:()=>Hd,handleDelete:()=>Fd,hasListBefore:()=>Ny,hasListItemAfter:()=>S_,hasListItemBefore:()=>xy,listItemHasSubList:()=>Sy,nextListIsDeeper:()=>Cy,nextListIsHigher:()=>Ty});var Ui=(t,e)=>{const{$from:n}=e.selection,r=rt(t,e.schema);let o=null,i=n.depth,s=n.pos,a=null;for(;i>0&&a===null;)o=n.node(i),o.type===r?a=i:(i-=1,s-=1);return a===null?null:{$pos:e.doc.resolve(s),depth:a}},Vd=(t,e)=>{const n=Ui(t,e);if(!n)return!1;const[,r]=TS(e,t,n.$pos.pos+4);return r},Ny=(t,e,n)=>{const{$anchor:r}=t.selection,o=Math.max(0,r.pos-2),i=t.doc.resolve(o).node();return!(!i||!n.includes(i.type.name))},xy=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-2);return!(o.index()===0||((n=o.nodeBefore)==null?void 0:n.type.name)!==t)},Sy=(t,e,n)=>{if(!n)return!1;const r=rt(t,e.schema);let o=!1;return n.descendants(i=>{i.type===r&&(o=!0)}),o},Hd=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!fr(t.state,e)&&Ny(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,h)=>{f.type.name===e&&c.push({node:f,pos:h})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!fr(t.state,e)||!OS(t.state))return!1;const r=Ui(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=Sy(e,t.state,i);return xy(e,t.state)&&!s?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Cy=(t,e)=>{const n=Vd(t,e),r=Ui(t,e);return!r||!n?!1:n>r.depth},Ty=(t,e)=>{const n=Vd(t,e),r=Ui(t,e);return!r||!n?!1:n<r.depth},Fd=(t,e)=>{if(!fr(t.state,e)||!_S(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:o}=n;return!n.empty&&r.sameParent(o)?!1:Cy(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():Ty(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},S_=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-r.parentOffset-2);return!(o.index()===o.parent.childCount-1||((n=o.nodeAfter)==null?void 0:n.type.name)!==t)},My=Ce.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Fd(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Fd(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Hd(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Hd(t,n,r)&&(e=!0)}),e}}}}),Ay=/^(\s*)(\d+)\.\s+(.*)$/,C_=/^\s/;function T_(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n],i=o.match(Ay);if(!i)break;const[,s,a,l]=i,c=s.length;let u=l,d=n+1;const f=[o];for(;d<t.length;){const h=t[d];if(h.match(Ay))break;if(h.trim()==="")f.push(h),u+=`
`,d+=1;else if(h.match(C_))f.push(h),u+=`
${h.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:f.join(`
`)}),r=d,n=d}return[e,r]}function _y(t,e,n){var r;const o=[];let i=0;for(;i<t.length;){const s=t[i];if(s.indent===e){const a=s.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const h=n.blockTokens(u);c.push(...h)}let d=i+1;const f=[];for(;d<t.length&&t[d].indent>e;)f.push(t[d]),d+=1;if(f.length>0){const h=Math.min(...f.map(m=>m.indent)),p=_y(f,h,n);c.push({type:"list",ordered:!0,start:f[0].number,items:p,raw:f.map(m=>m.raw).join(`
`)})}o.push({type:"list_item",raw:s.raw,tokens:c}),i=d}else i+=1}return o}function M_(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(o=>{if(o.type==="paragraph"||o.type==="list"||o.type==="blockquote"||o.type==="code")r.push(...e.parseChildren([o]));else if(o.type==="text"&&o.tokens){const i=e.parseChildren([o]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([o]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var A_="listItem",Oy="textStyle",Iy=/^(\d+)\.\s$/,Dy=tt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ie(this.options.HTMLAttributes,n),0]:["ol",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?M_(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const o=t.split(`
`),[i,s]=T_(o);if(i.length===0)return;const a=_y(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:o.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(A_,this.editor.getAttributes(Oy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=So({find:Iy,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=So({find:Iy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Oy)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),__=/^\s*(\[([( |x])?\])\s$/,Ly=tt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ie(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const o=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Bu(t,e,o)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const o=document.createElement("li"),i=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,h;a.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};c(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=n();if(typeof p!="number")return!1;const m=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...m?.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{o.setAttribute(d,f)}),o.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,s),o.append(i,l),Object.entries(e).forEach(([d,f])=>{o.setAttribute(d,f)});let u=new Set(Object.keys(e));return{dom:o,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;o.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,c(d);const f=r.extensionManager.attributes,h=xo(d,f),p=new Set(Object.keys(h)),m=this.options.HTMLAttributes;return u.forEach(g=>{p.has(g)||(g in m?o.setAttribute(g,m[g]):o.removeAttribute(g))}),Object.entries(h).forEach(([g,b])=>{b==null?g in m?o.setAttribute(g,m[g]):o.removeAttribute(g):o.setAttribute(g,b)}),u=p,!0}}}},addInputRules(){return[So({find:__,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Ry=tt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ie(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const s=Pu(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return s?[{type:"taskList",raw:s.raw,items:s.items}]:n.blockTokens(i)},o=Pu(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,s)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:s}),customNestedParser:r},n);if(o)return{type:"taskList",raw:o.raw,items:o.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ce.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Ey.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(vy.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(My.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Dy.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Ly.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Ry.configure(this.options.taskList)),t}});var Py="&nbsp;",O_="",I_=tt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ie(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===Py||r[0].text===O_)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?Py:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),D_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,L_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,R_=on.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Kr({find:D_,type:this.type})]},addPasteRules(){return[hr({find:L_,type:this.type})]}}),P_=tt.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),By=on.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ie(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const o=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!o)return;const i=o[2].trim();return{type:"underline",raw:o[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),B_=By;function z_(t={}){return new Se({view(e){return new $_(e,t)}})}class $_{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=d?p.bottom:p.top;d&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*a;r={left:p.left,right:p.right,top:m-g,bottom:m+g}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*s;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,h=d.height/l.offsetHeight;c=d.left-l.scrollLeft*f,u=d.top-l.scrollTop*h}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=pp(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Qe extends fe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Qe.valid(r)?new Qe(r):fe.near(r)}content(){return Y.empty}eq(e){return e instanceof Qe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Qe(e.resolve(n.pos))}getBookmark(){return new Ud(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!V_(e)||!H_(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Qe.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(Qe.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!ie.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(Qe.valid(a))return a}return null}}}Qe.prototype.visible=!1,Qe.findFrom=Qe.findGapCursorFrom,fe.jsonID("gapcursor",Qe);class Ud{constructor(e){this.pos=e}map(e){return new Ud(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Qe.valid(n)?new Qe(n):fe.near(n)}}function zy(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function V_(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||zy(o.type))return!0;if(o.inlineContent)return!1}}return!0}function H_(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||zy(o.type))return!0;if(o.inlineContent)return!1}}return!0}function F_(){return new Se({props:{decorations:q_,createSelectionBetween(t,e,n){return e.pos==n.pos&&Qe.valid(n)?new Qe(n):null},handleClick:W_,handleKeyDown:U_,handleDOMEvents:{beforeinput:K_}}})}const U_=bu({ArrowLeft:rl("horiz",-1),ArrowRight:rl("horiz",1),ArrowUp:rl("vert",-1),ArrowDown:rl("vert",1)});function rl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof le){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Qe.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Qe(c))),!0):!1}}function W_(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Qe.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&ie.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Qe(r))),!0)}function K_(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Qe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=R.empty;for(let s=r.length-1;s>=0;s--)o=R.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new Y(o,0,0));return i.setSelection(le.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function q_(t){if(!(t.selection instanceof Qe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ve.create(t.doc,[Fe.widget(t.selection.head,e,{key:"gapcursor"})])}var ol=200,ft=function(){};ft.prototype.append=function(e){return e.length?(e=ft.from(e),!this.length&&e||e.length<ol&&this.leafAppend(e)||this.length<ol&&e.leafPrepend(this)||this.appendInner(e)):this},ft.prototype.prepend=function(e){return e.length?ft.from(e).append(this):this},ft.prototype.appendInner=function(e){return new G_(this,e)},ft.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ft.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))},ft.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},ft.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)},ft.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o},ft.from=function(e){return e instanceof ft?e:e&&e.length?new $y(e):ft.empty};var $y=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=ol)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=ol)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(ft);ft.empty=new $y([]);var G_=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(ft);const j_=500;class hn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){o||(o=this.remapping(r,f+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new kr(d.map));let h=d.step.map(o.slice(i)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new kr(p,void 0,void 0,c.length+u.length))),i--,p&&o.appendMap(p,i)}else s.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(i)):d.selection,l=new hn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new kr(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(s++,n=void 0),o||(l=f)}let c=s-r.depth;return c>X_&&(a=Y_(a,c),s-=c),new hn(a.append(i),s)}remapping(e,n){let r=new hi;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new hn(this.items.append(e.map(n=>new kr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},o);let l=n;this.items.forEach(f=>{let h=i.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=i.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),g=f.selection&&f.selection.map(i.slice(l+1,h));g&&a++,r.push(new kr(p,m,g))}else r.push(new kr(p))},o);let c=[];for(let f=n;f<s;f++)c.push(new kr(i.maps[f]));let u=this.items.slice(0,o).append(c).append(r),d=new hn(u,a);return d.emptyItemCount()>j_&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new kr(c.invert(),l,u),f,h=o.length-1;(f=o.length&&o[h].merge(d))?o[h]=f:o.push(d)}}else s.map&&r--},this.items.length,0),new hn(ft.from(o.reverse()),i)}}hn.empty=new hn(ft.empty,0);function Y_(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let kr=class kv{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new kv(n.getMap().invert(),n,this.selection)}}};class Er{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const X_=20;function Z_(t,e,n,r){let o=n.getMeta(Jr),i;if(o)return o.historyState;n.getMeta(eO)&&(t=new Er(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Jr))return s.getMeta(Jr).redo?new Er(t.done.addTransform(n,void 0,r,il(e)),t.undone,Vy(n.mapping.maps),t.prevTime,t.prevComposition):new Er(t.done,t.undone.addTransform(n,void 0,r,il(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!J_(n,t.prevRanges)),c=s?Wd(t.prevRanges,n.mapping):Vy(n.mapping.maps);return new Er(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,il(e)),hn.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Er(t.done.rebased(n,i),t.undone.rebased(n,i),Wd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Er(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Wd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function J_(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function Vy(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function Wd(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function Q_(t,e,n){let r=il(e),o=Jr.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new Er(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Jr,{redo:n,historyState:l})}let Kd=!1,Hy=null;function il(t){let e=t.plugins;if(Hy!=e){Kd=!1,Hy=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Kd=!0;break}}return Kd}const Jr=new _e("history"),eO=new _e("closeHistory");function tO(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Se({key:Jr,state:{init(){return new Er(hn.empty,hn.empty,null,0,-1)},apply(e,n,r){return Z_(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?qd:r=="historyRedo"?Gd:null;return!o||!e.editable?!1:(n.preventDefault(),o(e.state,e.dispatch))}}}})}function Fy(t,e){return(n,r)=>{let o=Jr.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=Q_(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const qd=Fy(!1,!0),Gd=Fy(!0,!0);Ce.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Se({key:new _e("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const o=this.options.limit;if(o==null||o===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>o){const s=i-o,a=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${o} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const o=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||o>r&&i>r&&i<=o)return!0;if(o>r&&i>r&&i>o||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var nO=Ce.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[z_(this.options)]}});Ce.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Se({key:new _e("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=e,i=[];if(!n||!r)return ve.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(o>=c&&o<=c+l.nodeSize-1))return!1;s+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(o>=c&&o<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(Fe.node(c,c+l.nodeSize,{class:this.options.className}))}),ve.create(t,i)}}})]}});var rO=Ce.create({name:"gapCursor",addProseMirrorPlugins(){return[F_()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Pe(se(t,"allowGapCursor",n)))!=null?e:null}}}),Uy="placeholder";function oO(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var iO=Ce.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Uy,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${oO(this.options.dataAttribute)}`:`data-${Uy}`;return[new Se({key:new _e("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=n,i=[];if(!r)return null;const s=this.editor.isEmpty;return e.descendants((a,l)=>{const c=o>=l&&o<=l+a.nodeSize,u=!a.isLeaf&&ea(a);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const f=Fe.node(l,l+a.nodeSize,{class:d.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),ve.create(e,i)}}})]}});Ce.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Se({key:new _e("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||xg(n.selection)||t.view.dragging?null:ve.create(n.doc,[Fe.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Wy({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var sO=Ce.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new _e(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,o])=>o).filter(o=>(this.options.notAfter||[]).concat(n).includes(o.name));return[new Se({key:e,appendTransaction:(o,i,s)=>{const{doc:a,tr:l,schema:c}=s,u=e.getState(s),d=a.content.size,f=c.nodes[n];if(u)return l.insert(d,f.create())},state:{init:(o,i)=>{const s=i.tr.doc.lastChild;return!Wy({node:s,types:r})},apply:(o,i)=>{if(!o.docChanged||o.getMeta("__uniqueIDTransaction"))return i;const s=o.doc.lastChild;return!Wy({node:s,types:r})}}})]}}),aO=Ce.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>qd(t,e),redo:()=>({state:t,dispatch:e})=>Gd(t,e)}},addProseMirrorPlugins(){return[tO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),lO=Ce.create({name:"starterKit",addExtensions(){var t,e,n,r;const o=[];return this.options.bold!==!1&&o.push(LA.configure(this.options.bold)),this.options.blockquote!==!1&&o.push(AA.configure(this.options.blockquote)),this.options.bulletList!==!1&&o.push(Ey.configure(this.options.bulletList)),this.options.code!==!1&&o.push(BA.configure(this.options.code)),this.options.codeBlock!==!1&&o.push(ty.configure(this.options.codeBlock)),this.options.document!==!1&&o.push(HA.configure(this.options.document)),this.options.dropcursor!==!1&&o.push(nO.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&o.push(rO.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&o.push(FA.configure(this.options.hardBreak)),this.options.heading!==!1&&o.push(UA.configure(this.options.heading)),this.options.undoRedo!==!1&&o.push(aO.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&o.push(WA.configure(this.options.horizontalRule)),this.options.italic!==!1&&o.push(YA.configure(this.options.italic)),this.options.listItem!==!1&&o.push(vy.configure(this.options.listItem)),this.options.listKeymap!==!1&&o.push(My.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&o.push(yy.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&o.push(Dy.configure(this.options.orderedList)),this.options.paragraph!==!1&&o.push(I_.configure(this.options.paragraph)),this.options.strike!==!1&&o.push(R_.configure(this.options.strike)),this.options.text!==!1&&o.push(P_.configure(this.options.text)),this.options.underline!==!1&&o.push(By.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&o.push(sO.configure((r=this.options)==null?void 0:r.trailingNode)),o}}),cO=lO,uO=iO,dO=Ce.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),fO=dO,hO=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pO=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,mO=on.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ie(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const o=/^(==)([^=]+)(==)/.exec(t);if(o){const i=o[2].trim(),s=n.inlineTokens(i);return{type:"highlight",raw:o[0],text:i,tokens:s}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Kr({find:hO,type:this.type})]},addPasteRules(){return[hr({find:pO,type:this.type})]}}),gO=mO,Ky=tt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),o=r?r.split(",").map(i=>parseInt(i,10)):null;if(!o){const i=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),s=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(s&&s>-1&&i&&i[s]){const a=i[s].getAttribute("width");return a?[parseInt(a,10)]:null}}return o}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ie(this.options.HTMLAttributes,t),0]}}),qy=tt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ie(this.options.HTMLAttributes,t),0]}}),Gy=tt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ie(this.options.HTMLAttributes,t),0]}});function jd(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function jy(t,e,n,r,o,i){var s;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u!==null)for(let f=0,h=0;f<u.childCount;f+=1){const{colspan:p,colwidth:m}=u.child(f).attrs;for(let g=0;g<p;g+=1,h+=1){const b=o===h?i:m&&m[g],w=b?`${b}px`:"";if(a+=b||r,b||(l=!1),c){if(c.style.width!==w){const[E,v]=jd(r,b);c.style.setProperty(E,v)}c=c.nextSibling}else{const E=document.createElement("col"),[v,k]=jd(r,b);E.style.setProperty(v,k),e.appendChild(E)}}}for(;c;){const f=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=f}const d=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);l&&!d?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var bO=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),jy(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,jy(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function yO(t,e,n,r){let o=0,i=!0;const s=[],a=t.firstChild;if(!a)return{};for(let d=0,f=0;d<a.childCount;d+=1){const{colspan:h,colwidth:p}=a.child(d).attrs;for(let m=0;m<h;m+=1,f+=1){const g=n===f?r:p&&p[m];o+=g||e,g||(i=!1);const[b,w]=jd(e,g);s.push(["col",{style:`${b}: ${w}`}])}}const l=i?`${o}px`:"",c=i?"":`${o}px`;return{colgroup:["colgroup",{},...s],tableWidth:l,tableMinWidth:c}}function Yy(t,e){return t.createAndFill()}function wO(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function kO(t,e,n,r,o){const i=wO(t),s=[],a=[];for(let c=0;c<n;c+=1){const u=Yy(i.cell);if(u&&a.push(u),r){const d=Yy(i.header_cell);d&&s.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(i.row.createChecked(null,r&&c===0?s:a));return i.table.createChecked(null,l)}function EO(t){return t instanceof Ue}var sl=({editor:t})=>{const{selection:e}=t.state;if(!EO(e))return!1;let n=0;const r=dg(e.ranges[0].$from,i=>i.type.name==="table");return r?.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},vO="";function NO(t){return(t||"").replace(/\s+/g," ").trim()}function xO(t,e,n={}){var r;const o=(r=n.cellLineSeparator)!=null?r:vO;if(!t||!t.content||t.content.length===0)return"";const i=[];t.content.forEach(p=>{const m=[];p.content&&p.content.forEach(g=>{let b="";g.content&&Array.isArray(g.content)&&g.content.length>1?b=g.content.map(k=>e.renderChildren(k)).join(o):b=g.content?e.renderChildren(g.content):"";const w=NO(b),E=g.type==="tableHeader";m.push({text:w,isHeader:E})}),i.push(m)});const s=i.reduce((p,m)=>Math.max(p,m.length),0);if(s===0)return"";const a=new Array(s).fill(0);i.forEach(p=>{var m;for(let g=0;g<s;g+=1){const w=(((m=p[g])==null?void 0:m.text)||"").length;w>a[g]&&(a[g]=w),a[g]<3&&(a[g]=3)}});const l=(p,m)=>p+" ".repeat(Math.max(0,m-p.length)),c=i[0],u=c.some(p=>p.isHeader);let d=`
`;const f=new Array(s).fill(0).map((p,m)=>u&&c[m]&&c[m].text||"");return d+=`| ${f.map((p,m)=>l(p,a[m])).join(" | ")} |
`,d+=`| ${a.map(p=>"-".repeat(Math.max(3,p))).join(" | ")} |
`,(u?i.slice(1):i).forEach(p=>{d+=`| ${new Array(s).fill(0).map((m,g)=>l(p[g]&&p[g].text||"",a[g])).join(" | ")} |
`}),d}var SO=xO,Xy=tt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:bO,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:o}=yO(t,this.options.cellMinWidth),i=e.style;function s(){return i||(r?`width: ${r}`:`min-width: ${o}`)}const a=["table",Ie(this.options.HTMLAttributes,e,{style:s()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},a]:a},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(o=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(o.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const o=[];r.forEach(i=>{o.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},o))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>SO(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:i})=>{const s=kO(i.schema,t,e,n);if(o){const a=r.selection.from+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(le.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>CM(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>TM(t,e),deleteColumn:()=>({state:t,dispatch:e})=>AM(t,e),addRowBefore:()=>({state:t,dispatch:e})=>OM(t,e),addRowAfter:()=>({state:t,dispatch:e})=>IM(t,e),deleteRow:()=>({state:t,dispatch:e})=>LM(t,e),deleteTable:()=>({state:t,dispatch:e})=>HM(t,e),mergeCells:()=>({state:t,dispatch:e})=>Mb(t,e),splitCell:()=>({state:t,dispatch:e})=>Ab(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Ii("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Ii("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>$M(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>Mb(t,e)?!0:Ab(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>BM(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>Ob(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>Ob(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&xb(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=Ue.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:sl,"Mod-Backspace":sl,Delete:sl,"Mod-Delete":sl}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[ZM({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],aA({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Pe(se(t,"tableRole",e))}}});Ce.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(Xy.configure(this.options.table)),this.options.tableCell!==!1&&t.push(Ky.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(qy.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(Gy.configure(this.options.tableRow)),t}});var CO=Gy,TO=Ky,MO=qy;const AO=new _e("tableCellMenu");let Zy=!1,al=null;function _O(){Zy||(Zy=!0,document.addEventListener("mouseover",t=>{const n=t.target.closest("td, th");if(n&&n.closest(".ProseMirror")){const r=n.querySelector(".table-cell-menu-btn");r&&(r.style.opacity="1")}},!0),document.addEventListener("mouseout",t=>{const e=t.target,n=t.relatedTarget,r=e.closest("td, th");if(r&&r.closest(".ProseMirror")){if(n&&r.contains(n)||document.querySelector(".table-cell-menu-dropdown"))return;const i=r.querySelector(".table-cell-menu-btn");i&&(i.style.opacity="0.15")}},!0))}function OO(t){return _O(),new Se({key:AO,state:{init(){return ve.empty},apply(e,n,r,o){return!e.docChanged&&al?al.map(e.mapping,e.doc):(al=IO(o.doc,t),al)}},props:{decorations(e){return this.getState(e)}}})}function IO(t,e){const n=[];return t.descendants((r,o)=>{if(r.type.name==="tableCell"||r.type.name==="tableHeader"){const i=Fe.widget(o+1,s=>{const a=document.createElement("div");a.className="table-cell-menu-wrapper ProseMirror-widget",a.setAttribute("contenteditable","false"),a.style.cssText="position:absolute;top:2px;right:2px;z-index:50;pointer-events:auto;";const l=document.createElement("button");l.className="table-cell-menu-btn",l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1.5"/><circle cx="12" cy="5" r="1.5"/><circle cx="12" cy="19" r="1.5"/></svg>',l.title="Table options",l.type="button";const c=document.documentElement.classList.contains("dark"),u=c?"rgba(30,30,30,0.95)":"rgba(255,255,255,0.95)",d=c?"rgba(60,60,60,0.5)":"rgba(200,200,200,0.5)",f=c?"#999":"#666",h=c?"#2a2a2a":"#f5f5f5";return l.style.cssText="width:18px;height:18px;display:flex;align-items:center;justify-content:center;background:"+u+";border:1px solid "+d+";border-radius:4px;cursor:pointer;opacity:0.15;transition:opacity 0.15s ease,background-color 0.15s ease,transform 0.1s ease;color:"+f+";pointer-events:auto;padding:0;",l.addEventListener("mouseenter",()=>{l.style.opacity="1",l.style.background=h,l.style.transform="scale(1.05)"}),l.addEventListener("mouseleave",()=>{document.querySelector(".table-cell-menu-dropdown"),l.style.background=u,l.style.transform="scale(1)"}),l.addEventListener("click",p=>{p.preventDefault(),p.stopPropagation();const m=l.getBoundingClientRect();e.chain().focus().setTextSelection(o+1).run(),DO(p,e,o,m)}),a.appendChild(l),a},{side:-1,key:"menu-"+o});n.push(i)}}),ve.create(t,n)}function DO(t,e,n,r){const o=document.querySelector(".table-cell-menu-dropdown");o&&o.remove();const i=document.createElement("div");i.className="table-cell-menu-dropdown";const s=170,a=280;let l=Math.max(0,Math.min(r.top,window.innerHeight)),c=Math.max(0,Math.min(r.bottom,window.innerHeight)),u=Math.max(0,Math.min(r.left,window.innerWidth)),d=c+4,f=u-s+r.width+8;f+s>window.innerWidth-12&&(f=window.innerWidth-s-12),f<12&&(f=12),d+a>window.innerHeight-12&&(d=l-a-4),d<12&&(d=12),d+a>window.innerHeight-12&&(d=window.innerHeight-a-12);const h=document.documentElement.classList.contains("dark"),p=h?"#1f1f1f":"#ffffff",m=h?"#3a3a3a":"#e5e5e5",g=h?"#e5e5e5":"#333333";i.style.cssText="position:fixed;top:"+d+"px;left:"+f+"px;z-index:99999;display:flex;flex-direction:column;gap:2px;min-width:170px;max-width:220px;width:auto;padding:6px;background:"+p+";border:1px solid "+m+";border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.15),0 2px 6px rgba(0,0,0,0.1);color:"+g+";font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;pointer-events:auto;";const b=[{label:"Insert Column Left",icon:"col-left",action:()=>e.chain().focus().setTextSelection(n+1).addColumnBefore().run()},{label:"Insert Column Right",icon:"col-right",action:()=>e.chain().focus().setTextSelection(n+1).addColumnAfter().run()},{label:"Insert Row Above",icon:"row-up",action:()=>e.chain().focus().setTextSelection(n+1).addRowBefore().run()},{label:"Insert Row Below",icon:"row-down",action:()=>e.chain().focus().setTextSelection(n+1).addRowAfter().run()},{label:"divider"},{label:"Delete Column",icon:"delete",action:()=>e.chain().focus().setTextSelection(n+1).deleteColumn().run(),destructive:!0},{label:"Delete Row",icon:"delete",action:()=>e.chain().focus().setTextSelection(n+1).deleteRow().run(),destructive:!0},{label:"Delete Table",icon:"table-delete",action:()=>e.chain().focus().setTextSelection(n+1).deleteTable().run(),destructive:!0},{label:"divider"},{label:"Copy Table",icon:"copy",action:()=>LO(e)}],w={"col-left":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/><path d="M9 12H3m0 0l2-2m-2 2l2 2"/></svg>',"col-right":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/><path d="M15 12h6m0 0l-2-2m2 2l-2 2"/></svg>',"row-up":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="6" width="18" height="12" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 9V3m0 0l-2 2m2-2l2 2"/></svg>',"row-down":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="6" width="18" height="12" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 15v6m0 0l-2-2m2 2l2-2"/></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>',"table-delete":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="21" y1="15" x2="15" y2="21"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>'},E=h?"#2a2a2a":"#f5f5f5",v=h?"#ff6b6b":"#dc2626",k=h?"#999999":"#666666",S=h?"#333333":"#e5e5e5";b.forEach(A=>{if(A.label==="divider"){const D=document.createElement("div");D.style.cssText="height:1px;background:"+S+";margin:4px 0;",i.appendChild(D)}else{const D=document.createElement("button");D.type="button";const G=A.destructive?v:g;D.style.cssText="display:flex;align-items:center;gap:10px;width:100%;padding:8px 10px;font-size:13px;font-weight:450;color:"+G+";background:transparent;border:none;border-radius:5px;cursor:pointer;text-align:left;transition:background 0.15s ease;pointer-events:auto;";const q=w[A.icon||""]||"",X=A.destructive?v:k;D.innerHTML='<span style="display:flex;align-items:center;justify-content:center;width:16px;height:16px;flex-shrink:0;color:'+X+';">'+q+'</span><span style="flex:1;white-space:nowrap;">'+A.label+"</span>",D.addEventListener("mouseenter",()=>{D.style.background=A.destructive?h?"rgba(255,107,107,0.15)":"rgba(220,38,38,0.1)":E}),D.addEventListener("mouseleave",()=>{D.style.background="transparent"}),D.addEventListener("click",H=>{H.preventDefault(),H.stopPropagation(),A.action&&A.action(),i.remove()}),i.appendChild(D)}}),document.body.appendChild(i);const C=A=>{const D=A.target;if(i.contains(D)||D.classList.contains("table-cell-menu-btn"))return;const G=D.closest('[role="dialog"]');G&&G.contains(i)||(i.remove(),document.removeEventListener("mousedown",C),document.removeEventListener("keydown",M))},M=A=>{A.key==="Escape"&&(i.remove(),document.removeEventListener("mousedown",C),document.removeEventListener("keydown",M))};setTimeout(()=>{document.addEventListener("mousedown",C),document.addEventListener("keydown",M)},0)}function LO(t){const{state:e}=t,{selection:n}=e;let r=null;if(e.doc.descendants((o,i)=>{if(o.type.name==="table"&&i<=n.from&&i+o.nodeSize>=n.to)return r=o,!1}),r){const o=s=>{if(s.type.name==="table")return"<table>"+s.content.content.map(o).join("")+"</table>";if(s.type.name==="tableRow")return"<tr>"+s.content.content.map(o).join("")+"</tr>";if(s.type.name==="tableCell"){const a=s.attrs,l=a.colspan>1?' colspan="'+a.colspan+'"':"",c=a.rowspan>1?' rowspan="'+a.rowspan+'"':"";return"<td"+l+c+">"+s.textContent+"</td>"}if(s.type.name==="tableHeader"){const a=s.attrs,l=a.colspan>1?' colspan="'+a.colspan+'"':"",c=a.rowspan>1?' rowspan="'+a.rowspan+'"':"";return"<th"+l+c+">"+s.textContent+"</th>"}return s.textContent||""},i=o(r);navigator.clipboard.writeText(i).then(()=>{const s=document.createElement("div");s.className="tcm-toast",s.textContent="Table copied to clipboard",s.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:white;padding:10px 20px;border-radius:6px;font-size:13px;z-index:99999;animation:fadeInOut 2s ease-in-out forwards;",document.body.appendChild(s),setTimeout(()=>s.remove(),2e3)})}}const RO=TO.extend({addProseMirrorPlugins(){return[...this.parent?.()||[],OO(this.editor)]}}),PO=MO.extend({}),Wi=new _e("tableSorting");let Qr=null,Ki=null;function BO(t){const e=parseFloat(t.replace(/[,$%]/g,""));if(!isNaN(e)&&t.match(/^[\d,.$%\-+]+$/))return{type:"number",value:e};const n=[/^\d{4}-\d{2}-\d{2}/,/^\d{1,2}\/\d{1,2}\/\d{2,4}/,/^\d{1,2}-\d{1,2}-\d{2,4}/];for(const r of n)if(r.test(t)){const o=new Date(t);if(!isNaN(o.getTime()))return{type:"date",value:o}}return{type:"string",value:t.toLowerCase()}}function zO(t,e,n){let r=0;return t.type==="number"&&e.type==="number"?r=t.value-e.value:t.type==="date"&&e.type==="date"?r=t.value.getTime()-e.value.getTime():r=String(t.value).localeCompare(String(e.value)),n==="asc"?r:-r}function $O(t,e,n){const{state:r,view:o}=t;let i=null;if(r.doc.nodesBetween(e,e+1,(p,m)=>{if(p.type.name==="table"&&m===e)return i=p,!1}),!i){console.log("Table not found at position",e);return}const s=Qr?.tablePos===e&&Qr?.columnIndex===n&&Qr?.direction==="asc"?"desc":"asc";Qr={tablePos:e,columnIndex:n,direction:s},Ki=null;const a=[];i.forEach(p=>{if(p.type.name==="tableRow"){let m=!1;p.forEach(g=>{g.type.name==="tableHeader"&&(m=!0)}),a.push({node:p,isHeader:m})}});const l=a.filter(p=>p.isHeader),c=a.filter(p=>!p.isHeader);if(c.length<2){Jy(n,s),o.dispatch(r.tr.setMeta(Wi,{updated:!0}));return}const u=c.map(p=>{let m="",g=0;return p.node.forEach(b=>{g===n&&(m=b.textContent||""),g++}),{...p,sortValue:BO(m)}}),d=u.map((p,m)=>m);u.sort((p,m)=>zO(p.sortValue,m.sortValue,s));const f=u.map((p,m)=>c.indexOf(p));if(d.some((p,m)=>p!==f[m])){const p=[];l.forEach(b=>p.push(b.node)),u.forEach(b=>p.push(b.node));const m=i.type.create(i.attrs,p),{tr:g}=r;g.replaceWith(e,e+i.nodeSize,m),g.setMeta(Wi,{updated:!0}),o.dispatch(g)}else o.dispatch(r.tr.setMeta(Wi,{updated:!0}));Jy(n,s)}function Jy(t,e){const n=document.querySelector(".table-sort-toast");n&&n.remove();const r=document.createElement("div");r.className="table-sort-toast";const o=e==="asc"?"ascending":"descending",i=e==="asc"?"":"";r.innerHTML='<span style="margin-right:6px;">'+i+"</span> Sorted column "+(t+1)+" "+o;const s=document.documentElement.classList.contains("dark");r.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:"+(s?"rgba(30,30,30,0.95)":"rgba(255,255,255,0.95)")+";color:"+(s?"#e5e5e5":"#333")+";padding:10px 20px;border-radius:8px;font-size:13px;font-weight:500;z-index:99999;box-shadow:0 4px 12px rgba(0,0,0,0.15);border:1px solid "+(s?"#3a3a3a":"#e5e5e5")+";animation:sortToastIn 0.2s ease;",document.body.appendChild(r),setTimeout(()=>{r.style.animation="sortToastOut 0.2s ease forwards",setTimeout(()=>r.remove(),200)},1500)}function VO(t,e,n,r){const o=document.createElement("span");o.className="table-sort-btn-inline",o.setAttribute("contenteditable","false"),o.style.cssText="display:inline-flex;align-items:center;margin-left:4px;vertical-align:middle;pointer-events:auto;";const i=document.createElement("button");i.className="table-sort-btn",i.setAttribute("contenteditable","false"),i.type="button";const s=document.documentElement.classList.contains("dark"),a=s?"#60a5fa":"#3b82f6",l=s?"#666":"#aaa",c=s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)";return i.style.cssText="display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;padding:0;font-size:10px;color:"+(t?a:l)+";background:transparent;border:none;border-radius:3px;cursor:pointer;user-select:none;transition:all 0.15s ease;opacity:"+(t?"1":"0.5")+";pointer-events:auto;vertical-align:middle;",i.addEventListener("mouseenter",()=>{i.style.background=c,i.style.opacity="1",i.style.color=a}),i.addEventListener("mouseleave",()=>{i.style.background="transparent",i.style.opacity=t?"1":"0.5",i.style.color=t?a:l}),i.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),$O(r,e,n)}),t==="asc"?(i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>',i.title="Sorted ascending - Click to sort descending"):t==="desc"?(i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12l7 7 7-7"/></svg>',i.title="Sorted descending - Click to sort ascending"):(i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 15l5 5 5-5M7 9l5-5 5 5"/></svg>',i.title="Click to sort this column"),o.appendChild(i),o}function HO(t){return new Se({key:Wi,state:{init(){return ve.empty},apply(e,n,r,o){const i=e.getMeta(Wi);return!e.docChanged&&!i?.updated&&Ki?Ki.map(e.mapping,e.doc):(Ki=FO(o.doc,t),Ki)}},props:{decorations(e){return this.getState(e)}}})}function FO(t,e){const n=[];return t.descendants((r,o)=>{if(r.type.name==="table"){const i=o;r.forEach((s,a)=>{if(s.type.name==="tableRow"){let l=0,c=0;s.forEach((u,d)=>{if(u.type.name==="tableHeader"){const f=o+1+a+1+c;let h=f+1;u.forEach((E,v)=>{E.type.name==="paragraph"&&(h=f+1+v+E.nodeSize-1)});const m=Qr?.tablePos===i&&Qr?.columnIndex===l?Qr.direction:null,g=l,b=i,w=Fe.widget(h,()=>VO(m,b,g,e),{side:1,key:"sort-"+i+"-"+g});n.push(w)}c+=u.nodeSize,l++})}})}}),ve.create(t,n)}const UO=Ce.create({name:"tableSorting",addProseMirrorPlugins(){return[HO(this.editor)]}});var WO=Ry,KO=Ly,qO=on.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),GO=qO,jO=on.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),YO=jO,XO=t=>Xe({find:/--$/,replace:t??""}),ZO=t=>Xe({find:/\.\.\.$/,replace:t??""}),JO=t=>Xe({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:t??""}),QO=t=>Xe({find:/"$/,replace:t??""}),eI=t=>Xe({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:t??""}),tI=t=>Xe({find:/'$/,replace:t??""}),nI=t=>Xe({find:/<-$/,replace:t??""}),rI=t=>Xe({find:/->$/,replace:t??""}),oI=t=>Xe({find:/\(c\)$/,replace:t??""}),iI=t=>Xe({find:/\(tm\)$/,replace:t??""}),sI=t=>Xe({find:/\(sm\)$/,replace:t??""}),aI=t=>Xe({find:/\(r\)$/,replace:t??""}),lI=t=>Xe({find:/(?:^|\s)(1\/2)\s$/,replace:t??""}),cI=t=>Xe({find:/\+\/-$/,replace:t??""}),uI=t=>Xe({find:/!=$/,replace:t??""}),dI=t=>Xe({find:/<<$/,replace:t??""}),fI=t=>Xe({find:/>>$/,replace:t??""}),hI=t=>Xe({find:/\d+\s?([*x])\s?\d+$/,replace:t??""}),pI=t=>Xe({find:/\^2$/,replace:t??""}),mI=t=>Xe({find:/\^3$/,replace:t??""}),gI=t=>Xe({find:/(?:^|\s)(1\/4)\s$/,replace:t??""}),bI=t=>Xe({find:/(?:^|\s)(3\/4)\s$/,replace:t??""}),yI=Ce.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const t=[];return this.options.emDash!==!1&&t.push(XO(this.options.emDash)),this.options.ellipsis!==!1&&t.push(ZO(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&t.push(JO(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&t.push(QO(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&t.push(eI(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&t.push(tI(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&t.push(nI(this.options.leftArrow)),this.options.rightArrow!==!1&&t.push(rI(this.options.rightArrow)),this.options.copyright!==!1&&t.push(oI(this.options.copyright)),this.options.trademark!==!1&&t.push(iI(this.options.trademark)),this.options.servicemark!==!1&&t.push(sI(this.options.servicemark)),this.options.registeredTrademark!==!1&&t.push(aI(this.options.registeredTrademark)),this.options.oneHalf!==!1&&t.push(lI(this.options.oneHalf)),this.options.plusMinus!==!1&&t.push(cI(this.options.plusMinus)),this.options.notEqual!==!1&&t.push(uI(this.options.notEqual)),this.options.laquo!==!1&&t.push(dI(this.options.laquo)),this.options.raquo!==!1&&t.push(fI(this.options.raquo)),this.options.multiplication!==!1&&t.push(hI(this.options.multiplication)),this.options.superscriptTwo!==!1&&t.push(pI(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&t.push(mI(this.options.superscriptThree)),this.options.oneQuarter!==!1&&t.push(gI(this.options.oneQuarter)),this.options.threeQuarters!==!1&&t.push(bI(this.options.threeQuarters)),t}}),wI=yI,Yd,Qy;function kI(){if(Qy)return Yd;Qy=1;function t(T){return T instanceof Map?T.clear=T.delete=T.set=function(){throw new Error("map is read-only")}:T instanceof Set&&(T.add=T.clear=T.delete=function(){throw new Error("set is read-only")}),Object.freeze(T),Object.getOwnPropertyNames(T).forEach(L=>{const W=T[L],me=typeof W;(me==="object"||me==="function")&&!Object.isFrozen(W)&&t(W)}),T}class e{constructor(L){L.data===void 0&&(L.data={}),this.data=L.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(T){return T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(T,...L){const W=Object.create(null);for(const me in T)W[me]=T[me];return L.forEach(function(me){for(const je in me)W[je]=me[je]}),W}const o="</span>",i=T=>!!T.scope,s=(T,{prefix:L})=>{if(T.startsWith("language:"))return T.replace("language:","language-");if(T.includes(".")){const W=T.split(".");return[`${L}${W.shift()}`,...W.map((me,je)=>`${me}${"_".repeat(je+1)}`)].join(" ")}return`${L}${T}`};class a{constructor(L,W){this.buffer="",this.classPrefix=W.classPrefix,L.walk(this)}addText(L){this.buffer+=n(L)}openNode(L){if(!i(L))return;const W=s(L.scope,{prefix:this.classPrefix});this.span(W)}closeNode(L){i(L)&&(this.buffer+=o)}value(){return this.buffer}span(L){this.buffer+=`<span class="${L}">`}}const l=(T={})=>{const L={children:[]};return Object.assign(L,T),L};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(L){this.top.children.push(L)}openNode(L){const W=l({scope:L});this.add(W),this.stack.push(W)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(L){return this.constructor._walk(L,this.rootNode)}static _walk(L,W){return typeof W=="string"?L.addText(W):W.children&&(L.openNode(W),W.children.forEach(me=>this._walk(L,me)),L.closeNode(W)),L}static _collapse(L){typeof L!="string"&&L.children&&(L.children.every(W=>typeof W=="string")?L.children=[L.children.join("")]:L.children.forEach(W=>{c._collapse(W)}))}}class u extends c{constructor(L){super(),this.options=L}addText(L){L!==""&&this.add(L)}startScope(L){this.openNode(L)}endScope(){this.closeNode()}__addSublanguage(L,W){const me=L.root;W&&(me.scope=`language:${W}`),this.add(me)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function d(T){return T?typeof T=="string"?T:T.source:null}function f(T){return m("(?=",T,")")}function h(T){return m("(?:",T,")*")}function p(T){return m("(?:",T,")?")}function m(...T){return T.map(W=>d(W)).join("")}function g(T){const L=T[T.length-1];return typeof L=="object"&&L.constructor===Object?(T.splice(T.length-1,1),L):{}}function b(...T){return"("+(g(T).capture?"":"?:")+T.map(me=>d(me)).join("|")+")"}function w(T){return new RegExp(T.toString()+"|").exec("").length-1}function E(T,L){const W=T&&T.exec(L);return W&&W.index===0}const v=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function k(T,{joinWith:L}){let W=0;return T.map(me=>{W+=1;const je=W;let Ye=d(me),oe="";for(;Ye.length>0;){const Z=v.exec(Ye);if(!Z){oe+=Ye;break}oe+=Ye.substring(0,Z.index),Ye=Ye.substring(Z.index+Z[0].length),Z[0][0]==="\\"&&Z[1]?oe+="\\"+String(Number(Z[1])+je):(oe+=Z[0],Z[0]==="("&&W++)}return oe}).map(me=>`(${me})`).join(L)}const S=/\b\B/,C="[a-zA-Z]\\w*",M="[a-zA-Z_]\\w*",A="\\b\\d+(\\.\\d+)?",D="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",G="\\b(0b[01]+)",q="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",X=(T={})=>{const L=/^#![ ]*\//;return T.binary&&(T.begin=m(L,/.*\b/,T.binary,/\b.*/)),r({scope:"meta",begin:L,end:/$/,relevance:0,"on:begin":(W,me)=>{W.index!==0&&me.ignoreMatch()}},T)},H={begin:"\\\\[\\s\\S]",relevance:0},j={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[H]},K={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[H]},re={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},_=function(T,L,W={}){const me=r({scope:"comment",begin:T,end:L,contains:[]},W);me.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const je=b("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return me.contains.push({begin:m(/[ ]+/,"(",je,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),me},V=_("//","$"),O=_("/\\*","\\*/"),$=_("#","$"),Q={scope:"number",begin:A,relevance:0},ce={scope:"number",begin:D,relevance:0},Te={scope:"number",begin:G,relevance:0},Oe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[H,{begin:/\[/,end:/\]/,relevance:0,contains:[H]}]},Ge={scope:"title",begin:C,relevance:0},he={scope:"title",begin:M,relevance:0},at={begin:"\\.\\s*"+M,relevance:0};var wt=Object.freeze({__proto__:null,APOS_STRING_MODE:j,BACKSLASH_ESCAPE:H,BINARY_NUMBER_MODE:Te,BINARY_NUMBER_RE:G,COMMENT:_,C_BLOCK_COMMENT_MODE:O,C_LINE_COMMENT_MODE:V,C_NUMBER_MODE:ce,C_NUMBER_RE:D,END_SAME_AS_BEGIN:function(T){return Object.assign(T,{"on:begin":(L,W)=>{W.data._beginMatch=L[1]},"on:end":(L,W)=>{W.data._beginMatch!==L[1]&&W.ignoreMatch()}})},HASH_COMMENT_MODE:$,IDENT_RE:C,MATCH_NOTHING_RE:S,METHOD_GUARD:at,NUMBER_MODE:Q,NUMBER_RE:A,PHRASAL_WORDS_MODE:re,QUOTE_STRING_MODE:K,REGEXP_MODE:Oe,RE_STARTERS_RE:q,SHEBANG:X,TITLE_MODE:Ge,UNDERSCORE_IDENT_RE:M,UNDERSCORE_TITLE_MODE:he});function Qt(T,L){T.input[T.index-1]==="."&&L.ignoreMatch()}function Ut(T,L){T.className!==void 0&&(T.scope=T.className,delete T.className)}function gn(T,L){L&&T.beginKeywords&&(T.begin="\\b("+T.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",T.__beforeBegin=Qt,T.keywords=T.keywords||T.beginKeywords,delete T.beginKeywords,T.relevance===void 0&&(T.relevance=0))}function Qo(T,L){Array.isArray(T.illegal)&&(T.illegal=b(...T.illegal))}function ei(T,L){if(T.match){if(T.begin||T.end)throw new Error("begin & end are not supported with match");T.begin=T.match,delete T.match}}function Re(T,L){T.relevance===void 0&&(T.relevance=1)}const bn=(T,L)=>{if(!T.beforeMatch)return;if(T.starts)throw new Error("beforeMatch cannot be used with starts");const W=Object.assign({},T);Object.keys(T).forEach(me=>{delete T[me]}),T.keywords=W.keywords,T.begin=m(W.beforeMatch,f(W.begin)),T.starts={relevance:0,contains:[Object.assign(W,{endsParent:!0})]},T.relevance=0,delete W.beforeMatch},On=["of","and","for","in","not","or","if","then","parent","list","value"],ti="keyword";function gs(T,L,W=ti){const me=Object.create(null);return typeof T=="string"?je(W,T.split(" ")):Array.isArray(T)?je(W,T):Object.keys(T).forEach(function(Ye){Object.assign(me,gs(T[Ye],L,Ye))}),me;function je(Ye,oe){L&&(oe=oe.map(Z=>Z.toLowerCase())),oe.forEach(function(Z){const de=Z.split("|");me[de[0]]=[Ye,uc(de[0],de[1])]})}}function uc(T,L){return L?Number(L):fh(T)?0:1}function fh(T){return On.includes(T.toLowerCase())}const dc={},Yn=T=>{console.error(T)},en=(T,...L)=>{console.log(`WARN: ${T}`,...L)},tn=(T,L)=>{dc[`${T}/${L}`]||(console.log(`Deprecated as of ${T}. ${L}`),dc[`${T}/${L}`]=!0)},ni=new Error;function fc(T,L,{key:W}){let me=0;const je=T[W],Ye={},oe={};for(let Z=1;Z<=L.length;Z++)oe[Z+me]=je[Z],Ye[Z+me]=!0,me+=w(L[Z-1]);T[W]=oe,T[W]._emit=Ye,T[W]._multi=!0}function hc(T){if(Array.isArray(T.begin)){if(T.skip||T.excludeBegin||T.returnBegin)throw Yn("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ni;if(typeof T.beginScope!="object"||T.beginScope===null)throw Yn("beginScope must be object"),ni;fc(T,T.begin,{key:"beginScope"}),T.begin=k(T.begin,{joinWith:""})}}function nn(T){if(Array.isArray(T.end)){if(T.skip||T.excludeEnd||T.returnEnd)throw Yn("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ni;if(typeof T.endScope!="object"||T.endScope===null)throw Yn("endScope must be object"),ni;fc(T,T.end,{key:"endScope"}),T.end=k(T.end,{joinWith:""})}}function ri(T){T.scope&&typeof T.scope=="object"&&T.scope!==null&&(T.beginScope=T.scope,delete T.scope)}function oi(T){ri(T),typeof T.beginScope=="string"&&(T.beginScope={_wrap:T.beginScope}),typeof T.endScope=="string"&&(T.endScope={_wrap:T.endScope}),hc(T),nn(T)}function hh(T){function L(oe,Z){return new RegExp(d(oe),"m"+(T.case_insensitive?"i":"")+(T.unicodeRegex?"u":"")+(Z?"g":""))}class W{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Z,de){de.position=this.position++,this.matchIndexes[this.matchAt]=de,this.regexes.push([de,Z]),this.matchAt+=w(Z)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Z=this.regexes.map(de=>de[1]);this.matcherRe=L(k(Z,{joinWith:"|"}),!0),this.lastIndex=0}exec(Z){this.matcherRe.lastIndex=this.lastIndex;const de=this.matcherRe.exec(Z);if(!de)return null;const ze=de.findIndex((Pt,ii)=>ii>0&&Pt!==void 0),et=this.matchIndexes[ze];return de.splice(0,ze),Object.assign(de,et)}}class me{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Z){if(this.multiRegexes[Z])return this.multiRegexes[Z];const de=new W;return this.rules.slice(Z).forEach(([ze,et])=>de.addRule(ze,et)),de.compile(),this.multiRegexes[Z]=de,de}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Z,de){this.rules.push([Z,de]),de.type==="begin"&&this.count++}exec(Z){const de=this.getMatcher(this.regexIndex);de.lastIndex=this.lastIndex;let ze=de.exec(Z);if(this.resumingScanAtSamePosition()&&!(ze&&ze.index===this.lastIndex)){const et=this.getMatcher(0);et.lastIndex=this.lastIndex+1,ze=et.exec(Z)}return ze&&(this.regexIndex+=ze.position+1,this.regexIndex===this.count&&this.considerAll()),ze}}function je(oe){const Z=new me;return oe.contains.forEach(de=>Z.addRule(de.begin,{rule:de,type:"begin"})),oe.terminatorEnd&&Z.addRule(oe.terminatorEnd,{type:"end"}),oe.illegal&&Z.addRule(oe.illegal,{type:"illegal"}),Z}function Ye(oe,Z){const de=oe;if(oe.isCompiled)return de;[Ut,ei,oi,bn].forEach(et=>et(oe,Z)),T.compilerExtensions.forEach(et=>et(oe,Z)),oe.__beforeBegin=null,[gn,Qo,Re].forEach(et=>et(oe,Z)),oe.isCompiled=!0;let ze=null;return typeof oe.keywords=="object"&&oe.keywords.$pattern&&(oe.keywords=Object.assign({},oe.keywords),ze=oe.keywords.$pattern,delete oe.keywords.$pattern),ze=ze||/\w+/,oe.keywords&&(oe.keywords=gs(oe.keywords,T.case_insensitive)),de.keywordPatternRe=L(ze,!0),Z&&(oe.begin||(oe.begin=/\B|\b/),de.beginRe=L(de.begin),!oe.end&&!oe.endsWithParent&&(oe.end=/\B|\b/),oe.end&&(de.endRe=L(de.end)),de.terminatorEnd=d(de.end)||"",oe.endsWithParent&&Z.terminatorEnd&&(de.terminatorEnd+=(oe.end?"|":"")+Z.terminatorEnd)),oe.illegal&&(de.illegalRe=L(oe.illegal)),oe.contains||(oe.contains=[]),oe.contains=[].concat(...oe.contains.map(function(et){return bs(et==="self"?oe:et)})),oe.contains.forEach(function(et){Ye(et,de)}),oe.starts&&Ye(oe.starts,Z),de.matcher=je(de),de}if(T.compilerExtensions||(T.compilerExtensions=[]),T.contains&&T.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return T.classNameAliases=r(T.classNameAliases||{}),Ye(T)}function Ar(T){return T?T.endsWithParent||Ar(T.starts):!1}function bs(T){return T.variants&&!T.cachedVariants&&(T.cachedVariants=T.variants.map(function(L){return r(T,{variants:null},L)})),T.cachedVariants?T.cachedVariants:Ar(T)?r(T,{starts:T.starts?r(T.starts):null}):Object.isFrozen(T)?r(T):T}var ys="11.11.1";class ph extends Error{constructor(L,W){super(L),this.name="HTMLInjectionError",this.html=W}}const P=n,pc=r,ao=Symbol("nomatch"),_r=7,lo=function(T){const L=Object.create(null),W=Object.create(null),me=[];let je=!0;const Ye="Could not find the language '{}', did you forget to load/include a language module?",oe={disableAutodetect:!0,name:"Plain text",contains:[]};let Z={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function de(F){return Z.noHighlightRe.test(F)}function ze(F){let ue=F.className+" ";ue+=F.parentNode?F.parentNode.className:"";const Ae=Z.languageDetectRe.exec(ue);if(Ae){const We=Dn(Ae[1]);return We||(en(Ye.replace("{}",Ae[1])),en("Falling back to no-highlight mode for this block.",F)),We?Ae[1]:"no-highlight"}return ue.split(/\s+/).find(We=>de(We)||Dn(We))}function et(F,ue,Ae){let We="",lt="";typeof ue=="object"?(We=F,Ae=ue.ignoreIllegals,lt=ue.language):(tn("10.7.0","highlight(lang, code, ...args) has been deprecated."),tn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),lt=F,We=ue),Ae===void 0&&(Ae=!0);const yn={code:We,language:lt};mc("before:highlight",yn);const Ir=yn.result?yn.result:Pt(yn.language,yn.code,Ae);return Ir.code=yn.code,mc("after:highlight",Ir),Ir}function Pt(F,ue,Ae,We){const lt=Object.create(null);function yn(J,ae){return J.keywords[ae]}function Ir(){if(!be.keywords){kt.addText(Ke);return}let J=0;be.keywordPatternRe.lastIndex=0;let ae=be.keywordPatternRe.exec(Ke),xe="";for(;ae;){xe+=Ke.substring(J,ae.index);const $e=Rn.case_insensitive?ae[0].toLowerCase():ae[0],At=yn(be,$e);if(At){const[Xn,y$]=At;if(kt.addText(xe),xe="",lt[$e]=(lt[$e]||0)+1,lt[$e]<=_r&&(yc+=y$),Xn.startsWith("_"))xe+=ae[0];else{const w$=Rn.classNameAliases[Xn]||Xn;Ln(ae[0],w$)}}else xe+=ae[0];J=be.keywordPatternRe.lastIndex,ae=be.keywordPatternRe.exec(Ke)}xe+=Ke.substring(J),kt.addText(xe)}function gc(){if(Ke==="")return;let J=null;if(typeof be.subLanguage=="string"){if(!L[be.subLanguage]){kt.addText(Ke);return}J=Pt(be.subLanguage,Ke,!0,fv[be.subLanguage]),fv[be.subLanguage]=J._top}else J=si(Ke,be.subLanguage.length?be.subLanguage:null);be.relevance>0&&(yc+=J.relevance),kt.__addSublanguage(J._emitter,J.language)}function Wt(){be.subLanguage!=null?gc():Ir(),Ke=""}function Ln(J,ae){J!==""&&(kt.startScope(ae),kt.addText(J),kt.endScope())}function lv(J,ae){let xe=1;const $e=ae.length-1;for(;xe<=$e;){if(!J._emit[xe]){xe++;continue}const At=Rn.classNameAliases[J[xe]]||J[xe],Xn=ae[xe];At?Ln(Xn,At):(Ke=Xn,Ir(),Ke=""),xe++}}function cv(J,ae){return J.scope&&typeof J.scope=="string"&&kt.openNode(Rn.classNameAliases[J.scope]||J.scope),J.beginScope&&(J.beginScope._wrap?(Ln(Ke,Rn.classNameAliases[J.beginScope._wrap]||J.beginScope._wrap),Ke=""):J.beginScope._multi&&(lv(J.beginScope,ae),Ke="")),be=Object.create(J,{parent:{value:be}}),be}function uv(J,ae,xe){let $e=E(J.endRe,xe);if($e){if(J["on:end"]){const At=new e(J);J["on:end"](ae,At),At.isMatchIgnored&&($e=!1)}if($e){for(;J.endsParent&&J.parent;)J=J.parent;return J}}if(J.endsWithParent)return uv(J.parent,ae,xe)}function h$(J){return be.matcher.regexIndex===0?(Ke+=J[0],1):(wh=!0,0)}function p$(J){const ae=J[0],xe=J.rule,$e=new e(xe),At=[xe.__beforeBegin,xe["on:begin"]];for(const Xn of At)if(Xn&&(Xn(J,$e),$e.isMatchIgnored))return h$(ae);return xe.skip?Ke+=ae:(xe.excludeBegin&&(Ke+=ae),Wt(),!xe.returnBegin&&!xe.excludeBegin&&(Ke=ae)),cv(xe,J),xe.returnBegin?0:ae.length}function m$(J){const ae=J[0],xe=ue.substring(J.index),$e=uv(be,J,xe);if(!$e)return ao;const At=be;be.endScope&&be.endScope._wrap?(Wt(),Ln(ae,be.endScope._wrap)):be.endScope&&be.endScope._multi?(Wt(),lv(be.endScope,J)):At.skip?Ke+=ae:(At.returnEnd||At.excludeEnd||(Ke+=ae),Wt(),At.excludeEnd&&(Ke=ae));do be.scope&&kt.closeNode(),!be.skip&&!be.subLanguage&&(yc+=be.relevance),be=be.parent;while(be!==$e.parent);return $e.starts&&cv($e.starts,J),At.returnEnd?0:ae.length}function g$(){const J=[];for(let ae=be;ae!==Rn;ae=ae.parent)ae.scope&&J.unshift(ae.scope);J.forEach(ae=>kt.openNode(ae))}let bc={};function dv(J,ae){const xe=ae&&ae[0];if(Ke+=J,xe==null)return Wt(),0;if(bc.type==="begin"&&ae.type==="end"&&bc.index===ae.index&&xe===""){if(Ke+=ue.slice(ae.index,ae.index+1),!je){const $e=new Error(`0 width match regex (${F})`);throw $e.languageName=F,$e.badRule=bc.rule,$e}return 1}if(bc=ae,ae.type==="begin")return p$(ae);if(ae.type==="illegal"&&!Ae){const $e=new Error('Illegal lexeme "'+xe+'" for mode "'+(be.scope||"<unnamed>")+'"');throw $e.mode=be,$e}else if(ae.type==="end"){const $e=m$(ae);if($e!==ao)return $e}if(ae.type==="illegal"&&xe==="")return Ke+=`
`,1;if(yh>1e5&&yh>ae.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ke+=xe,xe.length}const Rn=Dn(F);if(!Rn)throw Yn(Ye.replace("{}",F)),new Error('Unknown language: "'+F+'"');const b$=hh(Rn);let bh="",be=We||b$;const fv={},kt=new Z.__emitter(Z);g$();let Ke="",yc=0,co=0,yh=0,wh=!1;try{if(Rn.__emitTokens)Rn.__emitTokens(ue,kt);else{for(be.matcher.considerAll();;){yh++,wh?wh=!1:be.matcher.considerAll(),be.matcher.lastIndex=co;const J=be.matcher.exec(ue);if(!J)break;const ae=ue.substring(co,J.index),xe=dv(ae,J);co=J.index+xe}dv(ue.substring(co))}return kt.finalize(),bh=kt.toHTML(),{language:F,value:bh,relevance:yc,illegal:!1,_emitter:kt,_top:be}}catch(J){if(J.message&&J.message.includes("Illegal"))return{language:F,value:P(ue),illegal:!0,relevance:0,_illegalBy:{message:J.message,index:co,context:ue.slice(co-100,co+100),mode:J.mode,resultSoFar:bh},_emitter:kt};if(je)return{language:F,value:P(ue),illegal:!1,relevance:0,errorRaised:J,_emitter:kt,_top:be};throw J}}function ii(F){const ue={value:P(F),illegal:!1,relevance:0,_top:oe,_emitter:new Z.__emitter(Z)};return ue._emitter.addText(F),ue}function si(F,ue){ue=ue||Z.languages||Object.keys(L);const Ae=ii(F),We=ue.filter(Dn).filter(gh).map(Wt=>Pt(Wt,F,!1));We.unshift(Ae);const lt=We.sort((Wt,Ln)=>{if(Wt.relevance!==Ln.relevance)return Ln.relevance-Wt.relevance;if(Wt.language&&Ln.language){if(Dn(Wt.language).supersetOf===Ln.language)return 1;if(Dn(Ln.language).supersetOf===Wt.language)return-1}return 0}),[yn,Ir]=lt,gc=yn;return gc.secondBest=Ir,gc}function mh(F,ue,Ae){const We=ue&&W[ue]||Ae;F.classList.add("hljs"),F.classList.add(`language-${We}`)}function B(F){let ue=null;const Ae=ze(F);if(de(Ae))return;if(mc("before:highlightElement",{el:F,language:Ae}),F.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",F);return}if(F.children.length>0&&(Z.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(F)),Z.throwUnescapedHTML))throw new ph("One of your code blocks includes unescaped HTML.",F.innerHTML);ue=F;const We=ue.textContent,lt=Ae?et(We,{language:Ae,ignoreIllegals:!0}):si(We);F.innerHTML=lt.value,F.dataset.highlighted="yes",mh(F,Ae,lt.language),F.result={language:lt.language,re:lt.relevance,relevance:lt.relevance},lt.secondBest&&(F.secondBest={language:lt.secondBest.language,relevance:lt.secondBest.relevance}),mc("after:highlightElement",{el:F,result:lt,text:We})}function U(F){Z=pc(Z,F)}const we=()=>{Me(),tn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Le(){Me(),tn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let pe=!1;function Me(){function F(){Me()}if(document.readyState==="loading"){pe||window.addEventListener("DOMContentLoaded",F,!1),pe=!0;return}document.querySelectorAll(Z.cssSelector).forEach(B)}function In(F,ue){let Ae=null;try{Ae=ue(T)}catch(We){if(Yn("Language definition for '{}' could not be registered.".replace("{}",F)),je)Yn(We);else throw We;Ae=oe}Ae.name||(Ae.name=F),L[F]=Ae,Ae.rawDefinition=ue.bind(null,T),Ae.aliases&&li(Ae.aliases,{languageName:F})}function ws(F){delete L[F];for(const ue of Object.keys(W))W[ue]===F&&delete W[ue]}function ai(){return Object.keys(L)}function Dn(F){return F=(F||"").toLowerCase(),L[F]||L[W[F]]}function li(F,{languageName:ue}){typeof F=="string"&&(F=[F]),F.forEach(Ae=>{W[Ae.toLowerCase()]=ue})}function gh(F){const ue=Dn(F);return ue&&!ue.disableAutodetect}function c$(F){F["before:highlightBlock"]&&!F["before:highlightElement"]&&(F["before:highlightElement"]=ue=>{F["before:highlightBlock"](Object.assign({block:ue.el},ue))}),F["after:highlightBlock"]&&!F["after:highlightElement"]&&(F["after:highlightElement"]=ue=>{F["after:highlightBlock"](Object.assign({block:ue.el},ue))})}function u$(F){c$(F),me.push(F)}function d$(F){const ue=me.indexOf(F);ue!==-1&&me.splice(ue,1)}function mc(F,ue){const Ae=F;me.forEach(function(We){We[Ae]&&We[Ae](ue)})}function f$(F){return tn("10.7.0","highlightBlock will be removed entirely in v12.0"),tn("10.7.0","Please use highlightElement now."),B(F)}Object.assign(T,{highlight:et,highlightAuto:si,highlightAll:Me,highlightElement:B,highlightBlock:f$,configure:U,initHighlighting:we,initHighlightingOnLoad:Le,registerLanguage:In,unregisterLanguage:ws,listLanguages:ai,getLanguage:Dn,registerAliases:li,autoDetection:gh,inherit:pc,addPlugin:u$,removePlugin:d$}),T.debugMode=function(){je=!1},T.safeMode=function(){je=!0},T.versionString=ys,T.regex={concat:m,lookahead:f,either:b,optional:p,anyNumberOfTimes:h};for(const F in wt)typeof wt[F]=="object"&&t(wt[F]);return Object.assign(T,wt),T},Or=lo({});return Or.newInstance=()=>lo({}),Yd=Or,Or.HighlightJS=Or,Or.default=Or,Yd}var EI=kI();const e0=Ev(EI);function t0(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?t0(n.children,r):{text:n.value,classes:r}})}function n0(t){return t.value||t.children||[]}function vI(t){return!!e0.getLanguage(t)}function r0({doc:t,name:e,lowlight:n,defaultLanguage:r}){const o=[];return xu(t,i=>i.type.name===e).forEach(i=>{var s;let a=i.pos+1;const l=i.node.attrs.language||r,c=n.listLanguages(),u=l&&(c.includes(l)||vI(l)||(s=n.registered)!=null&&s.call(n,l))?n0(n.highlight(l,i.node.textContent)):n0(n.highlightAuto(i.node.textContent));t0(u).forEach(d=>{const f=a+d.text.length;if(d.classes.length){const h=Fe.inline(a,f,{class:d.classes.join(" ")});o.push(h)}a=f})}),ve.create(t,o)}function NI(t){return typeof t=="function"}function xI({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(o=>NI(e[o])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Se({key:new _e("lowlight"),state:{init:(o,{doc:i})=>r0({doc:i,name:t,lowlight:e,defaultLanguage:n}),apply:(o,i,s,a)=>{const l=s.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,u=xu(s.doc,f=>f.type.name===t),d=xu(a.doc,f=>f.type.name===t);return o.docChanged&&([l,c].includes(t)||d.length!==u.length||o.steps.some(f=>f.from!==void 0&&f.to!==void 0&&u.some(h=>h.pos>=f.from&&h.pos+h.node.nodeSize<=f.to)))?r0({doc:o.doc,name:t,lowlight:e,defaultLanguage:n}):i.map(o.mapping,o.doc)}},props:{decorations(o){return r.getState(o)}}});return r}var SI=VA.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],xI({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),CI=SI;function TI(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},h=e.optional(o)+t.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],m=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],g=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],v={type:m,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:g},k={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},S=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],C={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:S.concat([{begin:/\(/,end:/\)/,keywords:v,contains:S.concat(["self"]),relevance:0}]),relevance:0},M={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:h,returnBegin:!0,contains:[f],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:v,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(C,M,k,S,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:v,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:v},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function MI(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=TI(t),r=n.keywords;return r.type=[...r.type,...e.type],r.literal=[...r.literal,...e.literal],r.built_in=[...r.built_in,...e.built_in],r._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function AI(t){const e=t.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const o={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},i=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,o]};o.contains.push(a);const l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},d={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},f=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],h=t.SHEBANG({binary:`(${f.join("|")})`,relevance:10}),p={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},m=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],g=["true","false"],b={match:/(\/[a-z._-]+)+/},w=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],E=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],v=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],k=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:m,literal:g,built_in:[...w,...E,"set","shopt",...v,...k]},contains:[h,t.SHEBANG(),p,d,i,s,b,a,l,c,u,n]}}function _I(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",s="("+r+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},h=e.optional(o)+t.IDENT_RE+"\\s*\\(",g={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},b=[d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],w={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:g,contains:b.concat([{begin:/\(/,end:/\)/,keywords:g,contains:b.concat(["self"]),relevance:0}]),relevance:0},E={begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:g,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:g,relevance:0},{begin:h,returnBegin:!0,contains:[t.inherit(f,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:g,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:g,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C",aliases:["h"],keywords:g,disableAutodetect:!0,illegal:"</",contains:[].concat(w,E,b,[d,{begin:t.IDENT_RE+"::",keywords:g},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:d,strings:c,keywords:g}}}function OI(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",s="(?!struct)("+r+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},h=e.optional(o)+t.IDENT_RE+"\\s*\\(",p=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],m=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],g=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],v={type:m,keyword:p,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:g},k={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},S=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,u,c],C={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:S.concat([{begin:/\(/,end:/\)/,keywords:v,contains:S.concat(["self"]),relevance:0}]),relevance:0},M={className:"function",begin:"("+s+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:v,relevance:0},{begin:h,returnBegin:!0,contains:[f],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,c,u,a,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,c,u,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:v,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(C,M,k,S,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:v,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:v},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function II(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],o=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:o.concat(i),built_in:e,literal:r},a=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},u={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},d=t.inherit(u,{illegal:/\n/}),f={className:"subst",begin:/\{/,end:/\}/,keywords:s},h=t.inherit(f,{illegal:/\n/}),p={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,h]},m={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]},g=t.inherit(m,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]});f.contains=[m,p,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],h.contains=[g,p,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const b={variants:[c,m,p,u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},w={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},E=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",v={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},b,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,w,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,w,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+E+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,w],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[b,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},v]}}const DI=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),LI=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],RI=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],PI=[...LI,...RI],BI=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),zI=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),$I=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),VI=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function HI(t){const e=t.regex,n=DI(t),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",i=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",a=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+zI.join("|")+")"},{begin:":(:)?("+$I.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+VI.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:BI.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+PI.join("|")+")\\b"}]}}function FI(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function UI(t){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}function WI(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function KI(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},r=t.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const o={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[r,i,o,s,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,d=e.either(l,c,u),f=e.concat(d,"(\\s*\\.\\s*",d,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:f,className:"attr",starts:{end:/$/,contains:[r,a,i,o,s,n]}}]}}var Io="[0-9](_*[0-9])*",ll=`\\.(${Io})`,cl="[0-9a-fA-F](_*[0-9a-fA-F])*",o0={className:"number",variants:[{begin:`(\\b(${Io})((${ll})|\\.)?|(${ll}))[eE][+-]?(${Io})[fFdD]?\\b`},{begin:`\\b(${Io})((${ll})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${ll})[fFdD]?\\b`},{begin:`\\b(${Io})[fFdD]\\b`},{begin:`\\b0[xX]((${cl})\\.?|(${cl})?\\.(${cl}))[pP][+-]?(${Io})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${cl})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function i0(t,e,n){return n===-1?"":t.replace(e,r=>i0(t,e,n-1))}function qI(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+i0("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},c={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},u={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[u,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,o0,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},o0,c]}}const s0="[A-Za-z$_][0-9A-Za-z$_]*",GI=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],jI=["true","false","null","undefined","NaN","Infinity"],a0=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],l0=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],c0=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],YI=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],XI=[].concat(c0,a0,l0);function ZI(t){const e=t.regex,n=(_,{after:V})=>{const O="</"+_[0].slice(1);return _.input.indexOf(O,V)!==-1},r=s0,o={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(_,V)=>{const O=_[0].length+_.index,$=_.input[O];if($==="<"||$===","){V.ignoreMatch();return}$===">"&&(n(_,{after:O})||V.ignoreMatch());let Q;const ce=_.input.substring(O);if(Q=ce.match(/^\s*=/)){V.ignoreMatch();return}if((Q=ce.match(/^\s+extends\s+/))&&Q.index===0){V.ignoreMatch();return}}},a={$pattern:s0,keyword:GI,literal:jI,built_in:XI,"variable.language":YI},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},g={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},w={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},E=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,p,m,g,{match:/\$\d+/},d];f.contains=E.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(E)});const v=[].concat(w,f.contains),k=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),S={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},C={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},M={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...a0,...l0]}},A={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},D={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[S],illegal:/%/},G={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(_){return e.concat("(?!",_.join("|"),")")}const X={match:e.concat(/\b/,q([...c0,"super","import"].map(_=>`${_}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},H={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},j={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},S]},K="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",re={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(K)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[S]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:M},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),A,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,p,m,g,w,{match:/\$\d+/},d,M,{scope:"attr",match:r+e.lookahead(":"),relevance:0},re,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,t.REGEXP_MODE,{className:"function",begin:K,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},D,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[S,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},H,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[S]},X,G,C,j,{match:/\$[(.]/}]}}function JI(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],o={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,o,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Do="[0-9](_*[0-9])*",ul=`\\.(${Do})`,dl="[0-9a-fA-F](_*[0-9a-fA-F])*",QI={className:"number",variants:[{begin:`(\\b(${Do})((${ul})|\\.)?|(${ul}))[eE][+-]?(${Do})[fFdD]?\\b`},{begin:`\\b(${Do})((${ul})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${ul})[fFdD]?\\b`},{begin:`\\b(${Do})[fFdD]\\b`},{begin:`\\b0[xX]((${dl})\\.?|(${dl})?\\.(${dl}))[pP][+-]?(${Do})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${dl})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function e2(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},o={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},i={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[i,o]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,i,o]}]};o.contains.push(s);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(s,{className:"string"}),"self"]}]},c=QI,u=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},f=d;return f.variants[1].contains=[d],d.variants[1].contains=[f],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,u,n,r,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,t.C_LINE_COMMENT_MODE,u],relevance:0},t.C_LINE_COMMENT_MODE,u,a,l,s,t.C_NUMBER_MODE]},u]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},c]}}const t2=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),n2=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],r2=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],o2=[...n2,...r2],i2=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),u0=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),d0=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),s2=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),a2=u0.concat(d0).sort().reverse();function l2(t){const e=t2(t),n=a2,r="and or not only",o="[\\w-]+",i="("+o+"|@\\{"+o+"\\})",s=[],a=[],l=function(E){return{className:"string",begin:"~?"+E+".*?"+E}},c=function(E,v,k){return{className:E,begin:v,relevance:k}},u={$pattern:/[a-z-]+/,keyword:r,attribute:i2.join(" ")},d={begin:"\\(",end:"\\)",contains:a,keywords:u,relevance:0};a.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,d,c("variable","@@?"+o,10),c("variable","@\\{"+o+"\\}"),c("built_in","~?`[^`]*?`"),{className:"attribute",begin:o+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const f=a.concat({begin:/\{/,end:/\}/,contains:s}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},p={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+s2.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},m={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:u,returnEnd:!0,contains:a,relevance:0}},g={className:"variable",variants:[{begin:"@"+o+"\\s*:",relevance:15},{begin:"@"+o}],starts:{end:"[;}]",returnEnd:!0,contains:f}},b={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,h,c("keyword","all\\b"),c("variable","@\\{"+o+"\\}"),{begin:"\\b("+o2.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,c("selector-tag",i,0),c("selector-id","#"+i),c("selector-class","\\."+i,0),c("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+u0.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+d0.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:f},{begin:"!important"},e.FUNCTION_DISPATCH]},w={begin:o+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[b]};return s.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,m,g,w,p,b,h,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function c2(t){const e="\\[=*\\[",n="\\]=*\\]",r={begin:e,end:n,contains:["self"]},o=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:o}].concat(o)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[r],relevance:5}])}}function u2(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},o={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,r,o,i,s]}}function d2(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=t.inherit(c,{contains:[]}),f=t.inherit(u,{contains:[]});c.contains.push(f),u.contains.push(d);let h=[n,l];return[c,u,d,f].forEach(b=>{b.contains=b.contains.concat(h)}),h=h.concat(c,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,i,c,u,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},o,r,l,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function f2(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function h2(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},s={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},c={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},u=[t.BACKSLASH_ESCAPE,i,l],d=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],f=(m,g,b="\\1")=>{const w=b==="\\1"?b:e.concat(b,g);return e.concat(e.concat("(?:",m,")"),g,/(?:\\.|[^\\\/])*?/,w,/(?:\\.|[^\\\/])*?/,b,r)},h=(m,g,b)=>e.concat(e.concat("(?:",m,")"),g,/(?:\\.|[^\\\/])*?/,b,r),p=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:u,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},c,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:f("s|tr|y",e.either(...d,{capture:!0}))},{begin:f("s|tr|y","\\(","\\)")},{begin:f("s|tr|y","\\[","\\]")},{begin:f("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:h("(?:m|qr)?",/\//,/\//)},{begin:h("m|qr",e.either(...d,{capture:!0}),/\1/)},{begin:h("m|qr",/\(/,/\)/)},{begin:h("m|qr",/\[/,/\]/)},{begin:h("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a,c]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=p,s.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:p}}function p2(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,r=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),o=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),i=e.concat(/[A-Z]+/,n),s={scope:"variable",match:"\\$+"+r},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(H,j)=>{j.data._beginMatch=H[1]||H[2]},"on:end":(H,j)=>{j.data._beginMatch!==H[1]&&j.ignoreMatch()}},f=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h=`[ 	
]`,p={scope:"string",variants:[u,c,d,f]},m={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},g=["false","null","true"],b=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],w=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],v={keyword:b,literal:(H=>{const j=[];return H.forEach(K=>{j.push(K),K.toLowerCase()===K?j.push(K.toUpperCase()):j.push(K.toLowerCase())}),j})(g),built_in:w},k=H=>H.map(j=>j.replace(/\|\d+$/,"")),S={variants:[{match:[/new/,e.concat(h,"+"),e.concat("(?!",k(w).join("\\b|"),"\\b)"),o],scope:{1:"keyword",4:"title.class"}}]},C=e.concat(r,"\\b(?!\\()"),M={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),C],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[o,e.concat(/::/,e.lookahead(/(?!class\b)/)),C],scope:{1:"title.class",3:"variable.constant"}},{match:[o,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[o,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},A={scope:"attr",match:e.concat(r,e.lookahead(":"),e.lookahead(/(?!::)/))},D={relevance:0,begin:/\(/,end:/\)/,keywords:v,contains:[A,s,M,t.C_BLOCK_COMMENT_MODE,p,m,S]},G={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",k(b).join("\\b|"),"|",k(w).join("\\b|"),"\\b)"),r,e.concat(h,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[D]};D.contains.push(G);const q=[A,M,t.C_BLOCK_COMMENT_MODE,p,m,S],X={begin:e.concat(/#\[\s*\\?/,e.either(o,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:g,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:g,keyword:["new","array"]},contains:["self",...q]},...q,{scope:"meta",variants:[{match:o},{match:i}]}]};return{case_insensitive:!1,keywords:v,contains:[X,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},s,G,M,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},S,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:v,contains:["self",X,s,M,t.C_BLOCK_COMMENT_MODE,p,m]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},p,m]}}function m2(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function g2(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function b2(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},c={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,u,c]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,u,c]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,u,c]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},f="[0-9](_?[0-9])*",h=`(\\b(${f}))?\\.(${f})|\\b(${f})\\.`,p=`\\b|${r.join("|")}`,m={className:"number",relevance:0,variants:[{begin:`(\\b(${f})|(${h}))[eE][+-]?(${f})[jJ]?(?=${p})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${p})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${p})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${p})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${p})`},{begin:`\\b(${f})[jJ](?=${p})`}]},g={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,m,d,t.HASH_COMMENT_MODE]}]};return c.contains=[d,m,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,m,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},d,g,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[m,b,d]}]}}function y2(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function w2(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),o=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[o,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[i,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:o},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function k2(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),o=e.concat(r,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},c=[t.COMMENT("#","$",{contains:[a]}),t.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],u={className:"subst",begin:/#\{/,end:/\}/,keywords:s},d={className:"string",contains:[t.BACKSLASH_ESCAPE,u],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,u]})]}]},f="[1-9](_?[0-9])*|0",h="[0-9](_?[0-9])*",p={className:"number",relevance:0,variants:[{begin:`\\b(${f})(\\.(${h}))?([eE][+-]?(${h})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},m={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},S=[d,{variants:[{match:[/class\s+/,o,/\s+<\s+/,o]},{match:[/\b(class|module)\s+/,o]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,o],scope:{2:"title.class"},keywords:s},{relevance:0,match:[o,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[m]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:n}],relevance:0},p,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,u],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,c),relevance:0}].concat(l,c);u.contains=S,m.contains=S;const D=[{begin:/^\s*=>/,starts:{end:"$",contains:S}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:S}}];return c.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(D).concat(c).concat(S)}}function E2(t){const e=t.regex,n=/(r#)?/,r=e.concat(n,t.UNDERSCORE_IDENT_RE),o=e.concat(n,t.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,o,e.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:u,keyword:a,literal:l,built_in:c},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},i]}}const v2=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),N2=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],x2=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],S2=[...N2,...x2],C2=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),T2=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),M2=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),A2=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function _2(t){const e=v2(t),n=M2,r=T2,o="@[a-z-]+",i="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+S2.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+A2.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,a,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:C2.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function O2(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function I2(t){const e=t.regex,n=t.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},o={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],c=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],u=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],d=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],f=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],h=u,p=[...c,...l].filter(k=>!u.includes(k)),m={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},g={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},b={match:e.concat(/\b/,e.either(...h),/\s*\(/),relevance:0,keywords:{built_in:h}};function w(k){return e.concat(/\b/,e.either(...k.map(S=>S.replace(/\s+/,"\\s+"))),/\b/)}const E={scope:"keyword",match:w(f),relevance:0};function v(k,{exceptions:S,when:C}={}){const M=C;return S=S||[],k.map(A=>A.match(/\|\d+$/)||S.includes(A)?A:M(A)?`${A}|0`:A)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:v(p,{when:k=>k.length<3}),literal:i,type:a,built_in:d},contains:[{scope:"type",match:w(s)},E,b,m,r,o,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,g]}}function f0(t){return t?typeof t=="string"?t:t.source:null}function qi(t){return Ve("(?=",t,")")}function Ve(...t){return t.map(n=>f0(n)).join("")}function D2(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function It(...t){return"("+(D2(t).capture?"":"?:")+t.map(r=>f0(r)).join("|")+")"}const Xd=t=>Ve(/\b/,t,/\w$/.test(t)?/\b/:/\B/),L2=["Protocol","Type"].map(Xd),h0=["init","self"].map(Xd),R2=["Any","Self"],Zd=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],p0=["false","nil","true"],P2=["assignment","associativity","higherThan","left","lowerThan","none","right"],B2=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],m0=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],g0=It(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),b0=It(g0,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Jd=Ve(g0,b0,"*"),y0=It(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),fl=It(y0,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Mn=Ve(y0,fl,"*"),hl=Ve(/[A-Z]/,fl,"*"),z2=["attached","autoclosure",Ve(/convention\(/,It("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Ve(/objc\(/,Mn,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],$2=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function V2(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[t.C_LINE_COMMENT_MODE,n],o={match:[/\./,It(...L2,...h0)],className:{2:"keyword"}},i={match:Ve(/\./,It(...Zd)),relevance:0},s=Zd.filter(Re=>typeof Re=="string").concat(["_|0"]),a=Zd.filter(Re=>typeof Re!="string").concat(R2).map(Xd),l={variants:[{className:"keyword",match:It(...a,...h0)}]},c={$pattern:It(/\b\w+/,/#\w+/),keyword:s.concat(B2),literal:p0},u=[o,i,l],d={match:Ve(/\./,It(...m0)),relevance:0},f={className:"built_in",match:Ve(/\b/,It(...m0),/(?=\()/)},h=[d,f],p={match:/->/,relevance:0},m={className:"operator",relevance:0,variants:[{match:Jd},{match:`\\.(\\.|${b0})+`}]},g=[p,m],b="([0-9]_*)+",w="([0-9a-fA-F]_*)+",E={className:"number",relevance:0,variants:[{match:`\\b(${b})(\\.(${b}))?([eE][+-]?(${b}))?\\b`},{match:`\\b0x(${w})(\\.(${w}))?([pP][+-]?(${b}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},v=(Re="")=>({className:"subst",variants:[{match:Ve(/\\/,Re,/[0\\tnr"']/)},{match:Ve(/\\/,Re,/u\{[0-9a-fA-F]{1,8}\}/)}]}),k=(Re="")=>({className:"subst",match:Ve(/\\/,Re,/[\t ]*(?:[\r\n]|\r\n)/)}),S=(Re="")=>({className:"subst",label:"interpol",begin:Ve(/\\/,Re,/\(/),end:/\)/}),C=(Re="")=>({begin:Ve(Re,/"""/),end:Ve(/"""/,Re),contains:[v(Re),k(Re),S(Re)]}),M=(Re="")=>({begin:Ve(Re,/"/),end:Ve(/"/,Re),contains:[v(Re),S(Re)]}),A={className:"string",variants:[C(),C("#"),C("##"),C("###"),M(),M("#"),M("##"),M("###")]},D=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],G={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:D},q=Re=>{const bn=Ve(Re,/\//),On=Ve(/\//,Re);return{begin:bn,end:On,contains:[...D,{scope:"comment",begin:`#(?!.*${On})`,end:/$/}]}},X={scope:"regexp",variants:[q("###"),q("##"),q("#"),G]},H={match:Ve(/`/,Mn,/`/)},j={className:"variable",match:/\$\d+/},K={className:"variable",match:`\\$${fl}+`},re=[H,j,K],_={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:$2,contains:[...g,E,A]}]}},V={scope:"keyword",match:Ve(/@/,It(...z2),qi(It(/\(/,/\s+/)))},O={scope:"meta",match:Ve(/@/,Mn)},$=[_,V,O],Q={match:qi(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Ve(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,fl,"+")},{className:"type",match:hl,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Ve(/\s+&\s+/,qi(hl)),relevance:0}]},ce={begin:/</,end:/>/,keywords:c,contains:[...r,...u,...$,p,Q]};Q.contains.push(ce);const Te={match:Ve(Mn,/\s*:/),keywords:"_|0",relevance:0},Oe={begin:/\(/,end:/\)/,relevance:0,keywords:c,contains:["self",Te,...r,X,...u,...h,...g,E,A,...re,...$,Q]},Ge={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,Q]},he={begin:It(qi(Ve(Mn,/\s*:/)),qi(Ve(Mn,/\s+/,Mn,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Mn}]},at={begin:/\(/,end:/\)/,keywords:c,contains:[he,...r,...u,...g,E,A,...$,Q,Oe],endsParent:!0,illegal:/["']/},Ft={match:[/(func|macro)/,/\s+/,It(H.match,Mn,Jd)],className:{1:"keyword",3:"title.function"},contains:[Ge,at,e],illegal:[/\[/,/%/]},wt={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ge,at,e],illegal:/\[|%/},Qt={match:[/operator/,/\s+/,Jd],className:{1:"keyword",3:"title"}},Ut={begin:[/precedencegroup/,/\s+/,hl],className:{1:"keyword",3:"title"},contains:[Q],keywords:[...P2,...p0],end:/}/},gn={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Qo={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ei={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Mn,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:c,contains:[Ge,...u,{begin:/:/,end:/\{/,keywords:c,contains:[{scope:"title.class.inherited",match:hl},...u],relevance:0}]};for(const Re of A.variants){const bn=Re.contains.find(ti=>ti.label==="interpol");bn.keywords=c;const On=[...u,...h,...g,E,A,...re];bn.contains=[...On,{begin:/\(/,end:/\)/,contains:["self",...On]}]}return{name:"Swift",keywords:c,contains:[...r,Ft,wt,gn,Qo,ei,Qt,Ut,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},X,...u,...h,...g,E,A,...re,...$,Q,Oe]}}const pl="[A-Za-z$_][0-9A-Za-z$_]*",w0=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],k0=["true","false","null","undefined","NaN","Infinity"],E0=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],v0=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],N0=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],x0=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],S0=[].concat(N0,E0,v0);function H2(t){const e=t.regex,n=(_,{after:V})=>{const O="</"+_[0].slice(1);return _.input.indexOf(O,V)!==-1},r=pl,o={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(_,V)=>{const O=_[0].length+_.index,$=_.input[O];if($==="<"||$===","){V.ignoreMatch();return}$===">"&&(n(_,{after:O})||V.ignoreMatch());let Q;const ce=_.input.substring(O);if(Q=ce.match(/^\s*=/)){V.ignoreMatch();return}if((Q=ce.match(/^\s+extends\s+/))&&Q.index===0){V.ignoreMatch();return}}},a={$pattern:pl,keyword:w0,literal:k0,built_in:S0,"variable.language":x0},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},h={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},p={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},m={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},g={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},w={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},E=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,p,m,g,{match:/\$\d+/},d];f.contains=E.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(E)});const v=[].concat(w,f.contains),k=v.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(v)}]),S={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},C={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},M={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...E0,...v0]}},A={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},D={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[S],illegal:/%/},G={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(_){return e.concat("(?!",_.join("|"),")")}const X={match:e.concat(/\b/,q([...N0,"super","import"].map(_=>`${_}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},H={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},j={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},S]},K="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",re={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(K)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[S]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:M},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),A,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,p,m,g,w,{match:/\$\d+/},d,M,{scope:"attr",match:r+e.lookahead(":"),relevance:0},re,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,t.REGEXP_MODE,{className:"function",begin:K,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},D,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[S,t.inherit(t.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},H,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[S]},X,G,C,j,{match:/\$[(.]/}]}}function F2(t){const e=t.regex,n=H2(t),r=pl,o=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:o},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],c={$pattern:pl,keyword:w0.concat(l),literal:k0,built_in:S0.concat(o),"variable.language":x0},u={className:"meta",begin:"@"+r},d=(m,g,b)=>{const w=m.contains.findIndex(E=>E.label===g);if(w===-1)throw new Error("can not find mode to replace");m.contains.splice(w,1,b)};Object.assign(n.keywords,c),n.exports.PARAMS_CONTAINS.push(u);const f=n.contains.find(m=>m.scope==="attr"),h=Object.assign({},f,{match:e.concat(r,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,f,h]),n.contains=n.contains.concat([u,i,s,h]),d(n,"shebang",t.SHEBANG()),d(n,"use_strict",a);const p=n.contains.find(m=>m.label==="func.def");return p.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function U2(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(i,o),/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,s,/ *#/)},{begin:e.concat(/# */,e.either(i,o),/ +/,e.either(s,a),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},d=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),f=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,l,c,u,d,f,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[f]}]}}function W2(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],o={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},c={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,s,o,t.QUOTE_STRING_MODE,l,c,a]}}function K2(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(i,{begin:/\(/,end:/\)/}),a=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,l,a,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,s,l,a]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function q2(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},a=t.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),f={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},h={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},p={begin:/\{/,end:/\}/,contains:[h],illegal:"\\n",relevance:0},m={begin:"\\[",end:"\\]",contains:[h],illegal:"\\n",relevance:0},g=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},f,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},p,m,i,s],b=[...g];return b.pop(),b.push(a),h.contains=b,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:g}}const G2={arduino:MI,bash:AI,c:_I,cpp:OI,csharp:II,css:HI,diff:FI,go:UI,graphql:WI,ini:KI,java:qI,javascript:ZI,json:JI,kotlin:e2,less:l2,lua:c2,makefile:u2,markdown:d2,objectivec:f2,perl:h2,php:p2,"php-template":m2,plaintext:g2,python:b2,"python-repl":y2,r:w2,ruby:k2,rust:E2,scss:_2,shell:O2,sql:I2,swift:V2,typescript:F2,vbnet:U2,wasm:W2,xml:K2,yaml:q2};class j2 extends Error{name="Assertion";code="ERR_ASSERTION";constructor(e,n,r,o,i){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.actual=n,this.expected=r,this.generated=i,this.operator=o}}function Gi(t,e){Y2(!!t,!1,!0,"ok","Expected value to be truthy",e)}function Y2(t,e,n,r,o,i){if(!t)throw i instanceof Error?i:new j2(i||o,e,n,r,!i)}const C0={},X2="hljs-";function Z2(t){const e=e0.newInstance();return t&&i(t),{highlight:n,highlightAuto:r,listLanguages:o,register:i,registerAlias:s,registered:a};function n(l,c,u){Gi(typeof l=="string","expected `string` as `name`"),Gi(typeof c=="string","expected `string` as `value`");const d=u||C0,f=typeof d.prefix=="string"?d.prefix:X2;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:J2,classPrefix:f});const h=e.highlight(c,{ignoreIllegals:!0,language:l});if(h.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:h.errorRaised});const p=h._emitter.root,m=p.data;return m.language=h.language,m.relevance=h.relevance,p}function r(l,c){Gi(typeof l=="string","expected `string` as `value`");const d=(c||C0).subset||o();let f=-1,h=0,p;for(;++f<d.length;){const m=d[f];if(!e.getLanguage(m))continue;const g=n(m,l,c);g.data&&g.data.relevance!==void 0&&g.data.relevance>h&&(h=g.data.relevance,p=g)}return p||{type:"root",children:[],data:{language:void 0,relevance:h}}}function o(){return e.listLanguages()}function i(l,c){if(typeof l=="string")Gi(c!==void 0,"expected `grammar`"),e.registerLanguage(l,c);else{let u;for(u in l)Object.hasOwn(l,u)&&e.registerLanguage(u,l[u])}}function s(l,c){if(typeof l=="string")Gi(c!==void 0),e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let u;for(u in l)if(Object.hasOwn(l,u)){const d=l[u];e.registerAliases(typeof d=="string"?d:[...d],{languageName:u})}}}function a(l){return!!e.getLanguage(l)}}class J2{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],o=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:o}):r.children.push(...o)}openNode(e){const n=this,r=e.split(".").map(function(s,a){return a?s+"_".repeat(a):n.options.classPrefix+s}),o=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:r},children:[]};o.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T0=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>N.createElement("svg",{ref:l,...eD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:T0("lucide",o),...a},[...s.map(([c,u])=>N.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(t,e)=>{const n=N.forwardRef(({className:r,...o},i)=>N.createElement(tD,{ref:i,iconNode:e,className:T0(`lucide-${Q2(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=ee("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ee("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=ee("CaseSensitive",[["path",{d:"m3 15 4-8 4 8",key:"1vwr6u"}],["path",{d:"M4 13h6",key:"1r9ots"}],["circle",{cx:"18",cy:"12",r:"3",key:"1kchzo"}],["path",{d:"M21 9v6",key:"anns31"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=ee("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=ee("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=ee("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=ee("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ee("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=ee("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ee("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=ee("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=ee("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ee("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ee("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ee("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ee("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ee("IndentDecrease",[["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 18H11",key:"4wu86t"}],["path",{d:"M21 6H11",key:"6dy1d6"}],["path",{d:"m7 8-4 4 4 4",key:"o5hrat"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ee("IndentIncrease",[["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 18H11",key:"4wu86t"}],["path",{d:"M21 6H11",key:"6dy1d6"}],["path",{d:"m3 8 4 4-4 4",key:"1a3j6y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=ee("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=ee("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=ee("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ee("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=ee("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=ee("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=ee("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=ee("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=ee("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=ee("Pilcrow",[["path",{d:"M13 4v16",key:"8vvj80"}],["path",{d:"M17 4v16",key:"7dpous"}],["path",{d:"M19 4H9.5a4.5 4.5 0 0 0 0 9H13",key:"sh4n9v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ee("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=ee("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=ee("Regex",[["path",{d:"M17 3v10",key:"15fgeh"}],["path",{d:"m12.67 5.5 8.66 5",key:"1gpheq"}],["path",{d:"m12.67 10.5 8.66-5",key:"1dkfa6"}],["path",{d:"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z",key:"swwfx4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=ee("ReplaceAll",[["path",{d:"M14 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"1yyzbs"}],["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 14a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"zfj4xr"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a 3 3 0 0 1 3-3h1",key:"1ageje"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ee("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ee("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ee("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ee("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ee("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=ee("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=ee("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=ee("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=ee("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=ee("WholeWord",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),OD=Z2(G2);function ID({node:t,updateAttributes:e,extension:n}){const[r,o]=N.useState(!1),[i,s]=N.useState(!1),a=N.useRef(null);N.useEffect(()=>{const f=a.current;if(!f||i)return;const h=new IntersectionObserver(p=>{for(const m of p)m.isIntersecting&&(s(!0),h.unobserve(f))},{rootMargin:"200px 0px",threshold:0});return h.observe(f),()=>{h.disconnect()}},[i]);const l=N.useCallback(async()=>{try{await navigator.clipboard.writeText(t.textContent),o(!0),setTimeout(()=>o(!1),2e3)}catch(f){console.error("Failed to copy:",f)}},[t.textContent]),c=n.options.lowlight?.listLanguages?.()||[],u=t.attrs.language||"plaintext",d=u==="plaintext"?"Plain Text":u.charAt(0).toUpperCase()+u.slice(1);return y.jsxDEV(va,{className:"code-block-wrapper",ref:a,children:[y.jsxDEV("div",{className:"code-block-controls",contentEditable:!1,children:[y.jsxDEV("div",{className:"code-block-language-wrapper",children:[y.jsxDEV("select",{value:u,onChange:f=>e({language:f.target.value}),className:"code-block-language-select",children:[y.jsxDEV("option",{value:"plaintext",children:"Plain Text"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:89,columnNumber:13},this),c.map(f=>y.jsxDEV("option",{value:f,children:f.charAt(0).toUpperCase()+f.slice(1)},f,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:91,columnNumber:15},this))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:84,columnNumber:11},this),y.jsxDEV("span",{className:"code-block-language-label",children:d},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:96,columnNumber:11},this),y.jsxDEV(bl,{size:12,className:"code-block-language-chevron"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:83,columnNumber:9},this),y.jsxDEV("button",{type:"button",onClick:l,className:`code-block-copy-btn ${r?"copied":""}`,title:r?"Copied!":"Copy code",children:r?y.jsxDEV(gl,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:105,columnNumber:21},this):y.jsxDEV(tf,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:105,columnNumber:43},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:99,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:82,columnNumber:7},this),y.jsxDEV("pre",{className:`code-block-pre ${i?"":"code-block-deferred"}`,children:y.jsxDEV(hd,{className:i?`language-${u}`:"language-plaintext"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:112,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:111,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:80,columnNumber:5},this)}const DD=CI.extend({addNodeView(){return pd(ID)}}).configure({lowlight:OD,defaultLanguage:"plaintext",HTMLAttributes:{class:"code-block"}});function LD({editor:t,isOpen:e,onClose:n}){const[r,o]=N.useState(""),[i,s]=N.useState({top:0,left:0}),a=N.useRef(null),l=N.useRef(null),c=N.useCallback(()=>{if(!(!t||t.isDestroyed))try{const{view:f}=t,{from:h}=f.state.selection,p=f.coordsAtPos(h),m=320,g=80,b=8,w=window.innerWidth,E=window.innerHeight;let v=p.bottom+8,k=p.left;v+g>E-b&&(v=p.top-g-8),k+m>w-b&&(k=w-m-b),k<b&&(k=b),v=Math.max(b,v),s({top:v,left:k})}catch{s({top:window.innerHeight/2-40,left:window.innerWidth/2-160})}},[t]);N.useEffect(()=>{if(e){const f=t.getAttributes("link").href||"";o(f),c(),setTimeout(()=>{a.current?.focus(),a.current?.select()},50)}},[e,t,c]),N.useEffect(()=>{if(!e)return;const f=()=>{requestAnimationFrame(c)};return window.addEventListener("scroll",f,!0),window.addEventListener("resize",f),()=>{window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",f)}},[e,c]),N.useEffect(()=>{if(!e)return;const f=h=>{l.current&&!l.current.contains(h.target)&&n()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[e,n]);const u=N.useCallback(f=>{if(f?.preventDefault(),r.trim()){let h=r.trim();!/^https?:\/\//i.test(h)&&!h.startsWith("mailto:")&&(h="https://"+h),t.chain().focus().extendMarkRange("link").setLink({href:h}).run()}else t.chain().focus().unsetLink().run();n()},[r,t,n]),d=N.useCallback(f=>{f.key==="Escape"?(f.preventDefault(),n()):f.key==="Enter"&&(f.preventDefault(),u())},[n,u]);return e?wn.createPortal(y.jsxDEV("div",{ref:l,className:"link-popover",style:{position:"fixed",top:`${i.top}px`,left:`${i.left}px`,zIndex:9999},children:y.jsxDEV("form",{onSubmit:u,className:"link-popover-form",children:[y.jsxDEV("div",{className:"link-popover-input-wrapper",children:[y.jsxDEV(sf,{className:"link-popover-icon",size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:163,columnNumber:11},this),y.jsxDEV("input",{ref:a,type:"text",value:r,onChange:f=>o(f.target.value),onKeyDown:d,placeholder:"Enter URL or paste link",className:"link-popover-input",autoComplete:"off",spellCheck:!1},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:164,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:162,columnNumber:9},this),y.jsxDEV("div",{className:"link-popover-hint",children:"Press Enter to save  Escape to cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:176,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:161,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:151,columnNumber:5},this),document.body):null}function RD({editor:t,onEditLink:e}){const[n,r]=N.useState({isVisible:!1,url:"",position:{top:0,left:0},linkElement:null}),o=N.useRef(null),i=N.useRef(null),s=N.useCallback(h=>{if(!(!t||t.isDestroyed)){i.current&&(clearTimeout(i.current),i.current=null);try{const p=h.getAttribute("href")||"",m=h.getBoundingClientRect(),g=320,b=40,w=8,E=window.innerWidth,v=window.innerHeight;let k=m.bottom+8,S=m.left;k+b>v-w&&(k=m.top-b-8),S+g>E-w&&(S=E-g-w),S<w&&(S=w),r({isVisible:!0,url:p,position:{top:k,left:S},linkElement:h})}catch(p){console.warn("LinkHoverTooltip: Error showing tooltip",p)}}},[t]),a=N.useCallback(()=>{i.current=setTimeout(()=>{r(h=>({...h,isVisible:!1,linkElement:null}))},150)},[]),l=N.useCallback(()=>{i.current&&(clearTimeout(i.current),i.current=null)},[]);N.useEffect(()=>{if(!t||t.isDestroyed)return;const h=t.view.dom;if(!h)return;const p=g=>{const w=g.target.closest("a");w&&h.contains(w)&&s(w)},m=g=>{const b=g.target,w=g.relatedTarget;if(b.closest("a")){if(w&&o.current?.contains(w))return;a()}};return h.addEventListener("mouseover",p),h.addEventListener("mouseout",m),()=>{h.removeEventListener("mouseover",p),h.removeEventListener("mouseout",m),i.current&&clearTimeout(i.current)}},[t,s,a]);const c=N.useCallback(()=>{n.url&&window.open(n.url,"_blank","noopener,noreferrer"),r(h=>({...h,isVisible:!1}))},[n.url]),u=N.useCallback(()=>{if(n.linkElement){const{view:h}=t,{doc:p}=h.state;let m=null,g=null;p.descendants((b,w)=>{if(b.isText&&b.marks.some(E=>E.type.name==="link")){const E=h.nodeDOM(w);if(E&&(E===n.linkElement||E.parentElement===n.linkElement))return m=w,g=w+b.nodeSize,!1}return!0}),m!==null&&g!==null?t.chain().focus().setTextSelection({from:m,to:g}).unsetLink().run():t.chain().focus().unsetLink().run()}r(h=>({...h,isVisible:!1}))},[t,n.linkElement]),d=N.useCallback(()=>{if(n.linkElement){const{view:h}=t,{doc:p}=h.state;p.descendants((m,g)=>{if(m.isText&&m.marks.some(b=>b.type.name==="link")){const b=h.nodeDOM(g);if(b&&(b===n.linkElement||b.parentElement===n.linkElement))return t.chain().focus().setTextSelection({from:g,to:g+m.nodeSize}).run(),!1}return!0})}r(h=>({...h,isVisible:!1})),e()},[t,n.linkElement,e]);if(!n.isVisible)return null;const f=n.url.length>40?n.url.substring(0,40)+"...":n.url;return wn.createPortal(y.jsxDEV("div",{ref:o,className:"link-hover-tooltip",style:{position:"fixed",top:`${n.position.top}px`,left:`${n.position.left}px`,zIndex:9999},onMouseEnter:l,onMouseLeave:a,children:y.jsxDEV("div",{className:"link-hover-tooltip-content",children:[y.jsxDEV("button",{onClick:d,className:"link-hover-tooltip-edit",title:"Edit link",children:y.jsxDEV("span",{className:"link-hover-tooltip-url",children:f||"Edit link"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:223,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:218,columnNumber:9},this),y.jsxDEV("div",{className:"link-hover-tooltip-actions",children:[y.jsxDEV("button",{onClick:c,className:"link-hover-tooltip-btn",title:"Open link",children:y.jsxDEV(uD,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:231,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:226,columnNumber:11},this),y.jsxDEV("button",{onClick:u,className:"link-hover-tooltip-btn link-hover-tooltip-btn-danger",title:"Remove link",children:y.jsxDEV(AD,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:238,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:225,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:217,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:205,columnNumber:5},this),document.body)}const St=({onMouseDown:t,isActive:e,disabled:n,children:r,title:o})=>y.jsxDEV("button",{onMouseDown:t,disabled:n,title:o,className:`
      flex items-center justify-center w-7 h-7 rounded-md flex-shrink-0
      transition-all duration-100 ease-out touch-manipulation
      ${e?"bg-primary text-primary-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
      ${n?"opacity-50 cursor-not-allowed":""}
    `,children:r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:47,columnNumber:3},void 0),R0=()=>y.jsxDEV("div",{className:"w-px h-5 bg-border mx-0.5 flex-shrink-0"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:66,columnNumber:3},void 0),P0=N.memo(function({editor:e,className:n=""}){const r=ud({editor:e,selector:({editor:k})=>({isBold:k.isActive("bold"),isItalic:k.isActive("italic"),isUnderline:k.isActive("underline"),isStrike:k.isActive("strike"),isCode:k.isActive("code"),isHighlight:k.isActive("highlight"),isLink:k.isActive("link"),isH1:k.isActive("heading",{level:1}),isH2:k.isActive("heading",{level:2}),isH3:k.isActive("heading",{level:3}),isBulletList:k.isActive("bulletList"),isOrderedList:k.isActive("orderedList"),isTaskList:k.isActive("taskList"),isBlockquote:k.isActive("blockquote"),isCodeBlock:k.isActive("codeBlock")})}),[o,i]=N.useState(!1),[s,a]=N.useState(""),[l,c]=N.useState(!1),[u,d]=N.useState({top:0,left:0}),f=N.useRef(null),h=N.useRef(null),p=N.useRef(null),m=N.useCallback(()=>{if(s){let k=s.trim();!/^https?:\/\//i.test(k)&&!k.startsWith("mailto:")&&(k="https://"+k),e.chain().focus().extendMarkRange("link").setLink({href:k}).run()}else e.chain().focus().extendMarkRange("link").unsetLink().run();i(!1),a("")},[e,s]),g=k=>{k.preventDefault(),k.stopPropagation();const S=e.getAttributes("link").href;a(S||""),i(!0)},b=N.useCallback((k,S)=>{k.preventDefault(),k.stopPropagation(),S()},[]);N.useEffect(()=>{if(!e||e.isDestroyed)return;const k=()=>{if(!e.isDestroyed)try{const{selection:S}=e.state,{empty:C,from:M,to:A}=S,q=("node"in S&&S.node?S.node:e.state.doc.nodeAt(M))?.type?.name==="resizableImage";if(C&&!q||e.isActive("codeBlock")){p.current&&(clearTimeout(p.current),p.current=null),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{c(!1),i(!1)},150);return}h.current&&(clearTimeout(h.current),h.current=null);const X=e.view.coordsAtPos(M),H=e.view.coordsAtPos(A),j=f.current?.offsetWidth||500,K=f.current?.offsetHeight||40,re=8,_=window.innerWidth;let O=(X.left+H.left)/2-j/2;O=Math.max(re,Math.min(_-j-re,O));let $=X.top-K-10;$<re&&($=H.bottom+10),l?d({top:Math.max(re,$),left:O}):(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{d({top:Math.max(re,$),left:O}),c(!0)},50))}catch(S){console.warn("FloatingToolbar: Error updating position",S)}};return e.on("selectionUpdate",k),()=>{e.off("selectionUpdate",k),h.current&&clearTimeout(h.current),p.current&&clearTimeout(p.current)}},[e,l]);const w=k=>{h.current&&(clearTimeout(h.current),h.current=null)};if(!l)return null;const E=15,v=o?y.jsxDEV("div",{ref:f,className:`floating-toolbar ${n}`,style:{position:"fixed",top:u.top,left:u.left,zIndex:9999},onMouseDown:w,children:y.jsxDEV("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 px-2 w-[280px] sm:w-auto",children:[y.jsxDEV("input",{type:"url",placeholder:"Enter URL...",value:s,onChange:k=>a(k.target.value),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),m()),k.key==="Escape"&&(i(!1),a(""))},className:`
            bg-secondary/50 rounded px-3 py-2 sm:py-1
            text-sm text-foreground placeholder:text-muted-foreground
            outline-none border border-border/50
            w-full sm:w-48
          `,autoFocus:!0},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:252,columnNumber:9},this),y.jsxDEV("div",{className:"flex gap-2",children:[y.jsxDEV("button",{onMouseDown:k=>{k.preventDefault(),m()},className:`
              flex-1 sm:flex-none px-4 sm:px-3 py-2 sm:py-1 text-sm sm:text-xs font-medium rounded
              bg-primary text-primary-foreground
              hover:opacity-90 active:opacity-80 transition-opacity touch-manipulation
            `,children:"Apply"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:276,columnNumber:11},this),y.jsxDEV("button",{onMouseDown:k=>{k.preventDefault(),i(!1),a("")},className:`
              flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-1 text-sm sm:text-xs font-medium rounded
              bg-secondary text-secondary-foreground
              hover:bg-accent active:bg-accent/80 transition-colors touch-manipulation
            `,children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:289,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:275,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:251,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:240,columnNumber:5},this):y.jsxDEV("div",{ref:f,className:`floating-toolbar ${n}`,style:{position:"fixed",top:u.top,left:u.left,zIndex:9999},onMouseDown:w,children:[y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().setParagraph().run()),isActive:!r?.isH1&&!r?.isH2&&!r?.isH3&&!r?.isBulletList&&!r?.isOrderedList&&!r?.isTaskList&&!r?.isBlockquote&&!r?.isCodeBlock,title:"Paragraph",children:y.jsxDEV(ED,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:324,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:319,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleHeading({level:1}).run()),isActive:r?.isH1,title:"Heading 1",children:y.jsxDEV(kl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:333,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:328,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleHeading({level:2}).run()),isActive:r?.isH2,title:"Heading 2",children:y.jsxDEV(nf,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:335,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleHeading({level:3}).run()),isActive:r?.isH3,title:"Heading 3",children:y.jsxDEV(rf,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:347,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:342,columnNumber:7},this),y.jsxDEV(R0,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:350,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleBold().run()),isActive:r?.isBold,title:"Bold (Ctrl+B)",children:y.jsxDEV(ml,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:358,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:353,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleItalic().run()),isActive:r?.isItalic,title:"Italic (Ctrl+I)",children:y.jsxDEV(vl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:365,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:360,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleUnderline().run()),isActive:r?.isUnderline,title:"Underline (Ctrl+U)",children:y.jsxDEV(_l,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:372,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:367,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleStrike().run()),isActive:r?.isStrike,title:"Strikethrough",children:y.jsxDEV(Tl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:379,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:374,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleCode().run()),isActive:r?.isCode,title:"Inline Code (Ctrl+E)",children:y.jsxDEV(ef,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:386,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:381,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleHighlight().run()),isActive:r?.isHighlight,title:"Highlight",children:y.jsxDEV(of,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:393,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:388,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:g,isActive:r?.isLink,title:"Link (Ctrl+K)",children:y.jsxDEV(Nl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:401,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:396,columnNumber:7},this),y.jsxDEV(R0,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:404,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleBlockquote().run()),isActive:r?.isBlockquote,title:"Quote",children:y.jsxDEV(Sl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:412,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:407,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleBulletList().run()),isActive:r?.isBulletList,title:"Bullet List",children:y.jsxDEV(ji,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:419,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:414,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleOrderedList().run()),isActive:r?.isOrderedList,title:"Numbered List",children:y.jsxDEV(xl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:426,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:421,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleTaskList().run()),isActive:r?.isTaskList,title:"Task List",children:y.jsxDEV(Cl,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:433,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:428,columnNumber:7},this),y.jsxDEV(St,{onMouseDown:k=>b(k,()=>e.chain().focus().toggleCodeBlock().run()),isActive:r?.isCodeBlock,title:"Code Block",children:y.jsxDEV(fD,{size:E},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:440,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:435,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:307,columnNumber:5},this);return wn.createPortal(v,document.body)}),Ol={info:{icon:Ro,label:"Info",color:"var(--callout-info)"},warning:{icon:Al,label:"Warning",color:"var(--callout-warning)"},error:{icon:aD,label:"Error",color:"var(--callout-error)"},success:{icon:wl,label:"Success",color:"var(--callout-success)"},note:{icon:Lo,label:"Note",color:"var(--callout-note)"}};function PD({buttonRef:t,type:e,onTypeChange:n,onClose:r,theme:o}){const i=N.useRef(null),[s,a]=N.useState(null),l=185,c=N.useCallback(()=>{if(!t.current)return;const d=t.current.getBoundingClientRect(),h=window.innerHeight-d.bottom,p=d.top,m=h<l+8&&p>l+8;a({top:m?d.top-l-4:d.bottom+4,left:d.left,flipped:m})},[t]);if(N.useEffect(()=>{c();const d=()=>c();return window.addEventListener("scroll",d,!0),window.addEventListener("resize",d),()=>{window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",d)}},[c]),N.useEffect(()=>{const d=f=>{i.current&&!i.current.contains(f.target)&&t.current&&!t.current.contains(f.target)&&r()};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[t,r]),N.useEffect(()=>{const d=f=>{f.key==="Escape"&&r()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[r]),!s)return null;const u=y.jsxDEV("div",{ref:i,className:`callout-type-dropdown-portal ${o==="dark"?"dark-theme":"light-theme"}`,style:{position:"fixed",top:s.top,left:s.left,zIndex:99999,maxHeight:l,overflowY:"auto"},children:Object.keys(Ol).map(d=>{const f=Ol[d],h=f.icon;return y.jsxDEV("button",{className:`callout-type-option ${d===e?"active":""}`,onClick:()=>n(d),style:{"--callout-option-color":f.color},children:[y.jsxDEV(h,{size:16,style:{color:f.color}},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:124,columnNumber:13},this),y.jsxDEV("span",{children:f.label},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:125,columnNumber:13},this)]},d,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:118,columnNumber:11},this)})},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:102,columnNumber:5},this);return wn.createPortal(u,document.body)}function BD({node:t,updateAttributes:e,editor:n}){const[r,o]=N.useState(!1),i=N.useRef(null),s=t.attrs.type||"info",a=Ol[s]||Ol.info,l=a.icon,[c,u]=N.useState("light");N.useEffect(()=>{const h=n.view.dom.closest("[data-theme]");h?u(h.getAttribute("data-theme")||"light"):document.documentElement.classList.contains("dark")&&u("dark")},[n]);const d=N.useCallback(h=>{e({type:h}),o(!1)},[e]),f=N.useCallback(()=>{o(!1)},[]);return y.jsxDEV(va,{className:`callout callout-${s}`,"data-callout":"","data-type":s,children:[y.jsxDEV("div",{className:"callout-icon-container",children:[y.jsxDEV("button",{ref:i,className:"callout-icon-button",onClick:()=>n.isEditable&&o(!r),title:n.isEditable?"Click to change callout type":a.label,style:{color:a.color},contentEditable:!1,children:[y.jsxDEV(l,{size:20},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:173,columnNumber:11},this),n.isEditable&&y.jsxDEV(bl,{size:12,className:"callout-chevron"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:174,columnNumber:33},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:165,columnNumber:9},this),r&&n.isEditable&&y.jsxDEV(PD,{buttonRef:i,type:s,onTypeChange:d,onClose:f,theme:c},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:164,columnNumber:7},this),y.jsxDEV("div",{className:"callout-content",children:y.jsxDEV(hd,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:188,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:187,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:163,columnNumber:5},this)}const zD=tt.create({name:"callout",addOptions(){return{HTMLAttributes:{},types:["info","warning","error","success","note"]}},content:"block+",group:"block",defining:!0,addAttributes(){return{type:{default:"info",parseHTML:t=>t.getAttribute("data-type")||"info",renderHTML:t=>({"data-type":t.type})}}},parseHTML(){return[{tag:"div[data-callout]"}]},renderHTML({node:t,HTMLAttributes:e}){const n=t.attrs.type;return["div",Ie(this.options.HTMLAttributes,e,{"data-callout":"","data-type":n,class:`callout callout-${n}`}),0]},addNodeView(){return pd(BD)},addCommands(){return{setCallout:t=>({commands:e})=>e.wrapIn(this.name,t),toggleCallout:t=>({commands:e})=>e.toggleWrap(this.name,t),unsetCallout:()=>({commands:t})=>t.lift(this.name),insertCallout:t=>({chain:e})=>{const n=t?.type||"info";return e().insertContent({type:this.name,attrs:{type:n},content:[{type:"paragraph"}]}).focus().run()},updateCalloutType:t=>({commands:e})=>e.updateAttributes(this.name,{type:t})}},addKeyboardShortcuts(){return{"Mod-Shift-c":()=>this.editor.commands.toggleCallout({type:"info"})}}});var $D=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,VD=tt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Ie(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,o,i,s;const a=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",l=(o=(r=t.attrs)==null?void 0:r.alt)!=null?o:"",c=(s=(i=t.attrs)==null?void 0:i.title)!=null?s:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:o,getPos:i,HTMLAttributes:s,editor:a})=>{const l=document.createElement("img");Object.entries(s).forEach(([d,f])=>{if(f!=null)switch(d){case"width":case"height":break;default:l.setAttribute(d,f);break}}),l.src=s.src;const c=new bC({element:l,editor:a,node:o,getPos:i,onResize:(d,f)=>{l.style.width=`${d}px`,l.style.height=`${f}px`},onCommit:(d,f)=>{const h=i();h!==void 0&&this.editor.chain().setNodeSelection(h).updateAttributes(this.name,{width:d,height:f}).run()},onUpdate:(d,f,h)=>d.type===o.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Vg({find:$D,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),HD=VD;const B0=HD.extend({name:"resizableImage",addOptions(){return{...this.parent?.(),HTMLAttributes:{},allowBase64:!0,onImageClick:void 0}},addAttributes(){return{...this.parent?.(),width:{default:null,parseHTML:t=>{const e=t.getAttribute("width")||t.style.width;return e?parseInt(e,10):null},renderHTML:t=>t.width?{width:t.width,style:`width: ${t.width}px`}:{}},height:{default:null,parseHTML:t=>{const e=t.getAttribute("height")||t.style.height;return e?parseInt(e,10):null},renderHTML:t=>t.height?{height:t.height}:{}},align:{default:"left",parseHTML:t=>t.getAttribute("data-align")||"left",renderHTML:t=>({"data-align":t.align})}}},parseHTML(){return[{tag:"img[src]"},{tag:"figure.image-resizer img[src]"}]},addCommands(){return{...this.parent?.(),updateImage:t=>({commands:e})=>e.updateAttributes("resizableImage",t),setImageAlign:t=>({commands:e})=>e.updateAttributes("resizableImage",{align:t})}},renderHTML({HTMLAttributes:t}){const e=t["data-align"]||"center";return["figure",{class:"image-resizer",style:{left:"margin-right: auto;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto;"}[e]||"margin-left: auto; margin-right: auto;"},["img",Ie(this.options.HTMLAttributes,t)]]},addNodeView(){return({node:t,editor:e,getPos:n})=>{const r=document.createElement("figure");r.classList.add("image-resizer");const o=v=>{const k={left:"margin-right: auto; margin-left: 0;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto; margin-right: 0;"}[v]||"margin-left: auto; margin-right: auto;";r.style.cssText=`display: block; position: relative; width: fit-content; ${k}`};o(t.attrs.align||"left");const i=document.createElement("img");i.src=t.attrs.src,i.alt=t.attrs.alt||"",t.attrs.width&&(i.style.width=`${t.attrs.width}px`);const s=document.createElement("div");s.classList.add("resize-handle"),s.style.cssText=`
        position: absolute;
        bottom: 4px;
        right: 4px;
        width: 24px;
        height: 24px;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: se-resize;
        opacity: 0;
        transition: opacity 0.15s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
      `,s.innerHTML=`
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="oklch(0.4 0 0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(90deg);">
          <polyline points="15 3 21 3 21 9"></polyline>
          <polyline points="9 21 3 21 3 15"></polyline>
          <line x1="21" y1="3" x2="14" y2="10"></line>
          <line x1="3" y1="21" x2="10" y2="14"></line>
        </svg>
      `;const a=document.createElement("button");a.classList.add("image-menu-btn"),a.setAttribute("type","button"),a.setAttribute("title","Image options"),a.style.cssText=`
        position: absolute;
        top: 8px;
        right: 8px;
        width: 28px;
        height: 28px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.15s ease, background 0.15s ease;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
        z-index: 10;
      `,a.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="5" r="1"></circle>
          <circle cx="12" cy="12" r="1"></circle>
          <circle cx="12" cy="19" r="1"></circle>
        </svg>
      `;const l=document.createElement("div");l.classList.add("image-menu-dropdown"),l.style.cssText=`
        position: fixed;
        display: none;
        flex-direction: column;
        min-width: 140px;
        padding: 4px;
        background: oklch(0.99 0 0);
        border: 1px solid oklch(0.9 0 0);
        border-radius: 8px;
        box-shadow: 0 4px 16px oklch(0 0 0 / 0.15);
        z-index: 9999;
      `;const c=(v,k,S)=>{const C=document.createElement("button");return C.setAttribute("type","button"),C.style.cssText=`
          display: flex;
          align-items: center;
          gap: 8px;
          width: 100%;
          padding: 8px 12px;
          font-size: 13px;
          color: oklch(0.3 0 0);
          background: transparent;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          text-align: left;
          transition: background 0.15s ease;
        `,C.innerHTML=`${k}<span>${v}</span>`,C.addEventListener("mouseenter",()=>{C.style.background="oklch(0.95 0 0)"}),C.addEventListener("mouseleave",()=>{C.style.background="transparent"}),C.addEventListener("click",M=>{M.preventDefault(),M.stopPropagation(),S(),l.style.display="none"}),C},u='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',d='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',f='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>';l.appendChild(c("Edit",u,()=>{const v=typeof n=="function"?n():null;if(v!=null&&this.options.onImageClick){const k=i.getBoundingClientRect();this.options.onImageClick({src:t.attrs.src,alt:t.attrs.alt||"",pos:v,rect:k})}})),l.appendChild(c("Copy image",d,async()=>{try{const k=await(await fetch(t.attrs.src)).blob();await navigator.clipboard.write([new ClipboardItem({[k.type]:k})])}catch{await navigator.clipboard.writeText(t.attrs.src)}})),l.appendChild(c("Save image",f,()=>{const v=document.createElement("a");v.href=t.attrs.src,v.download=t.attrs.alt||"image",v.click()}));let h=!1;a.addEventListener("click",v=>{if(v.preventDefault(),v.stopPropagation(),h)l.style.display="none",h=!1;else{const k=a.getBoundingClientRect();l.style.top=`${k.bottom+4}px`,l.style.left=`${k.right-140}px`,l.style.display="flex",h=!0}});const p=v=>{!l.contains(v.target)&&!a.contains(v.target)&&(l.style.display="none",h=!1)};document.addEventListener("click",p),r.appendChild(i),r.appendChild(s),r.appendChild(a),document.body.appendChild(l),r.addEventListener("mouseenter",()=>{s.style.opacity="1",a.style.opacity="1"}),r.addEventListener("mouseleave",()=>{s.style.opacity="0",h||(a.style.opacity="0")}),a.addEventListener("mouseenter",()=>{a.style.background="oklch(0.95 0 0)"}),a.addEventListener("mouseleave",()=>{a.style.background="oklch(0.98 0 0 / 0.95)"});let m,g;const b=v=>{v.preventDefault(),m=v.clientX,g=i.offsetWidth,document.addEventListener("mousemove",w),document.addEventListener("mouseup",E)},w=v=>{const k=v.clientX-m,S=Math.max(100,g+k);i.style.width=`${S}px`},E=()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",E);const v=typeof n=="function"?n():null;v!=null&&e.chain().focus().updateAttributes("resizableImage",{width:i.offsetWidth}).run()};return s.addEventListener("mousedown",b),{dom:r,update:v=>v.type.name!=="resizableImage"?!1:(i.src=v.attrs.src,i.alt=v.attrs.alt||"",v.attrs.width&&(i.style.width=`${v.attrs.width}px`),o(v.attrs.align||"left"),!0),destroy:()=>{s.removeEventListener("mousedown",b),document.removeEventListener("click",p),l.remove()}}}}});function FD(t){const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const o=new Date(n);if(o.setDate(o.getDate()-1),n.setHours(0,0,0,0),r.setHours(0,0,0,0),o.setHours(0,0,0,0),e.setHours(0,0,0,0),e.getTime()===n.getTime())return"Today";if(e.getTime()===r.getTime())return"Tomorrow";if(e.getTime()===o.getTime())return"Yesterday";const i={month:"short",day:"numeric"};return e.getFullYear()!==n.getFullYear()&&(i.year="numeric"),e.toLocaleDateString("en-US",i)}function UD(t){const e=new Date(t),n=new Date,r=new Date(n);return r.setDate(r.getDate()+7),n.setHours(0,0,0,0),e.setHours(0,0,0,0),e.getTime()===n.getTime()?"date-today":e<n?"date-overdue":e<=r?"date-upcoming":""}function WD({node:t,updateAttributes:e,selected:n}){const[r,o]=N.useState(!1),[i,s]=N.useState({top:0,left:0}),a=N.useRef(null),l=N.useRef(null),c=N.useRef(null),u=t.attrs.date||new Date().toISOString().split("T")[0],d=FD(u),f=UD(u),h=g=>{if(g.preventDefault(),g.stopPropagation(),a.current){const b=a.current.getBoundingClientRect();s({top:b.bottom+8,left:b.left})}o(!0)},p=g=>{const b=g.target.value;b&&(e({date:b}),o(!1))},m=g=>{const b=new Date;b.setDate(b.getDate()+g),e({date:b.toISOString().split("T")[0]}),o(!1)};return N.useEffect(()=>{const g=w=>{l.current&&!l.current.contains(w.target)&&a.current&&!a.current.contains(w.target)&&o(!1)},b=w=>{w.key==="Escape"&&o(!1)};return r&&(document.addEventListener("mousedown",g),document.addEventListener("keydown",b),setTimeout(()=>c.current?.focus(),50)),()=>{document.removeEventListener("mousedown",g),document.removeEventListener("keydown",b)}},[r]),y.jsxDEV(va,{as:"span",className:"inline",children:[y.jsxDEV("span",{ref:a,onClick:h,className:`date-pill ${f} ${n?"ProseMirror-selectednode":""} cursor-pointer`,contentEditable:!1,"data-type":"date-pill","data-date":u,children:[y.jsxDEV(M0,{size:14,className:"date-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:158,columnNumber:9},this),y.jsxDEV("span",{className:"date-text",children:d},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:159,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:150,columnNumber:7},this),r&&y.jsxDEV("div",{ref:l,className:"date-picker-popup",style:{position:"fixed",top:i.top,left:i.left,zIndex:100},children:[y.jsxDEV("div",{className:"flex gap-1 mb-3",children:[y.jsxDEV("button",{type:"button",onClick:()=>m(0),className:"quick-date-btn",children:"Today"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:175,columnNumber:13},this),y.jsxDEV("button",{type:"button",onClick:()=>m(1),className:"quick-date-btn",children:"Tomorrow"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:182,columnNumber:13},this),y.jsxDEV("button",{type:"button",onClick:()=>m(7),className:"quick-date-btn",children:"Next Week"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:174,columnNumber:11},this),y.jsxDEV("div",{className:"relative",children:y.jsxDEV("input",{ref:c,type:"date",value:u,onChange:p,className:"date-picker-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:200,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:199,columnNumber:11},this),y.jsxDEV("div",{className:"mt-2 pt-2 border-t border-border",children:y.jsxDEV("button",{type:"button",onClick:()=>{o(!1)},className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Close"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:211,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:149,columnNumber:5},this)}function KD(t){const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const o=new Date(n);if(o.setDate(o.getDate()-1),n.setHours(0,0,0,0),r.setHours(0,0,0,0),o.setHours(0,0,0,0),e.setHours(0,0,0,0),e.getTime()===n.getTime())return"Today";if(e.getTime()===r.getTime())return"Tomorrow";if(e.getTime()===o.getTime())return"Yesterday";const i={month:"short",day:"numeric"};return e.getFullYear()!==n.getFullYear()&&(i.year="numeric"),e.toLocaleDateString("en-US",i)}function qD(t){const e=new Date(t),n=new Date,r=new Date(n);return r.setDate(r.getDate()+7),n.setHours(0,0,0,0),e.setHours(0,0,0,0),e.getTime()===n.getTime()?"date-today":e<n?"date-overdue":e<=r?"date-upcoming":""}const z0=tt.create({name:"datePill",group:"inline",inline:!0,atom:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{date:{default:new Date().toISOString().split("T")[0],parseHTML:t=>t.getAttribute("data-date"),renderHTML:t=>({"data-date":t.date})}}},parseHTML(){return[{tag:'span[data-type="date-pill"]'}]},renderHTML({node:t,HTMLAttributes:e}){const n=t.attrs.date,r=KD(n),o=qD(n);return["span",Ie(this.options.HTMLAttributes,e,{"data-type":"date-pill",class:`date-pill ${o}`.trim()}),["span",{class:"date-icon"},""],["span",{class:"date-text"},r]]},addNodeView(){return pd(WD)},addCommands(){return{insertDatePill:t=>({commands:e})=>{const n=t||new Date().toISOString().split("T")[0];return e.insertContent({type:this.name,attrs:{date:n}})},updateDatePill:t=>({commands:e})=>e.updateAttributes(this.name,{date:t})}},addKeyboardShortcuts(){return{"Mod-Shift-d":()=>this.editor.commands.insertDatePill()}},addInputRules(){const t=new Yt({find:/@today\s$/,handler:({state:i,range:s,chain:a})=>{const l=new Date().toISOString().split("T")[0];a().deleteRange(s).insertDatePill(l).run()}}),e=new Yt({find:/@tomorrow\s$/,handler:({state:i,range:s,chain:a})=>{const l=new Date;l.setDate(l.getDate()+1),a().deleteRange(s).insertDatePill(l.toISOString().split("T")[0]).run()}}),n=new Yt({find:/@yesterday\s$/,handler:({state:i,range:s,chain:a})=>{const l=new Date;l.setDate(l.getDate()-1),a().deleteRange(s).insertDatePill(l.toISOString().split("T")[0]).run()}}),r=new Yt({find:/@(\d{4}-\d{2}-\d{2})\s$/,handler:({state:i,range:s,chain:a,match:l})=>{const c=l[1];a().deleteRange(s).insertDatePill(c).run()}}),o=new Yt({find:/@([A-Za-z]{3})\s?(\d{1,2})\s$/,handler:({state:i,range:s,chain:a,match:l})=>{const c=l[1],u=parseInt(l[2],10),f={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}[c.toLowerCase()];if(f!==void 0){const h=new Date().getFullYear(),p=new Date(h,f,u);a().deleteRange(s).insertDatePill(p.toISOString().split("T")[0]).run()}}});return[t,e,n,r,o]}});function GD({isOpen:t,onClose:e,onInsert:n,position:r}){const[o,i]=N.useState(""),[s,a]=N.useState(""),[l,c]=N.useState(""),[u,d]=N.useState(!1),f=N.useRef(null),h=N.useRef(null);N.useEffect(()=>{t&&(i(""),a(""),c(""),setTimeout(()=>{f.current?.focus()},100))},[t]),N.useEffect(()=>{if(!t)return;const w=v=>{h.current&&!h.current.contains(v.target)&&e()},E=v=>{v.key==="Escape"&&e()};return document.addEventListener("mousedown",w),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",E)}},[t,e]);const p=w=>{if(!w.trim())return c("Please enter an image URL"),!1;try{const E=new URL(w);if(!["http:","https:","data:"].includes(E.protocol))return c("URL must start with http://, https://, or be a data URL"),!1}catch{return c("Please enter a valid URL"),!1}return c(""),!0},m=async()=>{if(!p(o))return;d(!0);const w=new window.Image;w.onload=()=>{d(!1),n(o.trim(),s.trim()),e()},w.onerror=()=>{d(!1),n(o.trim(),s.trim()),e()},setTimeout(()=>{u&&(d(!1),n(o.trim(),s.trim()),e())},3e3),w.src=o.trim()},g=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),m())};if(!t)return null;const b=r?{top:r.top,left:Math.min(r.left,typeof window<"u"?window.innerWidth-340:r.left)}:{top:"50%",left:"50%"};return y.jsxDEV("div",{ref:h,className:"image-url-dialog fixed z-50",style:{top:(typeof b.top=="number",b.top),left:typeof b.left=="number"?Math.max(8,b.left):b.left,transform:r?void 0:"translate(-50%, -50%)"},children:[y.jsxDEV("div",{className:"image-url-dialog-header",children:[y.jsxDEV("div",{className:"flex items-center gap-2",children:[y.jsxDEV(El,{size:16,className:"text-primary"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:143,columnNumber:11},this),y.jsxDEV("span",{className:"font-medium text-sm",children:"Insert Image from URL"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:144,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:142,columnNumber:9},this),y.jsxDEV("button",{onClick:e,className:"image-url-dialog-close","aria-label":"Close",children:y.jsxDEV(eo,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:151,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:146,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:141,columnNumber:7},this),y.jsxDEV("div",{className:"image-url-dialog-content",children:[y.jsxDEV("div",{className:"image-url-dialog-field",children:[y.jsxDEV("label",{className:"image-url-dialog-label",children:[y.jsxDEV(sf,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:160,columnNumber:13},this),"Image URL"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:159,columnNumber:11},this),y.jsxDEV("input",{ref:f,type:"url",value:o,onChange:w=>{i(w.target.value),l&&c("")},onKeyDown:g,placeholder:"https://example.com/image.jpg",className:`image-url-dialog-input ${l?"error":""}`},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:163,columnNumber:11},this),l&&y.jsxDEV("span",{className:"image-url-dialog-error",children:l},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:176,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:158,columnNumber:9},this),y.jsxDEV("div",{className:"image-url-dialog-field",children:[y.jsxDEV("label",{className:"image-url-dialog-label",children:[y.jsxDEV(Xi,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:183,columnNumber:13},this),"Alt Text (optional)"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:182,columnNumber:11},this),y.jsxDEV("input",{type:"text",value:s,onChange:w=>a(w.target.value),onKeyDown:g,placeholder:"Describe the image",className:"image-url-dialog-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:186,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:181,columnNumber:9},this),y.jsxDEV("div",{className:"image-url-dialog-actions",children:[y.jsxDEV("button",{onClick:e,className:"image-url-dialog-btn image-url-dialog-btn-cancel",children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:198,columnNumber:11},this),y.jsxDEV("button",{onClick:m,disabled:u||!o.trim(),className:"image-url-dialog-btn image-url-dialog-btn-insert",children:u?"Validating...":"Insert Image"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:204,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:197,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:156,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:131,columnNumber:5},this)}const jD=[{title:"Paragraph",description:"Normal text",icon:y.jsxDEV(Xi,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:62,columnNumber:11},void 0),command:t=>t.chain().focus().setParagraph().run(),keywords:["text","normal","p"]},{title:"Heading 1",description:"Large section heading",icon:y.jsxDEV(kl,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:69,columnNumber:11},void 0),command:t=>t.chain().focus().toggleHeading({level:1}).run(),keywords:["h1","title","large"]},{title:"Heading 2",description:"Medium section heading",icon:y.jsxDEV(nf,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:76,columnNumber:11},void 0),command:t=>t.chain().focus().toggleHeading({level:2}).run(),keywords:["h2","subtitle"]},{title:"Heading 3",description:"Small section heading",icon:y.jsxDEV(rf,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:83,columnNumber:11},void 0),command:t=>t.chain().focus().toggleHeading({level:3}).run(),keywords:["h3","subheading"]},{title:"Bullet List",description:"Create a simple bullet list",icon:y.jsxDEV(ji,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:90,columnNumber:11},void 0),command:t=>t.chain().focus().toggleBulletList().run(),keywords:["ul","unordered","bullets"]},{title:"Numbered List",description:"Create a numbered list",icon:y.jsxDEV(xl,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:97,columnNumber:11},void 0),command:t=>t.chain().focus().toggleOrderedList().run(),keywords:["ol","ordered","numbers"]},{title:"Task List",description:"Create a todo list with checkboxes",icon:y.jsxDEV(Cl,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:104,columnNumber:11},void 0),command:t=>t.chain().focus().toggleTaskList().run(),keywords:["todo","checkbox","tasks"]},{title:"Quote",description:"Add a blockquote",icon:y.jsxDEV(Sl,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:111,columnNumber:11},void 0),command:t=>t.chain().focus().toggleBlockquote().run(),keywords:["blockquote","citation"]},{title:"Code Block",description:"Add a code block with syntax highlighting",icon:y.jsxDEV(Qd,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:118,columnNumber:11},void 0),command:t=>t.chain().focus().toggleCodeBlock().run(),keywords:["code","pre","syntax"]},{title:"Table",description:"Insert a table",icon:y.jsxDEV(Ml,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:125,columnNumber:11},void 0),command:t=>t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),keywords:["grid","spreadsheet"]},{title:"Image",description:"Insert an image from URL",icon:y.jsxDEV(El,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:133,columnNumber:11},void 0),command:()=>{},keywords:["picture","photo","img"],isImageCommand:!0},{title:"Divider",description:"Add a horizontal rule",icon:y.jsxDEV(af,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:144,columnNumber:11},void 0),command:t=>t.chain().focus().setHorizontalRule().run(),keywords:["hr","separator","line"]},{title:"Info Callout",description:"Add an info callout box",icon:y.jsxDEV(Ro,{size:18,className:"text-blue-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:151,columnNumber:11},void 0),command:t=>t.chain().focus().toggleCallout({type:"info"}).run(),keywords:["note","tip","information"]},{title:"Warning Callout",description:"Add a warning callout box",icon:y.jsxDEV(Al,{size:18,className:"text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:158,columnNumber:11},void 0),command:t=>t.chain().focus().toggleCallout({type:"warning"}).run(),keywords:["caution","alert"]},{title:"Error Callout",description:"Add an error callout box",icon:y.jsxDEV(yl,{size:18,className:"text-red-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:165,columnNumber:11},void 0),command:t=>t.chain().focus().toggleCallout({type:"error"}).run(),keywords:["danger","critical"]},{title:"Success Callout",description:"Add a success callout box",icon:y.jsxDEV(wl,{size:18,className:"text-green-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:172,columnNumber:11},void 0),command:t=>t.chain().focus().toggleCallout({type:"success"}).run(),keywords:["done","complete"]},{title:"Note Callout",description:"Add a note callout box",icon:y.jsxDEV(Lo,{size:18,className:"text-purple-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:179,columnNumber:11},void 0),command:t=>t.chain().focus().toggleCallout({type:"note"}).run(),keywords:["memo","remember"]},{title:"Date",description:"Insert a date pill (today)",icon:y.jsxDEV(M0,{size:18,className:"text-cyan-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:186,columnNumber:11},void 0),command:t=>t.chain().focus().insertDatePill().run(),keywords:["date","today","calendar","time","schedule"]},{title:"Wiki Link",description:"Insert a [[page name]] link",icon:y.jsxDEV(sf,{size:18,className:"text-cyan-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:193,columnNumber:11},void 0),command:t=>{const e=window.prompt("Enter page name:");e&&t.chain().focus().insertContent(`[[${e}]]`).run()},keywords:["wiki","internal","page","link","backlink"]}];function $0({editor:t}){const[e,n]=N.useState(!1),[r,o]=N.useState(""),[i,s]=N.useState(0),[a,l]=N.useState({top:0,left:0}),[c,u]=N.useState(!1),[d,f]=N.useState({top:0,left:0}),h=N.useRef(null),p=jD.filter(w=>{const E=r.toLowerCase();return w.title.toLowerCase().includes(E)||w.description.toLowerCase().includes(E)||w.keywords?.some(v=>v.includes(E))}),m=N.useCallback(w=>{const E=p[w];if(E){const{state:v}=t,{selection:k}=v,{$from:S}=k,C=S.nodeBefore?.textContent||"",M=C.lastIndexOf("/");if(M!==-1){const A=S.pos-(C.length-M);t.chain().focus().deleteRange({from:A,to:S.pos}).run()}if(E.isImageCommand){const A=t.view.coordsAtPos(S.pos);f({top:A.bottom+8,left:A.left}),u(!0)}else E.command(t);n(!1),o(""),s(0)}},[t,p]),g=N.useCallback((w,E)=>{t.chain().focus().setImage({src:w,alt:E}).run()},[t]);if(N.useEffect(()=>{if(!t)return;const w=v=>{if(!e){if(v.key==="/"){const{state:k}=t,{selection:S}=k,{$from:C}=S,M=t.view.coordsAtPos(C.pos);l({top:M.bottom+8,left:M.left}),setTimeout(()=>{n(!0),o(""),s(0)},10)}return}v.key==="ArrowDown"?(v.preventDefault(),s(k=>(k+1)%p.length)):v.key==="ArrowUp"?(v.preventDefault(),s(k=>(k-1+p.length)%p.length)):v.key==="Enter"?(v.preventDefault(),m(i)):v.key==="Escape"?(v.preventDefault(),n(!1),o("")):v.key==="Backspace"?r.length===0?n(!1):o(k=>k.slice(0,-1)):v.key.length===1&&!v.ctrlKey&&!v.metaKey&&(o(k=>k+v.key),s(0))},E=v=>{h.current&&!h.current.contains(v.target)&&(n(!1),o(""))};return document.addEventListener("keydown",w),document.addEventListener("click",E),()=>{document.removeEventListener("keydown",w),document.removeEventListener("click",E)}},[t,e,r,i,p,m]),N.useEffect(()=>{i>=p.length&&s(Math.max(0,p.length-1))},[p.length,i]),c)return y.jsxDEV(GD,{isOpen:c,onClose:()=>u(!1),onInsert:g,position:d},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:339,columnNumber:7},this);if(!e||p.length===0)return null;const b={top:a.top,left:Math.min(a.left,typeof window<"u"?window.innerWidth-280:a.left)};return y.jsxDEV("div",{ref:h,className:"slash-command-menu fixed z-50 max-h-[60vh] overflow-y-auto",style:{top:b.top,left:Math.max(8,b.left)},children:[y.jsxDEV("div",{className:"text-xs text-muted-foreground px-3 py-2 border-b border-border",children:r?`Searching: ${r}`:"Type to filter..."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:367,columnNumber:7},this),p.map((w,E)=>y.jsxDEV("div",{className:`slash-command-item ${E===i?"is-selected":""}`,onClick:()=>m(E),onMouseEnter:()=>s(E),onTouchStart:()=>s(E),children:[y.jsxDEV("div",{className:"icon flex-shrink-0",children:w.icon},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:378,columnNumber:11},this),y.jsxDEV("div",{className:"flex flex-col min-w-0",children:[y.jsxDEV("span",{className:"label truncate",children:w.title},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:380,columnNumber:13},this),y.jsxDEV("span",{className:"text-xs text-muted-foreground truncate",children:w.description},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:381,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:379,columnNumber:11},this)]},w.title,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:371,columnNumber:9},this))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:359,columnNumber:5},this)}function Ee(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return e?.(o)}}function V0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Il(...t){return e=>{let n=!1;const r=t.map(o=>{const i=V0(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():V0(t[o],null)}}}}function Ct(...t){return x.useCallback(Il(...t),t)}function Po(t,e=[]){let n=[];function r(i,s){const a=x.createContext(s),l=n.length;n=[...n,s];const c=d=>{const{scope:f,children:h,...p}=d,m=f?.[t]?.[l]||a,g=x.useMemo(()=>p,Object.values(p));return I.jsx(m.Provider,{value:g,children:h})};c.displayName=i+"Provider";function u(d,f){const h=f?.[t]?.[l]||a,p=x.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const o=()=>{const i=n.map(s=>x.createContext(s));return function(a){const l=a?.[t]||i;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,YD(o,...e)]}function YD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var vr=globalThis?.document?x.useLayoutEffect:()=>{},XD=x[" useInsertionEffect ".trim().toString()]||vr;function Dl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,i,s]=ZD({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:o;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=x.useCallback(u=>{if(a){const d=JD(u)?u(t):u;d!==t&&s.current?.(d)}else i(u)},[a,t,i,s]);return[l,c]}function ZD({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),o=x.useRef(n),i=x.useRef(e);return XD(()=>{i.current=e},[e]),x.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function JD(t){return typeof t=="function"}function Zi(t){const e=eL(t),n=x.forwardRef((r,o)=>{const{children:i,...s}=r,a=x.Children.toArray(i),l=a.find(nL);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return I.jsx(e,{...s,ref:o,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return I.jsx(e,{...s,ref:o,children:i})});return n.displayName=`${t}.Slot`,n}var QD=Zi("Slot");function eL(t){const e=x.forwardRef((n,r)=>{const{children:o,...i}=n;if(x.isValidElement(o)){const s=oL(o),a=rL(i,o.props);return o.type!==x.Fragment&&(a.ref=r?Il(r,s):s),x.cloneElement(o,a)}return x.Children.count(o)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var H0=Symbol("radix.slottable");function tL(t){const e=({children:n})=>I.jsx(I.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=H0,e}function nL(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===H0}function rL(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function oL(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var iL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bt=iL.reduce((t,e)=>{const n=Zi(`Primitive.${e}`),r=x.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function F0(t,e){t&&Sh.flushSync(()=>t.dispatchEvent(e))}function U0(t){const e=t+"CollectionProvider",[n,r]=Po(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:g,children:b}=m,w=N.useRef(null),E=N.useRef(new Map).current;return I.jsx(o,{scope:g,itemMap:E,collectionRef:w,children:b})};s.displayName=e;const a=t+"CollectionSlot",l=Zi(a),c=N.forwardRef((m,g)=>{const{scope:b,children:w}=m,E=i(a,b),v=Ct(g,E.collectionRef);return I.jsx(l,{ref:v,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Zi(u),h=N.forwardRef((m,g)=>{const{scope:b,children:w,...E}=m,v=N.useRef(null),k=Ct(g,v),S=i(u,b);return N.useEffect(()=>(S.itemMap.set(v,{ref:v,...E}),()=>void S.itemMap.delete(v))),I.jsx(f,{[d]:"",ref:k,children:w})});h.displayName=u;function p(m){const g=i(t+"CollectionConsumer",m);return N.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const E=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((S,C)=>E.indexOf(S.ref.current)-E.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:s,Slot:c,ItemSlot:h},p,r]}var sL=x.createContext(void 0);function W0(t){const e=x.useContext(sL);return t||e||"ltr"}function An(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>e.current?.(...n),[])}function aL(t,e=globalThis?.document){const n=An(t);x.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var lL="DismissableLayer",lf="dismissableLayer.update",cL="dismissableLayer.pointerDownOutside",uL="dismissableLayer.focusOutside",K0,q0=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cf=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=t,c=x.useContext(q0),[u,d]=x.useState(null),f=u?.ownerDocument??globalThis?.document,[,h]=x.useState({}),p=Ct(e,C=>d(C)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(g),w=u?m.indexOf(u):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,v=w>=b,k=hL(C=>{const M=C.target,A=[...c.branches].some(D=>D.contains(M));!v||A||(o?.(C),s?.(C),C.defaultPrevented||a?.())},f),S=pL(C=>{const M=C.target;[...c.branches].some(D=>D.contains(M))||(i?.(C),s?.(C),C.defaultPrevented||a?.())},f);return aL(C=>{w===c.layers.size-1&&(r?.(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(K0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),G0(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=K0)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),G0())},[u,c]),x.useEffect(()=>{const C=()=>h({});return document.addEventListener(lf,C),()=>document.removeEventListener(lf,C)},[]),I.jsx(bt.div,{...l,ref:p,style:{pointerEvents:E?v?"auto":"none":void 0,...t.style},onFocusCapture:Ee(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Ee(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ee(t.onPointerDownCapture,k.onPointerDownCapture)})});cf.displayName=lL;var dL="DismissableLayerBranch",fL=x.forwardRef((t,e)=>{const n=x.useContext(q0),r=x.useRef(null),o=Ct(e,r);return x.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),I.jsx(bt.div,{...t,ref:o})});fL.displayName=dL;function hL(t,e=globalThis?.document){const n=An(t),r=x.useRef(!1),o=x.useRef(()=>{});return x.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){j0(cL,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function pL(t,e=globalThis?.document){const n=An(t),r=x.useRef(!1);return x.useEffect(()=>{const o=i=>{i.target&&!r.current&&j0(uL,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function G0(){const t=new CustomEvent(lf);document.dispatchEvent(t)}function j0(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?F0(o,i):o.dispatchEvent(i)}var uf=0;function mL(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Y0()),document.body.insertAdjacentElement("beforeend",t[1]??Y0()),uf++,()=>{uf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),uf--}},[])}function Y0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var df="focusScope.autoFocusOnMount",ff="focusScope.autoFocusOnUnmount",X0={bubbles:!1,cancelable:!0},gL="FocusScope",Z0=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=t,[a,l]=x.useState(null),c=An(o),u=An(i),d=x.useRef(null),f=Ct(e,m=>l(m)),h=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let m=function(E){if(h.paused||!a)return;const v=E.target;a.contains(v)?d.current=v:Nr(d.current,{select:!0})},g=function(E){if(h.paused||!a)return;const v=E.relatedTarget;v!==null&&(a.contains(v)||Nr(d.current,{select:!0}))},b=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Nr(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const w=new MutationObserver(b);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),w.disconnect()}}},[r,a,h.paused]),x.useEffect(()=>{if(a){ew.add(h);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(df,X0);a.addEventListener(df,c),a.dispatchEvent(b),b.defaultPrevented||(bL(vL(J0(a)),{select:!0}),document.activeElement===m&&Nr(a))}return()=>{a.removeEventListener(df,c),setTimeout(()=>{const b=new CustomEvent(ff,X0);a.addEventListener(ff,u),a.dispatchEvent(b),b.defaultPrevented||Nr(m??document.body,{select:!0}),a.removeEventListener(ff,u),ew.remove(h)},0)}}},[a,c,u,h]);const p=x.useCallback(m=>{if(!n&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(g&&b){const w=m.currentTarget,[E,v]=yL(w);E&&v?!m.shiftKey&&b===v?(m.preventDefault(),n&&Nr(E,{select:!0})):m.shiftKey&&b===E&&(m.preventDefault(),n&&Nr(v,{select:!0})):b===w&&m.preventDefault()}},[n,r,h.paused]);return I.jsx(bt.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});Z0.displayName=gL;function bL(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Nr(r,{select:e}),document.activeElement!==n)return}function yL(t){const e=J0(t),n=Q0(e,t),r=Q0(e.reverse(),t);return[n,r]}function J0(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Q0(t,e){for(const n of t)if(!wL(n,{upTo:e}))return n}function wL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function kL(t){return t instanceof HTMLInputElement&&"select"in t}function Nr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&kL(t)&&e&&t.select()}}var ew=EL();function EL(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=tw(t,e),t.unshift(e)},remove(e){t=tw(t,e),t[0]?.resume()}}}function tw(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function vL(t){return t.filter(e=>e.tagName!=="A")}var NL=x[" useId ".trim().toString()]||(()=>{}),xL=0;function Bo(t){const[e,n]=x.useState(NL());return vr(()=>{n(r=>r??String(xL++))},[t]),t||(e?`radix-${e}`:"")}var SL=typeof document<"u",CL=function(){},Ll=SL?N.useLayoutEffect:CL;function Rl(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Rl(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!Rl(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function nw(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function rw(t,e){const n=nw(t);return Math.round(e*n)/n}function hf(t){const e=x.useRef(t);return Ll(()=>{e.current=t}),e}function TL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=x.useState(r);Rl(f,r)||h(r);const[p,m]=x.useState(null),[g,b]=x.useState(null),w=x.useCallback(_=>{_!==S.current&&(S.current=_,m(_))},[]),E=x.useCallback(_=>{_!==C.current&&(C.current=_,b(_))},[]),v=i||p,k=s||g,S=x.useRef(null),C=x.useRef(null),M=x.useRef(u),A=l!=null,D=hf(l),G=hf(o),q=hf(c),X=x.useCallback(()=>{if(!S.current||!C.current)return;const _={placement:e,strategy:n,middleware:f};G.current&&(_.platform=G.current),nd(S.current,C.current,_).then(V=>{const O={...V,isPositioned:q.current!==!1};H.current&&!Rl(M.current,O)&&(M.current=O,Sh.flushSync(()=>{d(O)}))})},[f,e,n,G,q]);Ll(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,d(_=>({..._,isPositioned:!1})))},[c]);const H=x.useRef(!1);Ll(()=>(H.current=!0,()=>{H.current=!1}),[]),Ll(()=>{if(v&&(S.current=v),k&&(C.current=k),v&&k){if(D.current)return D.current(v,k,X);X()}},[v,k,X,D,A]);const j=x.useMemo(()=>({reference:S,floating:C,setReference:w,setFloating:E}),[w,E]),K=x.useMemo(()=>({reference:v,floating:k}),[v,k]),re=x.useMemo(()=>{const _={position:n,left:0,top:0};if(!K.floating)return _;const V=rw(K.floating,u.x),O=rw(K.floating,u.y);return a?{..._,transform:"translate("+V+"px, "+O+"px)",...nw(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:O}},[n,a,K.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:X,refs:j,elements:K,floatingStyles:re}),[u,X,j,K,re])}const ML=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ga({element:r.current,padding:o}).fn(n):{}:r?ga({element:r,padding:o}).fn(n):{}}}},AL=(t,e)=>({...Zu(t),options:[t,e]}),_L=(t,e)=>({...Ju(t),options:[t,e]}),OL=(t,e)=>({...uM(t),options:[t,e]}),IL=(t,e)=>({...Qu(t),options:[t,e]}),DL=(t,e)=>({...ed(t),options:[t,e]}),LL=(t,e)=>({...td(t),options:[t,e]}),RL=(t,e)=>({...ML(t),options:[t,e]});var PL="Arrow",ow=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return I.jsx(bt.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});ow.displayName=PL;var BL=ow;function zL(t){const[e,n]=x.useState(void 0);return vr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var pf="Popper",[iw,Pl]=Po(pf),[$L,sw]=iw(pf),aw=t=>{const{__scopePopper:e,children:n}=t,[r,o]=x.useState(null);return I.jsx($L,{scope:e,anchor:r,onAnchorChange:o,children:n})};aw.displayName=pf;var lw="PopperAnchor",cw=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=sw(lw,n),s=x.useRef(null),a=Ct(e,s),l=x.useRef(null);return x.useEffect(()=>{const c=l.current;l.current=r?.current||s.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:I.jsx(bt.div,{...o,ref:a})});cw.displayName=lw;var mf="PopperContent",[VL,HL]=iw(mf),uw=x.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=t,g=sw(mf,n),[b,w]=x.useState(null),E=Ct(e,he=>w(he)),[v,k]=x.useState(null),S=zL(v),C=S?.width??0,M=S?.height??0,A=r+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},G=Array.isArray(c)?c:[c],q=G.length>0,X={padding:D,boundary:G.filter(UL),altBoundary:q},{refs:H,floatingStyles:j,placement:K,isPositioned:re,middlewareData:_}=TL({strategy:"fixed",placement:A,whileElementsMounted:(...he)=>cM(...he,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[AL({mainAxis:o+M,alignmentAxis:s}),l&&_L({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?OL():void 0,...X}),l&&IL({...X}),DL({...X,apply:({elements:he,rects:at,availableWidth:Ft,availableHeight:wt})=>{const{width:Qt,height:Ut}=at.reference,gn=he.floating.style;gn.setProperty("--radix-popper-available-width",`${Ft}px`),gn.setProperty("--radix-popper-available-height",`${wt}px`),gn.setProperty("--radix-popper-anchor-width",`${Qt}px`),gn.setProperty("--radix-popper-anchor-height",`${Ut}px`)}}),v&&RL({element:v,padding:a}),WL({arrowWidth:C,arrowHeight:M}),f&&LL({strategy:"referenceHidden",...X})]}),[V,O]=hw(K),$=An(p);vr(()=>{re&&$?.()},[re,$]);const Q=_.arrow?.x,ce=_.arrow?.y,Te=_.arrow?.centerOffset!==0,[Oe,Ge]=x.useState();return vr(()=>{b&&Ge(window.getComputedStyle(b).zIndex)},[b]),I.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:re?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[_.transformOrigin?.x,_.transformOrigin?.y].join(" "),..._.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:I.jsx(VL,{scope:n,placedSide:V,onArrowChange:k,arrowX:Q,arrowY:ce,shouldHideArrow:Te,children:I.jsx(bt.div,{"data-side":V,"data-align":O,...m,ref:E,style:{...m.style,animation:re?void 0:"none"}})})})});uw.displayName=mf;var dw="PopperArrow",FL={top:"bottom",right:"left",bottom:"top",left:"right"},fw=x.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=HL(dw,r),s=FL[i.placedSide];return I.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:I.jsx(BL,{...o,ref:n,style:{...o.style,display:"block"}})})});fw.displayName=dw;function UL(t){return t!==null}var WL=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:o}=e,s=o.arrow?.centerOffset!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=hw(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(o.arrow?.x??0)+a/2,h=(o.arrow?.y??0)+l/2;let p="",m="";return c==="bottom"?(p=s?d:`${f}px`,m=`${-l}px`):c==="top"?(p=s?d:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=s?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,m=s?d:`${h}px`),{data:{x:p,y:m}}}});function hw(t){const[e,n="center"]=t.split("-");return[e,n]}var gf=aw,pw=cw,mw=uw,gw=fw,KL="Portal",bf=x.forwardRef((t,e)=>{const{container:n,...r}=t,[o,i]=x.useState(!1);vr(()=>i(!0),[]);const s=n||o&&globalThis?.document?.body;return s?wn.createPortal(I.jsx(bt.div,{...r,ref:e}),s):null});bf.displayName=KL;function qL(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var to=t=>{const{present:e,children:n}=t,r=GL(e),o=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),i=Ct(r.ref,jL(o));return typeof n=="function"||r.isPresent?x.cloneElement(o,{ref:i}):null};to.displayName="Presence";function GL(t){const[e,n]=x.useState(),r=x.useRef(null),o=x.useRef(t),i=x.useRef("none"),s=t?"mounted":"unmounted",[a,l]=qL(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Bl(r.current);i.current=a==="mounted"?c:"none"},[a]),vr(()=>{const c=r.current,u=o.current;if(u!==t){const f=i.current,h=Bl(c);t?l("MOUNT"):h==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),vr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const m=Bl(r.current).includes(CSS.escape(h.animationName));if(h.target===e&&m&&(l("ANIMATION_END"),!o.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=h=>{h.target===e&&(i.current=Bl(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Bl(t){return t?.animationName||"none"}function jL(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yf="rovingFocusGroup.onEntryFocus",YL={bubbles:!1,cancelable:!0},Ji="RovingFocusGroup",[wf,bw,XL]=U0(Ji),[ZL,yw]=Po(Ji,[XL]),[JL,QL]=ZL(Ji),ww=x.forwardRef((t,e)=>I.jsx(wf.Provider,{scope:t.__scopeRovingFocusGroup,children:I.jsx(wf.Slot,{scope:t.__scopeRovingFocusGroup,children:I.jsx(eR,{...t,ref:e})})}));ww.displayName=Ji;var eR=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=x.useRef(null),h=Ct(e,f),p=W0(i),[m,g]=Dl({prop:s,defaultProp:a??null,onChange:l,caller:Ji}),[b,w]=x.useState(!1),E=An(c),v=bw(n),k=x.useRef(!1),[S,C]=x.useState(0);return x.useEffect(()=>{const M=f.current;if(M)return M.addEventListener(yf,E),()=>M.removeEventListener(yf,E)},[E]),I.jsx(JL,{scope:n,orientation:r,dir:p,loop:o,currentTabStopId:m,onItemFocus:x.useCallback(M=>g(M),[g]),onItemShiftTab:x.useCallback(()=>w(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(M=>M+1),[]),onFocusableItemRemove:x.useCallback(()=>C(M=>M-1),[]),children:I.jsx(bt.div,{tabIndex:b||S===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:Ee(t.onMouseDown,()=>{k.current=!0}),onFocus:Ee(t.onFocus,M=>{const A=!k.current;if(M.target===M.currentTarget&&A&&!b){const D=new CustomEvent(yf,YL);if(M.currentTarget.dispatchEvent(D),!D.defaultPrevented){const G=v().filter(K=>K.focusable),q=G.find(K=>K.active),X=G.find(K=>K.id===m),j=[q,X,...G].filter(Boolean).map(K=>K.ref.current);vw(j,u)}}k.current=!1}),onBlur:Ee(t.onBlur,()=>w(!1))})})}),kw="RovingFocusGroupItem",Ew=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:s,...a}=t,l=Bo(),c=i||l,u=QL(kw,n),d=u.currentTabStopId===c,f=bw(n),{onFocusableItemAdd:h,onFocusableItemRemove:p,currentTabStopId:m}=u;return x.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),I.jsx(wf.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:I.jsx(bt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Ee(t.onMouseDown,g=>{r?u.onItemFocus(c):g.preventDefault()}),onFocus:Ee(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ee(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=rR(g,u.orientation,u.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let E=f().filter(v=>v.focusable).map(v=>v.ref.current);if(b==="last")E.reverse();else if(b==="prev"||b==="next"){b==="prev"&&E.reverse();const v=E.indexOf(g.currentTarget);E=u.loop?oR(E,v+1):E.slice(v+1)}setTimeout(()=>vw(E))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:m!=null}):s})})});Ew.displayName=kw;var tR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nR(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function rR(t,e,n){const r=nR(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return tR[r]}function vw(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function oR(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var iR=ww,sR=Ew,aR=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zo=new WeakMap,zl=new WeakMap,$l={},kf=0,Nw=function(t){return t&&(t.host||Nw(t.parentNode))},lR=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Nw(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},cR=function(t,e,n,r){var o=lR(e,Array.isArray(t)?t:[t]);$l[n]||($l[n]=new WeakMap);var i=$l[n],s=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(zo.get(f)||0)+1,g=(i.get(f)||0)+1;zo.set(f,m),i.set(f,g),s.push(f),m===1&&p&&zl.set(f,!0),g===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(e),a.clear(),kf++,function(){s.forEach(function(d){var f=zo.get(d)-1,h=i.get(d)-1;zo.set(d,f),i.set(d,h),f||(zl.has(d)||d.removeAttribute(r),zl.delete(d)),h||d.removeAttribute(n)}),kf--,kf||(zo=new WeakMap,zo=new WeakMap,zl=new WeakMap,$l={})}},uR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=aR(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),cR(r,o,n,"aria-hidden")):function(){return null}},_n=function(){return _n=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_n.apply(this,arguments)};function xw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function dR(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var Vl="right-scroll-bar-position",Hl="width-before-scroll-bar",fR="with-scroll-bars-hidden",hR="--removed-body-scroll-bar-size";function Ef(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pR(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var mR=typeof window<"u"?x.useLayoutEffect:x.useEffect,Sw=new WeakMap;function gR(t,e){var n=pR(null,function(r){return t.forEach(function(o){return Ef(o,r)})});return mR(function(){var r=Sw.get(n);if(r){var o=new Set(r),i=new Set(t),s=n.current;o.forEach(function(a){i.has(a)||Ef(a,null)}),i.forEach(function(a){o.has(a)||Ef(a,s)})}Sw.set(n,t)},[t]),n}function bR(t){return t}function yR(t,e){e===void 0&&(e=bR);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var s=e(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var u=s;s=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return o}function wR(t){t===void 0&&(t={});var e=yR(null);return e.options=_n({async:!0,ssr:!1},t),e}var Cw=function(t){var e=t.sideCar,n=xw(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,_n({},n))};Cw.isSideCarExport=!0;function kR(t,e){return t.useMedium(e),Cw}var Tw=wR(),vf=function(){},Fl=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:vf,onWheelCapture:vf,onTouchMoveCapture:vf}),o=r[0],i=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,p=t.noIsolation,m=t.inert,g=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,E=t.gapMode,v=xw(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=gR([n,e]),C=_n(_n({},v),o);return x.createElement(x.Fragment,null,u&&x.createElement(k,{sideCar:Tw,removeScrollBar:c,shards:d,noRelative:h,noIsolation:p,inert:m,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:E}),s?x.cloneElement(x.Children.only(a),_n(_n({},C),{ref:S})):x.createElement(w,_n({},C,{className:l,ref:S}),a))});Fl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Fl.classNames={fullWidth:Hl,zeroRight:Vl};var ER=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vR(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ER();return e&&t.setAttribute("nonce",e),t}function NR(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function xR(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var SR=function(){var t=0,e=null;return{add:function(n){t==0&&(e=vR())&&(NR(e,n),xR(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},CR=function(){var t=SR();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Mw=function(){var t=CR(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},TR={left:0,top:0,right:0,gap:0},Nf=function(t){return parseInt(t||"",10)||0},MR=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Nf(n),Nf(r),Nf(o)]},AR=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return TR;var e=MR(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},_R=Mw(),$o="data-scroll-locked",OR=function(t,e,n,r){var o=t.left,i=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(fR,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vl,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hl,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Vl," .").concat(Vl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hl," .").concat(Hl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($o,`] {
    `).concat(hR,": ").concat(a,`px;
  }
`)},Aw=function(){var t=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(t)?t:0},IR=function(){x.useEffect(function(){return document.body.setAttribute($o,(Aw()+1).toString()),function(){var t=Aw()-1;t<=0?document.body.removeAttribute($o):document.body.setAttribute($o,t.toString())}},[])},DR=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;IR();var i=x.useMemo(function(){return AR(o)},[o]);return x.createElement(_R,{styles:OR(i,!e,o,n?"":"!important")})},xf=!1;if(typeof window<"u")try{var Ul=Object.defineProperty({},"passive",{get:function(){return xf=!0,!0}});window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{xf=!1}var Vo=xf?{passive:!1}:!1,LR=function(t){return t.tagName==="TEXTAREA"},_w=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!LR(t)&&n[e]==="visible")},RR=function(t){return _w(t,"overflowY")},PR=function(t){return _w(t,"overflowX")},Ow=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Iw(t,r);if(o){var i=Dw(t,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},BR=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},zR=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Iw=function(t,e){return t==="v"?RR(e):PR(e)},Dw=function(t,e){return t==="v"?BR(e):zR(e)},$R=function(t,e){return t==="h"&&e==="rtl"?-1:1},VR=function(t,e,n,r,o){var i=$R(t,window.getComputedStyle(e).direction),s=i*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{if(!a)break;var h=Dw(t,a),p=h[0],m=h[1],g=h[2],b=m-g-i*p;(p||b)&&Iw(t,a)&&(d+=b,f+=p);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Wl=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Lw=function(t){return[t.deltaX,t.deltaY]},Rw=function(t){return t&&"current"in t?t.current:t},HR=function(t,e){return t[0]===e[0]&&t[1]===e[1]},FR=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},UR=0,Ho=[];function WR(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),o=x.useState(UR++)[0],i=x.useState(Mw)[0],s=x.useRef(t);x.useEffect(function(){s.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var m=dR([t.lockRef.current],(t.shards||[]).map(Rw),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!s.current.allowPinchZoom;var b=Wl(m),w=n.current,E="deltaX"in m?m.deltaX:w[0]-b[0],v="deltaY"in m?m.deltaY:w[1]-b[1],k,S=m.target,C=Math.abs(E)>Math.abs(v)?"h":"v";if("touches"in m&&C==="h"&&S.type==="range")return!1;var M=Ow(C,S);if(!M)return!0;if(M?k=C:(k=C==="v"?"h":"v",M=Ow(C,S)),!M)return!1;if(!r.current&&"changedTouches"in m&&(E||v)&&(r.current=k),!k)return!0;var A=r.current||k;return VR(A,g,m,A==="h"?E:v)},[]),l=x.useCallback(function(m){var g=m;if(!(!Ho.length||Ho[Ho.length-1]!==i)){var b="deltaY"in g?Lw(g):Wl(g),w=e.current.filter(function(k){return k.name===g.type&&(k.target===g.target||g.target===k.shadowParent)&&HR(k.delta,b)})[0];if(w&&w.should){g.cancelable&&g.preventDefault();return}if(!w){var E=(s.current.shards||[]).map(Rw).filter(Boolean).filter(function(k){return k.contains(g.target)}),v=E.length>0?a(g,E[0]):!s.current.noIsolation;v&&g.cancelable&&g.preventDefault()}}},[]),c=x.useCallback(function(m,g,b,w){var E={name:m,delta:g,target:b,should:w,shadowParent:KR(b)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(v){return v!==E})},1)},[]),u=x.useCallback(function(m){n.current=Wl(m),r.current=void 0},[]),d=x.useCallback(function(m){c(m.type,Lw(m),m.target,a(m,t.lockRef.current))},[]),f=x.useCallback(function(m){c(m.type,Wl(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return Ho.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Vo),document.addEventListener("touchmove",l,Vo),document.addEventListener("touchstart",u,Vo),function(){Ho=Ho.filter(function(m){return m!==i}),document.removeEventListener("wheel",l,Vo),document.removeEventListener("touchmove",l,Vo),document.removeEventListener("touchstart",u,Vo)}},[]);var h=t.removeScrollBar,p=t.inert;return x.createElement(x.Fragment,null,p?x.createElement(i,{styles:FR(o)}):null,h?x.createElement(DR,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function KR(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qR=kR(Tw,WR);var Pw=x.forwardRef(function(t,e){return x.createElement(Fl,_n({},t,{ref:e,sideCar:qR}))});Pw.classNames=Fl.classNames;var Sf=["Enter"," "],GR=["ArrowDown","PageUp","Home"],Bw=["ArrowUp","PageDown","End"],jR=[...GR,...Bw],YR={ltr:[...Sf,"ArrowRight"],rtl:[...Sf,"ArrowLeft"]},XR={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qi="Menu",[es,ZR,JR]=U0(Qi),[no,zw]=Po(Qi,[JR,Pl,yw]),ts=Pl(),$w=yw(),[Vw,xr]=no(Qi),[QR,ns]=no(Qi),Hw=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=t,a=ts(e),[l,c]=x.useState(null),u=x.useRef(!1),d=An(i),f=W0(o);return x.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),I.jsx(gf,{...a,children:I.jsx(Vw,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:I.jsx(QR,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:r})})})};Hw.displayName=Qi;var eP="MenuAnchor",Cf=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=ts(n);return I.jsx(pw,{...o,...r,ref:e})});Cf.displayName=eP;var Tf="MenuPortal",[tP,Fw]=no(Tf,{forceMount:void 0}),Uw=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,i=xr(Tf,e);return I.jsx(tP,{scope:e,forceMount:n,children:I.jsx(to,{present:n||i.open,children:I.jsx(bf,{asChild:!0,container:o,children:r})})})};Uw.displayName=Tf;var Jt="MenuContent",[nP,Mf]=no(Jt),Ww=x.forwardRef((t,e)=>{const n=Fw(Jt,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=xr(Jt,t.__scopeMenu),s=ns(Jt,t.__scopeMenu);return I.jsx(es.Provider,{scope:t.__scopeMenu,children:I.jsx(to,{present:r||i.open,children:I.jsx(es.Slot,{scope:t.__scopeMenu,children:s.modal?I.jsx(rP,{...o,ref:e}):I.jsx(oP,{...o,ref:e})})})})}),rP=x.forwardRef((t,e)=>{const n=xr(Jt,t.__scopeMenu),r=x.useRef(null),o=Ct(e,r);return x.useEffect(()=>{const i=r.current;if(i)return uR(i)},[]),I.jsx(Af,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ee(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),oP=x.forwardRef((t,e)=>{const n=xr(Jt,t.__scopeMenu);return I.jsx(Af,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),iP=Zi("MenuContent.ScrollLock"),Af=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=t,g=xr(Jt,n),b=ns(Jt,n),w=ts(n),E=$w(n),v=ZR(n),[k,S]=x.useState(null),C=x.useRef(null),M=Ct(e,C,g.onContentChange),A=x.useRef(0),D=x.useRef(""),G=x.useRef(0),q=x.useRef(null),X=x.useRef("right"),H=x.useRef(0),j=p?Pw:x.Fragment,K=p?{as:iP,allowPinchZoom:!0}:void 0,re=V=>{const O=D.current+V,$=v().filter(he=>!he.disabled),Q=document.activeElement,ce=$.find(he=>he.ref.current===Q)?.textValue,Te=$.map(he=>he.textValue),Oe=bP(Te,O,ce),Ge=$.find(he=>he.textValue===Oe)?.ref.current;(function he(at){D.current=at,window.clearTimeout(A.current),at!==""&&(A.current=window.setTimeout(()=>he(""),1e3))})(O),Ge&&setTimeout(()=>Ge.focus())};x.useEffect(()=>()=>window.clearTimeout(A.current),[]),mL();const _=x.useCallback(V=>X.current===q.current?.side&&wP(V,q.current?.area),[]);return I.jsx(nP,{scope:n,searchRef:D,onItemEnter:x.useCallback(V=>{_(V)&&V.preventDefault()},[_]),onItemLeave:x.useCallback(V=>{_(V)||(C.current?.focus(),S(null))},[_]),onTriggerLeave:x.useCallback(V=>{_(V)&&V.preventDefault()},[_]),pointerGraceTimerRef:G,onPointerGraceIntentChange:x.useCallback(V=>{q.current=V},[]),children:I.jsx(j,{...K,children:I.jsx(Z0,{asChild:!0,trapped:o,onMountAutoFocus:Ee(i,V=>{V.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:I.jsx(cf,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:I.jsx(iR,{asChild:!0,...E,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:S,onEntryFocus:Ee(l,V=>{b.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:I.jsx(mw,{role:"menu","aria-orientation":"vertical","data-state":lk(g.open),"data-radix-menu-content":"",dir:b.dir,...w,...m,ref:M,style:{outline:"none",...m.style},onKeyDown:Ee(m.onKeyDown,V=>{const $=V.target.closest("[data-radix-menu-content]")===V.currentTarget,Q=V.ctrlKey||V.altKey||V.metaKey,ce=V.key.length===1;$&&(V.key==="Tab"&&V.preventDefault(),!Q&&ce&&re(V.key));const Te=C.current;if(V.target!==Te||!jR.includes(V.key))return;V.preventDefault();const Ge=v().filter(he=>!he.disabled).map(he=>he.ref.current);Bw.includes(V.key)&&Ge.reverse(),mP(Ge)}),onBlur:Ee(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(A.current),D.current="")}),onPointerMove:Ee(t.onPointerMove,is(V=>{const O=V.target,$=H.current!==V.clientX;if(V.currentTarget.contains(O)&&$){const Q=V.clientX>H.current?"right":"left";X.current=Q,H.current=V.clientX}}))})})})})})})});Ww.displayName=Jt;var sP="MenuGroup",_f=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return I.jsx(bt.div,{role:"group",...r,ref:e})});_f.displayName=sP;var aP="MenuLabel",Kw=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return I.jsx(bt.div,{...r,ref:e})});Kw.displayName=aP;var Kl="MenuItem",qw="menu.itemSelect",ql=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,i=x.useRef(null),s=ns(Kl,t.__scopeMenu),a=Mf(Kl,t.__scopeMenu),l=Ct(e,i),c=x.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const f=new CustomEvent(qw,{bubbles:!0,cancelable:!0});d.addEventListener(qw,h=>r?.(h),{once:!0}),F0(d,f),f.defaultPrevented?c.current=!1:s.onClose()}};return I.jsx(Gw,{...o,ref:l,disabled:n,onClick:Ee(t.onClick,u),onPointerDown:d=>{t.onPointerDown?.(d),c.current=!0},onPointerUp:Ee(t.onPointerUp,d=>{c.current||d.currentTarget?.click()}),onKeyDown:Ee(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Sf.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ql.displayName=Kl;var Gw=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=t,s=Mf(Kl,n),a=$w(n),l=x.useRef(null),c=Ct(e,l),[u,d]=x.useState(!1),[f,h]=x.useState("");return x.useEffect(()=>{const p=l.current;p&&h((p.textContent??"").trim())},[i.children]),I.jsx(es.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:I.jsx(sR,{asChild:!0,...a,focusable:!r,children:I.jsx(bt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ee(t.onPointerMove,is(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(t.onPointerLeave,is(p=>s.onItemLeave(p))),onFocus:Ee(t.onFocus,()=>d(!0)),onBlur:Ee(t.onBlur,()=>d(!1))})})})}),lP="MenuCheckboxItem",jw=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return I.jsx(Qw,{scope:t.__scopeMenu,checked:n,children:I.jsx(ql,{role:"menuitemcheckbox","aria-checked":Gl(n)?"mixed":n,...o,ref:e,"data-state":Df(n),onSelect:Ee(o.onSelect,()=>r?.(Gl(n)?!0:!n),{checkForDefaultPrevented:!1})})})});jw.displayName=lP;var Yw="MenuRadioGroup",[cP,uP]=no(Yw,{value:void 0,onValueChange:()=>{}}),Xw=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,i=An(r);return I.jsx(cP,{scope:t.__scopeMenu,value:n,onValueChange:i,children:I.jsx(_f,{...o,ref:e})})});Xw.displayName=Yw;var Zw="MenuRadioItem",Jw=x.forwardRef((t,e)=>{const{value:n,...r}=t,o=uP(Zw,t.__scopeMenu),i=n===o.value;return I.jsx(Qw,{scope:t.__scopeMenu,checked:i,children:I.jsx(ql,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Df(i),onSelect:Ee(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Jw.displayName=Zw;var Of="MenuItemIndicator",[Qw,dP]=no(Of,{checked:!1}),ek=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,i=dP(Of,n);return I.jsx(to,{present:r||Gl(i.checked)||i.checked===!0,children:I.jsx(bt.span,{...o,ref:e,"data-state":Df(i.checked)})})});ek.displayName=Of;var fP="MenuSeparator",tk=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return I.jsx(bt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});tk.displayName=fP;var hP="MenuArrow",nk=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=ts(n);return I.jsx(gw,{...o,...r,ref:e})});nk.displayName=hP;var If="MenuSub",[pP,rk]=no(If),ok=t=>{const{__scopeMenu:e,children:n,open:r=!1,onOpenChange:o}=t,i=xr(If,e),s=ts(e),[a,l]=x.useState(null),[c,u]=x.useState(null),d=An(o);return x.useEffect(()=>(i.open===!1&&d(!1),()=>d(!1)),[i.open,d]),I.jsx(gf,{...s,children:I.jsx(Vw,{scope:e,open:r,onOpenChange:d,content:c,onContentChange:u,children:I.jsx(pP,{scope:e,contentId:Bo(),triggerId:Bo(),trigger:a,onTriggerChange:l,children:n})})})};ok.displayName=If;var rs="MenuSubTrigger",ik=x.forwardRef((t,e)=>{const n=xr(rs,t.__scopeMenu),r=ns(rs,t.__scopeMenu),o=rk(rs,t.__scopeMenu),i=Mf(rs,t.__scopeMenu),s=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),I.jsx(Cf,{asChild:!0,...c,children:I.jsx(Gw,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":lk(n.open),...t,ref:Il(e,o.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ee(t.onPointerMove,is(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ee(t.onPointerLeave,is(d=>{u();const f=n.content?.getBoundingClientRect();if(f){const h=n.content?.dataset.side,p=h==="right",m=p?-5:5,g=f[p?"left":"right"],b=f[p?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:g,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:g,y:f.bottom}],side:h}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(t.onKeyDown,d=>{const f=i.searchRef.current!=="";t.disabled||f&&d.key===" "||YR[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});ik.displayName=rs;var sk="MenuSubContent",ak=x.forwardRef((t,e)=>{const n=Fw(Jt,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=xr(Jt,t.__scopeMenu),s=ns(Jt,t.__scopeMenu),a=rk(sk,t.__scopeMenu),l=x.useRef(null),c=Ct(e,l);return I.jsx(es.Provider,{scope:t.__scopeMenu,children:I.jsx(to,{present:r||i.open,children:I.jsx(es.Slot,{scope:t.__scopeMenu,children:I.jsx(Af,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{s.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ee(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ee(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:Ee(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=XR[s.dir].includes(u.key);d&&f&&(i.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});ak.displayName=sk;function lk(t){return t?"open":"closed"}function Gl(t){return t==="indeterminate"}function Df(t){return Gl(t)?"indeterminate":t?"checked":"unchecked"}function mP(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function gP(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function bP(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=gP(t,Math.max(i,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function yP(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(o=!o)}return o}function wP(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return yP(n,e)}function is(t){return e=>e.pointerType==="mouse"?t(e):void 0}var kP=Hw,EP=Cf,vP=Uw,NP=Ww,xP=_f,SP=Kw,CP=ql,TP=jw,MP=Xw,AP=Jw,_P=ek,OP=tk,IP=nk,DP=ok,LP=ik,RP=ak,jl="DropdownMenu",[PP]=Po(jl,[zw]),Tt=zw(),[BP,ck]=PP(jl),uk=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=Tt(e),c=x.useRef(null),[u,d]=Dl({prop:o,defaultProp:i??!1,onChange:s,caller:jl});return I.jsx(BP,{scope:e,triggerId:Bo(),triggerRef:c,contentId:Bo(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:a,children:I.jsx(kP,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};uk.displayName=jl;var dk="DropdownMenuTrigger",fk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,i=ck(dk,n),s=Tt(n);return I.jsx(EP,{asChild:!0,...s,children:I.jsx(bt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Il(e,i.triggerRef),onPointerDown:Ee(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Ee(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});fk.displayName=dk;var zP="DropdownMenuPortal",hk=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Tt(e);return I.jsx(vP,{...r,...n})};hk.displayName=zP;var pk="DropdownMenuContent",mk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ck(pk,n),i=Tt(n),s=x.useRef(!1);return I.jsx(NP,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...r,ref:e,onCloseAutoFocus:Ee(t.onCloseAutoFocus,a=>{s.current||o.triggerRef.current?.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:Ee(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mk.displayName=pk;var $P="DropdownMenuGroup",VP=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(xP,{...o,...r,ref:e})});VP.displayName=$P;var HP="DropdownMenuLabel",FP=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(SP,{...o,...r,ref:e})});FP.displayName=HP;var UP="DropdownMenuItem",gk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(CP,{...o,...r,ref:e})});gk.displayName=UP;var WP="DropdownMenuCheckboxItem",KP=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(TP,{...o,...r,ref:e})});KP.displayName=WP;var qP="DropdownMenuRadioGroup",GP=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(MP,{...o,...r,ref:e})});GP.displayName=qP;var jP="DropdownMenuRadioItem",YP=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(AP,{...o,...r,ref:e})});YP.displayName=jP;var XP="DropdownMenuItemIndicator",ZP=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(_P,{...o,...r,ref:e})});ZP.displayName=XP;var JP="DropdownMenuSeparator",bk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(OP,{...o,...r,ref:e})});bk.displayName=JP;var QP="DropdownMenuArrow",eB=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(IP,{...o,...r,ref:e})});eB.displayName=QP;var tB=t=>{const{__scopeDropdownMenu:e,children:n,open:r,onOpenChange:o,defaultOpen:i}=t,s=Tt(e),[a,l]=Dl({prop:r,defaultProp:i??!1,onChange:o,caller:"DropdownMenuSub"});return I.jsx(DP,{...s,open:a,onOpenChange:l,children:n})},nB="DropdownMenuSubTrigger",yk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(LP,{...o,...r,ref:e})});yk.displayName=nB;var rB="DropdownMenuSubContent",wk=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Tt(n);return I.jsx(RP,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wk.displayName=rB;var oB=uk,iB=fk,sB=hk,aB=mk,lB=gk,cB=bk,uB=tB,dB=yk,fB=wk;function kk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=kk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ek(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=kk(t))&&(r&&(r+=" "),r+=e);return r}const Lf="-",hB=t=>{const e=mB(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(Lf);return a[0]===""&&a.length!==1&&a.shift(),vk(a,e)||pB(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},vk=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?vk(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(Lf);return e.validators.find(({validator:s})=>s(i))?.classGroupId},Nk=/^\[(.+)\]$/,pB=t=>{if(Nk.test(t)){const e=Nk.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},mB=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const o in n)Rf(n[o],r,o,e);return r},Rf=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:xk(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(gB(o)){Rf(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{Rf(s,xk(e,i),n,r)})})},xk=(t,e)=>{let n=t;return e.split(Lf).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},gB=t=>t.isThemeGetter,bB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},Pf="!",Bf=":",yB=Bf.length,wB=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=o=>{const i=[];let s=0,a=0,l=0,c;for(let p=0;p<o.length;p++){let m=o[p];if(s===0&&a===0){if(m===Bf){i.push(o.slice(l,p)),l=p+yB;continue}if(m==="/"){c=p;continue}}m==="["?s++:m==="]"?s--:m==="("?a++:m===")"&&a--}const u=i.length===0?o:o.substring(l),d=kB(u),f=d!==u,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(e){const o=e+Bf,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},kB=t=>t.endsWith(Pf)?t.substring(0,t.length-1):t.startsWith(Pf)?t.substring(1):t,EB=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||e[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},vB=t=>({cache:bB(t.cacheSize),parseClassName:wB(t),sortModifiers:EB(t),...hB(t)}),NB=/\s+/,xB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=e,s=[],a=t.trim().split(NB);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let g=!!m,b=r(g?p.substring(0,m):p);if(!b){if(!g){l=u+(l.length>0?" "+l:l);continue}if(b=r(p),!b){l=u+(l.length>0?" "+l:l);continue}g=!1}const w=i(f).join(":"),E=h?w+Pf:w,v=E+b;if(s.includes(v))continue;s.push(v);const k=o(b,g);for(let S=0;S<k.length;++S){const C=k[S];s.push(E+C)}l=u+(l.length>0?" "+l:l)}return l};function SB(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Sk(e))&&(r&&(r+=" "),r+=n);return r}const Sk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Sk(t[r]))&&(n&&(n+=" "),n+=e);return n};function CB(t,...e){let n,r,o,i=s;function s(l){const c=e.reduce((u,d)=>d(u),t());return n=vB(c),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=xB(l,n);return o(l,u),u}return function(){return i(SB.apply(null,arguments))}}const ot=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Ck=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Tk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,TB=/^\d+\/\d+$/,MB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_B=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,OB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fo=t=>TB.test(t),Ne=t=>!!t&&!Number.isNaN(Number(t)),Sr=t=>!!t&&Number.isInteger(Number(t)),zf=t=>t.endsWith("%")&&Ne(t.slice(0,-1)),qn=t=>MB.test(t),DB=()=>!0,LB=t=>AB.test(t)&&!_B.test(t),Mk=()=>!1,RB=t=>OB.test(t),PB=t=>IB.test(t),BB=t=>!te(t)&&!ne(t),zB=t=>Uo(t,Dk,Mk),te=t=>Ck.test(t),ro=t=>Uo(t,Lk,LB),$f=t=>Uo(t,UB,Ne),Ak=t=>Uo(t,Ok,Mk),$B=t=>Uo(t,Ik,PB),Yl=t=>Uo(t,Rk,RB),ne=t=>Tk.test(t),ss=t=>Wo(t,Lk),VB=t=>Wo(t,WB),_k=t=>Wo(t,Ok),HB=t=>Wo(t,Dk),FB=t=>Wo(t,Ik),Xl=t=>Wo(t,Rk,!0),Uo=(t,e,n)=>{const r=Ck.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Wo=(t,e,n=!1)=>{const r=Tk.exec(t);return r?r[1]?e(r[1]):n:!1},Ok=t=>t==="position"||t==="percentage",Ik=t=>t==="image"||t==="url",Dk=t=>t==="length"||t==="size"||t==="bg-size",Lk=t=>t==="length",UB=t=>t==="number",WB=t=>t==="family-name",Rk=t=>t==="shadow",KB=CB(()=>{const t=ot("color"),e=ot("font"),n=ot("text"),r=ot("font-weight"),o=ot("tracking"),i=ot("leading"),s=ot("breakpoint"),a=ot("container"),l=ot("spacing"),c=ot("radius"),u=ot("shadow"),d=ot("inset-shadow"),f=ot("text-shadow"),h=ot("drop-shadow"),p=ot("blur"),m=ot("perspective"),g=ot("aspect"),b=ot("ease"),w=ot("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...v(),ne,te],S=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],M=()=>[ne,te,l],A=()=>[Fo,"full","auto",...M()],D=()=>[Sr,"none","subgrid",ne,te],G=()=>["auto",{span:["full",Sr,ne,te]},Sr,ne,te],q=()=>[Sr,"auto",ne,te],X=()=>["auto","min","max","fr",ne,te],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],j=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...M()],re=()=>[Fo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...M()],_=()=>[t,ne,te],V=()=>[...v(),_k,Ak,{position:[ne,te]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",HB,zB,{size:[ne,te]}],Q=()=>[zf,ss,ro],ce=()=>["","none","full",c,ne,te],Te=()=>["",Ne,ss,ro],Oe=()=>["solid","dashed","dotted","double"],Ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[Ne,zf,_k,Ak],at=()=>["","none",p,ne,te],Ft=()=>["none",Ne,ne,te],wt=()=>["none",Ne,ne,te],Qt=()=>[Ne,ne,te],Ut=()=>[Fo,"full",...M()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qn],breakpoint:[qn],color:[DB],container:[qn],"drop-shadow":[qn],ease:["in","out","in-out"],font:[BB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qn],shadow:[qn],spacing:["px",Ne],text:[qn],"text-shadow":[qn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fo,te,ne,g]}],container:["container"],columns:[{columns:[Ne,te,ne,a]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Sr,"auto",ne,te]}],basis:[{basis:[Fo,"full","auto",a,...M()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ne,Fo,"auto","initial","none",te]}],grow:[{grow:["",Ne,ne,te]}],shrink:[{shrink:["",Ne,ne,te]}],order:[{order:[Sr,"first","last","none",ne,te]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...j(),"normal"]}],"justify-self":[{"justify-self":["auto",...j()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...j(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...j(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...j(),"baseline"]}],"place-self":[{"place-self":["auto",...j()]}],p:[{p:M()}],px:[{px:M()}],py:[{py:M()}],ps:[{ps:M()}],pe:[{pe:M()}],pt:[{pt:M()}],pr:[{pr:M()}],pb:[{pb:M()}],pl:[{pl:M()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":M()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":M()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[a,"screen",...re()]}],"min-w":[{"min-w":[a,"screen","none",...re()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",n,ss,ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ne,$f]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zf,te]}],"font-family":[{font:[VB,te,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ne,te]}],"line-clamp":[{"line-clamp":[Ne,"none",ne,$f]}],leading:[{leading:[i,...M()]}],"list-image":[{"list-image":["none",ne,te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ne,te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:_()}],"text-color":[{text:_()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ne,"from-font","auto",ne,ro]}],"text-decoration-color":[{decoration:_()}],"underline-offset":[{"underline-offset":[Ne,"auto",ne,te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ne,te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ne,te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Sr,ne,te],radial:["",ne,te],conic:[Sr,ne,te]},FB,$B]}],"bg-color":[{bg:_()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:_()}],"gradient-via":[{via:_()}],"gradient-to":[{to:_()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Oe(),"hidden","none"]}],"divide-style":[{divide:[...Oe(),"hidden","none"]}],"border-color":[{border:_()}],"border-color-x":[{"border-x":_()}],"border-color-y":[{"border-y":_()}],"border-color-s":[{"border-s":_()}],"border-color-e":[{"border-e":_()}],"border-color-t":[{"border-t":_()}],"border-color-r":[{"border-r":_()}],"border-color-b":[{"border-b":_()}],"border-color-l":[{"border-l":_()}],"divide-color":[{divide:_()}],"outline-style":[{outline:[...Oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ne,ne,te]}],"outline-w":[{outline:["",Ne,ss,ro]}],"outline-color":[{outline:_()}],shadow:[{shadow:["","none",u,Xl,Yl]}],"shadow-color":[{shadow:_()}],"inset-shadow":[{"inset-shadow":["none",d,Xl,Yl]}],"inset-shadow-color":[{"inset-shadow":_()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:_()}],"ring-offset-w":[{"ring-offset":[Ne,ro]}],"ring-offset-color":[{"ring-offset":_()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":_()}],"text-shadow":[{"text-shadow":["none",f,Xl,Yl]}],"text-shadow-color":[{"text-shadow":_()}],opacity:[{opacity:[Ne,ne,te]}],"mix-blend":[{"mix-blend":[...Ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":_()}],"mask-image-linear-to-color":[{"mask-linear-to":_()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":_()}],"mask-image-t-to-color":[{"mask-t-to":_()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":_()}],"mask-image-r-to-color":[{"mask-r-to":_()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":_()}],"mask-image-b-to-color":[{"mask-b-to":_()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":_()}],"mask-image-l-to-color":[{"mask-l-to":_()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":_()}],"mask-image-x-to-color":[{"mask-x-to":_()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":_()}],"mask-image-y-to-color":[{"mask-y-to":_()}],"mask-image-radial":[{"mask-radial":[ne,te]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":_()}],"mask-image-radial-to-color":[{"mask-radial-to":_()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":v()}],"mask-image-conic-pos":[{"mask-conic":[Ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":_()}],"mask-image-conic-to-color":[{"mask-conic-to":_()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ne,te]}],filter:[{filter:["","none",ne,te]}],blur:[{blur:at()}],brightness:[{brightness:[Ne,ne,te]}],contrast:[{contrast:[Ne,ne,te]}],"drop-shadow":[{"drop-shadow":["","none",h,Xl,Yl]}],"drop-shadow-color":[{"drop-shadow":_()}],grayscale:[{grayscale:["",Ne,ne,te]}],"hue-rotate":[{"hue-rotate":[Ne,ne,te]}],invert:[{invert:["",Ne,ne,te]}],saturate:[{saturate:[Ne,ne,te]}],sepia:[{sepia:["",Ne,ne,te]}],"backdrop-filter":[{"backdrop-filter":["","none",ne,te]}],"backdrop-blur":[{"backdrop-blur":at()}],"backdrop-brightness":[{"backdrop-brightness":[Ne,ne,te]}],"backdrop-contrast":[{"backdrop-contrast":[Ne,ne,te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ne,ne,te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ne,ne,te]}],"backdrop-invert":[{"backdrop-invert":["",Ne,ne,te]}],"backdrop-opacity":[{"backdrop-opacity":[Ne,ne,te]}],"backdrop-saturate":[{"backdrop-saturate":[Ne,ne,te]}],"backdrop-sepia":[{"backdrop-sepia":["",Ne,ne,te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":M()}],"border-spacing-x":[{"border-spacing-x":M()}],"border-spacing-y":[{"border-spacing-y":M()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ne,te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ne,"initial",ne,te]}],ease:[{ease:["linear","initial",b,ne,te]}],delay:[{delay:[Ne,ne,te]}],animate:[{animate:["none",w,ne,te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,ne,te]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ft()}],"rotate-x":[{"rotate-x":Ft()}],"rotate-y":[{"rotate-y":Ft()}],"rotate-z":[{"rotate-z":Ft()}],scale:[{scale:wt()}],"scale-x":[{"scale-x":wt()}],"scale-y":[{"scale-y":wt()}],"scale-z":[{"scale-z":wt()}],"scale-3d":["scale-3d"],skew:[{skew:Qt()}],"skew-x":[{"skew-x":Qt()}],"skew-y":[{"skew-y":Qt()}],transform:[{transform:[ne,te,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ut()}],"translate-x":[{"translate-x":Ut()}],"translate-y":[{"translate-y":Ut()}],"translate-z":[{"translate-z":Ut()}],"translate-none":["translate-none"],accent:[{accent:_()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:_()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ne,te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ne,te]}],fill:[{fill:["none",..._()]}],"stroke-w":[{stroke:[Ne,ss,ro,$f]}],stroke:[{stroke:["none",..._()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function oo(...t){return KB(Ek(t))}function Ko({...t}){return y.jsxDEV(oB,{"data-slot":"dropdown-menu",...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:10,columnNumber:10},this)}function qo({...t}){return y.jsxDEV(iB,{"data-slot":"dropdown-menu-trigger",...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:25,columnNumber:5},this)}function Go({className:t,sideOffset:e=4,...n}){return y.jsxDEV(sB,{children:y.jsxDEV(aB,{"data-slot":"dropdown-menu-content",sideOffset:e,className:oo("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:39,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:38,columnNumber:5},this)}function ye({className:t,inset:e,variant:n="default",...r}){return y.jsxDEV(lB,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:oo("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:70,columnNumber:5},this)}function Cr({className:t,...e}){return y.jsxDEV(cB,{"data-slot":"dropdown-menu-separator",className:oo("bg-border -mx-1 my-1 h-px",t),...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:169,columnNumber:5},this)}function Pk({...t}){return y.jsxDEV(uB,{"data-slot":"dropdown-menu-sub",...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:196,columnNumber:10},this)}function Bk({className:t,inset:e,children:n,...r}){return y.jsxDEV(dB,{"data-slot":"dropdown-menu-sub-trigger","data-inset":e,className:oo("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,y.jsxDEV(oD,{className:"ml-auto size-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:218,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:208,columnNumber:5},this)}function zk({className:t,...e}){return y.jsxDEV(fB,{"data-slot":"dropdown-menu-sub-content",className:oo("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",t),...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:228,columnNumber:5},this)}const $k=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Vk=Ek,qB=((t,e)=>n=>{var r;if(e?.variants==null)return Vk(t,n?.class,n?.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(c=>{const u=n?.[c],d=i?.[c];if(u===null)return null;const f=$k(u)||$k(d);return o[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...i,...a}[m]):{...i,...a}[m]===g})?[...c,d,f]:c},[]);return Vk(t,s,l,n?.class,n?.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-transparent shadow-xs hover:bg-accent dark:bg-transparent dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function jo({className:t,variant:e,size:n,asChild:r=!1,...o}){const i=r?QD:"button";return y.jsxDEV(i,{"data-slot":"button",className:oo(qB({variant:e,size:n,className:t})),...o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/button.tsx",lineNumber:52,columnNumber:5},this)}var GB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jB="VisuallyHidden",Hk=x.forwardRef((t,e)=>I.jsx(bt.span,{...t,ref:e,style:{...GB,...t.style}}));Hk.displayName=jB;var YB=Hk,[Zl]=Po("Tooltip",[Pl]),Jl=Pl(),Fk="TooltipProvider",XB=700,Vf="tooltip.open",[ZB,Hf]=Zl(Fk),Uk=t=>{const{__scopeTooltip:e,delayDuration:n=XB,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=t,s=x.useRef(!0),a=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),I.jsx(ZB,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:x.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:i})};Uk.displayName=Fk;var as="Tooltip",[JB,ls]=Zl(as),Wk=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=t,l=Hf(as,t.__scopeTooltip),c=Jl(e),[u,d]=x.useState(null),f=Bo(),h=x.useRef(0),p=s??l.disableHoverableContent,m=a??l.delayDuration,g=x.useRef(!1),[b,w]=Dl({prop:r,defaultProp:o??!1,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(Vf))):l.onClose(),i?.(C)},caller:as}),E=x.useMemo(()=>b?g.current?"delayed-open":"instant-open":"closed",[b]),v=x.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g.current=!1,w(!0)},[w]),k=x.useCallback(()=>{window.clearTimeout(h.current),h.current=0,w(!1)},[w]),S=x.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,w(!0),h.current=0},m)},[m,w]);return x.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),I.jsx(gf,{...c,children:I.jsx(JB,{scope:e,contentId:f,open:b,stateAttribute:E,trigger:u,onTriggerChange:d,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayedRef.current?S():v()},[l.isOpenDelayedRef,S,v]),onTriggerLeave:x.useCallback(()=>{p?k():(window.clearTimeout(h.current),h.current=0)},[k,p]),onOpen:v,onClose:k,disableHoverableContent:p,children:n})})};Wk.displayName=as;var Ff="TooltipTrigger",Kk=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=ls(Ff,n),i=Hf(Ff,n),s=Jl(n),a=x.useRef(null),l=Ct(e,a,o.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),d=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),I.jsx(pw,{asChild:!0,...s,children:I.jsx(bt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:Ee(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ee(t.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Ee(t.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ee(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:Ee(t.onBlur,o.onClose),onClick:Ee(t.onClick,o.onClose)})})});Kk.displayName=Ff;var Uf="TooltipPortal",[QB,ez]=Zl(Uf,{forceMount:void 0}),qk=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:o}=t,i=ls(Uf,e);return I.jsx(QB,{scope:e,forceMount:n,children:I.jsx(to,{present:n||i.open,children:I.jsx(bf,{asChild:!0,container:o,children:r})})})};qk.displayName=Uf;var Yo="TooltipContent",Gk=x.forwardRef((t,e)=>{const n=ez(Yo,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=t,s=ls(Yo,t.__scopeTooltip);return I.jsx(to,{present:r||s.open,children:s.disableHoverableContent?I.jsx(jk,{side:o,...i,ref:e}):I.jsx(tz,{side:o,...i,ref:e})})}),tz=x.forwardRef((t,e)=>{const n=ls(Yo,t.__scopeTooltip),r=Hf(Yo,t.__scopeTooltip),o=x.useRef(null),i=Ct(e,o),[s,a]=x.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:d}=r,f=x.useCallback(()=>{a(null),d(!1)},[d]),h=x.useCallback((p,m)=>{const g=p.currentTarget,b={x:p.clientX,y:p.clientY},w=iz(b,g.getBoundingClientRect()),E=sz(b,w),v=az(m.getBoundingClientRect()),k=cz([...E,...v]);a(k),d(!0)},[d]);return x.useEffect(()=>()=>f(),[f]),x.useEffect(()=>{if(l&&u){const p=g=>h(g,u),m=g=>h(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,h,f]),x.useEffect(()=>{if(s){const p=m=>{const g=m.target,b={x:m.clientX,y:m.clientY},w=l?.contains(g)||u?.contains(g),E=!lz(b,s);w?f():E&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,s,c,f]),I.jsx(jk,{...t,ref:i})}),[nz,rz]=Zl(as,{isInside:!1}),oz=tL("TooltipContent"),jk=x.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=t,l=ls(Yo,n),c=Jl(n),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(Vf,u),()=>document.removeEventListener(Vf,u)),[u]),x.useEffect(()=>{if(l.trigger){const d=f=>{f.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),I.jsx(cf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:I.jsxs(mw,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[I.jsx(oz,{children:r}),I.jsx(nz,{scope:n,isInside:!0,children:I.jsx(YB,{id:l.contentId,role:"tooltip",children:o||r})})]})})});Gk.displayName=Yo;var Yk="TooltipArrow",Xk=x.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Jl(n);return rz(Yk,n).isInside?null:I.jsx(gw,{...o,...r,ref:e})});Xk.displayName=Yk;function iz(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function sz(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function az(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function lz(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(o=!o)}return o}function cz(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),uz(e)}function uz(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var dz=Uk,fz=Wk,hz=Kk,pz=qk,mz=Gk,gz=Xk;function bz({delayDuration:t=0,...e}){return y.jsxDEV(dz,{"data-slot":"tooltip-provider",delayDuration:t,...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:11,columnNumber:5},this)}function Zk({...t}){return y.jsxDEV(bz,{children:y.jsxDEV(fz,{"data-slot":"tooltip",...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:24,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:23,columnNumber:5},this)}function Jk({...t}){return y.jsxDEV(hz,{"data-slot":"tooltip-trigger",...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:32,columnNumber:10},this)}function Qk({className:t,sideOffset:e=0,children:n,...r}){return y.jsxDEV(pz,{children:y.jsxDEV(mz,{"data-slot":"tooltip-content",sideOffset:e,className:oo("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[n,y.jsxDEV(gz,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:43,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:42,columnNumber:5},this)}const it=({onClick:t,isActive:e,disabled:n,children:r,tooltip:o})=>{const i=y.jsxDEV("button",{onClick:t,disabled:n,className:`
        flex items-center justify-center w-9 h-9 sm:w-8 sm:h-8 rounded-md
        transition-all duration-100 ease-out touch-manipulation
        ${e?"bg-primary text-primary-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
        ${n?"opacity-50 cursor-not-allowed":""}
      `,children:r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:95,columnNumber:5},void 0);return o?y.jsxDEV(Zk,{children:[y.jsxDEV(Jk,{asChild:!0,children:i},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:115,columnNumber:9},void 0),y.jsxDEV(Qk,{side:"bottom",className:"text-xs hidden sm:block",children:o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:114,columnNumber:7},void 0):i},cs=()=>y.jsxDEV("div",{className:"w-px h-6 bg-border mx-0.5 hidden sm:block"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:127,columnNumber:3},void 0),eE=N.memo(function({editor:e,onCopyMarkdown:n,onOpenLinkPopover:r,className:o=""}){const[i,s]=N.useState(""),[a,l]=N.useState(!1),c=ud({editor:e,selector:({editor:h})=>({canUndo:h.can().undo(),canRedo:h.can().redo(),isBold:h.isActive("bold"),isItalic:h.isActive("italic"),isUnderline:h.isActive("underline"),isStrike:h.isActive("strike"),isCode:h.isActive("code"),isHighlight:h.isActive("highlight"),isH1:h.isActive("heading",{level:1}),isH2:h.isActive("heading",{level:2}),isH3:h.isActive("heading",{level:3}),isBlockquote:h.isActive("blockquote"),isBulletList:h.isActive("bulletList"),isOrderedList:h.isActive("orderedList"),isTaskList:h.isActive("taskList"),isCodeBlock:h.isActive("codeBlock"),isLink:h.isActive("link")})}),u=N.useCallback(()=>{i&&(e.chain().focus().setImage({src:i}).run(),s(""),l(!1))},[e,i]),d=N.useCallback(()=>{e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},[e]),f=N.useCallback(h=>{e.chain().focus().insertCallout({type:h}).run()},[e]);return y.jsxDEV("div",{className:`flex items-center gap-0.5 sm:gap-1 px-2 sm:px-3 py-1.5 sm:py-2 border-b border-border bg-card/50 overflow-x-auto scrollbar-hide ${o}`,children:[y.jsxDEV(it,{onClick:()=>e.chain().focus().undo().run(),disabled:!c?.canUndo,tooltip:"Undo (Ctrl+Z)",children:y.jsxDEV(MD,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:183,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:178,columnNumber:7},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().redo().run(),disabled:!c?.canRedo,tooltip:"Redo (Ctrl+Shift+Z)",children:y.jsxDEV(ND,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:190,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:185,columnNumber:7},this),y.jsxDEV(cs,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:193,columnNumber:7},this),y.jsxDEV("div",{className:"hidden sm:flex items-center gap-0.5",children:[y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleBold().run(),isActive:c?.isBold,tooltip:"Bold (Ctrl+B)",children:y.jsxDEV(ml,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:202,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:197,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleItalic().run(),isActive:c?.isItalic,tooltip:"Italic (Ctrl+I)",children:y.jsxDEV(vl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:209,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:204,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleUnderline().run(),isActive:c?.isUnderline,tooltip:"Underline (Ctrl+U)",children:y.jsxDEV(_l,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:216,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:211,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleStrike().run(),isActive:c?.isStrike,tooltip:"Strikethrough",children:y.jsxDEV(Tl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:223,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:218,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleCode().run(),isActive:c?.isCode,tooltip:"Inline Code (Ctrl+E)",children:y.jsxDEV(ef,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:230,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:225,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleHighlight().run(),isActive:c?.isHighlight,tooltip:"Highlight",children:y.jsxDEV(of,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:237,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:232,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>r?.(),isActive:c?.isLink,tooltip:"Link (Ctrl+K)",children:y.jsxDEV(Nl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:244,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:239,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:196,columnNumber:7},this),y.jsxDEV(Ko,{children:[y.jsxDEV(qo,{asChild:!0,children:y.jsxDEV(jo,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 sm:hidden",children:y.jsxDEV(Xi,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:252,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:251,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:250,columnNumber:9},this),y.jsxDEV(Go,{align:"start",className:"w-48",children:[y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleBold().run(),children:[y.jsxDEV(ml,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:257,columnNumber:13},this)," Bold"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:256,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleItalic().run(),children:[y.jsxDEV(vl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:260,columnNumber:13},this)," Italic"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:259,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleUnderline().run(),children:[y.jsxDEV(_l,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:263,columnNumber:13},this)," Underline"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:262,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleStrike().run(),children:[y.jsxDEV(Tl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:266,columnNumber:13},this)," Strikethrough"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:265,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleCode().run(),children:[y.jsxDEV(ef,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:269,columnNumber:13},this)," Inline Code"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:268,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleHighlight().run(),children:[y.jsxDEV(of,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:272,columnNumber:13},this)," Highlight"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:271,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>r?.(),children:[y.jsxDEV(Nl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:275,columnNumber:13},this)," Link"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:274,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:255,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:249,columnNumber:7},this),y.jsxDEV(cs,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:280,columnNumber:7},this),y.jsxDEV(Ko,{children:[y.jsxDEV(qo,{asChild:!0,children:y.jsxDEV(jo,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-1.5 sm:px-2 gap-1",children:[y.jsxDEV(kl,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:286,columnNumber:13},this),y.jsxDEV("span",{className:"text-xs hidden sm:inline",children:"Heading"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:287,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:285,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:284,columnNumber:9},this),y.jsxDEV(Go,{align:"start",children:[y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),children:[y.jsxDEV(kl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:292,columnNumber:13},this)," Heading 1"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:291,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),children:[y.jsxDEV(nf,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:295,columnNumber:13},this)," Heading 2"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:294,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),children:[y.jsxDEV(rf,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:298,columnNumber:13},this)," Heading 3"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:297,columnNumber:11},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:300,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().setParagraph().run(),children:[y.jsxDEV(Lo,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:302,columnNumber:13},this)," Paragraph"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:301,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:290,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:283,columnNumber:7},this),y.jsxDEV(cs,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:307,columnNumber:7},this),y.jsxDEV("div",{className:"hidden md:flex items-center gap-0.5",children:[y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleBulletList().run(),isActive:c?.isBulletList,tooltip:"Bullet List",children:y.jsxDEV(ji,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:316,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:311,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleOrderedList().run(),isActive:c?.isOrderedList,tooltip:"Numbered List",children:y.jsxDEV(xl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:323,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:318,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleTaskList().run(),isActive:c?.isTaskList,tooltip:"Task List",children:y.jsxDEV(Cl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:330,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:325,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleBlockquote().run(),isActive:c?.isBlockquote,tooltip:"Quote",children:y.jsxDEV(Sl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:332,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),isActive:c?.isCodeBlock,tooltip:"Code Block",children:y.jsxDEV(Qd,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:344,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:339,columnNumber:9},this),y.jsxDEV(cs,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:346,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>{c?.isTaskList?e.chain().focus().sinkListItem("taskItem").run():(c?.isBulletList||c?.isOrderedList)&&e.chain().focus().sinkListItem("listItem").run()},disabled:!c?.isBulletList&&!c?.isOrderedList&&!c?.isTaskList,tooltip:"Indent (Tab)",children:y.jsxDEV(O0,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:359,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:347,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>{c?.isTaskList?e.chain().focus().liftListItem("taskItem").run():(c?.isBulletList||c?.isOrderedList)&&e.chain().focus().liftListItem("listItem").run()},disabled:!c?.isBulletList&&!c?.isOrderedList&&!c?.isTaskList,tooltip:"Outdent (Shift+Tab)",children:y.jsxDEV(_0,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:373,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:361,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:310,columnNumber:7},this),y.jsxDEV(Ko,{children:[y.jsxDEV(qo,{asChild:!0,children:y.jsxDEV(jo,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 md:hidden",children:y.jsxDEV(ji,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:381,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:380,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:379,columnNumber:9},this),y.jsxDEV(Go,{align:"start",className:"w-48",children:[y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleBulletList().run(),children:[y.jsxDEV(ji,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:386,columnNumber:13},this)," Bullet List"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:385,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleOrderedList().run(),children:[y.jsxDEV(xl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:389,columnNumber:13},this)," Numbered List"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:388,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleTaskList().run(),children:[y.jsxDEV(Cl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:392,columnNumber:13},this)," Task List"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:391,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleBlockquote().run(),children:[y.jsxDEV(Sl,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:395,columnNumber:13},this)," Quote"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:394,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),children:[y.jsxDEV(Qd,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:398,columnNumber:13},this)," Code Block"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:397,columnNumber:11},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:400,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>{c?.isTaskList?e.chain().focus().sinkListItem("taskItem").run():(c?.isBulletList||c?.isOrderedList)&&e.chain().focus().sinkListItem("listItem").run()},disabled:!c?.isBulletList&&!c?.isOrderedList&&!c?.isTaskList,children:[y.jsxDEV(O0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:411,columnNumber:13},this)," Indent"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:401,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>{c?.isTaskList?e.chain().focus().liftListItem("taskItem").run():(c?.isBulletList||c?.isOrderedList)&&e.chain().focus().liftListItem("listItem").run()},disabled:!c?.isBulletList&&!c?.isOrderedList&&!c?.isTaskList,children:[y.jsxDEV(_0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:423,columnNumber:13},this)," Outdent"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:413,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:384,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:378,columnNumber:7},this),y.jsxDEV(cs,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:428,columnNumber:7},this),y.jsxDEV("div",{className:"hidden lg:flex items-center gap-0.5",children:[y.jsxDEV(it,{onClick:d,tooltip:"Insert Table (33)",children:y.jsxDEV(Ml,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:437,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:433,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>l(!0),tooltip:"Insert Image",children:y.jsxDEV(El,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:443,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:439,columnNumber:9},this),y.jsxDEV(it,{onClick:()=>e.chain().focus().setHorizontalRule().run(),tooltip:"Horizontal Rule",children:y.jsxDEV(af,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:449,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:445,columnNumber:9},this),y.jsxDEV(Ko,{children:[y.jsxDEV(qo,{asChild:!0,children:y.jsxDEV("button",{className:"flex items-center justify-center w-8 h-8 rounded-md transition-all duration-100 ease-out touch-manipulation bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80",title:"Insert Callout",children:y.jsxDEV(Ro,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:458,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:454,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:453,columnNumber:11},this),y.jsxDEV(Go,{align:"start",children:[y.jsxDEV(ye,{onClick:()=>f("info"),children:[y.jsxDEV(Ro,{size:16,className:"mr-2 text-blue-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:463,columnNumber:15},this)," Info"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:462,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>f("warning"),children:[y.jsxDEV(Al,{size:16,className:"mr-2 text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:466,columnNumber:15},this)," Warning"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:465,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>f("error"),children:[y.jsxDEV(yl,{size:16,className:"mr-2 text-red-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:469,columnNumber:15},this)," Error"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:468,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>f("success"),children:[y.jsxDEV(wl,{size:16,className:"mr-2 text-green-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:472,columnNumber:15},this)," Success"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:471,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>f("note"),children:[y.jsxDEV(Lo,{size:16,className:"mr-2 text-purple-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:475,columnNumber:15},this)," Note"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:474,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:461,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:452,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:432,columnNumber:7},this),y.jsxDEV(Ko,{children:[y.jsxDEV(qo,{asChild:!0,children:y.jsxDEV(jo,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-1.5 sm:px-2 gap-1 lg:hidden",children:[y.jsxDEV(sD,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:485,columnNumber:13},this),y.jsxDEV("span",{className:"text-xs hidden sm:inline",children:"Insert"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:486,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:484,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:483,columnNumber:9},this),y.jsxDEV(Go,{align:"start",className:"w-56",children:[y.jsxDEV(ye,{onClick:d,children:[y.jsxDEV(Ml,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:491,columnNumber:13},this)," Table (33)"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:490,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>l(!0),children:[y.jsxDEV(El,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:494,columnNumber:13},this)," Image"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:493,columnNumber:11},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().setHorizontalRule().run(),children:[y.jsxDEV(af,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:497,columnNumber:13},this)," Horizontal Rule"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:496,columnNumber:11},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:499,columnNumber:11},this),y.jsxDEV(Pk,{children:[y.jsxDEV(Bk,{children:[y.jsxDEV(Ro,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:502,columnNumber:15},this)," Callout"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:501,columnNumber:13},this),y.jsxDEV(zk,{children:[y.jsxDEV(ye,{onClick:()=>f("info"),children:[y.jsxDEV(Ro,{size:16,className:"mr-2 text-blue-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:506,columnNumber:17},this)," Info"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:505,columnNumber:15},this),y.jsxDEV(ye,{onClick:()=>f("warning"),children:[y.jsxDEV(Al,{size:16,className:"mr-2 text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:509,columnNumber:17},this)," Warning"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:508,columnNumber:15},this),y.jsxDEV(ye,{onClick:()=>f("error"),children:[y.jsxDEV(yl,{size:16,className:"mr-2 text-red-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:512,columnNumber:17},this)," Error"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:511,columnNumber:15},this),y.jsxDEV(ye,{onClick:()=>f("success"),children:[y.jsxDEV(wl,{size:16,className:"mr-2 text-green-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:515,columnNumber:17},this)," Success"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:514,columnNumber:15},this),y.jsxDEV(ye,{onClick:()=>f("note"),children:[y.jsxDEV(Lo,{size:16,className:"mr-2 text-purple-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:518,columnNumber:17},this)," Note"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:517,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:504,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:500,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:489,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:482,columnNumber:7},this),e.isActive("table")&&y.jsxDEV(Ko,{children:[y.jsxDEV(qo,{asChild:!0,children:y.jsxDEV(jo,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-1.5 sm:px-2 gap-1 bg-primary/10",children:[y.jsxDEV(Ml,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:534,columnNumber:15},this),y.jsxDEV("span",{className:"text-xs hidden sm:inline",children:"Table"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:535,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:529,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:528,columnNumber:11},this),y.jsxDEV(Go,{align:"start",className:"w-56",children:[y.jsxDEV(ye,{onClick:()=>e.chain().focus().addColumnBefore().run(),disabled:!e.can().addColumnBefore(),children:[y.jsxDEV(A0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:543,columnNumber:15},this)," Add Column Before"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:539,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().addColumnAfter().run(),disabled:!e.can().addColumnAfter(),children:[y.jsxDEV(A0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:549,columnNumber:15},this)," Add Column After"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:545,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().deleteColumn().run(),disabled:!e.can().deleteColumn(),children:[y.jsxDEV(Yi,{size:16,className:"mr-2 text-destructive"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:555,columnNumber:15},this)," Delete Column"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:551,columnNumber:13},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:557,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().addRowBefore().run(),disabled:!e.can().addRowBefore(),children:[y.jsxDEV(D0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:562,columnNumber:15},this)," Add Row Before"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:558,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().addRowAfter().run(),disabled:!e.can().addRowAfter(),children:[y.jsxDEV(D0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:568,columnNumber:15},this)," Add Row After"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:564,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().deleteRow().run(),disabled:!e.can().deleteRow(),children:[y.jsxDEV(Yi,{size:16,className:"mr-2 text-destructive"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:574,columnNumber:15},this)," Delete Row"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:570,columnNumber:13},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:576,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleHeaderRow().run(),disabled:!e.can().toggleHeaderRow(),children:[y.jsxDEV(L0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:581,columnNumber:15},this)," Toggle Header Row"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:577,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().toggleHeaderColumn().run(),disabled:!e.can().toggleHeaderColumn(),children:[y.jsxDEV(L0,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:587,columnNumber:15},this)," Toggle Header Column"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:583,columnNumber:13},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:589,columnNumber:13},this),y.jsxDEV(Pk,{children:[y.jsxDEV(Bk,{children:[y.jsxDEV(yD,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:592,columnNumber:17},this)," Cell Background"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:591,columnNumber:15},this),y.jsxDEV(zk,{className:"w-48",children:[y.jsxDEV("div",{className:"p-2",children:[y.jsxDEV("div",{className:"text-xs text-muted-foreground mb-2",children:"Quick Colors"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:596,columnNumber:19},this),y.jsxDEV("div",{className:"grid grid-cols-6 gap-1 mb-2",children:[{color:"#ef4444",name:"Red"},{color:"#f97316",name:"Orange"},{color:"#eab308",name:"Yellow"},{color:"#22c55e",name:"Green"},{color:"#3b82f6",name:"Blue"},{color:"#8b5cf6",name:"Purple"},{color:"#ec4899",name:"Pink"},{color:"#14b8a6",name:"Teal"},{color:"#6366f1",name:"Indigo"},{color:"#64748b",name:"Slate"},{color:"#1e293b",name:"Dark"},{color:"#f1f5f9",name:"Light"}].map(({color:h,name:p})=>y.jsxDEV("button",{onClick:()=>e.chain().focus().setCellBackground(h).run(),className:"w-6 h-6 rounded border border-border hover:scale-110 transition-transform touch-manipulation",style:{backgroundColor:h},title:p},h,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:612,columnNumber:23},this))},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:597,columnNumber:19},this),y.jsxDEV("div",{className:"text-xs text-muted-foreground mb-1",children:"Custom Color"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:621,columnNumber:19},this),y.jsxDEV("input",{type:"color",defaultValue:"#3b82f6",onChange:h=>e.chain().focus().setCellBackground(h.target.value).run(),className:"w-full h-8 rounded cursor-pointer border border-border",style:{backgroundColor:"transparent"}},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:622,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:595,columnNumber:17},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:630,columnNumber:17},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().unsetCellBackground().run(),children:[y.jsxDEV(eo,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:632,columnNumber:19},this)," Remove Background"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:631,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:594,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:590,columnNumber:13},this),y.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:636,columnNumber:13},this),y.jsxDEV(ye,{onClick:()=>e.chain().focus().deleteTable().run(),disabled:!e.can().deleteTable(),className:"text-destructive",children:[y.jsxDEV(Yi,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:642,columnNumber:15},this)," Delete Table"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:637,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:538,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:527,columnNumber:9},this),a&&y.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 sm:relative sm:inset-auto sm:bg-transparent sm:p-0",children:y.jsxDEV("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 p-4 sm:p-0 bg-card sm:bg-secondary rounded-lg sm:rounded-md w-full max-w-sm sm:max-w-none sm:w-auto",children:[y.jsxDEV("input",{type:"url",placeholder:"Image URL...",value:i,onChange:h=>s(h.target.value),onKeyDown:h=>{h.key==="Enter"&&(h.preventDefault(),u()),h.key==="Escape"&&(l(!1),s(""))},className:"bg-secondary sm:bg-transparent border sm:border-none rounded px-3 py-2 sm:py-0 outline-none text-sm w-full sm:w-40",autoFocus:!0},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:652,columnNumber:13},this),y.jsxDEV("div",{className:"flex gap-2 sm:gap-1",children:[y.jsxDEV("button",{onClick:u,className:"flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-0.5 text-sm sm:text-xs bg-primary text-primary-foreground rounded",children:"Add"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:671,columnNumber:15},this),y.jsxDEV("button",{onClick:()=>{l(!1),s("")},className:"flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-0.5 text-sm sm:text-xs text-muted-foreground bg-secondary sm:bg-transparent rounded",children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:677,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:670,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:651,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:650,columnNumber:9},this),y.jsxDEV("div",{className:"flex-1 min-w-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:692,columnNumber:7},this),n&&y.jsxDEV(Zk,{children:[y.jsxDEV(Jk,{asChild:!0,children:y.jsxDEV(jo,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-2 gap-1 shrink-0",onClick:n,children:[y.jsxDEV(tf,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:704,columnNumber:15},this),y.jsxDEV("span",{className:"text-xs hidden md:inline",children:"Copy MD"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:705,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:698,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:697,columnNumber:11},this),y.jsxDEV(Qk,{side:"bottom",className:"text-xs",children:"Copy content as Markdown"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:708,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:696,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:176,columnNumber:5},this)});function tE({editor:t,isOpen:e,onClose:n,focusTrigger:r=0,initialSearchQuery:o}){const[i,s]=N.useState(""),[a,l]=N.useState(""),[c,u]=N.useState(!1),[d,f]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(!1),[b,w]=N.useState([]),[E,v]=N.useState(0),[k,S]=N.useState(null),[C,M]=N.useState(!1),A=N.useRef(!1),D=N.useRef(null),G=N.useRef(null),q=N.useRef(!1);N.useEffect(()=>{e&&o&&o.trim()&&s(o)},[e,o,r]);const X=N.useCallback(()=>{if(!i||!t){w([]),v(0),S(null);return}const{doc:O}=t.state,$=[];let Q;try{if(d)Q=new RegExp(i,c?"g":"gi");else{let ce=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");h&&(ce=`\\b${ce}\\b`),Q=new RegExp(ce,c?"g":"gi")}S(null)}catch(ce){S(ce.message),w([]);return}O.descendants((ce,Te)=>{if(ce.isText&&ce.text){let Oe;for(;(Oe=Q.exec(ce.text))!==null;)$.push({from:Te+Oe.index,to:Te+Oe.index+Oe[0].length,text:Oe[0]})}return!0}),w($),$.length>0&&E>=$.length&&v(0)},[i,c,d,h,t,E]);N.useEffect(()=>{X()},[X]),N.useEffect(()=>{if(!t)return;const O=typeof t.commands.setSearchHighlight=="function";e&&i&&O?t.commands.setSearchHighlight({searchTerm:i,caseSensitive:c,useRegex:d,currentMatchIndex:E}):O&&t.commands.clearSearchHighlight()},[t,e,i,c,d,E]),N.useEffect(()=>{!e&&t&&(typeof t.commands.clearSearchHighlight=="function"&&t.commands.clearSearchHighlight(),A.current||typeof t.commands.clearAllOccurrences=="function"&&(t.commands.clearAllOccurrences(),M(!1)),A.current=!1)},[e,t]),N.useEffect(()=>{if(b.length>0&&E<b.length){const O=b[E],$=t.view.domAtPos(O.from);$.node&&$.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"}),q.current&&(q.current=!1)}},[E,b,t]),N.useEffect(()=>{e&&D.current&&(D.current.focus(),D.current.select())},[e,r]);const H=N.useCallback(()=>{b.length!==0&&(q.current=!0,v(O=>(O+1)%b.length))},[b.length]),j=N.useCallback(()=>{b.length!==0&&(q.current=!0,v(O=>(O-1+b.length)%b.length))},[b.length]),K=N.useCallback(()=>{if(b.length===0||E>=b.length)return;const O=b[E];t.chain().focus().setTextSelection({from:O.from,to:O.to}).deleteSelection().insertContent(a).run(),setTimeout(X,10)},[b,E,a,t,X]),re=N.useCallback(()=>{if(b.length===0)return;const O=[...b].sort(($,Q)=>Q.from-$.from);t.chain().focus(),O.forEach($=>{t.chain().setTextSelection({from:$.from,to:$.to}).deleteSelection().insertContent(a).run()}),setTimeout(X,10)},[b,a,t,X]),_=N.useCallback(()=>{if(b.length===0||!i||!(typeof t.commands.selectAllOccurrences=="function"))return;t.commands.selectAllOccurrences({searchTerm:i,caseSensitive:c,useRegex:d,wholeWord:h})&&(M(!0),A.current=!0,typeof t.commands.clearSearchHighlight=="function"&&t.commands.clearSearchHighlight(),n(),t.commands.focus())},[b,i,c,d,h,t,n]),V=N.useCallback(O=>{O.key==="Enter"?(O.preventDefault(),O.shiftKey?j():H(),D.current?.focus()):O.key==="Escape"?(O.preventDefault(),n()):O.key==="h"&&(O.ctrlKey||O.metaKey)?(O.preventDefault(),g($=>!$)):O.key==="l"&&(O.ctrlKey||O.metaKey)&&O.shiftKey&&(O.preventDefault(),_())},[H,j,n,_]);return e?y.jsxDEV("div",{className:"find-replace-panel",onKeyDown:V,children:[y.jsxDEV("div",{className:"find-replace-row",children:[y.jsxDEV("div",{className:"find-replace-input-wrapper",children:[y.jsxDEV(TD,{size:14,className:"find-replace-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:300,columnNumber:11},this),y.jsxDEV("input",{ref:D,type:"text",placeholder:"Find...",value:i,onChange:O=>s(O.target.value),className:`find-replace-input ${k?"has-error":""}`},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:301,columnNumber:11},this),k&&y.jsxDEV("span",{className:"find-replace-error",title:k,children:"!"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:310,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:299,columnNumber:9},this),y.jsxDEV("span",{className:"find-replace-count",children:b.length>0?`${E+1} of ${b.length}`:i?"No results":""},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:315,columnNumber:9},this),y.jsxDEV("button",{onClick:j,disabled:b.length===0,className:"find-replace-btn",title:"Previous match (Shift+Enter)",children:y.jsxDEV(iD,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:329,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:323,columnNumber:9},this),y.jsxDEV("button",{onClick:H,disabled:b.length===0,className:"find-replace-btn",title:"Next match (Enter)",children:y.jsxDEV(bl,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:331,columnNumber:9},this),y.jsxDEV("button",{onClick:_,disabled:b.length===0,className:`find-replace-btn ${C?"active":""}`,title:`Select all occurrences (${navigator.platform?.includes("Mac")?"":"Ctrl"}+Shift+L)  Apply formatting to all ${b.length} matches`,children:y.jsxDEV(bD,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:347,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:341,columnNumber:9},this),y.jsxDEV("div",{className:"find-replace-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:351,columnNumber:9},this),y.jsxDEV("button",{onClick:()=>u(O=>!O),className:`find-replace-btn ${c?"active":""}`,title:"Match case",children:y.jsxDEV(rD,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:359,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:354,columnNumber:9},this),y.jsxDEV("button",{onClick:()=>p(O=>!O),className:`find-replace-btn ${h?"active":""}`,title:"Match whole word",children:y.jsxDEV(_D,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:366,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:361,columnNumber:9},this),y.jsxDEV("button",{onClick:()=>f(O=>!O),className:`find-replace-btn ${d?"active":""}`,title:"Use regex",children:y.jsxDEV(xD,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:373,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:368,columnNumber:9},this),y.jsxDEV("button",{onClick:()=>g(O=>!O),className:`find-replace-btn ${m?"active":""}`,title:"Toggle replace (Ctrl+H)",children:y.jsxDEV(I0,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:382,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:377,columnNumber:9},this),y.jsxDEV("button",{onClick:n,className:"find-replace-btn",title:"Close (Escape)",children:y.jsxDEV(eo,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:391,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:386,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:298,columnNumber:7},this),m&&y.jsxDEV("div",{className:"find-replace-row",children:[y.jsxDEV("div",{className:"find-replace-input-wrapper",children:[y.jsxDEV(I0,{size:14,className:"find-replace-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:399,columnNumber:13},this),y.jsxDEV("input",{ref:G,type:"text",placeholder:"Replace with...",value:a,onChange:O=>l(O.target.value),className:"find-replace-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:400,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:398,columnNumber:11},this),y.jsxDEV("button",{onClick:K,disabled:b.length===0,className:"find-replace-btn replace-btn",title:"Replace current",children:"Replace"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:410,columnNumber:11},this),y.jsxDEV("button",{onClick:re,disabled:b.length===0,className:"find-replace-btn replace-btn",title:"Replace all",children:[y.jsxDEV(SD,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:424,columnNumber:13},this),"All"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:418,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:397,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:293,columnNumber:5},this):null}const Gn=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"":"Ctrl",yz=({editor:t})=>{const[e,n]=N.useState(!1),[r,o]=N.useState(0),[i,s]=N.useState(0),[a,l]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState(!1),[h,p]=N.useState(!1);N.useEffect(()=>{if(!t)return;const C=()=>{const A=t.storage.selectAllOccurrences;A?(n(A.isActive),o(A.ranges.length),s(A.allMatches.length),l(A.searchTerm),u(A.typedBuffer),f(A.isTypingReplace),p(A.isIncremental)):(n(!1),o(0),s(0))},M=()=>{C()};return t.on("transaction",M),C(),()=>{t.off("transaction",M)}},[t]);const m=N.useCallback(()=>{t.commands.toggleMarkOnAllOccurrences("bold"),t.commands.focus()},[t]),g=N.useCallback(()=>{t.commands.toggleMarkOnAllOccurrences("italic"),t.commands.focus()},[t]),b=N.useCallback(()=>{t.commands.toggleMarkOnAllOccurrences("underline"),t.commands.focus()},[t]),w=N.useCallback(()=>{t.commands.toggleMarkOnAllOccurrences("strike"),t.commands.focus()},[t]),E=N.useCallback(()=>{t.commands.deleteAllOccurrences(),t.commands.focus()},[t]),v=N.useCallback(()=>{t.commands.clearAllOccurrences(),t.commands.focus()},[t]),k=N.useCallback(()=>{t.commands.selectNextOccurrence(),t.commands.focus()},[t]),S=N.useCallback(()=>{a&&(t.commands.selectAllOccurrences({searchTerm:a,caseSensitive:!1,useRegex:!1,wholeWord:!1}),t.commands.focus())},[t,a]);return!e||r===0?null:y.jsxDEV("div",{className:"select-all-action-bar",children:[y.jsxDEV("div",{className:"select-all-action-bar-inner",children:[y.jsxDEV("div",{className:"select-all-action-bar-count",children:[y.jsxDEV("span",{className:"select-all-action-bar-count-number",children:h&&i>0?`${r}/${i}`:r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:131,columnNumber:11},void 0),y.jsxDEV("span",{className:"select-all-action-bar-count-label",children:"selected"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:134,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:130,columnNumber:9},void 0),y.jsxDEV("div",{className:"select-all-action-bar-preview",children:d?y.jsxDEV(y.Fragment,{children:[y.jsxDEV(Xi,{size:12,className:"select-all-action-bar-preview-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:141,columnNumber:15},void 0),y.jsxDEV("span",{className:"select-all-action-bar-preview-old",children:a},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:142,columnNumber:15},void 0),y.jsxDEV("span",{className:"select-all-action-bar-preview-arrow",children:""},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:143,columnNumber:15},void 0),y.jsxDEV("span",{className:"select-all-action-bar-preview-new",children:c||""},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:140,columnNumber:13},void 0):y.jsxDEV(y.Fragment,{children:y.jsxDEV("span",{className:"select-all-action-bar-preview-term",children:['"',a,'"']},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:148,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:147,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:138,columnNumber:9},void 0),y.jsxDEV("div",{className:"select-all-action-bar-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:154,columnNumber:9},void 0),h&&r<i&&y.jsxDEV(y.Fragment,{children:[y.jsxDEV("button",{onClick:k,className:"select-all-action-bar-btn select-all-action-bar-btn-primary",title:`Select next occurrence (${Gn}+D)`,children:y.jsxDEV(vD,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:164,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:159,columnNumber:13},void 0),y.jsxDEV("button",{onClick:S,className:"select-all-action-bar-btn select-all-action-bar-btn-secondary",title:`Select all remaining (${Gn}+Shift+L)`,children:"All"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:166,columnNumber:13},void 0),y.jsxDEV("div",{className:"select-all-action-bar-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:173,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:158,columnNumber:11},void 0),y.jsxDEV("button",{onClick:m,className:"select-all-action-bar-btn",title:`Bold all occurrences (${Gn}+B)`,children:y.jsxDEV(ml,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:183,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:178,columnNumber:9},void 0),y.jsxDEV("button",{onClick:g,className:"select-all-action-bar-btn",title:`Italic all occurrences (${Gn}+I)`,children:y.jsxDEV(vl,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:190,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:185,columnNumber:9},void 0),y.jsxDEV("button",{onClick:b,className:"select-all-action-bar-btn",title:`Underline all occurrences (${Gn}+U)`,children:y.jsxDEV(_l,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:197,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:192,columnNumber:9},void 0),y.jsxDEV("button",{onClick:w,className:"select-all-action-bar-btn",title:"Strikethrough all occurrences",children:y.jsxDEV(Tl,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:204,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:199,columnNumber:9},void 0),y.jsxDEV("div",{className:"select-all-action-bar-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:208,columnNumber:9},void 0),y.jsxDEV("button",{onClick:E,className:"select-all-action-bar-btn select-all-action-bar-btn-danger",title:"Delete all occurrences",children:y.jsxDEV(Yi,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:216,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:211,columnNumber:9},void 0),y.jsxDEV("button",{onClick:v,className:"select-all-action-bar-btn",title:"Exit select all mode (Escape)",children:y.jsxDEV(eo,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:225,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:220,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:128,columnNumber:7},void 0),y.jsxDEV("div",{className:"select-all-action-bar-hint",children:h&&r<i?y.jsxDEV(y.Fragment,{children:[y.jsxDEV("kbd",{children:[Gn,"+D"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:13},void 0)," next  ",y.jsxDEV("kbd",{children:[Gn,"+Shift+L"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:42},void 0)," all  Type to replace  ",y.jsxDEV("kbd",{children:"Esc"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:94},void 0)," to exit  ",y.jsxDEV("kbd",{children:[Gn,"+Z"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:119},void 0)," undo"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:232,columnNumber:11},void 0):y.jsxDEV(y.Fragment,{children:["Type to replace all  ",y.jsxDEV("kbd",{children:"Esc"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:237,columnNumber:35},void 0)," to exit  ",y.jsxDEV("kbd",{children:"Backspace"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:237,columnNumber:60},void 0)," to delete  ",y.jsxDEV("kbd",{children:[Gn,"+Z"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:237,columnNumber:93},void 0)," undo"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:236,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:230,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:127,columnNumber:5},void 0)},nE=N.memo(yz),Ql="-dismissed";function wz(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return e}function rE(t,e={}){const{storageKey:n="manus-editor-content",debounceMs:r=1e3,enabled:o=!0,onSave:i,onRecover:s}=e,[a,l]=N.useState({status:"idle",lastSaved:null,hasRecoverableContent:!1,error:null}),c=N.useRef(null),u=N.useRef(""),d=N.useRef(0);N.useEffect(()=>{if(o&&!(!t||t.isDestroyed))try{const b=localStorage.getItem(n),w=localStorage.getItem(n+Ql);if(b&&!w){let E="";try{E=t.getHTML()||""}catch{return}b!==E&&b.length>50&&l(v=>({...v,hasRecoverableContent:!0}))}}catch(b){console.warn("useAutoSave: Error checking for recoverable content",b)}},[t,n,o]);const f=N.useCallback(()=>{if(!(!t||!o||t.isDestroyed))try{const b=t.getHTML(),w=wz(b);if(w===d.current&&b.length===u.current.length){l(E=>({...E,status:"saved"}));return}if(b.length<20)return;l(E=>({...E,status:"saving"})),localStorage.setItem(n,b),localStorage.setItem(n+"-timestamp",new Date().toISOString()),u.current=b,d.current=w,l(E=>({...E,status:"saved",lastSaved:new Date,error:null})),i?.(b),setTimeout(()=>{l(E=>E.status==="saved"?{...E,status:"idle"}:E)},2e3)}catch(b){console.error("useAutoSave: Error saving content",b),l(w=>({...w,status:"error",error:b instanceof Error?b.message:"Failed to save"}))}},[t,n,o,i]);N.useEffect(()=>{if(!t||!o||t.isDestroyed)return;const b=()=>{t.isDestroyed||(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{f()},r))};return t.on("update",b),()=>{t.off("update",b),c.current&&clearTimeout(c.current)}},[t,r,o,f]),N.useEffect(()=>{if(!t||!o||t.isDestroyed)return;const b=()=>{if(!t.isDestroyed)try{const w=t.getHTML();w.length>=20&&(localStorage.setItem(n,w),localStorage.setItem(n+"-timestamp",new Date().toISOString()))}catch(w){console.warn("useAutoSave: Error saving on unload",w)}};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[t,n,o]);const h=N.useCallback(()=>{c.current&&clearTimeout(c.current),f()},[f]),p=N.useCallback(()=>{try{localStorage.removeItem(n),localStorage.removeItem(n+"-timestamp"),localStorage.removeItem(n+Ql),u.current="",l({status:"idle",lastSaved:null,hasRecoverableContent:!1,error:null})}catch(b){console.warn("useAutoSave: Error clearing content",b)}},[n]),m=N.useCallback(()=>{if(!t||t.isDestroyed)return null;try{const b=localStorage.getItem(n);return b&&t&&!t.isDestroyed?(l(w=>({...w,hasRecoverableContent:!1})),queueMicrotask(()=>{if(t&&!t.isDestroyed)try{t.commands.setContent(b),u.current=b,localStorage.removeItem(n+Ql),s?.(b)}catch(w){console.warn("useAutoSave: Error setting content during recovery",w)}}),b):null}catch(b){return console.warn("useAutoSave: Error recovering content",b),null}},[t,n,s]),g=N.useCallback(()=>{try{localStorage.setItem(n+Ql,"true"),l(b=>({...b,hasRecoverableContent:!1}))}catch(b){console.warn("useAutoSave: Error dismissing recovery",b)}},[n]);return{...a,save:h,clear:p,recover:m,dismissRecovery:g}}const kz=200;function oE(t,e={}){const{debounceMs:n=500,extendedStats:r=!1,enabled:o=!0}=e,[i,s]=N.useState({words:0,characters:0,charactersWithSpaces:0,paragraphs:0,sentences:0,readingTime:0,isCalculating:!1}),a=N.useRef(null),l=N.useRef(""),c=N.useCallback(u=>{const d=u.trim(),f=d.length>0?d.split(/\s+/).filter(w=>w.length>0).length:0,h=d.replace(/\s/g,"").length,p=u.length;let m=0,g=0;r&&(m=d.length>0?d.split(/\n\s*\n/).filter(w=>w.trim().length>0).length:0,g=d.length>0?(d.match(/[.!?]+/g)||[]).length:0);const b=Math.max(1,Math.ceil(f/kz));return{words:f,characters:h,charactersWithSpaces:p,paragraphs:m,sentences:g,readingTime:b,isCalculating:!1}},[r]);return N.useEffect(()=>{if(!t||!o)return;const u=()=>{a.current&&clearTimeout(a.current),s(d=>({...d,isCalculating:!0})),a.current=setTimeout(()=>{try{const d=t.getText();if(d===l.current){s(h=>({...h,isCalculating:!1}));return}l.current=d;const f=c(d);s(f)}catch(d){console.warn("useWordCount: Error calculating word count",d),s(f=>({...f,isCalculating:!1}))}},n)};return u(),t.on("update",u),()=>{t.off("update",u),a.current&&clearTimeout(a.current)}},[t,n,o,c]),i}function iE({status:t,lastSaved:e,className:n=""}){const r=o=>{if(!o)return"";const s=new Date().getTime()-o.getTime(),a=Math.floor(s/1e3),l=Math.floor(a/60),c=Math.floor(l/60);return a<10?"Just now":a<60?`${a}s ago`:l<60?`${l}m ago`:c<24?`${c}h ago`:o.toLocaleDateString()};return y.jsxDEV("div",{className:`auto-save-indicator flex items-center gap-1.5 text-xs ${n}`,title:e?`Last saved: ${e.toLocaleString()}`:"Not saved yet",children:[t==="idle"&&e&&y.jsxDEV(y.Fragment,{children:[y.jsxDEV(cD,{className:"w-3.5 h-3.5 text-muted-foreground"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:40,columnNumber:11},this),y.jsxDEV("span",{className:"text-muted-foreground",children:["Saved ",r(e)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:41,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:39,columnNumber:9},this),t==="saving"&&y.jsxDEV(y.Fragment,{children:[y.jsxDEV(pD,{className:"w-3.5 h-3.5 text-cyan-500 animate-spin"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:47,columnNumber:11},this),y.jsxDEV("span",{className:"text-cyan-500",children:"Saving..."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:48,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:46,columnNumber:9},this),t==="saved"&&y.jsxDEV(y.Fragment,{children:[y.jsxDEV(gl,{className:"w-3.5 h-3.5 text-emerald-500"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:54,columnNumber:11},this),y.jsxDEV("span",{className:"text-emerald-500",children:"Saved"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:55,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:53,columnNumber:9},this),t==="error"&&y.jsxDEV(y.Fragment,{children:[y.jsxDEV(lD,{className:"w-3.5 h-3.5 text-red-500"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:61,columnNumber:11},this),y.jsxDEV("span",{className:"text-red-500",children:"Save failed"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:62,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:60,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:34,columnNumber:5},this)}function sE({onRecover:t,onDismiss:e,className:n=""}){return y.jsxDEV("div",{className:`recovery-banner flex items-center justify-between gap-4 px-4 py-3 rounded-lg ${n}`,children:[y.jsxDEV("div",{className:"flex items-center gap-3 min-w-0",children:[y.jsxDEV(yl,{className:"w-5 h-5 recovery-banner-icon flex-shrink-0"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:22,columnNumber:9},this),y.jsxDEV("span",{className:"text-sm recovery-banner-text",children:"We found unsaved content from your last session."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:23,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:21,columnNumber:7},this),y.jsxDEV("div",{className:"flex items-center gap-3 flex-shrink-0",children:[y.jsxDEV("button",{onClick:t,className:"recovery-banner-btn flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-md transition-colors duration-150",children:[y.jsxDEV(CD,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:33,columnNumber:11},this),"Recover"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:29,columnNumber:9},this),y.jsxDEV("button",{onClick:e,className:"recovery-banner-dismiss p-2 rounded-md transition-colors duration-150",title:"Dismiss","aria-label":"Dismiss recovery banner",children:y.jsxDEV(eo,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:43,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:37,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:28,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:18,columnNumber:5},this)}const Ez=/\[\[([^\[\]]+)\]\]$/,aE=on.create({name:"wikiLink",addOptions(){return{HTMLAttributes:{},onWikiLinkClick:void 0,validateLink:void 0,linkClass:"wiki-link",invalidLinkClass:"wiki-link-invalid"}},addAttributes(){return{pageName:{default:null,parseHTML:t=>t.getAttribute("data-page-name"),renderHTML:t=>t.pageName?{"data-page-name":t.pageName}:{}}}},parseHTML(){return[{tag:"span[data-wiki-link]"}]},renderHTML({HTMLAttributes:t}){const e=t["data-page-name"]||"",n=this.options.validateLink?this.options.validateLink(e):!0;return["span",Ie(this.options.HTMLAttributes,t,{"data-wiki-link":"",class:n?this.options.linkClass:`${this.options.linkClass} ${this.options.invalidLinkClass}`}),0]},addCommands(){return{setWikiLink:t=>({commands:e})=>e.setMark(this.name,t),unsetWikiLink:()=>({commands:t})=>t.unsetMark(this.name)}},addInputRules(){const t=this.type;return[new Yt({find:Ez,handler:({state:e,range:n,match:r})=>{try{const o=r[1];if(!o)return;const{tr:i}=e,s=n.from,a=n.to;i.delete(s,a);const l=t.create({pageName:o}),c=e.schema.text(o,[l]);i.insert(s,c),this.editor.view.dispatch(i)}catch(o){console.warn("WikiLinkSafe: Error in input rule",o)}}})]},onCreate(){const{onWikiLinkClick:t}=this.options;if(!t)return;const e=n=>{const r=n.target;if(r.hasAttribute("data-wiki-link")){const o=r.getAttribute("data-page-name");o&&(n.preventDefault(),t(o))}};this.editor.view.dom.addEventListener("click",e),this._clickHandler=e},onDestroy(){const t=this._clickHandler;t&&this.editor.view.dom.removeEventListener("click",t)}}),Tr={header:/^#{1,6}\s+/m,bold:/\*\*[^*]+\*\*/,codeBlock:/```[\s\S]*?```/,list:/^\s*[-*]\s+/m,taskList:/^\s*[-*]\s*\[[ x]\]/im,link:/\[.+\]\(.+\)/,table:/^\|[^\n]+\n\|[-:\s|]+/m,callout:/```(?:info|warning|error|success|note)\s*\n[\s\S]*?```/},lE=["info","warning","error","success","note"];function vz(t){return t.length<3?!1:!!(Tr.header.test(t)||Tr.bold.test(t)||Tr.list.test(t)||Tr.taskList.test(t)||Tr.codeBlock.test(t)||Tr.callout.test(t)||Tr.link.test(t)||Tr.table.test(t))}function Nz(t){const e=t.trim().split(`
`);if(e.length<2)return"";const r=e[0].split("|").map(a=>a.trim()).filter(a=>a.length>0);if(r.length===0||!e[1].includes("-"))return"";const i=e.slice(2);let s="<table><thead><tr>";for(const a of r)s+="<th><p>"+a+"</p></th>";s+="</tr></thead><tbody>";for(const a of i){if(!a.trim())continue;const l=a.split("|"),c=[];for(let u=0;u<l.length;u++){const d=l[u].trim();u===0&&d===""&&a.trim().startsWith("|")||u===l.length-1&&d===""&&a.trim().endsWith("|")||c.push(d)}if(c.length!==0){s+="<tr>";for(let u=0;u<r.length;u++){const d=c[u]||"";s+="<td><p>"+d+"</p></td>"}s+="</tr>"}}return s+="</tbody></table>",s}function xz(t){let e=t;const n=/^(\|[^\n]*(?:\n\|[^\n]*)*)/gm,r=[];e=e.replace(n,s=>{const a=s.split(`
`);if(a.length>=2){const l=a[1];if(/^\|?[\s\-:|]+\|?$/.test(l)&&l.includes("-")){const c=Nz(s);if(c){const u=`MANUSTABLEPLACEHOLDER${r.length}END`;return r.push(c),u}}}return s}),lE.forEach(s=>{const a=new RegExp(`\`\`\`${s}\\s*\\n([\\s\\S]*?)\`\`\``,"g");e=e.replace(a,(l,c)=>{let u=c.trim();return u=u.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),u=u.replace(/__([^_]+)__/g,"<strong>$1</strong>"),u=u.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),u=u.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),u=u.replace(/`([^`]+)`/g,"<code>$1</code>"),u.startsWith("<")||(u=`<p>${u}</p>`),`<div data-callout="" data-type="${s}" class="callout callout-${s}">${u}</div>`})}),e=e.replace(/```(\w*)\n([\s\S]*?)```/g,(s,a,l)=>{if(lE.includes(a))return`<div data-callout="" data-type="${a}" class="callout callout-${a}"><p>${l.trim()}</p></div>`;const c=a||"plaintext",u=l.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre><code class="language-${c}">${u}</code></pre>`}),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e=e.replace(/^(#{1,6})\s+(.+)$/gm,(s,a,l)=>{const c=a.length;return`<h${c}>${l}</h${c}>`}),e=e.replace(/^(\s*)[-*]\s*\[x\]\s+(.+)$/gim,'$1<li data-type="taskItem" data-checked="true"><p>$2</p></li>'),e=e.replace(/^(\s*)[-*]\s*\[\s*\]\s+(.+)$/gim,'$1<li data-type="taskItem" data-checked="false"><p>$2</p></li>'),e=e.replace(/^(\s*)[-*]\s+(?!\[)(.+)$/gm,"$1<li><p>$2</p></li>"),e=e.replace(/^(\s*)\d+\.\s+(.+)$/gm,"$1<li><p>$2</p></li>"),e=e.replace(/(<li data-type="taskItem"[^>]*>[\s\S]*?<\/li>\n?)+/g,'<ul data-type="taskList">$&</ul>'),e=e.replace(/(<li><p>[\s\S]*?<\/p><\/li>\n?)+/g,"<ul>$&</ul>"),e=e.replace(/^>\s+(.+)$/gm,"<blockquote><p>$1</p></blockquote>"),e=e.replace(/^[-*_]{3,}$/gm,"<hr>"),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/__([^_]+)__/g,"<strong>$1</strong>"),e=e.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),e=e.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),e=e.replace(/~~([^~]+)~~/g,"<s>$1</s>"),e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),e=e.split(`
`).map(s=>{const a=s.trim();return a?/^<[a-z]/.test(a)||/^<\//.test(a)||a.startsWith("MANUSTABLEPLACEHOLDER")?s:`<p>${a}</p>`:""}).join(`
`),e=e.replace(/<p>\s*<\/p>/g,"");for(let s=0;s<r.length;s++)e=e.replace(`MANUSTABLEPLACEHOLDER${s}END`,r[s]);return e}const cE=Ce.create({name:"markdownPasteSafe",addOptions(){return{enableMarkdownPaste:!0}},addProseMirrorPlugins(){if(!this.options.enableMarkdownPaste)return[];const t=this.editor;return[new Se({key:new _e("markdownPaste"),props:{handlePaste(e,n,r){const o=n.clipboardData;if(!o)return!1;const i=o.getData("text/html");if(i&&i.trim())return!1;const s=o.getData("text/plain");if(!s||!vz(s))return!1;n.preventDefault();const a=xz(s);return t.commands.insertContent(a,{parseOptions:{preserveWhitespace:!1}}),!0}}})]}}),uE=new _e("collapsibleHeading");function ec(t,e,n){return`h${e}-${n}-${t.textContent.slice(0,50)}`}let Xo=null;function Wf(t,e,n){const r=[],o=[];t.descendants((l,c)=>{if(l.type.name==="heading"&&n.levels.includes(l.attrs.level)){const u=ec(l,l.attrs.level,c);o.push({pos:c,level:l.attrs.level,id:u,isCollapsed:e.collapsedHeadings.has(u),nodeSize:l.nodeSize})}});const i=[];for(let l=0;l<o.length;l++){const c=o[l];if(c.isCollapsed){const u=c.pos+c.nodeSize;let d=t.content.size;for(let f=l+1;f<o.length;f++)if(o[f].level<=c.level){d=o[f].pos;break}u<d&&i.push({start:u,end:d})}}const s=[];for(const l of i)if(s.length===0)s.push(l);else{const c=s[s.length-1];l.start<=c.end?c.end=Math.max(c.end,l.end):s.push(l)}function a(l){for(const c of s)if(l>=c.start&&l<c.end)return!0;return!1}return t.descendants((l,c)=>{if(l.type.name==="heading"&&n.levels.includes(l.attrs.level)){const u=ec(l,l.attrs.level,c),d=e.collapsedHeadings.has(u),f=a(c);r.push(Fe.node(c,c+l.nodeSize,{class:`collapsible-heading collapsible-heading-level-${l.attrs.level} ${d?"is-collapsed":"is-expanded"}${f?" collapsible-heading-hidden":""}`,"data-heading-id":u,"data-heading-level":String(l.attrs.level)}));const h=Fe.widget(c+l.nodeSize-1,()=>{const p=document.querySelector(`button.collapsible-heading-chevron[data-heading-id="${u}"]`);if(p){p.classList.contains("collapsed")!==d&&(p.classList.remove("collapsed","expanded"),p.classList.add(d?"collapsed":"expanded"),p.title=d?"Click to expand":"Click to collapse");const w=p.parentElement;if(w)return w}const m=document.createElement("span");m.className="collapsible-heading-chevron-wrapper",m.setAttribute("contenteditable","false");const g=document.createElement("button");return g.className=`collapsible-heading-chevron ${d?"collapsed":"expanded"}`,g.setAttribute("data-heading-id",u),g.setAttribute("data-heading-level",String(l.attrs.level)),g.setAttribute("contenteditable","false"),g.setAttribute("tabindex","-1"),g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',g.title=d?"Click to expand":"Click to collapse",g.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation();const w=g.classList.contains("collapsed");g.classList.remove("collapsed","expanded"),g.classList.add(w?"expanded":"collapsed"),g.title=w?"Click to collapse":"Click to expand",e.collapsedHeadings.has(u)?e.collapsedHeadings.delete(u):e.collapsedHeadings.add(u),Xo&&Xo.dispatch(Xo.state.tr.setMeta("collapsibleHeading",{toggled:u}))}),m.appendChild(g),m},{side:1,key:`chevron-${u}`});r.push(h)}else l.isBlock&&a(c)&&r.push(Fe.node(c,c+l.nodeSize,{class:"collapsible-heading-hidden"}))}),ve.create(t,r)}const dE=Ce.create({name:"collapsibleHeading",addOptions(){return{levels:[1,2,3,4,5,6]}},addStorage(){return{collapsedHeadings:new Set}},addCommands(){return{toggleHeadingCollapse:t=>({editor:e,tr:n})=>{const r=this.storage,o=n.doc.nodeAt(t);if(!o||o.type.name!=="heading")return!1;const i=ec(o,o.attrs.level,t);return r.collapsedHeadings.has(i)?r.collapsedHeadings.delete(i):r.collapsedHeadings.add(i),e.view.dispatch(n.setMeta("collapsibleHeading",{toggled:i})),!0},expandAllHeadings:()=>({editor:t,tr:e})=>(this.storage.collapsedHeadings.clear(),t.view.dispatch(e.setMeta("collapsibleHeading",{expandAll:!0})),!0),collapseAllHeadings:()=>({editor:t,tr:e})=>{const n=this.storage;return e.doc.descendants((o,i)=>{o.type.name==="heading"&&n.collapsedHeadings.add(ec(o,o.attrs.level,i))}),t.view.dispatch(e.setMeta("collapsibleHeading",{collapseAll:!0})),!0}}},addProseMirrorPlugins(){const t=this.storage,e=this.options;return[new Se({key:uE,view(n){return Xo=n,{update(r){Xo=r},destroy(){Xo=null}}},state:{init(n,r){return{collapsedHeadings:new Set,decorations:Wf(r.doc,t,e),docVersion:0}},apply(n,r,o,i){return n.getMeta("collapsibleHeading")||n.docChanged?{collapsedHeadings:new Set(t.collapsedHeadings),decorations:Wf(i.doc,t,e),docVersion:r.docVersion+1}:{...r,decorations:r.decorations.map(n.mapping,n.doc)}}},props:{decorations(n){const r=uE.getState(n);return r?.decorations?r.decorations:Wf(n.doc,t,e)}}})]}}),Sz=/\[([^\]]+)\]\(([^)]+)\)$/,Cz=/^(https?:\/\/|www\.)[^\s]+$/i,fE=Ce.create({name:"markdownLinkInputRule",addInputRules(){return[new Yt({find:Sz,handler:({state:t,range:e,match:n,chain:r})=>{const o=n[1];let i=n[2];i&&!i.startsWith("http://")&&!i.startsWith("https://")&&(i.startsWith("www."),i="https://"+i),r().deleteRange(e).insertContent({type:"text",text:o,marks:[{type:"link",attrs:{href:i,target:"_blank",rel:"noopener noreferrer"}}]}).run()}})]},addProseMirrorPlugins(){const t=this.editor;return[new Se({key:new _e("pasteUrlAsLink"),props:{handlePaste(e,n){const r=n.clipboardData;if(!r)return!1;const o=r.getData("text/plain");if(!o)return!1;const i=o.trim();if(!Cz.test(i))return!1;const{state:s}=e,{selection:a}=s,{from:l,to:c,empty:u}=a;let d=i;if(!d.startsWith("http://")&&!d.startsWith("https://")&&(d.startsWith("www."),d="https://"+d),!u&&s.doc.textBetween(l,c))return t.chain().focus().extendMarkRange("link").setLink({href:d}).run(),!0;const f=s.schema.marks.link.create({href:d}),h=s.tr;return h.insertText(d,l,c),h.addMark(l,l+d.length,f),e.dispatch(h),!0}}})]}}),Tz=["info","warning","error","success","note"],hE=Ce.create({name:"calloutInputRule",addProseMirrorPlugins(){const t=this.editor;return[new Se({key:new _e("calloutInputRule"),props:{handleKeyDown(e,n){if(n.key!=="Enter")return!1;const{state:r}=e,{selection:o,doc:i}=r,{$from:s}=o,a=s.start();s.end();const l=i.textBetween(a,s.pos,""),c=l.trim();for(const u of Tz)if(c===`\`\`\`${u}`){n.preventDefault();const d=r.tr,f=a+l.indexOf("```");d.delete(f,s.pos);const h=t.schema.nodes.callout,p=t.schema.nodes.paragraph;if(h&&p){const m=p.create(),g=h.create({type:u},R.from(m));d.insert(f,g);const b=d.doc.resolve(f+2);d.setSelection(le.near(b)),e.dispatch(d)}return!0}return!1}}})]}}),tc=new _e("searchHighlight"),pE=Ce.create({name:"searchHighlight",addOptions(){return{searchTerm:"",caseSensitive:!1,useRegex:!1,currentMatchIndex:0}},addStorage(){return{searchTerm:"",caseSensitive:!1,useRegex:!1,currentMatchIndex:0}},addCommands(){return{setSearchHighlight:t=>({editor:e,tr:n,dispatch:r})=>(this.storage.searchTerm=t.searchTerm??this.storage.searchTerm,this.storage.caseSensitive=t.caseSensitive??this.storage.caseSensitive,this.storage.useRegex=t.useRegex??this.storage.useRegex,this.storage.currentMatchIndex=t.currentMatchIndex??this.storage.currentMatchIndex,r&&r(n.setMeta(tc,{update:!0})),!0),clearSearchHighlight:()=>({editor:t,tr:e,dispatch:n})=>(this.storage.searchTerm="",this.storage.caseSensitive=!1,this.storage.useRegex=!1,this.storage.currentMatchIndex=0,n&&n(e.setMeta(tc,{update:!0})),!0)}},addProseMirrorPlugins(){const t=this.storage;return[new Se({key:tc,state:{init(){return ve.empty},apply(e,n,r,o){const{searchTerm:i,caseSensitive:s,useRegex:a,currentMatchIndex:l}=t,c=e.getMeta(tc),u=e.docChanged;if(!i)return ve.empty;if(!u&&!c)return n.map(e.mapping,o.doc);const d=[];let f=0;try{let h;if(a)h=new RegExp(i,s?"g":"gi");else{const p=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");h=new RegExp(p,s?"g":"gi")}o.doc.descendants((p,m)=>{if(p.isText&&p.text){let g;for(;(g=h.exec(p.text))!==null;){const b=m+g.index,w=m+g.index+g[0].length,E=f===l;d.push(Fe.inline(b,w,{class:E?"search-highlight-current":"search-highlight"})),f++}}return!0})}catch{return ve.empty}return ve.create(o.doc,d)}},props:{decorations(e){return this.getState(e)}}})]}}),mE=Ce.create({name:"tabIndent",priority:1e3,addProseMirrorPlugins(){const t=this.editor;return[tg({Tab:(e,n)=>{const{$from:r}=e.selection;let o=!1,i=!1;for(let s=r.depth;s>=0;s--){const a=r.node(s);if(a.type.name==="taskList"){o=!0,i=!0;break}if(a.type.name==="bulletList"||a.type.name==="orderedList"){o=!0;break}}return o&&(i?t.chain().focus().sinkListItem("taskItem").run():t.chain().focus().sinkListItem("listItem").run()),!0},"Shift-Tab":(e,n)=>{const{$from:r}=e.selection;let o=!1,i=!1;for(let s=r.depth;s>=0;s--){const a=r.node(s);if(a.type.name==="taskList"){o=!0,i=!0;break}if(a.type.name==="bulletList"||a.type.name==="orderedList"){o=!0;break}}return o&&(i?t.chain().focus().liftListItem("taskItem").run():t.chain().focus().liftListItem("listItem").run()),!0}})]}}),yt=new _e("selectAllOccurrences");function gE(t,e,n,r,o){const i=[];if(!e)return i;let s;try{if(r)s=new RegExp(e,n?"g":"gi");else{let a=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o&&(a=`\\b${a}\\b`),s=new RegExp(a,n?"g":"gi")}}catch{return i}return t.descendants((a,l)=>{if(a.isText&&a.text){let c;for(;(c=s.exec(a.text))!==null;)i.push({from:l+c.index,to:l+c.index+c[0].length,text:c[0]})}return!0}),i}function Mr(t,e){const n=yt.getState(t.state);if(!n)return[];const r=[];return n.find().forEach(o=>{if(o.from===o.to)return;const i=t.state.doc.textBetween(o.from,o.to,"");r.push({from:o.from,to:o.to,text:i})}),r}function Mz(t,e){for(let n=0;n<t.length;n++)if(t[n].from>=e)return n;return 0}function st(t){t.isActive=!1,t.ranges=[],t.searchTerm="",t.typedBuffer="",t.isTypingReplace=!1,t.allMatches=[],t.nextMatchIndex=0,t.isIncremental=!1,t.undoStack=[],t.redoStack=[]}const bE=Ce.create({name:"selectAllOccurrences",addStorage(){return{isActive:!1,ranges:[],searchTerm:"",caseSensitive:!1,useRegex:!1,wholeWord:!1,typedBuffer:"",isTypingReplace:!1,originalTermLength:0,allMatches:[],nextMatchIndex:0,isIncremental:!1,undoStack:[],redoStack:[]}},addCommands(){return{selectAllOccurrences:t=>({editor:e,tr:n,dispatch:r})=>{const{searchTerm:o,caseSensitive:i=!1,useRegex:s=!1,wholeWord:a=!1}=t;if(!o)return!1;const l=gE(e.state.doc,o,i,s,a);return l.length===0?!1:(this.storage.isActive=!0,this.storage.ranges=l,this.storage.searchTerm=o,this.storage.caseSensitive=i,this.storage.useRegex=s,this.storage.wholeWord=a,this.storage.typedBuffer="",this.storage.isTypingReplace=!1,this.storage.originalTermLength=o.length,this.storage.allMatches=l,this.storage.nextMatchIndex=l.length,this.storage.isIncremental=!1,this.storage.undoStack=[],this.storage.redoStack=[],r&&r(n.setMeta(yt,{activate:!0})),!0)},selectNextOccurrence:()=>({editor:t,tr:e,dispatch:n})=>{const r=this.storage;if(!r.isActive){const{state:o}=t,{from:i,to:s}=o.selection;let a="";if(i!==s)a=o.doc.textBetween(i,s,"");else{const d=o.doc.resolve(i),f=d.parent;if(f.isTextblock){const h=f.textContent,p=d.parentOffset;let m=p,g=p;for(;m>0&&/\w/.test(h[m-1]);)m--;for(;g<h.length&&/\w/.test(h[g]);)g++;m<g&&(a=h.slice(m,g))}}if(!a)return!1;const l=gE(o.doc,a,!1,!1,!1);if(l.length===0)return!1;const c=Mz(l,i),u=l[c];return r.isActive=!0,r.ranges=[u],r.searchTerm=a,r.caseSensitive=!1,r.useRegex=!1,r.wholeWord=!1,r.typedBuffer="",r.isTypingReplace=!1,r.originalTermLength=a.length,r.allMatches=l,r.nextMatchIndex=(c+1)%l.length,r.isIncremental=!0,r.undoStack=[],r.redoStack=[],n&&n(e.setMeta(yt,{activate:!0})),setTimeout(()=>{try{const d=t.view.domAtPos(u.from);d.node&&d.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},20),!0}if(r.isIncremental&&r.allMatches.length>0){const o=r.nextMatchIndex,i=r.allMatches[o];return r.ranges.some(a=>a.from===i.from&&a.to===i.to)?!1:(r.ranges=[...r.ranges,i],r.nextMatchIndex=(o+1)%r.allMatches.length,r.ranges.length>=r.allMatches.length&&(r.isIncremental=!1),n&&n(e.setMeta(yt,{activate:!0})),setTimeout(()=>{try{const a=t.view.domAtPos(i.from);a.node&&a.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},20),!0)}return!1},clearAllOccurrences:()=>({tr:t,dispatch:e})=>(st(this.storage),e&&e(t.setMeta(yt,{deactivate:!0})),!0),toggleMarkOnAllOccurrences:t=>({editor:e,tr:n,dispatch:r})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;const o=e.schema.marks[t];if(!o)return!1;const{ranges:i}=this.storage,s=i.every(a=>{let l=!0;return e.state.doc.nodesBetween(a.from,a.to,c=>{c.isText&&!o.isInSet(c.marks)&&(l=!1)}),l});if(r){for(const a of i)s?n.removeMark(a.from,a.to,o):n.addMark(a.from,a.to,o.create());r(n)}return setTimeout(()=>{try{const a=e.view;if(a){const l=Mr(a,this.storage);this.storage.ranges=l,l.length===0&&st(this.storage)}}catch{}},10),!0},deleteAllOccurrences:()=>({editor:t,tr:e,dispatch:n})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;if(n){const r=[...this.storage.ranges].sort((o,i)=>i.from-o.from);for(const o of r)e.delete(o.from,o.to);n(e)}return st(this.storage),!0},replaceAllOccurrences:t=>({editor:e,tr:n,dispatch:r})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;if(r){const o=[...this.storage.ranges].sort((i,s)=>s.from-i.from);for(const i of o)n.replaceWith(i.from,i.to,e.schema.text(t));r(n)}return t?setTimeout(()=>{try{const o=e.view;if(o){const i=Mr(o,this.storage);this.storage.ranges=i,this.storage.searchTerm=t,i.length===0&&st(this.storage)}}catch{}},10):st(this.storage),!0},getOccurrencesState:()=>()=>!0}},addKeyboardShortcuts(){return{"Mod-d":()=>this.editor.commands.selectNextOccurrence()}},addProseMirrorPlugins(){const t=this.storage;return[new Se({key:yt,state:{init(){return ve.empty},apply(e,n,r,o){const i=e.getMeta(yt);if(i?.deactivate||!t.isActive)return ve.empty;if(i?.activate||i?.refresh){const s=[];for(const a of t.ranges){s.push(Fe.inline(a.from,a.to,{class:"select-all-occurrence-highlight","data-occurrence":"true"}));const l=document.createElement("span");l.className="select-all-multi-cursor",l.setAttribute("aria-hidden","true"),s.push(Fe.widget(a.to,l,{side:1,key:`cursor-${a.from}-${a.to}`}))}return ve.create(o.doc,s)}return e.docChanged?n.map(e.mapping,o.doc):n}},props:{decorations(e){return this.getState(e)},handleClick(e,n){if(!t.isActive)return!1;if(!t.ranges.some(o=>n>=o.from&&n<=o.to)){st(t);const{tr:o}=e.state;e.dispatch(o.setMeta(yt,{deactivate:!0}))}return!1},handleKeyDown(e,n){if(!t.isActive)return!1;if(n.key==="Escape"){st(t);const{tr:r}=e.state;return e.dispatch(r.setMeta(yt,{deactivate:!0})),!0}if((n.metaKey||n.ctrlKey)&&n.key==="z"&&!n.shiftKey){if(n.preventDefault(),t.isTypingReplace&&t.undoStack.length>0){t.redoStack.push(t.typedBuffer);const o=t.undoStack.pop();return t.typedBuffer=o,o===""&&(t.isTypingReplace=!1),qd(e.state,e.dispatch),setTimeout(()=>{const i=Mr(e);t.ranges=i,i.length===0&&st(t)},10),!0}st(t);const{tr:r}=e.state;return e.dispatch(r.setMeta(yt,{deactivate:!0})),!1}if((n.metaKey||n.ctrlKey)&&(n.key==="z"&&n.shiftKey||n.key==="y")){if(n.preventDefault(),t.redoStack.length>0){t.undoStack.push(t.isTypingReplace?t.typedBuffer:"");const o=t.redoStack.pop();return t.typedBuffer=o,t.isTypingReplace=!0,Gd(e.state,e.dispatch),setTimeout(()=>{const i=Mr(e);t.ranges=i,i.length===0&&st(t)},10),!0}st(t);const{tr:r}=e.state;return e.dispatch(r.setMeta(yt,{deactivate:!0})),!1}if(n.metaKey||n.ctrlKey)return!1;if(n.key==="Backspace"){if(n.preventDefault(),t.isTypingReplace&&t.typedBuffer.length>0){t.undoStack.push(t.typedBuffer),t.typedBuffer=t.typedBuffer.slice(0,-1);const r=Mr(e);if(r.length===0){st(t);const{tr:a}=e.state;return e.dispatch(a.setMeta(yt,{deactivate:!0})),!0}const o=t.typedBuffer.length>0?t.typedBuffer:t.searchTerm,i=[...r].sort((a,l)=>l.from-a.from),{tr:s}=e.state;for(const a of i)s.replaceWith(a.from,a.to,e.state.schema.text(o));e.dispatch(s),t.typedBuffer.length===0&&(t.isTypingReplace=!1),setTimeout(()=>{const a=Mr(e);t.ranges=a,a.length===0&&st(t)},10)}else if(!t.isTypingReplace){const r=[...t.ranges].sort((s,a)=>a.from-s.from),{tr:o}=e.state;for(const s of r)o.delete(s.from,s.to);e.dispatch(o),st(t);const{tr:i}=e.state;e.dispatch(i.setMeta(yt,{deactivate:!0}))}return!0}if(n.key==="Delete"){n.preventDefault();const r=[...t.ranges].sort((s,a)=>a.from-s.from),{tr:o}=e.state;for(const s of r)o.delete(s.from,s.to);e.dispatch(o),st(t);const{tr:i}=e.state;return e.dispatch(i.setMeta(yt,{deactivate:!0})),!0}if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(n.key)){st(t);const{tr:r}=e.state;return e.dispatch(r.setMeta(yt,{deactivate:!0})),!1}if(n.key==="Enter"){st(t);const{tr:r}=e.state;return e.dispatch(r.setMeta(yt,{deactivate:!0})),!1}return!1},handleTextInput(e,n,r,o){if(!t.isActive||!o)return!1;const i=Mr(e);if(i.length===0){st(t);const{tr:l}=e.state;return e.dispatch(l.setMeta(yt,{deactivate:!0})),!0}t.undoStack.push(t.isTypingReplace?t.typedBuffer:""),t.redoStack=[],t.isTypingReplace?t.typedBuffer+=o:(t.isTypingReplace=!0,t.typedBuffer=o);const s=[...i].sort((l,c)=>c.from-l.from),{tr:a}=e.state;for(const l of s)a.replaceWith(l.from,l.to,e.state.schema.text(t.typedBuffer));return e.dispatch(a),setTimeout(()=>{const l=Mr(e);t.ranges=l,l.length===0&&st(t)},10),!0}}})]}});function Az(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to read file"))},r.onerror=()=>n(new Error("Failed to read file")),r.readAsDataURL(t)})}function _z(t,e){return e.includes(t.type)}function Oz(t){return new Promise(e=>{const n=new Image;n.onload=()=>{e({width:n.width,height:n.height})},n.onerror=()=>{e({width:400,height:300})},n.src=t})}async function Iz(t,e,n){return new Promise((r,o)=>{const i=new Image,s=new FileReader;s.onload=a=>{i.src=a.target?.result},s.onerror=()=>o(new Error("Failed to read file")),i.onload=()=>{let a=i.width,l=i.height;if(a>e){const m=e/a;a=e,l=Math.round(l*m)}const c=document.createElement("canvas");c.width=a,c.height=l;const u=c.getContext("2d");if(!u){o(new Error("Failed to get canvas context"));return}u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(i,0,0,a,l);const d=t.type==="image/png"||t.type==="image/gif",f=d?"image/png":"image/jpeg",h=d?void 0:n,p=c.toDataURL(f,h);r({dataUrl:p,width:a,height:l})},i.onerror=()=>o(new Error("Failed to load image")),s.readAsDataURL(t)})}async function yE(t,e,n){if(!_z(t,n.allowedMimeTypes))return n.onUploadError?.(`Invalid file type: ${t.type}. Allowed types: ${n.allowedMimeTypes.join(", ")}`),!1;if(t.size>n.maxFileSize){const r=(n.maxFileSize/1048576).toFixed(1),o=(t.size/(1024*1024)).toFixed(1);return n.onUploadError?.(`File too large: ${o}MB. Maximum size: ${r}MB`),!1}try{n.onUploadStart?.();let r,o;const i=["image/jpeg","image/png","image/webp"].includes(t.type);if(n.enableCompression&&i){const s=await Iz(t,n.maxCompressedWidth,n.compressionQuality);r=s.dataUrl,o=Math.min(s.width,600)}else{r=await Az(t);const s=await Oz(r);o=Math.min(s.width,600)}return e.chain().focus().setImage({src:r,alt:t.name,width:o}).run(),n.onUploadComplete?.(),!0}catch(r){return n.onUploadError?.(`Failed to process image: ${r instanceof Error?r.message:"Unknown error"}`),!1}}function wE(t){const e=[];if(t.items)for(let n=0;n<t.items.length;n++){const r=t.items[n];if(r.kind==="file"&&r.type.startsWith("image/")){const o=r.getAsFile();o&&e.push(o)}}if(e.length===0&&t.files)for(let n=0;n<t.files.length;n++){const r=t.files[n];r.type.startsWith("image/")&&e.push(r)}return e}const kE=Ce.create({name:"imageUpload",addOptions(){return{maxFileSize:5*1024*1024,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],enableCompression:!0,maxCompressedWidth:1200,compressionQuality:.8,onUploadStart:void 0,onUploadComplete:void 0,onUploadError:void 0}},addProseMirrorPlugins(){const t=this.options,e=this.editor;return[new Se({key:new _e("imageUpload"),props:{handlePaste(n,r){const o=r.clipboardData;if(!o)return!1;const i=wE(o);return i.length===0?!1:(r.preventDefault(),i.forEach(s=>{yE(s,e,t)}),!0)},handleDrop(n,r,o,i){if(i)return!1;const s=r.dataTransfer;if(!s)return!1;const a=wE(s);if(a.length===0)return!1;r.preventDefault();const l=n.posAtCoords({left:r.clientX,top:r.clientY});if(l){const c=n.state.tr.setSelection(le.near(n.state.doc.resolve(l.pos)));n.dispatch(c)}return a.forEach(c=>{yE(c,e,t)}),!0}}})]}});function EE({containerRef:t,enabled:e=!0}){const[n,r]=N.useState(!1),[o,i]=N.useState(0),s=N.useCallback(u=>{u.preventDefault(),u.stopPropagation(),u.dataTransfer?.types.includes("Files")&&(i(d=>d+1),r(!0))},[]),a=N.useCallback(u=>{u.preventDefault(),u.stopPropagation(),i(d=>{const f=d-1;return f===0&&r(!1),f})},[]),l=N.useCallback(u=>{u.preventDefault(),u.stopPropagation()},[]),c=N.useCallback(u=>{u.preventDefault(),u.stopPropagation(),r(!1),i(0)},[]);return N.useEffect(()=>{if(!e||!t.current)return;const u=t.current;return u.addEventListener("dragenter",s),u.addEventListener("dragleave",a),u.addEventListener("dragover",l),u.addEventListener("drop",c),()=>{u.removeEventListener("dragenter",s),u.removeEventListener("dragleave",a),u.removeEventListener("dragover",l),u.removeEventListener("drop",c)}},[e,t,s,a,l,c]),n?y.jsxDEV("div",{className:"image-drop-zone",children:y.jsxDEV("div",{className:"image-drop-zone-content",children:[y.jsxDEV("div",{className:"image-drop-zone-icon",children:y.jsxDEV(hD,{className:"w-12 h-12"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:84,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:83,columnNumber:9},this),y.jsxDEV("div",{className:"image-drop-zone-text",children:[y.jsxDEV("span",{className:"image-drop-zone-title",children:"Drop image here"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:87,columnNumber:11},this),y.jsxDEV("span",{className:"image-drop-zone-subtitle",children:"Release to insert image into the editor"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:86,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:82,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:81,columnNumber:5},this):null}function Dz({src:t,alt:e,position:n,onSave:r,onDelete:o,onClose:i}){const[s,a]=N.useState(t),[l,c]=N.useState(e),u=N.useRef(null),d=N.useRef(null);N.useEffect(()=>{d.current?.focus(),d.current?.select()},[]),N.useEffect(()=>{const m=b=>{u.current&&!u.current.contains(b.target)&&i()},g=setTimeout(()=>{document.addEventListener("mousedown",m)},100);return()=>{clearTimeout(g),document.removeEventListener("mousedown",m)}},[i]),N.useEffect(()=>{const m=g=>{g.key==="Escape"?i():g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&f()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[s,l,i]);const f=()=>{s.trim()&&r(s.trim(),l.trim())},p=(()=>{let w=n.x,E=n.y+10;return w+320>window.innerWidth-16&&(w=window.innerWidth-320-16),w<16&&(w=16),E+200>window.innerHeight-16&&(E=n.y-200-10),{left:w,top:E}})();return y.jsxDEV("div",{ref:u,className:"image-edit-popover",style:{position:"fixed",left:p.left,top:p.top,zIndex:1e3},children:[y.jsxDEV("div",{className:"image-edit-popover-header",children:[y.jsxDEV("span",{className:"image-edit-popover-title",children:"Edit Image"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:135,columnNumber:9},this),y.jsxDEV("button",{onClick:i,className:"image-edit-popover-close","aria-label":"Close",children:y.jsxDEV(eo,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:141,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:136,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:134,columnNumber:7},this),y.jsxDEV("div",{className:"image-edit-popover-content",children:[y.jsxDEV("div",{className:"image-edit-popover-field",children:[y.jsxDEV("label",{className:"image-edit-popover-label",children:[y.jsxDEV(Nl,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:150,columnNumber:13},this),y.jsxDEV("span",{children:"Image URL"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:149,columnNumber:11},this),y.jsxDEV("input",{ref:d,type:"text",value:s,onChange:m=>a(m.target.value),placeholder:"https://example.com/image.jpg",className:"image-edit-popover-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:153,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:148,columnNumber:9},this),y.jsxDEV("div",{className:"image-edit-popover-field",children:[y.jsxDEV("label",{className:"image-edit-popover-label",children:[y.jsxDEV(Xi,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:166,columnNumber:13},this),y.jsxDEV("span",{children:"Alt Text"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:165,columnNumber:11},this),y.jsxDEV("input",{type:"text",value:l,onChange:m=>c(m.target.value),placeholder:"Describe the image...",className:"image-edit-popover-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:169,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:164,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:146,columnNumber:7},this),y.jsxDEV("div",{className:"image-edit-popover-footer",children:[y.jsxDEV("button",{onClick:o,className:"image-edit-popover-btn image-edit-popover-btn-delete",title:"Delete image",children:y.jsxDEV(Yi,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:186,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:181,columnNumber:9},this),y.jsxDEV("div",{className:"image-edit-popover-actions",children:[y.jsxDEV("button",{onClick:i,className:"image-edit-popover-btn image-edit-popover-btn-cancel",children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:189,columnNumber:11},this),y.jsxDEV("button",{onClick:f,className:"image-edit-popover-btn image-edit-popover-btn-save",disabled:!s.trim(),children:[y.jsxDEV(gl,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:200,columnNumber:13},this),"Save"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:195,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:188,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:180,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:123,columnNumber:5},this)}function Lz(t){const e=[],n=t.split(`
`);let r=0,o=!1,i="";for(let s=0;s<n.length;s++){const a=n[s],l=r;if(a.startsWith("```")){o?(o=!1,e.push({type:"code-block",content:a,start:l,end:l+a.length})):(o=!0,i=a.slice(3).trim(),e.push({type:"code-block",content:"```",start:l,end:l+3}),i&&e.push({type:"code-block-lang",content:i,start:l+3,end:l+3+i.length})),r+=a.length+1;continue}if(o){e.push({type:"code-block",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}const c=a.match(/^(#{1,6})\s+(.*)$/);if(c){const w=c[1].length;e.push({type:`heading${w}`,content:a,start:l,end:l+a.length}),r+=a.length+1;continue}if(/^(-{3,}|\*{3,}|_{3,})$/.test(a.trim())){e.push({type:"horizontal-rule",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}if(a.startsWith(">")){e.push({type:"blockquote",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}if(/^\|?[\s-:|]+\|?$/.test(a)&&a.includes("-")){e.push({type:"table-separator",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}if(a.includes("|")&&(a.startsWith("|")||a.trim().includes(" | "))){e.push({type:"table-cell",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}const u=a.match(/^(\s*[-*+]\s+)\[([xX ])\]\s+(.*)$/);if(u){const w=u[2].toLowerCase()==="x";e.push({type:w?"task-checked":"task-list",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}if(a.match(/^(\s*[-*+])\s+(.*)$/)){e.push({type:"list-bullet",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}if(a.match(/^(\s*\d+\.)\s+(.*)$/)){e.push({type:"list-number",content:a,start:l,end:l+a.length}),r+=a.length+1;continue}let h=0;const p=[{regex:/\*\*\*(.+?)\*\*\*|___(.+?)___/g,type:"bold-italic"},{regex:/\*\*(.+?)\*\*|__(.+?)__/g,type:"bold"},{regex:/\*(.+?)\*|_(.+?)_/g,type:"italic"},{regex:/~~(.+?)~~/g,type:"strikethrough"},{regex:/`([^`]+)`/g,type:"code-inline"},{regex:/!\[([^\]]*)\]\(([^)]+)\)/g,type:"image"},{regex:/\[([^\]]+)\]\(([^)]+)\)/g,type:"link"}],m=[];for(const w of p){let E;for(w.regex.lastIndex=0;(E=w.regex.exec(a))!==null;)m.push({start:l+E.index,end:l+E.index+E[0].length,type:w.type,content:E[0]})}m.sort((w,E)=>w.start-E.start);const g=[];let b=l;for(const w of m)w.start>=b&&(g.push(w),b=w.end);for(const w of g)w.start>l+h&&e.push({type:"text",content:a.substring(h,w.start-l),start:l+h,end:w.start}),e.push({type:w.type,content:w.content,start:w.start,end:w.end}),h=w.end-l;h<a.length&&e.push({type:"text",content:a.substring(h),start:l+h,end:l+a.length}),g.length===0&&a.length>0&&e.push({type:"text",content:a,start:l,end:l+a.length}),r+=a.length+1}return e}function Rz(t){return{heading1:"md-heading md-h1",heading2:"md-heading md-h2",heading3:"md-heading md-h3",heading4:"md-heading md-h4",heading5:"md-heading md-h5",heading6:"md-heading md-h6",bold:"md-bold",italic:"md-italic","bold-italic":"md-bold-italic",strikethrough:"md-strikethrough","code-inline":"md-code-inline","code-block":"md-code-block","code-block-lang":"md-code-lang",link:"md-link","link-text":"md-link-text","link-url":"md-link-url",image:"md-image","list-bullet":"md-list-bullet","list-number":"md-list-number","task-list":"md-task","task-checked":"md-task-checked",blockquote:"md-blockquote","horizontal-rule":"md-hr","table-header":"md-table-header","table-separator":"md-table-separator","table-cell":"md-table-cell",text:"md-text"}[t]||"md-text"}function us(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function Pz(t,e){if(e.length===0)return us(t);let n="";const r=t.split(`
`);let o=0;for(let i=0;i<r.length;i++){const s=r[i],a=o+s.length,l=e.filter(u=>u.start>=o&&u.start<a);let c=o;for(const u of l)u.start>c&&(n+=us(t.substring(c,u.start))),n+=`<span class="${Rz(u.type)}">${us(u.content)}</span>`,c=u.end;c<a&&(n+=us(t.substring(c,a))),i<r.length-1&&(n+=`
`),o=a+1}return n}function Bz({content:t,onChange:e,placeholder:n="Write your markdown here...",editable:r=!0,autofocus:o=!1,className:i=""}){const s=N.useRef(null),a=N.useRef(null),l=N.useRef(null),c=N.useMemo(()=>{const h=Lz(t);return Pz(t,h)},[t]),u=N.useCallback(()=>{const h=s.current,p=a.current;if(h){h.style.height="auto";const m=Math.max(h.scrollHeight,200);h.style.height=`${m}px`,p&&(p.style.height=`${m}px`)}},[]),d=N.useCallback(()=>{const h=s.current,p=a.current;h&&p&&(p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft)},[]);N.useEffect(()=>{u()},[t,u]),N.useEffect(()=>{o&&s.current&&s.current.focus()},[o]);const f=N.useCallback(h=>{if(h.key==="Tab"){h.preventDefault();const p=h.currentTarget,m=p.selectionStart,g=p.selectionEnd,b=p.value;if(h.shiftKey){const w=b.substring(0,m),E=b.substring(m,g),v=b.substring(g),S=w.lastIndexOf(`
`)+1,C=w.substring(0,S),M=w.substring(S),A=(M+E).split(`
`),D=A.map(q=>q.startsWith("  ")?q.substring(2):q.startsWith("	")?q.substring(1):q),G=C+D.join(`
`)+v;e(G),setTimeout(()=>{const q=(M+E).length-D.join(`
`).length;p.selectionStart=Math.max(S,m-(A[0].length-D[0].length)),p.selectionEnd=g-q},0)}else if(m===g){const w=b.substring(0,m)+"  "+b.substring(g);e(w),setTimeout(()=>{p.selectionStart=p.selectionEnd=m+2},0)}else{const w=b.substring(0,m),E=b.substring(m,g),v=b.substring(g),S=w.lastIndexOf(`
`)+1,C=w.substring(0,S),A=(w.substring(S)+E).split(`
`),D=A.map(q=>"  "+q),G=C+D.join(`
`)+v;e(G),setTimeout(()=>{p.selectionStart=m+2,p.selectionEnd=g+A.length*2},0)}}},[e]);return y.jsxDEV("div",{ref:l,className:`syntax-highlighted-editor ${i}`,children:[y.jsxDEV("div",{ref:a,className:"syntax-highlight-overlay",dangerouslySetInnerHTML:{__html:c||`<span class="md-placeholder">${us(n)}</span>`},"aria-hidden":"true"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SyntaxHighlightedMarkdown.tsx",lineNumber:502,columnNumber:7},this),y.jsxDEV("textarea",{ref:s,value:t,onChange:h=>e(h.target.value),onKeyDown:f,onScroll:d,placeholder:"",disabled:!r,className:"syntax-textarea",spellCheck:!1},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SyntaxHighlightedMarkdown.tsx",lineNumber:508,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SyntaxHighlightedMarkdown.tsx",lineNumber:501,columnNumber:5},this)}let vE=0,Kf=0,NE=0;function zz(t){Kf++,NE=t}const $z=N.memo(function({visible:e,onClose:n,editor:r}){const[o,i]=N.useState(!1),[s,a]=N.useState({fps:0,frameTime:0,frameTimeMax:0,memoryUsed:0,memoryTotal:0,renderCount:0,transactionCount:0,lastTransactionTime:0,domNodes:0,longFrames:0}),l=N.useRef([]),c=N.useRef(performance.now()),u=N.useRef(0),d=N.useRef(0),f=N.useRef(0),h=N.useRef(0),[p,m]=N.useState(new Array(60).fill(0)),[g,b]=N.useState(new Array(60).fill(0));N.useEffect(()=>{if(!e||!r)return;const C=()=>{const M=performance.now();queueMicrotask(()=>{const A=performance.now()-M;zz(A)})};return r.on("transaction",C),()=>{r.off("transaction",C)}},[e,r]),N.useEffect(()=>{if(!e)return;let C=0,M=performance.now(),A=0;const D=G=>{const q=G-c.current;if(c.current=G,l.current.push({time:G,duration:q}),l.current.length>120&&(l.current=l.current.slice(-120)),q>16.67&&d.current++,C++,G-M>=1e3){A=C,C=0,M=G;const X=l.current.slice(-60),H=X.length>0?X.reduce((Q,ce)=>Q+ce.duration,0)/X.length:0,j=X.length>0?Math.max(...X.map(Q=>Q.duration)):0,K=performance.memory,re=K?K.usedJSHeapSize/(1024*1024):0,_=K?K.jsHeapSizeLimit/(1024*1024):0,V=document.querySelectorAll("*").length,O=vE-f.current,$=Kf-h.current;f.current=vE,h.current=Kf,a({fps:A,frameTime:Math.round(H*100)/100,frameTimeMax:Math.round(j*100)/100,memoryUsed:Math.round(re*10)/10,memoryTotal:Math.round(_),renderCount:O,transactionCount:$,lastTransactionTime:Math.round(NE*100)/100,domNodes:V,longFrames:d.current}),m(Q=>[...Q.slice(1),A]),b(Q=>[...Q.slice(1),H]),d.current=0}u.current=requestAnimationFrame(D)};return u.current=requestAnimationFrame(D),()=>{cancelAnimationFrame(u.current)}},[e]);const w=N.useCallback(()=>{n?.()},[n]),E=N.useCallback(()=>{i(C=>!C)},[]);if(!e)return null;const v=C=>C>=55?"#4ade80":C>=30?"#fbbf24":"#f87171",k=C=>C<=16.67?"#4ade80":C<=33.33?"#fbbf24":"#f87171",S=(C,M,A)=>{const q=C.map((X,H)=>{const j=H/(C.length-1)*120,K=24-Math.min(X,M)/M*24;return`${j},${K}`}).join(" ");return y.jsxDEV("svg",{width:120,height:24,className:"perf-sparkline",children:y.jsxDEV("polyline",{points:q,fill:"none",stroke:A,strokeWidth:"1.5",strokeLinejoin:"round"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:225,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:224,columnNumber:7},this)};return y.jsxDEV("div",{className:"perf-profiler-overlay",children:[y.jsxDEV("div",{className:"perf-profiler-header",children:[y.jsxDEV("div",{className:"perf-profiler-title",children:[y.jsxDEV(nD,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:241,columnNumber:11},this),y.jsxDEV("span",{children:"Performance"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:240,columnNumber:9},this),y.jsxDEV("div",{className:"perf-profiler-actions",children:[y.jsxDEV("button",{onClick:E,title:o?"Expand":"Minimize",children:o?y.jsxDEV(mD,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:246,columnNumber:28},this):y.jsxDEV(gD,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:246,columnNumber:54},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:245,columnNumber:11},this),y.jsxDEV("button",{onClick:w,title:"Close profiler",children:y.jsxDEV(eo,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:249,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:248,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:244,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:239,columnNumber:7},this),!o&&y.jsxDEV("div",{className:"perf-profiler-body",children:[y.jsxDEV("div",{className:"perf-section",children:[y.jsxDEV("div",{className:"perf-row",children:[y.jsxDEV("span",{className:"perf-label",children:"FPS"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:259,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value",style:{color:v(s.fps)},children:s.fps},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:258,columnNumber:13},this),S(p,70,v(s.fps))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:257,columnNumber:11},this),y.jsxDEV("div",{className:"perf-section",children:[y.jsxDEV("div",{className:"perf-row",children:[y.jsxDEV("span",{className:"perf-label",children:"Frame Time"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:270,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value",style:{color:k(s.frameTime)},children:[s.frameTime,"ms"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:271,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:269,columnNumber:13},this),y.jsxDEV("div",{className:"perf-row perf-row-sub",children:[y.jsxDEV("span",{className:"perf-label-sub",children:"Max"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:276,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value-sub",style:{color:k(s.frameTimeMax)},children:[s.frameTimeMax,"ms"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:277,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:275,columnNumber:13},this),y.jsxDEV("div",{className:"perf-row perf-row-sub",children:[y.jsxDEV("span",{className:"perf-label-sub",children:["Jank (",">"," 16.7ms)"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:282,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value-sub",style:{color:s.longFrames>3?"#f87171":"#4ade80"},children:[s.longFrames,"/s"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:283,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:281,columnNumber:13},this),S(g,50,k(s.frameTime))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:268,columnNumber:11},this),y.jsxDEV("div",{className:"perf-section",children:[y.jsxDEV("div",{className:"perf-row",children:[y.jsxDEV("span",{className:"perf-label",children:"Renders/s"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:293,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value",children:s.renderCount},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:294,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:292,columnNumber:13},this),y.jsxDEV("div",{className:"perf-row",children:[y.jsxDEV("span",{className:"perf-label",children:"Transactions/s"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:297,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value",children:s.transactionCount},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:298,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:296,columnNumber:13},this),y.jsxDEV("div",{className:"perf-row perf-row-sub",children:[y.jsxDEV("span",{className:"perf-label-sub",children:"Last TX time"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:301,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value-sub",children:[s.lastTransactionTime,"ms"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:302,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:300,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:291,columnNumber:11},this),y.jsxDEV("div",{className:"perf-section",children:[y.jsxDEV("div",{className:"perf-row",children:[y.jsxDEV("span",{className:"perf-label",children:"DOM Nodes"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:309,columnNumber:15},this),y.jsxDEV("span",{className:"perf-value",children:s.domNodes.toLocaleString()},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:310,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:308,columnNumber:13},this),s.memoryTotal>0&&y.jsxDEV("div",{className:"perf-row",children:[y.jsxDEV("span",{className:"perf-label",children:"Memory"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:314,columnNumber:17},this),y.jsxDEV("span",{className:"perf-value",children:[s.memoryUsed,"MB / ",s.memoryTotal,"MB"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:315,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:313,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:307,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:255,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:237,columnNumber:5},this)});function Vz(t,e,n){const r=[];return t.state.doc.descendants((i,s)=>{if(i.type.name==="heading"){const a=i.attrs.level;if(a>=e&&a<=n){const l=i.textContent;l.trim()&&r.push({id:`toc-heading-${s}`,text:l.trim(),level:a,pos:s})}}}),r}function Hz(t){if(t.length===0)return[];const e=[],n=[];for(const r of t){const o={...r,children:[]};for(;n.length>0&&n[n.length-1].level>=r.level;)n.pop();if(n.length===0)e.push(o);else{const i=n[n.length-1].item;i.children||(i.children=[]),i.children.push(o)}n.push({item:o,level:r.level})}return e}function xE(t,e){try{const n=t.state.doc.resolve(e),r=t.view.nodeDOM(n.before(n.depth+1));if(r instanceof HTMLElement)return r;const o=t.view.nodeDOM(e);if(o instanceof HTMLElement)return o}catch{}return null}const qf=N.memo(function({editor:e,visible:n=!0,onVisibilityChange:r,title:o="",minLevel:i=1,maxLevel:s=4,showLevelIndicators:a=!1,highlightActive:l=!0,treeView:c=!1,className:u="",width:d="220px",position:f="right",scrollOffset:h=20,onItemClick:p,renderItem:m,showToggleButton:g=!0,scrollContainerRef:b}){const[w,E]=N.useState([]),[v,k]=N.useState(null),[S,C]=N.useState(n),[M,A]=N.useState(new Set),D=N.useRef(null),G=N.useRef(null);N.useEffect(()=>{C(n)},[n]);const q=N.useCallback(()=>{if(!e||e.isDestroyed)return;const O=Vz(e,i,s);E(O),v&&!O.find($=>$.id===v)&&k(null)},[e,i,s,v]);N.useEffect(()=>{if(!e)return;const O=()=>{G.current&&clearTimeout(G.current),G.current=setTimeout(()=>q(),300)};return q(),e.on("update",O),e.on("create",O),()=>{e.off("update",O),e.off("create",O),G.current&&clearTimeout(G.current)}},[e,q]),N.useEffect(()=>{if(!e||!l||!S||w.length===0)return;const O=b?.current||e.view.dom.closest(".editor-content-wrapper");if(!O)return;const $=()=>{const Te=O.getBoundingClientRect();let Oe=null;for(let Ge=w.length-1;Ge>=0;Ge--){const he=w[Ge],at=xE(e,he.pos);if(at&&at.getBoundingClientRect().top-Te.top<=h+10){Oe=he.id;break}}!Oe&&w.length>0&&(Oe=w[0].id),k(Oe)};let Q;const ce=()=>{cancelAnimationFrame(Q),Q=requestAnimationFrame($)};return O.addEventListener("scroll",ce,{passive:!0}),$(),()=>{O.removeEventListener("scroll",ce),cancelAnimationFrame(Q)}},[e,w,l,S,h,b]);const X=N.useCallback(O=>{if(!e||e.isDestroyed)return;const $=xE(e,O.pos);if($){const Q=b?.current||e.view.dom.closest(".editor-content-wrapper");if(Q){const ce=Q.getBoundingClientRect(),Oe=$.getBoundingClientRect().top-ce.top+Q.scrollTop;Q.scrollTo({top:Oe-h,behavior:"smooth"})}else $.scrollIntoView({behavior:"smooth",block:"start"})}try{e.commands.setTextSelection(O.pos+1)}catch{}k(O.id),p?.(O)},[e,h,p,b]),H=N.useCallback(()=>{const O=!S;C(O),r?.(O)},[S,r]),j=N.useCallback(O=>{A($=>{const Q=new Set($);return Q.has(O)?Q.delete(O):Q.add(O),Q})},[]),K=N.useCallback((O,$,Q=0)=>{if(m)return m(O,$,()=>X(O));const ce=(O.level-i)*14,Te=c&&O.children&&O.children.length>0,Oe=M.has(O.id);return y.jsxDEV("div",{className:`toc-item ${$?"toc-item-active":""} toc-level-${O.level}`,style:{paddingLeft:`${ce+10}px`},children:y.jsxDEV("button",{className:"toc-item-button",onClick:()=>X(O),title:O.text,children:[Te&&y.jsxDEV("span",{className:"toc-collapse-toggle",onClick:Ge=>{Ge.stopPropagation(),j(O.id)},children:y.jsxDEV("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:Oe?y.jsxDEV("path",{d:"M3.5 2L7 5L3.5 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:257,columnNumber:21},this):y.jsxDEV("path",{d:"M2 3.5L5 7L8 3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:258,columnNumber:21},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:255,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:248,columnNumber:13},this),a&&y.jsxDEV("span",{className:"toc-level-indicator",children:["H",O.level]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:264,columnNumber:13},this),y.jsxDEV("span",{className:"toc-item-text",children:O.text},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:242,columnNumber:9},this)},O.id,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:237,columnNumber:7},this)},[m,X,c,i,a,M,j]),re=N.useCallback((O,$=0)=>O.map(Q=>{const ce=v===Q.id,Te=M.has(Q.id),Oe=Q.children&&Q.children.length>0;return y.jsxDEV("div",{children:[K(Q,ce,$),Oe&&!Te&&y.jsxDEV("div",{className:"toc-children",children:re(Q.children,$+1)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:281,columnNumber:13},this)]},Q.id,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:278,columnNumber:9},this)}),[v,M,K]),_=N.useCallback(()=>w.map(O=>{const $=v===O.id;return K(O,$)}),[w,v,K]);if(!e)return null;const V=c?Hz(w):[];return y.jsxDEV(y.Fragment,{children:[g&&y.jsxDEV("button",{className:`toc-toggle-button toc-toggle-${f}`,onClick:H,title:S?"Hide Table of Contents":"Show Table of Contents",children:S?y.jsxDEV(wD,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:310,columnNumber:24},this):y.jsxDEV(kD,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:310,columnNumber:56},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:305,columnNumber:9},this),y.jsxDEV("div",{ref:D,className:`toc-sidebar ${S?"toc-visible":"toc-hidden"} toc-${f} ${u}`,style:{width:S?d:"0px"},children:y.jsxDEV("div",{className:"toc-inner",children:[o&&y.jsxDEV("div",{className:"toc-header",children:y.jsxDEV("span",{className:"toc-title",children:o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:324,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:323,columnNumber:13},this),y.jsxDEV("div",{className:"toc-content",children:w.length===0?y.jsxDEV("div",{className:"toc-empty",children:[y.jsxDEV("p",{children:"No headings yet"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:332,columnNumber:17},this),y.jsxDEV("p",{className:"toc-empty-hint",children:"Add headings to see the outline."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:333,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:331,columnNumber:15},this):y.jsxDEV("div",{className:"toc-list",children:c?re(V):_()},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:336,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:329,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:320,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:315,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:302,columnNumber:5},this)});function Fz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}function Gf(t,e){return Array(e+1).join(t)}function SE(t){return t.replace(/^\n*/,"")}function CE(t){for(var e=t.length;e>0&&t[e-1]===`
`;)e--;return t.substring(0,e)}function TE(t){return CE(SE(t))}var Uz=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function jf(t){return Yf(t,Uz)}var ME=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function AE(t){return Yf(t,ME)}function Wz(t){return OE(t,ME)}var _E=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Kz(t){return Yf(t,_E)}function qz(t){return OE(t,_E)}function Yf(t,e){return e.indexOf(t.nodeName)>=0}function OE(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var Mt={};Mt.paragraph={filter:"p",replacement:function(t){return`

`+t+`

`}},Mt.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+`
`}},Mt.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var r=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var o=Gf(r===1?"=":"-",t.length);return`

`+t+`
`+o+`

`}else return`

`+Gf("#",r)+" "+t+`

`}},Mt.blockquote={filter:"blockquote",replacement:function(t){return t=TE(t).replace(/^/gm,"> "),`

`+t+`

`}},Mt.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?`
`+t:`

`+t+`

`}},Mt.listItem={filter:"li",replacement:function(t,e,n){var r=n.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var i=o.getAttribute("start"),s=Array.prototype.indexOf.call(o.children,e);r=(i?Number(i)+s:s+1)+".  "}var a=/\n$/.test(t);return t=TE(t)+(a?`
`:""),t=t.replace(/\n/gm,`
`+" ".repeat(r.length)),r+t+(e.nextSibling?`
`:"")}},Mt.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}},Mt.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var r=e.firstChild.getAttribute("class")||"",o=(r.match(/language-(\S+)/)||[null,""])[1],i=e.firstChild.textContent,s=n.fence.charAt(0),a=3,l=new RegExp("^"+s+"{3,}","gm"),c;c=l.exec(i);)c[0].length>=a&&(a=c[0].length+1);var u=Gf(s,a);return`

`+u+o+`
`+i.replace(/\n$/,"")+`
`+u+`

`}},Mt.horizontalRule={filter:"hr",replacement:function(t,e,n){return`

`+n.hr+`

`}},Mt.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=nc(e.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+t+"]("+n+r+")"}},Mt.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var r=e.getAttribute("href"),o=nc(e.getAttribute("title"));o&&(o=' "'+o+'"');var i,s;switch(n.linkReferenceStyle){case"collapsed":i="["+t+"][]",s="["+t+"]: "+r+o;break;case"shortcut":i="["+t+"]",s="["+t+"]: "+r+o;break;default:var a=this.references.length+1;i="["+t+"]["+a+"]",s="["+a+"]: "+r+o}return this.references.push(s),i},references:[],append:function(t){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}},Mt.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}},Mt.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}},Mt.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",r=t.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}},Mt.image={filter:"img",replacement:function(t,e){var n=nc(e.getAttribute("alt")),r=e.getAttribute("src")||"",o=nc(e.getAttribute("title")),i=o?' "'+o+'"':"";return r?"!["+n+"]("+r+i+")":""}};function nc(t){return t?t.replace(/(\n+\s*)+/g,`
`):""}function IE(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}IE.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=Xf(this.array,t,this.options))||(e=Xf(this._keep,t,this.options))||(e=Xf(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function Xf(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];if(Gz(o,e,n))return o}}function Gz(t,e,n){var r=t.filter;if(typeof r=="string"){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function jz(t){var e=t.element,n=t.isBlock,r=t.isVoid,o=t.isPre||function(d){return d.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var i=null,s=!1,a=null,l=DE(a,e,o);l!==e;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!i||/ $/.test(i.data))&&!s&&c[0]===" "&&(c=c.substr(1)),!c){l=Zf(l);continue}l.data=c,i=l}else if(l.nodeType===1)n(l)||l.nodeName==="BR"?(i&&(i.data=i.data.replace(/ $/,"")),i=null,s=!1):r(l)||o(l)?(i=null,s=!0):i&&(s=!1);else{l=Zf(l);continue}var u=DE(a,l,o);a=l,l=u}i&&(i.data=i.data.replace(/ $/,""),i.data||Zf(i))}}function Zf(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function DE(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var Jf=typeof window<"u"?window:{};function Yz(){var t=Jf.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch{}return e}function Xz(){var t=function(){};return Zz()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function Zz(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{Jf.ActiveXObject&&(t=!0)}return t}var Jz=Yz()?Jf.DOMParser:Xz();function Qz(t,e){var n;if(typeof t=="string"){var r=e3().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=t.cloneNode(!0);return jz({element:n,isBlock:jf,isVoid:AE,isPre:e.preformattedCode?t3:null}),n}var Qf;function e3(){return Qf=Qf||new Jz,Qf}function t3(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function n3(t,e){return t.isBlock=jf(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=r3(t),t.flankingWhitespace=o3(t,e),t}function r3(t){return!AE(t)&&!Kz(t)&&/^\s*$/i.test(t.textContent)&&!Wz(t)&&!qz(t)}function o3(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=i3(t.textContent);return n.leadingAscii&&LE("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&LE("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function i3(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function LE(t,e,n){var r,o,i;return t==="left"?(r=e.previousSibling,o=/ $/):(r=e.nextSibling,o=/^ /),r&&(r.nodeType===3?i=o.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?i=!1:r.nodeType===1&&!jf(r)&&(i=o.test(r.textContent))),i}var s3=Array.prototype.reduce,a3=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function rc(t){if(!(this instanceof rc))return new rc(t);var e={rules:Mt,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=Fz({},e,t),this.rules=new IE(this.options)}rc.prototype={turndown:function(t){if(!u3(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=RE.call(this,new Qz(t,this.options));return l3.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return a3.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function RE(t){var e=this;return s3.call(t.childNodes,function(n,r){r=new n3(r,e.options);var o="";return r.nodeType===3?o=r.isCode?r.nodeValue:e.escape(r.nodeValue):r.nodeType===1&&(o=c3.call(e,r)),PE(n,o)},"")}function l3(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=PE(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function c3(t){var e=this.rules.forNode(t),n=RE.call(this,t),r=t.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+e.replacement(n,t,this.options)+r.trailing}function PE(t,e){var n=CE(t),r=SE(e),o=Math.max(t.length-n.length,e.length-r.length),i=`

`.substring(0,o);return n+i+r}function u3(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var BE=/highlight-(?:text|source)-([a-z0-9]+)/;function d3(t){t.addRule("highlightedCodeBlock",{filter:function(e){var n=e.firstChild;return e.nodeName==="DIV"&&BE.test(e.className)&&n&&n.nodeName==="PRE"},replacement:function(e,n,r){var o=n.className||"",i=(o.match(BE)||[null,""])[1];return`

`+r.fence+i+`
`+n.firstChild.textContent+`
`+r.fence+`

`}})}function f3(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var h3=Array.prototype.indexOf,p3=Array.prototype.every,Zo={};Zo.tableCell={filter:["th","td"],replacement:function(t,e){return zE(t,e)}},Zo.tableRow={filter:"tr",replacement:function(t,e){var n="",r={left:":--",right:"--:",center:":-:"};if(eh(e))for(var o=0;o<e.childNodes.length;o++){var i="---",s=(e.childNodes[o].getAttribute("align")||"").toLowerCase();s&&(i=r[s]||i),n+=zE(i,e.childNodes[o])}return`
`+t+(n?`
`+n:"")}},Zo.table={filter:function(t){return t.nodeName==="TABLE"&&eh(t.rows[0])},replacement:function(t){return t=t.replace(`

`,`
`),`

`+t+`

`}},Zo.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function eh(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||m3(e))&&p3.call(t.childNodes,function(n){return n.nodeName==="TH"})}function m3(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function zE(t,e){var n=h3.call(e.parentNode.childNodes,e),r=" ";return n===0&&(r="| "),r+t+" |"}function g3(t){t.keep(function(n){return n.nodeName==="TABLE"&&!eh(n.rows[0])});for(var e in Zo)t.addRule(e,Zo[e])}function b3(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}})}function y3(t){t.use([d3,f3,g3,b3])}function th(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var io=th();function $E(t){io=t}var ds={exec:()=>null};function De(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(o,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(Dt.caret,"$1"),n=n.replace(o,s),r},getRegex:()=>new RegExp(n,e)};return r}var w3=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Dt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},k3=/^(?:[ \t]*(?:\n|$))+/,E3=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,v3=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,fs=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,N3=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,nh=/(?:[*+-]|\d{1,9}[.)])/,VE=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,HE=De(VE).replace(/bull/g,nh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),x3=De(VE).replace(/bull/g,nh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),rh=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,S3=/^[^\n]+/,oh=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,C3=De(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",oh).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),T3=De(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,nh).getRegex(),oc="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ih=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,M3=De("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ih).replace("tag",oc).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),FE=De(rh).replace("hr",fs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oc).getRegex(),A3=De(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",FE).getRegex(),sh={blockquote:A3,code:E3,def:C3,fences:v3,heading:N3,hr:fs,html:M3,lheading:HE,list:T3,newline:k3,paragraph:FE,table:ds,text:S3},UE=De("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oc).getRegex(),_3={...sh,lheading:x3,table:UE,paragraph:De(rh).replace("hr",fs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",UE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",oc).getRegex()},O3={...sh,html:De(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ih).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ds,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:De(rh).replace("hr",fs).replace("heading",` *#{1,6} *[^
]`).replace("lheading",HE).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},I3=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,D3=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,WE=/^( {2,}|\\)\n(?!\s*$)/,L3=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ic=/[\p{P}\p{S}]/u,ah=/[\s\p{P}\p{S}]/u,KE=/[^\s\p{P}\p{S}]/u,R3=De(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ah).getRegex(),qE=/(?!~)[\p{P}\p{S}]/u,P3=/(?!~)[\s\p{P}\p{S}]/u,B3=/(?:[^\s\p{P}\p{S}]|~)/u,z3=De(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",w3?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),GE=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$3=De(GE,"u").replace(/punct/g,ic).getRegex(),V3=De(GE,"u").replace(/punct/g,qE).getRegex(),jE="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",H3=De(jE,"gu").replace(/notPunctSpace/g,KE).replace(/punctSpace/g,ah).replace(/punct/g,ic).getRegex(),F3=De(jE,"gu").replace(/notPunctSpace/g,B3).replace(/punctSpace/g,P3).replace(/punct/g,qE).getRegex(),U3=De("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,KE).replace(/punctSpace/g,ah).replace(/punct/g,ic).getRegex(),W3=De(/\\(punct)/,"gu").replace(/punct/g,ic).getRegex(),K3=De(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),q3=De(ih).replace("(?:-->|$)","-->").getRegex(),G3=De("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",q3).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),sc=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,j3=De(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",sc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),YE=De(/^!?\[(label)\]\[(ref)\]/).replace("label",sc).replace("ref",oh).getRegex(),XE=De(/^!?\[(ref)\](?:\[\])?/).replace("ref",oh).getRegex(),Y3=De("reflink|nolink(?!\\()","g").replace("reflink",YE).replace("nolink",XE).getRegex(),ZE=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,lh={_backpedal:ds,anyPunctuation:W3,autolink:K3,blockSkip:z3,br:WE,code:D3,del:ds,emStrongLDelim:$3,emStrongRDelimAst:H3,emStrongRDelimUnd:U3,escape:I3,link:j3,nolink:XE,punctuation:R3,reflink:YE,reflinkSearch:Y3,tag:G3,text:L3,url:ds},X3={...lh,link:De(/^!?\[(label)\]\((.*?)\)/).replace("label",sc).getRegex(),reflink:De(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sc).getRegex()},ch={...lh,emStrongRDelimAst:F3,emStrongLDelim:V3,url:De(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ZE).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:De(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ZE).getRegex()},Z3={...ch,br:De(WE).replace("{2,}","*").getRegex(),text:De(ch.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ac={normal:sh,gfm:_3,pedantic:O3},hs={normal:lh,gfm:ch,breaks:Z3,pedantic:X3},J3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},JE=t=>J3[t];function jn(t,e){if(e){if(Dt.escapeTest.test(t))return t.replace(Dt.escapeReplace,JE)}else if(Dt.escapeTestNoEncode.test(t))return t.replace(Dt.escapeReplaceNoEncode,JE);return t}function QE(t){try{t=encodeURI(t).replace(Dt.percentDecode,"%")}catch{return null}return t}function ev(t,e){let n=t.replace(Dt.findPipe,(i,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=n.split(Dt.splitPipe),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(Dt.slashPipe,"|");return r}function ps(t,e,n){let r=t.length;if(r===0)return"";let o=0;for(;o<r&&t.charAt(r-o-1)===e;)o++;return t.slice(0,r-o)}function Q3(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function tv(t,e,n,r,o){let i=e.href,s=e.title||null,a=t[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function e$(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let o=r[1];return e.split(`
`).map(i=>{let s=i.match(n.other.beginningSpace);if(s===null)return i;let[a]=s;return a.length>=o.length?i.slice(o.length):i}).join(`
`)}var lc=class{options;rules;lexer;constructor(t){this.options=t||io}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:ps(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],r=e$(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let r=ps(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:ps(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=ps(e[0],`
`).split(`
`),r="",o="",i=[];for(;n.length>0;){let s=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),s=!0;else if(!s)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,o=o?`${o}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=d,n.length===0)break;let f=i.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let h=f,p=h.raw+`
`+n.join(`
`),m=this.blockquote(p);i[i.length-1]=m,r=r.substring(0,r.length-h.raw.length)+m.raw,o=o.substring(0,o.length-h.text.length)+m.text;break}else if(f?.type==="list"){let h=f,p=h.raw+`
`+n.join(`
`),m=this.list(p);i[i.length-1]=m,r=r.substring(0,r.length-f.raw.length)+m.raw,o=o.substring(0,o.length-h.raw.length)+m.raw,n=p.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:o}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let i=this.rules.other.listItemRegex(n),s=!1;for(;t;){let l=!1,c="",u="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),f=t.split(`
`,1)[0],h=!d.trim(),p=0;if(this.options.pedantic?(p=2,u=d.trimStart()):h?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=d.slice(p),p+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,t=t.substring(f.length+1),l=!0),!l){let m=this.rules.other.nextBulletRegex(p),g=this.rules.other.hrRegex(p),b=this.rules.other.fencesBeginRegex(p),w=this.rules.other.headingBeginRegex(p),E=this.rules.other.htmlBeginRegex(p);for(;t;){let v=t.split(`
`,1)[0],k;if(f=v,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),k=f):k=f.replace(this.rules.other.tabCharGlobal,"    "),b.test(f)||w.test(f)||E.test(f)||m.test(f)||g.test(f))break;if(k.search(this.rules.other.nonSpaceChar)>=p||!f.trim())u+=`
`+k.slice(p);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||b.test(d)||w.test(d)||g.test(d))break;u+=`
`+f}!h&&!f.trim()&&(h=!0),c+=v+`
`,t=t.substring(v.length+1),d=k.slice(p)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0)),o.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(u),loose:!1,text:u,tokens:[]}),o.raw+=c}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let u=this.lexer.inlineQueue.length-1;u>=0;u--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[u].src)){this.lexer.inlineQueue[u].src=this.lexer.inlineQueue[u].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let u={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=u.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=u.raw+l.tokens[0].raw,l.tokens[0].text=u.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(u)):l.tokens.unshift({type:"paragraph",raw:u.raw,text:u.raw,tokens:[u]}):l.tokens.unshift(u)}}if(!o.loose){let c=l.tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));o.loose=u}}if(o.loose)for(let l of o.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return o}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:o}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=ev(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let s of r)this.rules.other.tableAlignRight.test(s)?i.align.push("right"):this.rules.other.tableAlignCenter.test(s)?i.align.push("center"):this.rules.other.tableAlignLeft.test(s)?i.align.push("left"):i.align.push(null);for(let s=0;s<n.length;s++)i.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:i.align[s]});for(let s of o)i.rows.push(ev(s,i.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:i.align[l]})));return i}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let i=ps(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{let i=Q3(e[2],"()");if(i===-2)return;if(i>-1){let s=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,s).trim(),e[3]=""}}let r=e[2],o="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],o=i[3])}else o=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),tv(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[r.toLowerCase()];if(!o){let i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return tv(n,o,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...r[0]].length-1,i,s,a=o,l=0,c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+o);(r=c.exec(e))!=null;){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(s=[...i].length,r[3]||r[4]){a+=s;continue}else if((r[5]||r[6])&&o%3&&!((o+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let u=[...r[0]][0].length,d=t.slice(0,o+r.index+u+s);if(Math.min(o,s)%2){let h=d.slice(1,-1);return{type:"em",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,r;if(e[2]==="@")n=e[0],r="mailto:"+n;else{let o;do o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(o!==e[0]);n=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},pn=class vh{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||io,this.options.tokenizer=this.options.tokenizer||new lc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Dt,block:ac.normal,inline:hs.normal};this.options.pedantic?(n.block=ac.pedantic,n.inline=hs.pedantic):this.options.gfm&&(n.block=ac.gfm,this.options.breaks?n.inline=hs.breaks:n.inline=hs.gfm),this.tokenizer.rules=n}static get rules(){return{block:ac,inline:hs}}static lex(e,n){return new vh(n).lex(e)}static lexInline(e,n){return new vh(n).inlineTokens(e)}lex(e){e=e.replace(Dt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(Dt.tabCharGlobal,"    ").replace(Dt.spaceLine,""));e;){let o;if(this.options.extensions?.block?.some(s=>(o=s.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let s=n.at(-1);o.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let i=e;if(this.options.extensions?.startBlock){let s=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(i=e.substring(0,s+1))}if(this.state.top&&(o=this.tokenizer.paragraph(i))){let s=n.at(-1);r&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o),r=i.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(e){let s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)i=o[2]?o[2].length:0,r=r.slice(0,o.index+i)+"["+"a".repeat(o[0].length-i-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let s=!1,a="";for(;e;){s||(a=""),s=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let u=n.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,a)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let c=e;if(this.options.extensions?.startInline){let u=1/0,d=e.slice(1),f;this.options.extensions.startInline.forEach(h=>{f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;let u=n.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},cc=class{options;parser;constructor(t){this.options=t||io}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(Dt.notSpaceStart)?.[0],o=t.replace(Dt.endingNewline,"")+`
`;return r?'<pre><code class="language-'+jn(r)+'">'+(n?o:jn(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:jn(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let s=0;s<t.items.length;s++){let a=t.items[s];r+=this.listitem(a)}let o=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+o+i+`>
`+r+"</"+o+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let o=0;o<t.header.length;o++)n+=this.tablecell(t.header[o]);e+=this.tablerow({text:n});let r="";for(let o=0;o<t.rows.length;o++){let i=t.rows[o];n="";for(let s=0;s<i.length;s++)n+=this.tablecell(i[s]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${jn(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),o=QE(t);if(o===null)return r;t=o;let i='<a href="'+t+'"';return e&&(i+=' title="'+jn(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let o=QE(t);if(o===null)return jn(n);t=o;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${jn(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:jn(t.text)}},uh=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},mn=class Nh{options;renderer;textRenderer;constructor(e){this.options=e||io,this.options.renderer=this.options.renderer||new cc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new uh}static parse(e,n){return new Nh(n).parse(e)}static parseInline(e,n){return new Nh(n).parseInline(e)}parse(e){let n="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(s.type)){n+=a||"";continue}}let i=o;switch(i.type){case"space":{n+=this.renderer.space(i);break}case"hr":{n+=this.renderer.hr(i);break}case"heading":{n+=this.renderer.heading(i);break}case"code":{n+=this.renderer.code(i);break}case"table":{n+=this.renderer.table(i);break}case"blockquote":{n+=this.renderer.blockquote(i);break}case"list":{n+=this.renderer.list(i);break}case"checkbox":{n+=this.renderer.checkbox(i);break}case"html":{n+=this.renderer.html(i);break}case"def":{n+=this.renderer.def(i);break}case"paragraph":{n+=this.renderer.paragraph(i);break}case"text":{n+=this.renderer.text(i);break}default:{let s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(e,n=this.renderer){let r="";for(let o=0;o<e.length;o++){let i=e[o];if(this.options.extensions?.renderers?.[i.type]){let a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=a||"";continue}}let s=i;switch(s.type){case"escape":{r+=n.text(s);break}case"html":{r+=n.html(s);break}case"link":{r+=n.link(s);break}case"image":{r+=n.image(s);break}case"checkbox":{r+=n.checkbox(s);break}case"strong":{r+=n.strong(s);break}case"em":{r+=n.em(s);break}case"codespan":{r+=n.codespan(s);break}case"br":{r+=n.br(s);break}case"del":{r+=n.del(s);break}case"text":{r+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},ms=class{options;block;constructor(t){this.options=t||io}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?pn.lex:pn.lexInline}provideParser(){return this.block?mn.parse:mn.parseInline}},t$=class{defaults=th();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=mn;Renderer=cc;TextRenderer=uh;Lexer=pn;Tokenizer=lc;Hooks=ms;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let o=r;for(let i of o.header)n=n.concat(this.walkTokens(i.tokens,e));for(let i of o.rows)for(let s of i)n=n.concat(this.walkTokens(s.tokens,e));break}case"list":{let o=r;n=n.concat(this.walkTokens(o.items,e));break}default:{let o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(i=>{let s=o[i].flat(1/0);n=n.concat(this.walkTokens(s,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let i=e.renderers[o.name];i?e.renderers[o.name]=function(...s){let a=o.renderer.apply(this,s);return a===!1&&(a=i.apply(this,s)),a}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=e[o.level];i?i.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),r.extensions=e),n.renderer){let o=this.defaults.renderer||new cc(this.defaults);for(let i in n.renderer){if(!(i in o))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let s=i,a=n.renderer[s],l=o[s];o[s]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u||""}}r.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new lc(this.defaults);for(let i in n.tokenizer){if(!(i in o))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let s=i,a=n.tokenizer[s],l=o[s];o[s]=(...c)=>{let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}r.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new ms;for(let i in n.hooks){if(!(i in o))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let s=i,a=n.hooks[s],l=o[s];ms.passThroughHooks.has(i)?o[s]=c=>{if(this.defaults.async&&ms.passThroughHooksRespectAsync.has(i))return(async()=>{let d=await a.call(o,c);return l.call(o,d)})();let u=a.call(o,c);return l.call(o,u)}:o[s]=(...c)=>{if(this.defaults.async)return(async()=>{let d=await a.apply(o,c);return d===!1&&(d=await l.apply(o,c)),d})();let u=a.apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}r.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(s){let a=[];return a.push(i.call(this,s)),o&&(a=a.concat(o.call(this,s))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return pn.lex(t,e??this.defaults)}parser(t,e){return mn.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},o={...this.defaults,...r},i=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=t),o.async)return(async()=>{let s=o.hooks?await o.hooks.preprocess(e):e,a=await(o.hooks?await o.hooks.provideLexer():t?pn.lex:pn.lexInline)(s,o),l=o.hooks?await o.hooks.processAllTokens(a):a;o.walkTokens&&await Promise.all(this.walkTokens(l,o.walkTokens));let c=await(o.hooks?await o.hooks.provideParser():t?mn.parse:mn.parseInline)(l,o);return o.hooks?await o.hooks.postprocess(c):c})().catch(i);try{o.hooks&&(e=o.hooks.preprocess(e));let s=(o.hooks?o.hooks.provideLexer():t?pn.lex:pn.lexInline)(e,o);o.hooks&&(s=o.hooks.processAllTokens(s)),o.walkTokens&&this.walkTokens(s,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():t?mn.parse:mn.parseInline)(s,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(s){return i(s)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+jn(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},so=new t$;function Be(t,e){return so.parse(t,e)}Be.options=Be.setOptions=function(t){return so.setOptions(t),Be.defaults=so.defaults,$E(Be.defaults),Be},Be.getDefaults=th,Be.defaults=io,Be.use=function(...t){return so.use(...t),Be.defaults=so.defaults,$E(Be.defaults),Be},Be.walkTokens=function(t,e){return so.walkTokens(t,e)},Be.parseInline=so.parseInline,Be.Parser=mn,Be.parser=mn.parse,Be.Renderer=cc,Be.TextRenderer=uh,Be.Lexer=pn,Be.lexer=pn.lex,Be.Tokenizer=lc,Be.Hooks=ms,Be.parse=Be,Be.options,Be.setOptions,Be.use,Be.walkTokens,Be.parseInline,mn.parse,pn.lex;const n$=()=>{if(typeof window>"u")return!1;const t="ontouchstart"in window,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.innerWidth<768;return t&&(e||n)||e&&n},r$=N.forwardRef(function({content:e="",onChange:n,onHTMLChange:r,onMarkdownChange:o,placeholder:i='Start writing... Use "/" for commands',editable:s=!0,autofocus:a=!1,className:l="",showToolbar:c=!0,showWordCount:u=!0,theme:d,autoSave:f=!0,autoSaveKey:h="manus-editor-content",autoSaveDelay:p=1e3,showRecoveryBanner:m=!0,showFloatingToolbar:g=!0,maxImageSize:b=5*1024*1024,onImageUploadStart:w,onImageUploadComplete:E,onImageUploadError:v,showModeToggle:k=!0,initialMode:S="wysiwyg",onModeChange:C,onReady:M,onFocus:A,onBlur:D,onSelectionChange:G,onDestroy:q,onSave:X,onRecover:H,onWikiLinkClick:j,onLinkClick:K,findReplaceOpen:re,onFindReplaceChange:_,renderToolbar:V,renderFooter:O,disabledFeatures:$={},minHeight:Q="200px",maxHeight:ce,spellCheck:Te=!0,headingLevels:Oe=[1,2,3,4,5,6],collapsibleHeadingLevels:Ge=[1,2,3],showTableOfContents:he=!1,tocVisible:at=!0,onTocVisibilityChange:Ft,tocTitle:wt="",tocMinLevel:Qt=1,tocMaxLevel:Ut=4,tocShowLevelIndicators:gn=!1,tocHighlightActive:Qo=!0,tocTreeView:ei=!1,tocWidth:Re="240px",tocPosition:bn="right",tocScrollOffset:On=20,onTocItemClick:ti,renderTocItem:gs,tocShowToggleButton:uc=!0,showPerformanceProfiler:fh=!1,onPerformanceProfilerClose:dc},Yn){const[en]=N.useState(()=>n$()),[tn,ni]=N.useState(S),[fc,hc]=N.useState(""),nn=N.useRef(S),ri=N.useRef(""),oi=N.useRef(null),hh=N.useMemo(()=>{const B=[cO.configure({heading:{levels:Oe},codeBlock:!1,dropcursor:{color:"var(--primary)",width:2},link:!1,underline:!1,bold:{HTMLAttributes:{class:"font-bold"}},italic:{HTMLAttributes:{class:"italic"}}}),uO.configure({placeholder:i,emptyEditorClass:"is-editor-empty"}),fO.configure({types:["heading","paragraph"]}),gO.configure({multicolor:!0}),k_.configure({openOnClick:!1,autolink:!0,linkOnPaste:!0,HTMLAttributes:{rel:"noopener noreferrer",target:"_blank"}}),B_,GO,YO,wI,fE,pE,bE,mE];return $.tables||B.push(Xy.configure({resizable:!en,HTMLAttributes:{class:"editor-table"}}),CO,RO,PO,UO),$.taskLists||B.push(WO.configure({HTMLAttributes:{class:"task-list"}}),KO.configure({nested:!0,HTMLAttributes:{class:"task-item"}})),$.codeBlocks||B.push(DD),$.callouts||B.push(zD,hE),$.collapsibleHeadings||B.push(dE.configure({levels:Ge})),$.images||B.push(B0.configure({allowBase64:!0,HTMLAttributes:{class:"editor-image"},onImageClick:U=>{lo({isOpen:!0,src:U.src,alt:U.alt,pos:U.pos,position:{x:U.rect.left+U.rect.width/2,y:U.rect.bottom}})}}),kE.configure({maxFileSize:b,onUploadStart:w,onUploadComplete:E,onUploadError:v})),!en&&!$.datePills&&B.push(z0.configure({HTMLAttributes:{class:"date-pill"}})),$.wikiLinks||B.push(aE.configure({onWikiLinkClick:U=>{console.log("WikiLink clicked:",U),j?.(U)}})),$.markdownPaste||B.push(cE.configure({enableMarkdownPaste:!0})),B},[i,en,b,w,E,v,Oe,Ge,$,j]),Ar=N.useRef(null),bs=N.useRef(n),ys=N.useRef(r),ph=N.useRef(o);bs.current=n,ys.current=r,ph.current=o;const P=kA({immediatelyRender:!0,shouldRerenderOnTransaction:!1,onCreate:({editor:B})=>{window.__tiptapEditor=B,M?.(B)},onDestroy:()=>{q?.()},extensions:hh,content:e,editable:s,autofocus:a,editorProps:{attributes:{class:"tiptap-editor outline-none min-h-full",spellcheck:Te?"true":"false"},handleClick:(B,U,we)=>{if(K){const pe=we.target.closest("a");if(pe){const Me=pe.getAttribute("href");if(Me&&K(Me,we)===!1)return we.preventDefault(),!0}}return!1}},onUpdate:({editor:B})=>{Ar.current&&clearTimeout(Ar.current),Ar.current=setTimeout(()=>{if(!B.isDestroyed&&(bs.current||ys.current)){const U=B.getHTML();bs.current?.(U),ys.current?.(U)}},150)},onFocus:()=>{A?.()},onBlur:()=>{D?.()},onSelectionUpdate:({editor:B})=>{if(G){const{from:U,to:we,empty:Le}=B.state.selection;G({from:U,to:we,empty:Le})}}});N.useEffect(()=>()=>{Ar.current&&clearTimeout(Ar.current)},[]);const[pc,ao]=N.useState(!1),[_r,lo]=N.useState(null),[Or,T]=N.useState(!1),L=re!==void 0?re:Or,W=N.useCallback(B=>{T(B),_?.(B)},[_]),[me,je]=N.useState(0),[Ye,oe]=N.useState(""),Z=rE(P,{storageKey:h,debounceMs:p,enabled:f,onSave:B=>{X?.(B)},onRecover:B=>{H?.(B)}}),de=N.useMemo(()=>{const B=new rc({headingStyle:"atx",codeBlockStyle:"fenced",bulletListMarker:"-",emDelimiter:"*",strongDelimiter:"**"});return B.use(y3),B.addRule("highlight",{filter:U=>U.nodeName==="MARK",replacement:U=>`==${U}==`}),B.addRule("resizableImage",{filter:"img",replacement:(U,we)=>{const Le=we,pe=Le.getAttribute("src")||"",Me=Le.getAttribute("alt")||"",In=Le.getAttribute("width")||Le.style.width?.replace("px","");return In?`<img src="${pe}" alt="${Me}" width="${In}" />`:`![${Me}](${pe})`}}),B.addRule("taskListItem",{filter:U=>U.nodeName==="LI"&&U.getAttribute("data-type")==="taskItem",replacement:(U,we)=>{const Le=we.querySelector('input[type="checkbox"]');return`- [${Le?.hasAttribute("checked")||Le?.checked?"x":" "}] ${U.trim()}
`}}),B.addRule("table",{filter:"table",replacement:function(U,we){const Le=we,pe=Array.from(Le.querySelectorAll("tr"));if(pe.length===0)return"";const Me=[];return pe.forEach((In,ws)=>{const ai=Array.from(In.querySelectorAll("th, td")),Dn=ai.map(li=>(li.textContent?.trim()||"").replace(/\|/g,"\\|"));if(Me.push("| "+Dn.join(" | ")+" |"),ws===0){const li=ai.map(()=>"---").join(" | ");Me.push("| "+li+" |")}}),`

`+Me.join(`
`)+`

`}}),B.addRule("tableCell",{filter:["th","td"],replacement:function(U){return U}}),B.addRule("callout",{filter:U=>U.nodeName==="DIV"&&U.hasAttribute("data-callout"),replacement:(U,we)=>{const Le=we.getAttribute("data-type")||"info",pe=U.trim().replace(/\n{3,}/g,`

`);return`

\`\`\`${Le}
${pe}
\`\`\`

`}}),B},[]),ze=N.useCallback(B=>{if(P){if(B==="markdown"&&nn.current==="wysiwyg"){const U=P.getHTML(),we=de.turndown(U);hc(we),ri.current=we}else if(B==="wysiwyg"&&nn.current==="markdown"){const U=["info","warning","error","success","note"];let we=ri.current;U.forEach(pe=>{const Me=new RegExp(`\`\`\`${pe}\\s*\\n([\\s\\S]*?)\`\`\``,"g");we=we.replace(Me,(In,ws)=>{const ai=Be.parse(ws.trim(),{async:!1});return`<div data-callout="" data-type="${pe}" class="callout callout-${pe}">${ai}</div>`})});const Le=Be.parse(we,{async:!1});queueMicrotask(()=>{P.isDestroyed||P.commands.setContent(Le)})}ni(B),nn.current=B,C?.(B)}},[P,de,C]),et=N.useCallback(B=>{hc(B),ri.current=B,o?.(B)},[o]),Pt=oE(P,{debounceMs:500,extendedStats:!1,enabled:u});if(N.useImperativeHandle(Yn,()=>({getEditor:()=>P,getHTML:()=>P?.getHTML()||"",getMarkdown:()=>P?de.turndown(P.getHTML()):"",getText:()=>P?.getText()||"",setContent:B=>{P&&!P.isDestroyed&&queueMicrotask(()=>{P.commands.setContent(B)})},clearContent:()=>{P&&!P.isDestroyed&&P.commands.clearContent()},focus:B=>{P&&!P.isDestroyed&&P.commands.focus(B)},blur:()=>{P&&!P.isDestroyed&&P.commands.blur()},isEmpty:()=>P?.isEmpty||!0,isFocused:()=>P?.isFocused||!1,getMode:()=>nn.current,setMode:B=>ze(B),toggleMode:()=>{const B=nn.current==="wysiwyg"?"markdown":"wysiwyg";return ze(B),B},getWordCount:()=>({words:Pt.words,characters:Pt.characters,charactersWithSpaces:Pt.charactersWithSpaces}),undo:()=>P?.commands.undo(),redo:()=>P?.commands.redo(),canUndo:()=>P?.can().undo()||!1,canRedo:()=>P?.can().redo()||!1,insertContent:B=>P?.commands.insertContent(B),insertImage:(B,U="")=>P?.commands.setImage({src:B,alt:U}),insertTable:(B=3,U=3)=>P?.commands.insertTable({rows:B,cols:U,withHeaderRow:!0}),insertCodeBlock:B=>{B?P?.commands.setCodeBlock({language:B}):P?.commands.setCodeBlock()},insertCallout:(B="info")=>P?.commands.insertCallout?.({type:B}),insertHorizontalRule:()=>P?.commands.setHorizontalRule(),toggleBold:()=>P?.commands.toggleBold(),toggleItalic:()=>P?.commands.toggleItalic(),toggleUnderline:()=>P?.commands.toggleUnderline(),toggleStrike:()=>P?.commands.toggleStrike(),toggleCode:()=>P?.commands.toggleCode(),toggleHighlight:()=>P?.commands.toggleHighlight(),setHeading:B=>{B===0?P?.commands.setParagraph():P?.commands.setHeading({level:B})},toggleBulletList:()=>P?.commands.toggleBulletList(),toggleOrderedList:()=>P?.commands.toggleOrderedList(),toggleTaskList:()=>P?.commands.toggleTaskList(),toggleBlockquote:()=>P?.commands.toggleBlockquote(),setLink:B=>P?.commands.setLink({href:B}),unsetLink:()=>P?.commands.unsetLink(),openFindReplace:()=>{W(!0),je(B=>B+1)},closeFindReplace:()=>W(!1),save:()=>Z.save(),clearSavedContent:()=>Z.clear(),getSelectedText:()=>{if(!P)return"";const{from:B,to:U}=P.state.selection;return P.state.doc.textBetween(B,U," ")},isEditable:()=>P?.isEditable||!1,setEditable:B=>P?.setEditable(B),getTableOfContents:()=>{if(!P)return[];const B=[];return P.state.doc.descendants((U,we)=>{if(U.type.name==="heading"){const Le=U.attrs.level,pe=U.textContent.trim();pe&&B.push({id:`toc-heading-${we}`,text:pe,level:Le,pos:we})}}),B},scrollToHeading:B=>{if(!(!P||P.isDestroyed))try{const U=P.state.doc.resolve(B),we=P.view.nodeDOM(U.before(U.depth+1));if(we instanceof HTMLElement){const Le=P.view.dom.closest(".editor-content-wrapper");if(Le){const pe=Le.getBoundingClientRect(),In=we.getBoundingClientRect().top-pe.top+Le.scrollTop;Le.scrollTo({top:In-20,behavior:"smooth"})}else we.scrollIntoView({behavior:"smooth",block:"start"})}P.commands.setTextSelection(B+1)}catch{}}}),[P,de,ze,Pt,Z,W]),N.useEffect(()=>{const B={getMode:()=>nn.current,setMode:U=>{if(U!=="wysiwyg"&&U!=="markdown"){console.error('Invalid mode. Use "wysiwyg" or "markdown"');return}ze(U)},toggleMode:()=>{const U=nn.current==="wysiwyg"?"markdown":"wysiwyg";return ze(U),U},switchToVisual:()=>{ze("wysiwyg")},switchToMarkdown:()=>{ze("markdown")},isVisualMode:()=>nn.current==="wysiwyg",isMarkdownMode:()=>nn.current==="markdown",getRawMarkdown:()=>nn.current==="markdown"?ri.current:null,onModeChange:U=>{const we=Le=>{U(Le.detail.mode)};return window.addEventListener("manus-editor-mode-change",we),()=>window.removeEventListener("manus-editor-mode-change",we)}};return window.__manusEditorModeAPI=B,console.log("Manus Editor Mode API exposed globally as window.__manusEditorModeAPI"),console.log("Available methods: getMode(), setMode(mode), toggleMode(), switchToVisual(), switchToMarkdown(), isVisualMode(), isMarkdownMode(), getRawMarkdown(), onModeChange(callback)"),()=>{delete window.__manusEditorModeAPI}},[ze]),N.useEffect(()=>{window.dispatchEvent(new CustomEvent("manus-editor-mode-change",{detail:{mode:tn}}))},[tn]),N.useEffect(()=>{if(!P||P.isDestroyed)return;const B=U=>{if(!P.isDestroyed){if((U.metaKey||U.ctrlKey)&&U.key==="k"){U.preventDefault(),ao(!0);return}if(!en&&(U.metaKey||U.ctrlKey)&&U.key==="f"){if(U.preventDefault(),P){const{state:we}=P,{from:Le,to:pe}=we.selection;if(Le!==pe){const Me=we.doc.textBetween(Le,pe," ");Me.trim()&&oe(Me.trim())}}W(!0),je(we=>we+1);return}if(!en&&(U.metaKey||U.ctrlKey)&&U.key==="h"){U.preventDefault(),W(!0);return}if(U.key===" ")try{const{state:we}=P,{selection:Le}=we,{$from:pe}=Le,Me=pe.nodeBefore?.textContent||"";if(Me==="#"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-1,to:pe.pos}).setHeading({level:1}).run();return}if(Me==="##"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-2,to:pe.pos}).setHeading({level:2}).run();return}if(Me==="###"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-3,to:pe.pos}).setHeading({level:3}).run();return}if(Me==="-"||Me==="*"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-1,to:pe.pos}).toggleBulletList().run();return}if(/^\d+\.$/.test(Me)){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-Me.length,to:pe.pos}).toggleOrderedList().run();return}if(Me==="[]"||Me==="[ ]"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-Me.length,to:pe.pos}).toggleTaskList().run();return}if(Me===">"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-1,to:pe.pos}).toggleBlockquote().run();return}if(Me==="```"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-3,to:pe.pos}).toggleCodeBlock().run();return}if(Me==="---"||Me==="***"){U.preventDefault(),P.chain().focus().deleteRange({from:pe.pos-3,to:pe.pos}).setHorizontalRule().run();return}}catch(we){console.warn("Space shortcut error:",we)}}};return document.addEventListener("keydown",B,!0),()=>document.removeEventListener("keydown",B,!0)},[P,en,W]),!P)return y.jsxDEV("div",{className:`markdown-editor-container ${l}`,"data-theme":d,children:y.jsxDEV("div",{className:"editor-loading",children:"Loading editor..."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1216,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1215,columnNumber:7},this);const ii=y.jsxDEV(eE,{editor:P,onOpenLinkPopover:()=>ao(!0),className:"flex-1 border-b-0",onOpenFindReplace:()=>{W(!0),je(B=>B+1)},disabledFeatures:$},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1223,columnNumber:5},this),si=y.jsxDEV("div",{className:"editor-footer",children:[y.jsxDEV("div",{className:"word-count",children:[y.jsxDEV("span",{children:[Pt.words," words"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1239,columnNumber:9},this),y.jsxDEV("span",{children:[Pt.characters," characters"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1240,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1238,columnNumber:7},this),f&&y.jsxDEV(iE,{status:Z.status,lastSaved:Z.lastSaved},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1243,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1237,columnNumber:5},this),mh={minHeight:Q,...ce&&{maxHeight:ce,overflowY:"auto"}};return y.jsxDEV("div",{className:`markdown-editor-container ${l}`,"data-theme":d,children:[f&&m&&Z.hasRecoverableContent&&y.jsxDEV(sE,{onRecover:()=>{Z.recover()},onDismiss:Z.dismissRecovery},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1261,columnNumber:9},this),c&&y.jsxDEV("div",{className:"flex items-center border-b border-border bg-card/50",children:[V?V(P,ii):ii,k&&y.jsxDEV("div",{className:"editor-mode-toggle mr-2 sm:mr-3",children:[y.jsxDEV("button",{onClick:()=>ze("wysiwyg"),className:`editor-mode-toggle-btn ${tn==="wysiwyg"?"active":""}`,title:"Visual Editor",children:y.jsxDEV(dD,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1280,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1275,columnNumber:15},this),y.jsxDEV("button",{onClick:()=>ze("markdown"),className:`editor-mode-toggle-btn ${tn==="markdown"?"active":""}`,title:"Raw Markdown",children:y.jsxDEV(Lo,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1287,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1282,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1274,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1271,columnNumber:9},this),!en&&y.jsxDEV(tE,{editor:P,isOpen:L,onClose:()=>W(!1),focusTrigger:me,initialSearchQuery:Ye},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1296,columnNumber:9},this),y.jsxDEV(nE,{editor:P},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1306,columnNumber:7},this),y.jsxDEV("div",{className:`editor-main-area ${he?"editor-with-toc":""}`,children:[he&&bn==="left"&&y.jsxDEV(qf,{editor:P,visible:at,onVisibilityChange:Ft,title:wt,minLevel:Qt,maxLevel:Ut,showLevelIndicators:gn,highlightActive:Qo,treeView:ei,width:Re,position:bn,scrollOffset:On,onItemClick:ti,renderItem:gs,showToggleButton:uc,scrollContainerRef:oi},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1312,columnNumber:9},this),y.jsxDEV("div",{className:"editor-content-wrapper",ref:oi,style:mh,children:tn==="wysiwyg"?y.jsxDEV(y.Fragment,{children:[y.jsxDEV(Ub,{editor:P,className:"editor-content"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1334,columnNumber:13},this),!$.images&&!$.dragAndDrop&&y.jsxDEV(EE,{containerRef:oi,enabled:s},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1338,columnNumber:15},this),!en&&g&&y.jsxDEV(P0,{editor:P},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1344,columnNumber:50},this),!$.slashCommands&&y.jsxDEV($0,{editor:P,disabledFeatures:$},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1347,columnNumber:49},this),y.jsxDEV(LD,{editor:P,isOpen:pc,onClose:()=>ao(!1)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1350,columnNumber:13},this),!en&&y.jsxDEV(RD,{editor:P,onEditLink:()=>ao(!0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1358,columnNumber:15},this),!$.images&&_r?.isOpen&&y.jsxDEV(Dz,{src:_r.src,alt:_r.alt,position:_r.position,onSave:(B,U)=>{P.chain().focus().setNodeSelection(_r.pos).updateAttributes("resizableImage",{src:B,alt:U}).run(),lo(null)},onDelete:()=>{P.chain().focus().setNodeSelection(_r.pos).deleteSelection().run(),lo(null)},onClose:()=>lo(null)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1366,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1333,columnNumber:11},this):y.jsxDEV(Bz,{content:fc,onChange:et,placeholder:"Write your markdown here...",editable:s,autofocus:!0},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1388,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1331,columnNumber:7},this),he&&bn==="right"&&y.jsxDEV(qf,{editor:P,visible:at,onVisibilityChange:Ft,title:wt,minLevel:Qt,maxLevel:Ut,showLevelIndicators:gn,highlightActive:Qo,treeView:ei,width:Re,position:bn,scrollOffset:On,onItemClick:ti,renderItem:gs,showToggleButton:uc,scrollContainerRef:oi},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1399,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1309,columnNumber:7},this),u&&(O?O({words:Pt.words,characters:Pt.characters},Z.status,si):si),y.jsxDEV($z,{visible:fh,onClose:dc,editor:P},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1432,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1258,columnNumber:5},this)}),o$=tt.create({name:"callout",addOptions(){return{HTMLAttributes:{},types:["info","warning","error","success","note"]}},content:"block+",group:"block",defining:!0,addAttributes(){return{type:{default:"info",parseHTML:t=>t.getAttribute("data-type")||"info",renderHTML:t=>({"data-type":t.type})}}},parseHTML(){return[{tag:"div[data-callout]"}]},renderHTML({node:t,HTMLAttributes:e}){const n=t.attrs.type;return["div",Ie(this.options.HTMLAttributes,e,{"data-callout":"","data-type":n,class:`callout callout-${n}`}),0]},addCommands(){return{setCallout:t=>({commands:e})=>e.wrapIn(this.name,t),toggleCallout:t=>({commands:e})=>e.toggleWrap(this.name,t),unsetCallout:()=>({commands:t})=>t.lift(this.name),insertCallout:t=>({chain:e})=>{const n=t?.type||"info";return e().insertContent({type:this.name,attrs:{type:n},content:[{type:"paragraph"}]}).focus().run()}}},addKeyboardShortcuts(){return{"Mod-Shift-c":()=>this.editor.commands.toggleCallout({type:"info"})}}}),dh={name:"dark",description:"Dark theme inspired by VS Code and GitHub Dark",variables:{"--editor-bg":"oklch(0.13 0.01 250)","--editor-fg":"oklch(0.93 0.01 250)","--editor-border":"oklch(0.28 0.01 250)","--editor-primary":"oklch(0.7 0.15 220)","--editor-primary-fg":"oklch(0.13 0.01 250)","--editor-secondary":"oklch(0.22 0.01 250)","--editor-secondary-fg":"oklch(0.75 0.02 250)","--editor-muted":"oklch(0.25 0.01 250)","--editor-muted-fg":"oklch(0.6 0.02 250)","--editor-selection":"oklch(0.35 0.08 220 / 0.4)","--editor-cursor":"oklch(0.7 0.15 220)","--editor-code-bg":"oklch(0.17 0.01 250)","--editor-line-number":"oklch(0.45 0.02 250)","--editor-callout-info":"oklch(0.5 0.12 220)","--editor-callout-warning":"oklch(0.6 0.15 70)","--editor-callout-error":"oklch(0.5 0.15 25)","--editor-callout-success":"oklch(0.5 0.12 160)","--editor-callout-note":"oklch(0.5 0.12 280)","--syntax-keyword":"oklch(0.7 0.18 320)","--syntax-string":"oklch(0.7 0.12 160)","--syntax-number":"oklch(0.75 0.12 70)","--syntax-comment":"oklch(0.5 0.02 250)","--syntax-function":"oklch(0.75 0.15 280)","--syntax-variable":"oklch(0.8 0.1 220)"}},nv={name:"light",description:"Light theme for bright environments",variables:{"--editor-bg":"oklch(0.99 0.005 250)","--editor-fg":"oklch(0.2 0.01 250)","--editor-border":"oklch(0.88 0.01 250)","--editor-primary":"oklch(0.55 0.2 220)","--editor-primary-fg":"oklch(0.99 0.005 250)","--editor-secondary":"oklch(0.95 0.01 250)","--editor-secondary-fg":"oklch(0.4 0.02 250)","--editor-muted":"oklch(0.92 0.01 250)","--editor-muted-fg":"oklch(0.5 0.02 250)","--editor-selection":"oklch(0.7 0.12 220 / 0.3)","--editor-cursor":"oklch(0.55 0.2 220)","--editor-code-bg":"oklch(0.96 0.005 250)","--editor-line-number":"oklch(0.6 0.02 250)","--editor-callout-info":"oklch(0.6 0.15 220)","--editor-callout-warning":"oklch(0.7 0.18 70)","--editor-callout-error":"oklch(0.6 0.18 25)","--editor-callout-success":"oklch(0.6 0.15 160)","--editor-callout-note":"oklch(0.6 0.15 280)","--syntax-keyword":"oklch(0.5 0.2 320)","--syntax-string":"oklch(0.45 0.15 160)","--syntax-number":"oklch(0.5 0.15 70)","--syntax-comment":"oklch(0.55 0.02 250)","--syntax-function":"oklch(0.5 0.18 280)","--syntax-variable":"oklch(0.45 0.12 220)"}},rv={name:"sepia",description:"Warm sepia tones for comfortable reading",variables:{"--editor-bg":"oklch(0.95 0.02 80)","--editor-fg":"oklch(0.25 0.02 60)","--editor-border":"oklch(0.85 0.03 70)","--editor-primary":"oklch(0.55 0.15 50)","--editor-primary-fg":"oklch(0.98 0.01 80)","--editor-secondary":"oklch(0.9 0.025 75)","--editor-secondary-fg":"oklch(0.4 0.02 60)","--editor-muted":"oklch(0.88 0.02 75)","--editor-muted-fg":"oklch(0.5 0.02 60)","--editor-selection":"oklch(0.7 0.1 50 / 0.3)","--editor-cursor":"oklch(0.55 0.15 50)","--editor-code-bg":"oklch(0.92 0.02 75)","--editor-line-number":"oklch(0.6 0.02 60)","--editor-callout-info":"oklch(0.55 0.12 220)","--editor-callout-warning":"oklch(0.65 0.15 50)","--editor-callout-error":"oklch(0.55 0.15 25)","--editor-callout-success":"oklch(0.55 0.12 160)","--editor-callout-note":"oklch(0.55 0.12 280)","--syntax-keyword":"oklch(0.5 0.15 320)","--syntax-string":"oklch(0.45 0.12 160)","--syntax-number":"oklch(0.5 0.12 50)","--syntax-comment":"oklch(0.55 0.02 60)","--syntax-function":"oklch(0.5 0.15 280)","--syntax-variable":"oklch(0.45 0.1 220)"}},ov={name:"nord",description:"Arctic, north-bluish color palette",variables:{"--editor-bg":"oklch(0.23 0.02 240)","--editor-fg":"oklch(0.9 0.01 230)","--editor-border":"oklch(0.32 0.02 240)","--editor-primary":"oklch(0.72 0.1 210)","--editor-primary-fg":"oklch(0.23 0.02 240)","--editor-secondary":"oklch(0.28 0.02 240)","--editor-secondary-fg":"oklch(0.75 0.01 230)","--editor-muted":"oklch(0.35 0.02 240)","--editor-muted-fg":"oklch(0.6 0.01 230)","--editor-selection":"oklch(0.5 0.08 210 / 0.4)","--editor-cursor":"oklch(0.72 0.1 210)","--editor-code-bg":"oklch(0.26 0.02 240)","--editor-line-number":"oklch(0.5 0.01 230)","--editor-callout-info":"oklch(0.68 0.12 210)","--editor-callout-warning":"oklch(0.75 0.12 80)","--editor-callout-error":"oklch(0.65 0.15 15)","--editor-callout-success":"oklch(0.7 0.12 150)","--editor-callout-note":"oklch(0.7 0.1 280)","--syntax-keyword":"oklch(0.7 0.12 280)","--syntax-string":"oklch(0.7 0.1 150)","--syntax-number":"oklch(0.75 0.1 280)","--syntax-comment":"oklch(0.55 0.01 230)","--syntax-function":"oklch(0.72 0.1 210)","--syntax-variable":"oklch(0.9 0.01 230)"}},Jo={dark:dh,light:nv,sepia:rv,nord:ov};function iv(t,e){Object.entries(e.variables).forEach(([n,r])=>{t.style.setProperty(n,r)})}function i$(t,e,n,r){const o=Jo[t]||dh;return{name:e,description:n,variables:{...o.variables,...r}}}const sv=N.createContext(null);function s$({children:t,defaultTheme:e="dark",containerRef:n}){const[r,o]=N.useState(e),i=Jo[r]||Jo.dark,s=N.useCallback(l=>{Jo[l]&&o(l)},[]);N.useEffect(()=>{n?.current&&iv(n.current,i)},[i,n]);const a={theme:i,themeName:r,setTheme:s,availableThemes:Object.keys(Jo)};return y.jsxDEV(sv.Provider,{value:a,children:t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ThemeProvider.tsx",lineNumber:54,columnNumber:5},this)}function a$(){const t=N.useContext(sv);if(!t)throw new Error("useEditorTheme must be used within an EditorThemeProvider");return t}const av=[{value:"plaintext",label:"Plain Text"},{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"jsx",label:"JSX"},{value:"tsx",label:"TSX"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"c",label:"C"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"ruby",label:"Ruby"},{value:"php",label:"PHP"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"scss",label:"SCSS"},{value:"json",label:"JSON"},{value:"yaml",label:"YAML"},{value:"markdown",label:"Markdown"},{value:"sql",label:"SQL"},{value:"bash",label:"Bash"},{value:"shell",label:"Shell"}];function l$({node:t,updateAttributes:e}){const[n,r]=N.useState(!1),o=t.attrs.language||"plaintext";av.find(s=>s.value===o)?.label;const i=N.useCallback(()=>{const s=t.textContent;navigator.clipboard.writeText(s).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)})},[t.textContent]);return y.jsxDEV(va,{className:"code-block-wrapper",children:[y.jsxDEV("div",{className:"code-block-controls",contentEditable:!1,children:[y.jsxDEV("div",{className:"code-block-language-wrapper",children:[y.jsxDEV("select",{value:o,onChange:s=>e({language:s.target.value}),className:"code-block-language-select",children:av.map(({value:s,label:a})=>y.jsxDEV("option",{value:s,children:a},s,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:64,columnNumber:15},this))},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:58,columnNumber:11},this),y.jsxDEV(bl,{size:12,className:"code-block-language-chevron"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:57,columnNumber:9},this),y.jsxDEV("button",{onClick:i,className:`code-block-copy-btn ${n?"copied":""}`,title:n?"Copied!":"Copy code",children:n?y.jsxDEV(gl,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:76,columnNumber:21},this):y.jsxDEV(tf,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:76,columnNumber:43},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:56,columnNumber:7},this),y.jsxDEV("pre",{className:"code-block-pre",children:y.jsxDEV("code",{children:y.jsxDEV(hd,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:83,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:82,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:81,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:54,columnNumber:5},this)}ge.AutoSaveIndicator=iE,ge.Callout=o$,ge.CalloutInputRule=hE,ge.CodeBlockComponent=l$,ge.CollapsibleHeading=dE,ge.DatePill=z0,ge.EditorThemeProvider=s$,ge.EditorToolbar=eE,ge.FindReplace=tE,ge.FloatingToolbar=P0,ge.ImageDropZone=EE,ge.ImageUpload=kE,ge.MarkdownEditor=r$,ge.MarkdownLinkInputRule=fE,ge.MarkdownPasteSafe=cE,ge.RecoveryBanner=sE,ge.ResizableImage=B0,ge.SearchHighlight=pE,ge.SelectAllActionBar=nE,ge.SelectAllOccurrences=bE,ge.SlashCommands=$0,ge.TabIndent=mE,ge.TableOfContents=qf,ge.WikiLinkSafe=aE,ge.applyTheme=iv,ge.createCustomTheme=i$,ge.darkTheme=dh,ge.lightTheme=nv,ge.nordTheme=ov,ge.sepiaTheme=rv,ge.themes=Jo,ge.useAutoSave=rE,ge.useEditorTheme=a$,ge.useWordCount=oE,Object.defineProperty(ge,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=manus-editor.umd.cjs.map
