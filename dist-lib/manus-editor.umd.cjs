(function(O,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react/jsx-dev-runtime"),require("@tiptap/react"),require("@tiptap/starter-kit"),require("@tiptap/extension-placeholder"),require("@tiptap/extension-text-align"),require("@tiptap/extension-highlight"),require("@tiptap/extension-link"),require("@tiptap/extension-table"),require("@tiptap/extension-table-row"),require("@tiptap/extension-table-cell"),require("@tiptap/extension-table-header"),require("@tiptap/pm/state"),require("@tiptap/pm/view"),require("@tiptap/core"),require("@tiptap/extension-task-list"),require("@tiptap/extension-task-item"),require("@tiptap/extension-underline"),require("@tiptap/extension-subscript"),require("@tiptap/extension-superscript"),require("@tiptap/extension-typography"),require("@tiptap/extension-code-block-lowlight"),require("lowlight"),require("react"),require("lucide-react"),require("highlight.js/lib/languages/javascript"),require("highlight.js/lib/languages/typescript"),require("highlight.js/lib/languages/python"),require("highlight.js/lib/languages/xml"),require("highlight.js/lib/languages/css"),require("highlight.js/lib/languages/json"),require("highlight.js/lib/languages/bash"),require("highlight.js/lib/languages/sql"),require("highlight.js/lib/languages/java"),require("highlight.js/lib/languages/cpp"),require("highlight.js/lib/languages/go"),require("highlight.js/lib/languages/rust"),require("highlight.js/lib/languages/markdown"),require("highlight.js/lib/languages/yaml"),require("highlight.js/lib/languages/diff"),require("react-dom"),require("@tiptap/extension-image"),require("react/jsx-runtime"),require("@tiptap/pm/model"),require("@tiptap/pm/keymap"),require("@tiptap/pm/history")):typeof define=="function"&&define.amd?define(["exports","react/jsx-dev-runtime","@tiptap/react","@tiptap/starter-kit","@tiptap/extension-placeholder","@tiptap/extension-text-align","@tiptap/extension-highlight","@tiptap/extension-link","@tiptap/extension-table","@tiptap/extension-table-row","@tiptap/extension-table-cell","@tiptap/extension-table-header","@tiptap/pm/state","@tiptap/pm/view","@tiptap/core","@tiptap/extension-task-list","@tiptap/extension-task-item","@tiptap/extension-underline","@tiptap/extension-subscript","@tiptap/extension-superscript","@tiptap/extension-typography","@tiptap/extension-code-block-lowlight","lowlight","react","lucide-react","highlight.js/lib/languages/javascript","highlight.js/lib/languages/typescript","highlight.js/lib/languages/python","highlight.js/lib/languages/xml","highlight.js/lib/languages/css","highlight.js/lib/languages/json","highlight.js/lib/languages/bash","highlight.js/lib/languages/sql","highlight.js/lib/languages/java","highlight.js/lib/languages/cpp","highlight.js/lib/languages/go","highlight.js/lib/languages/rust","highlight.js/lib/languages/markdown","highlight.js/lib/languages/yaml","highlight.js/lib/languages/diff","react-dom","@tiptap/extension-image","react/jsx-runtime","@tiptap/pm/model","@tiptap/pm/keymap","@tiptap/pm/history"],c):(O=typeof globalThis<"u"?globalThis:O||self,c(O.ManusEditor={},O.jsxDevRuntime,O.TiptapReact,O.StarterKit,O.Placeholder,O.TextAlign,O.Highlight,O.Link,O.extensionTable,O.TableRow,O.TableCell,O.TableHeader,O.state,O.view,O.TiptapCore,O.TaskList,O.TaskItem,O.Underline,O.Subscript,O.Superscript,O.Typography,O.CodeBlockLowlight,O.lowlight,O.React,O.LucideReact,O.javascript,O.typescript,O.python,O.xml,O.css,O.json,O.bash,O.sql,O.java,O.cpp,O.go,O.rust,O.markdown,O.yaml,O.diff,O.ReactDOM,O.Image$1,O.jsxRuntime,O.model,O.keymap,O.history))})(this,(function(O,c,Ee,Zl,Ql,Jl,Rl,ec,tc,nc,oc,rc,de,me,ue,sc,ic,ac,lc,cc,uc,dc,mc,x,C,uo,mo,Or,fo,fc,hc,hn,pc,bc,Br,$r,zr,_r,Hr,Fr,kt,gc,P,wc,kc,Wr){"use strict";function Ur(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const k=Ur(x),jr=Ur(kt),Nc=new de.PluginKey("tableCellMenu");let qr=!1,pn=null;function xc(){qr||(qr=!0,document.addEventListener("mouseover",e=>{const n=e.target.closest("td, th");if(n&&n.closest(".ProseMirror")){const o=n.querySelector(".table-cell-menu-btn");o&&(o.style.opacity="1")}},!0),document.addEventListener("mouseout",e=>{const t=e.target,n=e.relatedTarget,o=t.closest("td, th");if(o&&o.closest(".ProseMirror")){if(n&&o.contains(n)||document.querySelector(".table-cell-menu-dropdown"))return;const s=o.querySelector(".table-cell-menu-btn");s&&(s.style.opacity="0.15")}},!0))}function vc(e){return xc(),new de.Plugin({key:Nc,state:{init(){return me.DecorationSet.empty},apply(t,n,o,r){return!t.docChanged&&pn?pn.map(t.mapping,t.doc):(pn=yc(r.doc,e),pn)}},props:{decorations(t){return this.getState(t)}}})}function yc(e,t){const n=[];return e.descendants((o,r)=>{if(o.type.name==="tableCell"||o.type.name==="tableHeader"){const s=me.Decoration.widget(r+1,i=>{const a=document.createElement("div");a.className="table-cell-menu-wrapper ProseMirror-widget",a.setAttribute("contenteditable","false"),a.style.cssText="position:absolute;top:2px;right:2px;z-index:50;pointer-events:auto;";const l=document.createElement("button");l.className="table-cell-menu-btn",l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1.5"/><circle cx="12" cy="5" r="1.5"/><circle cx="12" cy="19" r="1.5"/></svg>',l.title="Table options",l.type="button";const u=document.documentElement.classList.contains("dark"),d=u?"rgba(30,30,30,0.95)":"rgba(255,255,255,0.95)",m=u?"rgba(60,60,60,0.5)":"rgba(200,200,200,0.5)",h=u?"#999":"#666",f=u?"#2a2a2a":"#f5f5f5";return l.style.cssText="width:18px;height:18px;display:flex;align-items:center;justify-content:center;background:"+d+";border:1px solid "+m+";border-radius:4px;cursor:pointer;opacity:0.15;transition:opacity 0.15s ease,background-color 0.15s ease,transform 0.1s ease;color:"+h+";pointer-events:auto;padding:0;",l.addEventListener("mouseenter",()=>{l.style.opacity="1",l.style.background=f,l.style.transform="scale(1.05)"}),l.addEventListener("mouseleave",()=>{document.querySelector(".table-cell-menu-dropdown"),l.style.background=d,l.style.transform="scale(1)"}),l.addEventListener("click",p=>{p.preventDefault(),p.stopPropagation();const b=l.getBoundingClientRect();t.chain().focus().setTextSelection(r+1).run(),Ec(p,t,r,b)}),a.appendChild(l),a},{side:-1,key:"menu-"+r});n.push(s)}}),me.DecorationSet.create(e,n)}function Ec(e,t,n,o){const r=document.querySelector(".table-cell-menu-dropdown");r&&r.remove();const s=document.createElement("div");s.className="table-cell-menu-dropdown";const i=170,a=280;let l=Math.max(0,Math.min(o.top,window.innerHeight)),u=Math.max(0,Math.min(o.bottom,window.innerHeight)),d=Math.max(0,Math.min(o.left,window.innerWidth)),m=u+4,h=d-i+o.width+8;h+i>window.innerWidth-12&&(h=window.innerWidth-i-12),h<12&&(h=12),m+a>window.innerHeight-12&&(m=l-a-4),m<12&&(m=12),m+a>window.innerHeight-12&&(m=window.innerHeight-a-12);const f=document.documentElement.classList.contains("dark"),p=f?"#1f1f1f":"#ffffff",b=f?"#3a3a3a":"#e5e5e5",w=f?"#e5e5e5":"#333333";s.style.cssText="position:fixed;top:"+m+"px;left:"+h+"px;z-index:99999;display:flex;flex-direction:column;gap:2px;min-width:170px;max-width:220px;width:auto;padding:6px;background:"+p+";border:1px solid "+b+";border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.15),0 2px 6px rgba(0,0,0,0.1);color:"+w+";font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;pointer-events:auto;";const g=[{label:"Insert Column Left",icon:"col-left",action:()=>t.chain().focus().setTextSelection(n+1).addColumnBefore().run()},{label:"Insert Column Right",icon:"col-right",action:()=>t.chain().focus().setTextSelection(n+1).addColumnAfter().run()},{label:"Insert Row Above",icon:"row-up",action:()=>t.chain().focus().setTextSelection(n+1).addRowBefore().run()},{label:"Insert Row Below",icon:"row-down",action:()=>t.chain().focus().setTextSelection(n+1).addRowAfter().run()},{label:"divider"},{label:"Delete Column",icon:"delete",action:()=>t.chain().focus().setTextSelection(n+1).deleteColumn().run(),destructive:!0},{label:"Delete Row",icon:"delete",action:()=>t.chain().focus().setTextSelection(n+1).deleteRow().run(),destructive:!0},{label:"Delete Table",icon:"table-delete",action:()=>t.chain().focus().setTextSelection(n+1).deleteTable().run(),destructive:!0},{label:"divider"},{label:"Copy Table",icon:"copy",action:()=>Cc(t)}],N={"col-left":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/><path d="M9 12H3m0 0l2-2m-2 2l2 2"/></svg>',"col-right":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/><path d="M15 12h6m0 0l-2-2m2 2l-2 2"/></svg>',"row-up":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="6" width="18" height="12" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 9V3m0 0l-2 2m2-2l2 2"/></svg>',"row-down":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="6" width="18" height="12" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 15v6m0 0l-2-2m2 2l2-2"/></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>',"table-delete":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="21" y1="15" x2="15" y2="21"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>'},y=f?"#2a2a2a":"#f5f5f5",E=f?"#ff6b6b":"#dc2626",v=f?"#999999":"#666666",M=f?"#333333":"#e5e5e5";g.forEach(D=>{if(D.label==="divider"){const z=document.createElement("div");z.style.cssText="height:1px;background:"+M+";margin:4px 0;",s.appendChild(z)}else{const z=document.createElement("button");z.type="button";const q=D.destructive?E:w;z.style.cssText="display:flex;align-items:center;gap:10px;width:100%;padding:8px 10px;font-size:13px;font-weight:450;color:"+q+";background:transparent;border:none;border-radius:5px;cursor:pointer;text-align:left;transition:background 0.15s ease;pointer-events:auto;";const U=N[D.icon||""]||"",j=D.destructive?E:v;z.innerHTML='<span style="display:flex;align-items:center;justify-content:center;width:16px;height:16px;flex-shrink:0;color:'+j+';">'+U+'</span><span style="flex:1;white-space:nowrap;">'+D.label+"</span>",z.addEventListener("mouseenter",()=>{z.style.background=D.destructive?f?"rgba(255,107,107,0.15)":"rgba(220,38,38,0.1)":y}),z.addEventListener("mouseleave",()=>{z.style.background="transparent"}),z.addEventListener("click",G=>{G.preventDefault(),G.stopPropagation(),D.action&&D.action(),s.remove()}),s.appendChild(z)}}),document.body.appendChild(s);const S=D=>{const z=D.target;if(s.contains(z)||z.classList.contains("table-cell-menu-btn"))return;const q=z.closest('[role="dialog"]');q&&q.contains(s)||(s.remove(),document.removeEventListener("mousedown",S),document.removeEventListener("keydown",T))},T=D=>{D.key==="Escape"&&(s.remove(),document.removeEventListener("mousedown",S),document.removeEventListener("keydown",T))};setTimeout(()=>{document.addEventListener("mousedown",S),document.addEventListener("keydown",T)},0)}function Cc(e){const{state:t}=e,{selection:n}=t;let o=null;if(t.doc.descendants((r,s)=>{if(r.type.name==="table"&&s<=n.from&&s+r.nodeSize>=n.to)return o=r,!1}),o){const r=i=>{if(i.type.name==="table")return"<table>"+i.content.content.map(r).join("")+"</table>";if(i.type.name==="tableRow")return"<tr>"+i.content.content.map(r).join("")+"</tr>";if(i.type.name==="tableCell"){const a=i.attrs,l=a.colspan>1?' colspan="'+a.colspan+'"':"",u=a.rowspan>1?' rowspan="'+a.rowspan+'"':"";return"<td"+l+u+">"+i.textContent+"</td>"}if(i.type.name==="tableHeader"){const a=i.attrs,l=a.colspan>1?' colspan="'+a.colspan+'"':"",u=a.rowspan>1?' rowspan="'+a.rowspan+'"':"";return"<th"+l+u+">"+i.textContent+"</th>"}return i.textContent||""},s=r(o);navigator.clipboard.writeText(s).then(()=>{const i=document.createElement("div");i.className="tcm-toast",i.textContent="Table copied to clipboard",i.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:white;padding:10px 20px;border-radius:6px;font-size:13px;z-index:99999;animation:fadeInOut 2s ease-in-out forwards;",document.body.appendChild(i),setTimeout(()=>i.remove(),2e3)})}}const Tc=oc.extend({addProseMirrorPlugins(){return[...this.parent?.()||[],vc(this.editor)]}}),Sc=rc.extend({}),Wt=new de.PluginKey("tableSorting");let ut=null,Ut=null;function Ac(e){const t=parseFloat(e.replace(/[,$%]/g,""));if(!isNaN(t)&&e.match(/^[\d,.$%\-+]+$/))return{type:"number",value:t};const n=[/^\d{4}-\d{2}-\d{2}/,/^\d{1,2}\/\d{1,2}\/\d{2,4}/,/^\d{1,2}-\d{1,2}-\d{2,4}/];for(const o of n)if(o.test(e)){const r=new Date(e);if(!isNaN(r.getTime()))return{type:"date",value:r}}return{type:"string",value:e.toLowerCase()}}function Mc(e,t,n){let o=0;return e.type==="number"&&t.type==="number"?o=e.value-t.value:e.type==="date"&&t.type==="date"?o=e.value.getTime()-t.value.getTime():o=String(e.value).localeCompare(String(t.value)),n==="asc"?o:-o}function Pc(e,t,n){const{state:o,view:r}=e;let s=null;if(o.doc.nodesBetween(t,t+1,(p,b)=>{if(p.type.name==="table"&&b===t)return s=p,!1}),!s){console.log("Table not found at position",t);return}const i=ut?.tablePos===t&&ut?.columnIndex===n&&ut?.direction==="asc"?"desc":"asc";ut={tablePos:t,columnIndex:n,direction:i},Ut=null;const a=[];s.forEach(p=>{if(p.type.name==="tableRow"){let b=!1;p.forEach(w=>{w.type.name==="tableHeader"&&(b=!0)}),a.push({node:p,isHeader:b})}});const l=a.filter(p=>p.isHeader),u=a.filter(p=>!p.isHeader);if(u.length<2){Kr(n,i),r.dispatch(o.tr.setMeta(Wt,{updated:!0}));return}const d=u.map(p=>{let b="",w=0;return p.node.forEach(g=>{w===n&&(b=g.textContent||""),w++}),{...p,sortValue:Ac(b)}}),m=d.map((p,b)=>b);d.sort((p,b)=>Mc(p.sortValue,b.sortValue,i));const h=d.map((p,b)=>u.indexOf(p));if(m.some((p,b)=>p!==h[b])){const p=[];l.forEach(g=>p.push(g.node)),d.forEach(g=>p.push(g.node));const b=s.type.create(s.attrs,p),{tr:w}=o;w.replaceWith(t,t+s.nodeSize,b),w.setMeta(Wt,{updated:!0}),r.dispatch(w)}else r.dispatch(o.tr.setMeta(Wt,{updated:!0}));Kr(n,i)}function Kr(e,t){const n=document.querySelector(".table-sort-toast");n&&n.remove();const o=document.createElement("div");o.className="table-sort-toast";const r=t==="asc"?"ascending":"descending",s=t==="asc"?"↑":"↓";o.innerHTML='<span style="margin-right:6px;">'+s+"</span> Sorted column "+(e+1)+" "+r;const i=document.documentElement.classList.contains("dark");o.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:"+(i?"rgba(30,30,30,0.95)":"rgba(255,255,255,0.95)")+";color:"+(i?"#e5e5e5":"#333")+";padding:10px 20px;border-radius:8px;font-size:13px;font-weight:500;z-index:99999;box-shadow:0 4px 12px rgba(0,0,0,0.15);border:1px solid "+(i?"#3a3a3a":"#e5e5e5")+";animation:sortToastIn 0.2s ease;",document.body.appendChild(o),setTimeout(()=>{o.style.animation="sortToastOut 0.2s ease forwards",setTimeout(()=>o.remove(),200)},1500)}function Lc(e,t,n,o){const r=document.createElement("span");r.className="table-sort-btn-inline",r.setAttribute("contenteditable","false"),r.style.cssText="display:inline-flex;align-items:center;margin-left:4px;vertical-align:middle;pointer-events:auto;";const s=document.createElement("button");s.className="table-sort-btn",s.setAttribute("contenteditable","false"),s.type="button";const i=document.documentElement.classList.contains("dark"),a=i?"#60a5fa":"#3b82f6",l=i?"#666":"#aaa",u=i?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)";return s.style.cssText="display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;padding:0;font-size:10px;color:"+(e?a:l)+";background:transparent;border:none;border-radius:3px;cursor:pointer;user-select:none;transition:all 0.15s ease;opacity:"+(e?"1":"0.5")+";pointer-events:auto;vertical-align:middle;",s.addEventListener("mouseenter",()=>{s.style.background=u,s.style.opacity="1",s.style.color=a}),s.addEventListener("mouseleave",()=>{s.style.background="transparent",s.style.opacity=e?"1":"0.5",s.style.color=e?a:l}),s.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),Pc(o,t,n)}),e==="asc"?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>',s.title="Sorted ascending - Click to sort descending"):e==="desc"?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12l7 7 7-7"/></svg>',s.title="Sorted descending - Click to sort ascending"):(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 15l5 5 5-5M7 9l5-5 5 5"/></svg>',s.title="Click to sort this column"),r.appendChild(s),r}function Vc(e){return new de.Plugin({key:Wt,state:{init(){return me.DecorationSet.empty},apply(t,n,o,r){const s=t.getMeta(Wt);return!t.docChanged&&!s?.updated&&Ut?Ut.map(t.mapping,t.doc):(Ut=Ic(r.doc,e),Ut)}},props:{decorations(t){return this.getState(t)}}})}function Ic(e,t){const n=[];return e.descendants((o,r)=>{if(o.type.name==="table"){const s=r;o.forEach((i,a)=>{if(i.type.name==="tableRow"){let l=0,u=0;i.forEach((d,m)=>{if(d.type.name==="tableHeader"){const h=r+1+a+1+u;let f=h+1;d.forEach((y,E)=>{y.type.name==="paragraph"&&(f=h+1+E+y.nodeSize-1)});const b=ut?.tablePos===s&&ut?.columnIndex===l?ut.direction:null,w=l,g=s,N=me.Decoration.widget(f,()=>Lc(b,g,w,t),{side:1,key:"sort-"+s+"-"+w});n.push(N)}u+=d.nodeSize,l++})}})}}),me.DecorationSet.create(e,n)}const Dc=ue.Extension.create({name:"tableSorting",addProseMirrorPlugins(){return[Vc(this.editor)]}}),oe=mc.createLowlight();oe.register("javascript",uo),oe.register("js",uo),oe.register("jsx",uo),oe.register("typescript",mo),oe.register("ts",mo),oe.register("tsx",mo),oe.register("python",Or),oe.register("py",Or),oe.register("xml",fo),oe.register("html",fo),oe.register("svg",fo),oe.register("css",fc),oe.register("json",hc),oe.register("bash",hn),oe.register("sh",hn),oe.register("shell",hn),oe.register("zsh",hn),oe.register("sql",pc),oe.register("java",bc),oe.register("cpp",Br),oe.register("c",Br),oe.register("go",$r),oe.register("golang",$r),oe.register("rust",zr),oe.register("rs",zr),oe.register("markdown",_r),oe.register("md",_r),oe.register("yaml",Hr),oe.register("yml",Hr),oe.register("diff",Fr),oe.register("patch",Fr);function Oc({node:e,updateAttributes:t,extension:n}){const[o,r]=x.useState(!1),[s,i]=x.useState(!1),a=x.useRef(null);x.useEffect(()=>{const h=a.current;if(!h||s)return;const f=new IntersectionObserver(p=>{for(const b of p)b.isIntersecting&&(i(!0),f.unobserve(h))},{rootMargin:"200px 0px",threshold:0});return f.observe(h),()=>{f.disconnect()}},[s]);const l=x.useCallback(async()=>{try{await navigator.clipboard.writeText(e.textContent),r(!0),setTimeout(()=>r(!1),2e3)}catch(h){console.error("Failed to copy:",h)}},[e.textContent]),u=n.options.lowlight?.listLanguages?.()||[],d=e.attrs.language||"plaintext",m=d==="plaintext"?"Plain Text":d.charAt(0).toUpperCase()+d.slice(1);return c.jsxDEV(Ee.NodeViewWrapper,{className:"code-block-wrapper",ref:a,children:[c.jsxDEV("div",{className:"code-block-controls",contentEditable:!1,children:[c.jsxDEV("div",{className:"code-block-language-wrapper",children:[c.jsxDEV("select",{value:d,onChange:h=>t({language:h.target.value}),className:"code-block-language-select",children:[c.jsxDEV("option",{value:"plaintext",children:"Plain Text"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:152,columnNumber:13},this),u.map(h=>c.jsxDEV("option",{value:h,children:h.charAt(0).toUpperCase()+h.slice(1)},h,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:154,columnNumber:15},this))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:147,columnNumber:11},this),c.jsxDEV("span",{className:"code-block-language-label",children:m},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:159,columnNumber:11},this),c.jsxDEV(C.ChevronDown,{size:12,className:"code-block-language-chevron"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:160,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:146,columnNumber:9},this),c.jsxDEV("button",{type:"button",onClick:l,className:`code-block-copy-btn ${o?"copied":""}`,title:o?"Copied!":"Copy code",children:o?c.jsxDEV(C.Check,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:168,columnNumber:21},this):c.jsxDEV(C.Copy,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:168,columnNumber:43},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:162,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:145,columnNumber:7},this),c.jsxDEV("pre",{className:`code-block-pre ${s?"":"code-block-deferred"}`,children:c.jsxDEV(Ee.NodeViewContent,{className:s?`language-${d}`:"language-plaintext"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:175,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:174,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CodeBlockWithFeatures.tsx",lineNumber:143,columnNumber:5},this)}const Bc=dc.extend({addNodeView(){return Ee.ReactNodeViewRenderer(Oc)}}).configure({lowlight:oe,defaultLanguage:"plaintext",HTMLAttributes:{class:"code-block"}});function $c({editor:e,isOpen:t,onClose:n}){const[o,r]=x.useState(""),[s,i]=x.useState({top:0,left:0}),a=x.useRef(null),l=x.useRef(null),u=x.useCallback(()=>{if(!(!e||e.isDestroyed))try{const{view:h}=e,{from:f}=h.state.selection,p=h.coordsAtPos(f),b=320,w=80,g=8,N=window.innerWidth,y=window.innerHeight;let E=p.bottom+8,v=p.left;E+w>y-g&&(E=p.top-w-8),v+b>N-g&&(v=N-b-g),v<g&&(v=g),E=Math.max(g,E),i({top:E,left:v})}catch{i({top:window.innerHeight/2-40,left:window.innerWidth/2-160})}},[e]);x.useEffect(()=>{if(t){const h=e.getAttributes("link").href||"";r(h),u(),setTimeout(()=>{a.current?.focus(),a.current?.select()},50)}},[t,e,u]),x.useEffect(()=>{if(!t)return;const h=()=>{requestAnimationFrame(u)};return window.addEventListener("scroll",h,!0),window.addEventListener("resize",h),()=>{window.removeEventListener("scroll",h,!0),window.removeEventListener("resize",h)}},[t,u]),x.useEffect(()=>{if(!t)return;const h=f=>{l.current&&!l.current.contains(f.target)&&n()};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[t,n]);const d=x.useCallback(h=>{if(h?.preventDefault(),o.trim()){let f=o.trim();!/^https?:\/\//i.test(f)&&!f.startsWith("mailto:")&&(f="https://"+f),e.chain().focus().extendMarkRange("link").setLink({href:f}).run()}else e.chain().focus().unsetLink().run();n()},[o,e,n]),m=x.useCallback(h=>{h.key==="Escape"?(h.preventDefault(),n()):h.key==="Enter"&&(h.preventDefault(),d())},[n,d]);return t?kt.createPortal(c.jsxDEV("div",{ref:l,className:"link-popover",style:{position:"fixed",top:`${s.top}px`,left:`${s.left}px`,zIndex:9999},children:c.jsxDEV("form",{onSubmit:d,className:"link-popover-form",children:[c.jsxDEV("div",{className:"link-popover-input-wrapper",children:[c.jsxDEV(C.Link2,{className:"link-popover-icon",size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:163,columnNumber:11},this),c.jsxDEV("input",{ref:a,type:"text",value:o,onChange:h=>r(h.target.value),onKeyDown:m,placeholder:"Enter URL or paste link",className:"link-popover-input",autoComplete:"off",spellCheck:!1},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:164,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:162,columnNumber:9},this),c.jsxDEV("div",{className:"link-popover-hint",children:"Press Enter to save · Escape to cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:176,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:161,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkPopover.tsx",lineNumber:151,columnNumber:5},this),document.body):null}function zc({editor:e,onEditLink:t}){const[n,o]=x.useState({isVisible:!1,url:"",position:{top:0,left:0},linkElement:null}),r=x.useRef(null),s=x.useRef(null),i=x.useCallback(f=>{if(!(!e||e.isDestroyed)){s.current&&(clearTimeout(s.current),s.current=null);try{const p=f.getAttribute("href")||"",b=f.getBoundingClientRect(),w=320,g=40,N=8,y=window.innerWidth,E=window.innerHeight;let v=b.bottom+8,M=b.left;v+g>E-N&&(v=b.top-g-8),M+w>y-N&&(M=y-w-N),M<N&&(M=N),o({isVisible:!0,url:p,position:{top:v,left:M},linkElement:f})}catch(p){console.warn("LinkHoverTooltip: Error showing tooltip",p)}}},[e]),a=x.useCallback(()=>{s.current=setTimeout(()=>{o(f=>({...f,isVisible:!1,linkElement:null}))},150)},[]),l=x.useCallback(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]);x.useEffect(()=>{if(!e||e.isDestroyed)return;const f=e.view.dom;if(!f)return;const p=w=>{const N=w.target.closest("a");N&&f.contains(N)&&i(N)},b=w=>{const g=w.target,N=w.relatedTarget;if(g.closest("a")){if(N&&r.current?.contains(N))return;a()}};return f.addEventListener("mouseover",p),f.addEventListener("mouseout",b),()=>{f.removeEventListener("mouseover",p),f.removeEventListener("mouseout",b),s.current&&clearTimeout(s.current)}},[e,i,a]);const u=x.useCallback(()=>{n.url&&window.open(n.url,"_blank","noopener,noreferrer"),o(f=>({...f,isVisible:!1}))},[n.url]),d=x.useCallback(()=>{if(n.linkElement){const{view:f}=e,{doc:p}=f.state;let b=null,w=null;p.descendants((g,N)=>{if(g.isText&&g.marks.some(y=>y.type.name==="link")){const y=f.nodeDOM(N);if(y&&(y===n.linkElement||y.parentElement===n.linkElement))return b=N,w=N+g.nodeSize,!1}return!0}),b!==null&&w!==null?e.chain().focus().setTextSelection({from:b,to:w}).unsetLink().run():e.chain().focus().unsetLink().run()}o(f=>({...f,isVisible:!1}))},[e,n.linkElement]),m=x.useCallback(()=>{if(n.linkElement){const{view:f}=e,{doc:p}=f.state;p.descendants((b,w)=>{if(b.isText&&b.marks.some(g=>g.type.name==="link")){const g=f.nodeDOM(w);if(g&&(g===n.linkElement||g.parentElement===n.linkElement))return e.chain().focus().setTextSelection({from:w,to:w+b.nodeSize}).run(),!1}return!0})}o(f=>({...f,isVisible:!1})),t()},[e,n.linkElement,t]);if(!n.isVisible)return null;const h=n.url.length>40?n.url.substring(0,40)+"...":n.url;return kt.createPortal(c.jsxDEV("div",{ref:r,className:"link-hover-tooltip",style:{position:"fixed",top:`${n.position.top}px`,left:`${n.position.left}px`,zIndex:9999},onMouseEnter:l,onMouseLeave:a,children:c.jsxDEV("div",{className:"link-hover-tooltip-content",children:[c.jsxDEV("button",{onClick:m,className:"link-hover-tooltip-edit",title:"Edit link",children:c.jsxDEV("span",{className:"link-hover-tooltip-url",children:h||"Edit link"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:223,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:218,columnNumber:9},this),c.jsxDEV("div",{className:"link-hover-tooltip-actions",children:[c.jsxDEV("button",{onClick:u,className:"link-hover-tooltip-btn",title:"Open link",children:c.jsxDEV(C.ExternalLink,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:231,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:226,columnNumber:11},this),c.jsxDEV("button",{onClick:d,className:"link-hover-tooltip-btn link-hover-tooltip-btn-danger",title:"Remove link",children:c.jsxDEV(C.Unlink,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:238,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:233,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:225,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:217,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/LinkHoverTooltip.tsx",lineNumber:205,columnNumber:5},this),document.body)}const ke=({onMouseDown:e,isActive:t,disabled:n,children:o,title:r})=>c.jsxDEV("button",{onMouseDown:e,disabled:n,title:r,className:`
      flex items-center justify-center w-7 h-7 rounded-md flex-shrink-0
      transition-all duration-100 ease-out touch-manipulation
      ${t?"bg-primary text-primary-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
      ${n?"opacity-50 cursor-not-allowed":""}
    `,children:o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:47,columnNumber:3},void 0),Gr=()=>c.jsxDEV("div",{className:"w-px h-5 bg-border mx-0.5 flex-shrink-0"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:66,columnNumber:3},void 0),Xr=x.memo(function({editor:t,className:n=""}){const o=Ee.useEditorState({editor:t,selector:({editor:v})=>({isBold:v.isActive("bold"),isItalic:v.isActive("italic"),isUnderline:v.isActive("underline"),isStrike:v.isActive("strike"),isCode:v.isActive("code"),isHighlight:v.isActive("highlight"),isLink:v.isActive("link"),isH1:v.isActive("heading",{level:1}),isH2:v.isActive("heading",{level:2}),isH3:v.isActive("heading",{level:3}),isBulletList:v.isActive("bulletList"),isOrderedList:v.isActive("orderedList"),isTaskList:v.isActive("taskList"),isBlockquote:v.isActive("blockquote"),isCodeBlock:v.isActive("codeBlock")})}),[r,s]=x.useState(!1),[i,a]=x.useState(""),[l,u]=x.useState(!1),[d,m]=x.useState({top:0,left:0}),h=x.useRef(null),f=x.useRef(null),p=x.useRef(null),b=x.useCallback(()=>{if(i){let v=i.trim();!/^https?:\/\//i.test(v)&&!v.startsWith("mailto:")&&(v="https://"+v),t.chain().focus().extendMarkRange("link").setLink({href:v}).run()}else t.chain().focus().extendMarkRange("link").unsetLink().run();s(!1),a("")},[t,i]),w=v=>{v.preventDefault(),v.stopPropagation();const M=t.getAttributes("link").href;a(M||""),s(!0)},g=x.useCallback((v,M)=>{v.preventDefault(),v.stopPropagation(),M()},[]);x.useEffect(()=>{if(!t||t.isDestroyed)return;const v=()=>{if(!t.isDestroyed)try{const{selection:M}=t.state,{empty:S,from:T,to:D}=M,U=("node"in M&&M.node?M.node:t.state.doc.nodeAt(T))?.type?.name==="resizableImage";if(S&&!U||t.isActive("codeBlock")){p.current&&(clearTimeout(p.current),p.current=null),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{u(!1),s(!1)},150);return}f.current&&(clearTimeout(f.current),f.current=null);const j=t.view.coordsAtPos(T),G=t.view.coordsAtPos(D),R=h.current?.offsetWidth||500,W=h.current?.offsetHeight||40,X=8,L=window.innerWidth;let A=(j.left+G.left)/2-R/2;A=Math.max(X,Math.min(L-R-X,A));let $=j.top-W-10;$<X&&($=G.bottom+10),l?m({top:Math.max(X,$),left:A}):(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{m({top:Math.max(X,$),left:A}),u(!0)},50))}catch(M){console.warn("FloatingToolbar: Error updating position",M)}};return t.on("selectionUpdate",v),()=>{t.off("selectionUpdate",v),f.current&&clearTimeout(f.current),p.current&&clearTimeout(p.current)}},[t,l]);const N=v=>{f.current&&(clearTimeout(f.current),f.current=null)};if(!l)return null;const y=15,E=r?c.jsxDEV("div",{ref:h,className:`floating-toolbar ${n}`,style:{position:"fixed",top:d.top,left:d.left,zIndex:9999},onMouseDown:N,children:c.jsxDEV("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 px-2 w-[280px] sm:w-auto",children:[c.jsxDEV("input",{type:"url",placeholder:"Enter URL...",value:i,onChange:v=>a(v.target.value),onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),b()),v.key==="Escape"&&(s(!1),a(""))},className:`
            bg-secondary/50 rounded px-3 py-2 sm:py-1
            text-sm text-foreground placeholder:text-muted-foreground
            outline-none border border-border/50
            w-full sm:w-48
          `,autoFocus:!0},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:252,columnNumber:9},this),c.jsxDEV("div",{className:"flex gap-2",children:[c.jsxDEV("button",{onMouseDown:v=>{v.preventDefault(),b()},className:`
              flex-1 sm:flex-none px-4 sm:px-3 py-2 sm:py-1 text-sm sm:text-xs font-medium rounded
              bg-primary text-primary-foreground
              hover:opacity-90 active:opacity-80 transition-opacity touch-manipulation
            `,children:"Apply"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:276,columnNumber:11},this),c.jsxDEV("button",{onMouseDown:v=>{v.preventDefault(),s(!1),a("")},className:`
              flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-1 text-sm sm:text-xs font-medium rounded
              bg-secondary text-secondary-foreground
              hover:bg-accent active:bg-accent/80 transition-colors touch-manipulation
            `,children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:289,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:275,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:251,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:240,columnNumber:5},this):c.jsxDEV("div",{ref:h,className:`floating-toolbar ${n}`,style:{position:"fixed",top:d.top,left:d.left,zIndex:9999},onMouseDown:N,children:[c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().setParagraph().run()),isActive:!o?.isH1&&!o?.isH2&&!o?.isH3&&!o?.isBulletList&&!o?.isOrderedList&&!o?.isTaskList&&!o?.isBlockquote&&!o?.isCodeBlock,title:"Paragraph",children:c.jsxDEV(C.Pilcrow,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:324,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:319,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleHeading({level:1}).run()),isActive:o?.isH1,title:"Heading 1",children:c.jsxDEV(C.Heading1,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:333,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:328,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleHeading({level:2}).run()),isActive:o?.isH2,title:"Heading 2",children:c.jsxDEV(C.Heading2,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:335,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleHeading({level:3}).run()),isActive:o?.isH3,title:"Heading 3",children:c.jsxDEV(C.Heading3,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:347,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:342,columnNumber:7},this),c.jsxDEV(Gr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:350,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleBold().run()),isActive:o?.isBold,title:"Bold (Ctrl+B)",children:c.jsxDEV(C.Bold,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:358,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:353,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleItalic().run()),isActive:o?.isItalic,title:"Italic (Ctrl+I)",children:c.jsxDEV(C.Italic,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:365,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:360,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleUnderline().run()),isActive:o?.isUnderline,title:"Underline (Ctrl+U)",children:c.jsxDEV(C.Underline,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:372,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:367,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleStrike().run()),isActive:o?.isStrike,title:"Strikethrough",children:c.jsxDEV(C.Strikethrough,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:379,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:374,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleCode().run()),isActive:o?.isCode,title:"Inline Code (Ctrl+E)",children:c.jsxDEV(C.Code,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:386,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:381,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleHighlight().run()),isActive:o?.isHighlight,title:"Highlight",children:c.jsxDEV(C.Highlighter,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:393,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:388,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:w,isActive:o?.isLink,title:"Link (Ctrl+K)",children:c.jsxDEV(C.Link,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:401,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:396,columnNumber:7},this),c.jsxDEV(Gr,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:404,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleBlockquote().run()),isActive:o?.isBlockquote,title:"Quote",children:c.jsxDEV(C.Quote,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:412,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:407,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleBulletList().run()),isActive:o?.isBulletList,title:"Bullet List",children:c.jsxDEV(C.List,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:419,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:414,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleOrderedList().run()),isActive:o?.isOrderedList,title:"Numbered List",children:c.jsxDEV(C.ListOrdered,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:426,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:421,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleTaskList().run()),isActive:o?.isTaskList,title:"Task List",children:c.jsxDEV(C.CheckSquare,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:433,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:428,columnNumber:7},this),c.jsxDEV(ke,{onMouseDown:v=>g(v,()=>t.chain().focus().toggleCodeBlock().run()),isActive:o?.isCodeBlock,title:"Code Block",children:c.jsxDEV(C.FileCode,{size:y},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:440,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:435,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FloatingToolbar.tsx",lineNumber:307,columnNumber:5},this);return kt.createPortal(E,document.body)}),bn={info:{icon:C.Info,label:"Info",color:"var(--callout-info)"},warning:{icon:C.AlertTriangle,label:"Warning",color:"var(--callout-warning)"},error:{icon:C.XCircle,label:"Error",color:"var(--callout-error)"},success:{icon:C.CheckCircle,label:"Success",color:"var(--callout-success)"},note:{icon:C.FileText,label:"Note",color:"var(--callout-note)"}};function _c({buttonRef:e,type:t,onTypeChange:n,onClose:o,theme:r}){const s=x.useRef(null),[i,a]=x.useState(null),l=185,u=x.useCallback(()=>{if(!e.current)return;const m=e.current.getBoundingClientRect(),f=window.innerHeight-m.bottom,p=m.top,b=f<l+8&&p>l+8;a({top:b?m.top-l-4:m.bottom+4,left:m.left,flipped:b})},[e]);if(x.useEffect(()=>{u();const m=()=>u();return window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[u]),x.useEffect(()=>{const m=h=>{s.current&&!s.current.contains(h.target)&&e.current&&!e.current.contains(h.target)&&o()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[e,o]),x.useEffect(()=>{const m=h=>{h.key==="Escape"&&o()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[o]),!i)return null;const d=c.jsxDEV("div",{ref:s,className:`callout-type-dropdown-portal ${r==="dark"?"dark-theme":"light-theme"}`,style:{position:"fixed",top:i.top,left:i.left,zIndex:99999,maxHeight:l,overflowY:"auto"},children:Object.keys(bn).map(m=>{const h=bn[m],f=h.icon;return c.jsxDEV("button",{className:`callout-type-option ${m===t?"active":""}`,onClick:()=>n(m),style:{"--callout-option-color":h.color},children:[c.jsxDEV(f,{size:16,style:{color:h.color}},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:124,columnNumber:13},this),c.jsxDEV("span",{children:h.label},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:125,columnNumber:13},this)]},m,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:118,columnNumber:11},this)})},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:102,columnNumber:5},this);return kt.createPortal(d,document.body)}function Hc({node:e,updateAttributes:t,editor:n}){const[o,r]=x.useState(!1),s=x.useRef(null),i=e.attrs.type||"info",a=bn[i]||bn.info,l=a.icon,[u,d]=x.useState("light");x.useEffect(()=>{const f=n.view.dom.closest("[data-theme]");f?d(f.getAttribute("data-theme")||"light"):document.documentElement.classList.contains("dark")&&d("dark")},[n]);const m=x.useCallback(f=>{t({type:f}),r(!1)},[t]),h=x.useCallback(()=>{r(!1)},[]);return c.jsxDEV(Ee.NodeViewWrapper,{className:`callout callout-${i}`,"data-callout":"","data-type":i,children:[c.jsxDEV("div",{className:"callout-icon-container",children:[c.jsxDEV("button",{ref:s,className:"callout-icon-button",onClick:()=>n.isEditable&&r(!o),title:n.isEditable?"Click to change callout type":a.label,style:{color:a.color},contentEditable:!1,children:[c.jsxDEV(l,{size:20},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:173,columnNumber:11},this),n.isEditable&&c.jsxDEV(C.ChevronDown,{size:12,className:"callout-chevron"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:174,columnNumber:33},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:165,columnNumber:9},this),o&&n.isEditable&&c.jsxDEV(_c,{buttonRef:s,type:i,onTypeChange:m,onClose:h,theme:u},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:164,columnNumber:7},this),c.jsxDEV("div",{className:"callout-content",children:c.jsxDEV(Ee.NodeViewContent,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:188,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:187,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/extensions/CalloutWithMenu.tsx",lineNumber:163,columnNumber:5},this)}const Fc=ue.Node.create({name:"callout",addOptions(){return{HTMLAttributes:{},types:["info","warning","error","success","note"]}},content:"block+",group:"block",defining:!0,addAttributes(){return{type:{default:"info",parseHTML:e=>e.getAttribute("data-type")||"info",renderHTML:e=>({"data-type":e.type})}}},parseHTML(){return[{tag:"div[data-callout]"}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.type;return["div",ue.mergeAttributes(this.options.HTMLAttributes,t,{"data-callout":"","data-type":n,class:`callout callout-${n}`}),0]},addNodeView(){return Ee.ReactNodeViewRenderer(Hc)},addCommands(){return{setCallout:e=>({commands:t})=>t.wrapIn(this.name,e),toggleCallout:e=>({commands:t})=>t.toggleWrap(this.name,e),unsetCallout:()=>({commands:e})=>e.lift(this.name),insertCallout:e=>({chain:t})=>{const n=e?.type||"info";return t().insertContent({type:this.name,attrs:{type:n},content:[{type:"paragraph"}]}).focus().run()},updateCalloutType:e=>({commands:t})=>t.updateAttributes(this.name,{type:e})}},addKeyboardShortcuts(){return{"Mod-Shift-c":()=>this.editor.commands.toggleCallout({type:"info"})}}}),Yr=gc.extend({name:"resizableImage",addOptions(){return{...this.parent?.(),HTMLAttributes:{},allowBase64:!0,onImageClick:void 0}},addAttributes(){return{...this.parent?.(),width:{default:null,parseHTML:e=>{const t=e.getAttribute("width")||e.style.width;return t?parseInt(t,10):null},renderHTML:e=>e.width?{width:e.width,style:`width: ${e.width}px`}:{}},height:{default:null,parseHTML:e=>{const t=e.getAttribute("height")||e.style.height;return t?parseInt(t,10):null},renderHTML:e=>e.height?{height:e.height}:{}},align:{default:"left",parseHTML:e=>e.getAttribute("data-align")||"left",renderHTML:e=>({"data-align":e.align})}}},parseHTML(){return[{tag:"img[src]"},{tag:"figure.image-resizer img[src]"}]},addCommands(){return{...this.parent?.(),updateImage:e=>({commands:t})=>t.updateAttributes("resizableImage",e),setImageAlign:e=>({commands:t})=>t.updateAttributes("resizableImage",{align:e})}},renderHTML({HTMLAttributes:e}){const t=e["data-align"]||"center";return["figure",{class:"image-resizer",style:{left:"margin-right: auto;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto;"}[t]||"margin-left: auto; margin-right: auto;"},["img",ue.mergeAttributes(this.options.HTMLAttributes,e)]]},addNodeView(){return({node:e,editor:t,getPos:n})=>{const o=document.createElement("figure");o.classList.add("image-resizer");const r=E=>{const v={left:"margin-right: auto; margin-left: 0;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto; margin-right: 0;"}[E]||"margin-left: auto; margin-right: auto;";o.style.cssText=`display: block; position: relative; width: fit-content; ${v}`};r(e.attrs.align||"left");const s=document.createElement("img");s.src=e.attrs.src,s.alt=e.attrs.alt||"",e.attrs.width&&(s.style.width=`${e.attrs.width}px`);const i=document.createElement("div");i.classList.add("resize-handle"),i.style.cssText=`
        position: absolute;
        bottom: 4px;
        right: 4px;
        width: 24px;
        height: 24px;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: se-resize;
        opacity: 0;
        transition: opacity 0.15s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
      `,i.innerHTML=`
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="oklch(0.4 0 0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(90deg);">
          <polyline points="15 3 21 3 21 9"></polyline>
          <polyline points="9 21 3 21 3 15"></polyline>
          <line x1="21" y1="3" x2="14" y2="10"></line>
          <line x1="3" y1="21" x2="10" y2="14"></line>
        </svg>
      `;const a=document.createElement("button");a.classList.add("image-menu-btn"),a.setAttribute("type","button"),a.setAttribute("title","Image options"),a.style.cssText=`
        position: absolute;
        top: 8px;
        right: 8px;
        width: 28px;
        height: 28px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.15s ease, background 0.15s ease;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
        z-index: 10;
      `,a.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="5" r="1"></circle>
          <circle cx="12" cy="12" r="1"></circle>
          <circle cx="12" cy="19" r="1"></circle>
        </svg>
      `;const l=document.createElement("div");l.classList.add("image-menu-dropdown"),l.style.cssText=`
        position: fixed;
        display: none;
        flex-direction: column;
        min-width: 140px;
        padding: 4px;
        background: oklch(0.99 0 0);
        border: 1px solid oklch(0.9 0 0);
        border-radius: 8px;
        box-shadow: 0 4px 16px oklch(0 0 0 / 0.15);
        z-index: 9999;
      `;const u=(E,v,M)=>{const S=document.createElement("button");return S.setAttribute("type","button"),S.style.cssText=`
          display: flex;
          align-items: center;
          gap: 8px;
          width: 100%;
          padding: 8px 12px;
          font-size: 13px;
          color: oklch(0.3 0 0);
          background: transparent;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          text-align: left;
          transition: background 0.15s ease;
        `,S.innerHTML=`${v}<span>${E}</span>`,S.addEventListener("mouseenter",()=>{S.style.background="oklch(0.95 0 0)"}),S.addEventListener("mouseleave",()=>{S.style.background="transparent"}),S.addEventListener("click",T=>{T.preventDefault(),T.stopPropagation(),M(),l.style.display="none"}),S},d='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',m='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',h='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>';l.appendChild(u("Edit",d,()=>{const E=typeof n=="function"?n():null;if(E!=null&&this.options.onImageClick){const v=s.getBoundingClientRect();this.options.onImageClick({src:e.attrs.src,alt:e.attrs.alt||"",pos:E,rect:v})}})),l.appendChild(u("Copy image",m,async()=>{try{const v=await(await fetch(e.attrs.src)).blob();await navigator.clipboard.write([new ClipboardItem({[v.type]:v})])}catch{await navigator.clipboard.writeText(e.attrs.src)}})),l.appendChild(u("Save image",h,()=>{const E=document.createElement("a");E.href=e.attrs.src,E.download=e.attrs.alt||"image",E.click()}));let f=!1;a.addEventListener("click",E=>{if(E.preventDefault(),E.stopPropagation(),f)l.style.display="none",f=!1;else{const v=a.getBoundingClientRect();l.style.top=`${v.bottom+4}px`,l.style.left=`${v.right-140}px`,l.style.display="flex",f=!0}});const p=E=>{!l.contains(E.target)&&!a.contains(E.target)&&(l.style.display="none",f=!1)};document.addEventListener("click",p),o.appendChild(s),o.appendChild(i),o.appendChild(a),document.body.appendChild(l),o.addEventListener("mouseenter",()=>{i.style.opacity="1",a.style.opacity="1"}),o.addEventListener("mouseleave",()=>{i.style.opacity="0",f||(a.style.opacity="0")}),a.addEventListener("mouseenter",()=>{a.style.background="oklch(0.95 0 0)"}),a.addEventListener("mouseleave",()=>{a.style.background="oklch(0.98 0 0 / 0.95)"});let b,w;const g=E=>{E.preventDefault(),b=E.clientX,w=s.offsetWidth,document.addEventListener("mousemove",N),document.addEventListener("mouseup",y)},N=E=>{const v=E.clientX-b,M=Math.max(100,w+v);s.style.width=`${M}px`},y=()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",y);const E=typeof n=="function"?n():null;E!=null&&t.chain().focus().updateAttributes("resizableImage",{width:s.offsetWidth}).run()};return i.addEventListener("mousedown",g),{dom:o,update:E=>E.type.name!=="resizableImage"?!1:(s.src=E.attrs.src,s.alt=E.attrs.alt||"",E.attrs.width&&(s.style.width=`${E.attrs.width}px`),r(E.attrs.align||"left"),!0),destroy:()=>{i.removeEventListener("mousedown",g),document.removeEventListener("click",p),l.remove()}}}}});function Wc(e){const t=new Date(e),n=new Date,o=new Date(n);o.setDate(o.getDate()+1);const r=new Date(n);if(r.setDate(r.getDate()-1),n.setHours(0,0,0,0),o.setHours(0,0,0,0),r.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime())return"Today";if(t.getTime()===o.getTime())return"Tomorrow";if(t.getTime()===r.getTime())return"Yesterday";const s={month:"short",day:"numeric"};return t.getFullYear()!==n.getFullYear()&&(s.year="numeric"),t.toLocaleDateString("en-US",s)}function Uc(e){const t=new Date(e),n=new Date,o=new Date(n);return o.setDate(o.getDate()+7),n.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime()?"date-today":t<n?"date-overdue":t<=o?"date-upcoming":""}function jc({node:e,updateAttributes:t,selected:n}){const[o,r]=x.useState(!1),[s,i]=x.useState({top:0,left:0}),a=x.useRef(null),l=x.useRef(null),u=x.useRef(null),d=e.attrs.date||new Date().toISOString().split("T")[0],m=Wc(d),h=Uc(d),f=w=>{if(w.preventDefault(),w.stopPropagation(),a.current){const g=a.current.getBoundingClientRect();i({top:g.bottom+8,left:g.left})}r(!0)},p=w=>{const g=w.target.value;g&&(t({date:g}),r(!1))},b=w=>{const g=new Date;g.setDate(g.getDate()+w),t({date:g.toISOString().split("T")[0]}),r(!1)};return x.useEffect(()=>{const w=N=>{l.current&&!l.current.contains(N.target)&&a.current&&!a.current.contains(N.target)&&r(!1)},g=N=>{N.key==="Escape"&&r(!1)};return o&&(document.addEventListener("mousedown",w),document.addEventListener("keydown",g),setTimeout(()=>u.current?.focus(),50)),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",g)}},[o]),c.jsxDEV(Ee.NodeViewWrapper,{as:"span",className:"inline",children:[c.jsxDEV("span",{ref:a,onClick:f,className:`date-pill ${h} ${n?"ProseMirror-selectednode":""} cursor-pointer`,contentEditable:!1,"data-type":"date-pill","data-date":d,children:[c.jsxDEV(C.Calendar,{size:14,className:"date-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:158,columnNumber:9},this),c.jsxDEV("span",{className:"date-text",children:m},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:159,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:150,columnNumber:7},this),o&&c.jsxDEV("div",{ref:l,className:"date-picker-popup",style:{position:"fixed",top:s.top,left:s.left,zIndex:100},children:[c.jsxDEV("div",{className:"flex gap-1 mb-3",children:[c.jsxDEV("button",{type:"button",onClick:()=>b(0),className:"quick-date-btn",children:"Today"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:175,columnNumber:13},this),c.jsxDEV("button",{type:"button",onClick:()=>b(1),className:"quick-date-btn",children:"Tomorrow"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:182,columnNumber:13},this),c.jsxDEV("button",{type:"button",onClick:()=>b(7),className:"quick-date-btn",children:"Next Week"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:174,columnNumber:11},this),c.jsxDEV("div",{className:"relative",children:c.jsxDEV("input",{ref:u,type:"date",value:d,onChange:p,className:"date-picker-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:200,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:199,columnNumber:11},this),c.jsxDEV("div",{className:"mt-2 pt-2 border-t border-border",children:c.jsxDEV("button",{type:"button",onClick:()=>{r(!1)},className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Close"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:211,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/DatePillComponent.tsx",lineNumber:149,columnNumber:5},this)}function qc(e){const t=new Date(e),n=new Date,o=new Date(n);o.setDate(o.getDate()+1);const r=new Date(n);if(r.setDate(r.getDate()-1),n.setHours(0,0,0,0),o.setHours(0,0,0,0),r.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime())return"Today";if(t.getTime()===o.getTime())return"Tomorrow";if(t.getTime()===r.getTime())return"Yesterday";const s={month:"short",day:"numeric"};return t.getFullYear()!==n.getFullYear()&&(s.year="numeric"),t.toLocaleDateString("en-US",s)}function Kc(e){const t=new Date(e),n=new Date,o=new Date(n);return o.setDate(o.getDate()+7),n.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===n.getTime()?"date-today":t<n?"date-overdue":t<=o?"date-upcoming":""}const Zr=ue.Node.create({name:"datePill",group:"inline",inline:!0,atom:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{date:{default:new Date().toISOString().split("T")[0],parseHTML:e=>e.getAttribute("data-date"),renderHTML:e=>({"data-date":e.date})}}},parseHTML(){return[{tag:'span[data-type="date-pill"]'}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.date,o=qc(n),r=Kc(n);return["span",ue.mergeAttributes(this.options.HTMLAttributes,t,{"data-type":"date-pill",class:`date-pill ${r}`.trim()}),["span",{class:"date-icon"},"📅"],["span",{class:"date-text"},o]]},addNodeView(){return Ee.ReactNodeViewRenderer(jc)},addCommands(){return{insertDatePill:e=>({commands:t})=>{const n=e||new Date().toISOString().split("T")[0];return t.insertContent({type:this.name,attrs:{date:n}})},updateDatePill:e=>({commands:t})=>t.updateAttributes(this.name,{date:e})}},addKeyboardShortcuts(){return{"Mod-Shift-d":()=>this.editor.commands.insertDatePill()}},addInputRules(){const e=new ue.InputRule({find:/@today\s$/,handler:({state:s,range:i,chain:a})=>{const l=new Date().toISOString().split("T")[0];a().deleteRange(i).insertDatePill(l).run()}}),t=new ue.InputRule({find:/@tomorrow\s$/,handler:({state:s,range:i,chain:a})=>{const l=new Date;l.setDate(l.getDate()+1),a().deleteRange(i).insertDatePill(l.toISOString().split("T")[0]).run()}}),n=new ue.InputRule({find:/@yesterday\s$/,handler:({state:s,range:i,chain:a})=>{const l=new Date;l.setDate(l.getDate()-1),a().deleteRange(i).insertDatePill(l.toISOString().split("T")[0]).run()}}),o=new ue.InputRule({find:/@(\d{4}-\d{2}-\d{2})\s$/,handler:({state:s,range:i,chain:a,match:l})=>{const u=l[1];a().deleteRange(i).insertDatePill(u).run()}}),r=new ue.InputRule({find:/@([A-Za-z]{3})\s?(\d{1,2})\s$/,handler:({state:s,range:i,chain:a,match:l})=>{const u=l[1],d=parseInt(l[2],10),h={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}[u.toLowerCase()];if(h!==void 0){const f=new Date().getFullYear(),p=new Date(f,h,d);a().deleteRange(i).insertDatePill(p.toISOString().split("T")[0]).run()}}});return[e,t,n,o,r]}});function Gc({isOpen:e,onClose:t,onInsert:n,position:o}){const[r,s]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(""),[d,m]=x.useState(!1),h=x.useRef(null),f=x.useRef(null);x.useEffect(()=>{e&&(s(""),a(""),u(""),setTimeout(()=>{h.current?.focus()},100))},[e]),x.useEffect(()=>{if(!e)return;const N=E=>{f.current&&!f.current.contains(E.target)&&t()},y=E=>{E.key==="Escape"&&t()};return document.addEventListener("mousedown",N),document.addEventListener("keydown",y),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("keydown",y)}},[e,t]);const p=N=>{if(!N.trim())return u("Please enter an image URL"),!1;try{const y=new URL(N);if(!["http:","https:","data:"].includes(y.protocol))return u("URL must start with http://, https://, or be a data URL"),!1}catch{return u("Please enter a valid URL"),!1}return u(""),!0},b=async()=>{if(!p(r))return;m(!0);const N=new window.Image;N.onload=()=>{m(!1),n(r.trim(),i.trim()),t()},N.onerror=()=>{m(!1),n(r.trim(),i.trim()),t()},setTimeout(()=>{d&&(m(!1),n(r.trim(),i.trim()),t())},3e3),N.src=r.trim()},w=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),b())};if(!e)return null;const g=o?{top:o.top,left:Math.min(o.left,typeof window<"u"?window.innerWidth-340:o.left)}:{top:"50%",left:"50%"};return c.jsxDEV("div",{ref:f,className:"image-url-dialog fixed z-50",style:{top:(typeof g.top=="number",g.top),left:typeof g.left=="number"?Math.max(8,g.left):g.left,transform:o?void 0:"translate(-50%, -50%)"},children:[c.jsxDEV("div",{className:"image-url-dialog-header",children:[c.jsxDEV("div",{className:"flex items-center gap-2",children:[c.jsxDEV(C.Image,{size:16,className:"text-primary"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:143,columnNumber:11},this),c.jsxDEV("span",{className:"font-medium text-sm",children:"Insert Image from URL"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:144,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:142,columnNumber:9},this),c.jsxDEV("button",{onClick:t,className:"image-url-dialog-close","aria-label":"Close",children:c.jsxDEV(C.X,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:151,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:146,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:141,columnNumber:7},this),c.jsxDEV("div",{className:"image-url-dialog-content",children:[c.jsxDEV("div",{className:"image-url-dialog-field",children:[c.jsxDEV("label",{className:"image-url-dialog-label",children:[c.jsxDEV(C.Link2,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:160,columnNumber:13},this),"Image URL"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:159,columnNumber:11},this),c.jsxDEV("input",{ref:h,type:"url",value:r,onChange:N=>{s(N.target.value),l&&u("")},onKeyDown:w,placeholder:"https://example.com/image.jpg",className:`image-url-dialog-input ${l?"error":""}`},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:163,columnNumber:11},this),l&&c.jsxDEV("span",{className:"image-url-dialog-error",children:l},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:176,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:158,columnNumber:9},this),c.jsxDEV("div",{className:"image-url-dialog-field",children:[c.jsxDEV("label",{className:"image-url-dialog-label",children:[c.jsxDEV(C.Type,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:183,columnNumber:13},this),"Alt Text (optional)"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:182,columnNumber:11},this),c.jsxDEV("input",{type:"text",value:i,onChange:N=>a(N.target.value),onKeyDown:w,placeholder:"Describe the image",className:"image-url-dialog-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:186,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:181,columnNumber:9},this),c.jsxDEV("div",{className:"image-url-dialog-actions",children:[c.jsxDEV("button",{onClick:t,className:"image-url-dialog-btn image-url-dialog-btn-cancel",children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:198,columnNumber:11},this),c.jsxDEV("button",{onClick:b,disabled:d||!r.trim(),className:"image-url-dialog-btn image-url-dialog-btn-insert",children:d?"Validating...":"Insert Image"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:204,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:197,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:156,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageURLDialog.tsx",lineNumber:131,columnNumber:5},this)}const Xc=[{title:"Paragraph",description:"Normal text",icon:c.jsxDEV(C.Type,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:62,columnNumber:11},void 0),command:e=>e.chain().focus().setParagraph().run(),keywords:["text","normal","p"]},{title:"Heading 1",description:"Large section heading",icon:c.jsxDEV(C.Heading1,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:69,columnNumber:11},void 0),command:e=>e.chain().focus().toggleHeading({level:1}).run(),keywords:["h1","title","large"]},{title:"Heading 2",description:"Medium section heading",icon:c.jsxDEV(C.Heading2,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:76,columnNumber:11},void 0),command:e=>e.chain().focus().toggleHeading({level:2}).run(),keywords:["h2","subtitle"]},{title:"Heading 3",description:"Small section heading",icon:c.jsxDEV(C.Heading3,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:83,columnNumber:11},void 0),command:e=>e.chain().focus().toggleHeading({level:3}).run(),keywords:["h3","subheading"]},{title:"Bullet List",description:"Create a simple bullet list",icon:c.jsxDEV(C.List,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:90,columnNumber:11},void 0),command:e=>e.chain().focus().toggleBulletList().run(),keywords:["ul","unordered","bullets"]},{title:"Numbered List",description:"Create a numbered list",icon:c.jsxDEV(C.ListOrdered,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:97,columnNumber:11},void 0),command:e=>e.chain().focus().toggleOrderedList().run(),keywords:["ol","ordered","numbers"]},{title:"Task List",description:"Create a todo list with checkboxes",icon:c.jsxDEV(C.CheckSquare,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:104,columnNumber:11},void 0),command:e=>e.chain().focus().toggleTaskList().run(),keywords:["todo","checkbox","tasks"]},{title:"Quote",description:"Add a blockquote",icon:c.jsxDEV(C.Quote,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:111,columnNumber:11},void 0),command:e=>e.chain().focus().toggleBlockquote().run(),keywords:["blockquote","citation"]},{title:"Code Block",description:"Add a code block with syntax highlighting",icon:c.jsxDEV(C.Code2,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:118,columnNumber:11},void 0),command:e=>e.chain().focus().toggleCodeBlock().run(),keywords:["code","pre","syntax"]},{title:"Table",description:"Insert a table",icon:c.jsxDEV(C.Table,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:125,columnNumber:11},void 0),command:e=>e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),keywords:["grid","spreadsheet"]},{title:"Image",description:"Insert an image from URL",icon:c.jsxDEV(C.Image,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:133,columnNumber:11},void 0),command:()=>{},keywords:["picture","photo","img"],isImageCommand:!0},{title:"Divider",description:"Add a horizontal rule",icon:c.jsxDEV(C.Minus,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:144,columnNumber:11},void 0),command:e=>e.chain().focus().setHorizontalRule().run(),keywords:["hr","separator","line"]},{title:"Info Callout",description:"Add an info callout box",icon:c.jsxDEV(C.Info,{size:18,className:"text-blue-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:151,columnNumber:11},void 0),command:e=>e.chain().focus().toggleCallout({type:"info"}).run(),keywords:["note","tip","information"]},{title:"Warning Callout",description:"Add a warning callout box",icon:c.jsxDEV(C.AlertTriangle,{size:18,className:"text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:158,columnNumber:11},void 0),command:e=>e.chain().focus().toggleCallout({type:"warning"}).run(),keywords:["caution","alert"]},{title:"Error Callout",description:"Add an error callout box",icon:c.jsxDEV(C.AlertCircle,{size:18,className:"text-red-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:165,columnNumber:11},void 0),command:e=>e.chain().focus().toggleCallout({type:"error"}).run(),keywords:["danger","critical"]},{title:"Success Callout",description:"Add a success callout box",icon:c.jsxDEV(C.CheckCircle,{size:18,className:"text-green-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:172,columnNumber:11},void 0),command:e=>e.chain().focus().toggleCallout({type:"success"}).run(),keywords:["done","complete"]},{title:"Note Callout",description:"Add a note callout box",icon:c.jsxDEV(C.FileText,{size:18,className:"text-purple-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:179,columnNumber:11},void 0),command:e=>e.chain().focus().toggleCallout({type:"note"}).run(),keywords:["memo","remember"]},{title:"Date",description:"Insert a date pill (today)",icon:c.jsxDEV(C.Calendar,{size:18,className:"text-cyan-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:186,columnNumber:11},void 0),command:e=>e.chain().focus().insertDatePill().run(),keywords:["date","today","calendar","time","schedule"]},{title:"Wiki Link",description:"Insert a [[page name]] link",icon:c.jsxDEV(C.Link2,{size:18,className:"text-cyan-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:193,columnNumber:11},void 0),command:e=>{const t=window.prompt("Enter page name:");t&&e.chain().focus().insertContent(`[[${t}]]`).run()},keywords:["wiki","internal","page","link","backlink"]}];function Qr({editor:e}){const[t,n]=x.useState(!1),[o,r]=x.useState(""),[s,i]=x.useState(0),[a,l]=x.useState({top:0,left:0}),[u,d]=x.useState(!1),[m,h]=x.useState({top:0,left:0}),f=x.useRef(null),p=Xc.filter(N=>{const y=o.toLowerCase();return N.title.toLowerCase().includes(y)||N.description.toLowerCase().includes(y)||N.keywords?.some(E=>E.includes(y))}),b=x.useCallback(N=>{const y=p[N];if(y){const{state:E}=e,{selection:v}=E,{$from:M}=v,S=M.nodeBefore?.textContent||"",T=S.lastIndexOf("/");if(T!==-1){const D=M.pos-(S.length-T);e.chain().focus().deleteRange({from:D,to:M.pos}).run()}if(y.isImageCommand){const D=e.view.coordsAtPos(M.pos);h({top:D.bottom+8,left:D.left}),d(!0)}else y.command(e);n(!1),r(""),i(0)}},[e,p]),w=x.useCallback((N,y)=>{e.chain().focus().setImage({src:N,alt:y}).run()},[e]);if(x.useEffect(()=>{if(!e)return;const N=E=>{if(!t){if(E.key==="/"){const{state:v}=e,{selection:M}=v,{$from:S}=M,T=e.view.coordsAtPos(S.pos);l({top:T.bottom+8,left:T.left}),setTimeout(()=>{n(!0),r(""),i(0)},10)}return}E.key==="ArrowDown"?(E.preventDefault(),i(v=>(v+1)%p.length)):E.key==="ArrowUp"?(E.preventDefault(),i(v=>(v-1+p.length)%p.length)):E.key==="Enter"?(E.preventDefault(),b(s)):E.key==="Escape"?(E.preventDefault(),n(!1),r("")):E.key==="Backspace"?o.length===0?n(!1):r(v=>v.slice(0,-1)):E.key.length===1&&!E.ctrlKey&&!E.metaKey&&(r(v=>v+E.key),i(0))},y=E=>{f.current&&!f.current.contains(E.target)&&(n(!1),r(""))};return document.addEventListener("keydown",N),document.addEventListener("click",y),()=>{document.removeEventListener("keydown",N),document.removeEventListener("click",y)}},[e,t,o,s,p,b]),x.useEffect(()=>{s>=p.length&&i(Math.max(0,p.length-1))},[p.length,s]),u)return c.jsxDEV(Gc,{isOpen:u,onClose:()=>d(!1),onInsert:w,position:m},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:339,columnNumber:7},this);if(!t||p.length===0)return null;const g={top:a.top,left:Math.min(a.left,typeof window<"u"?window.innerWidth-280:a.left)};return c.jsxDEV("div",{ref:f,className:"slash-command-menu fixed z-50 max-h-[60vh] overflow-y-auto",style:{top:g.top,left:Math.max(8,g.left)},children:[c.jsxDEV("div",{className:"text-xs text-muted-foreground px-3 py-2 border-b border-border",children:o?`Searching: ${o}`:"Type to filter..."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:367,columnNumber:7},this),p.map((N,y)=>c.jsxDEV("div",{className:`slash-command-item ${y===s?"is-selected":""}`,onClick:()=>b(y),onMouseEnter:()=>i(y),onTouchStart:()=>i(y),children:[c.jsxDEV("div",{className:"icon flex-shrink-0",children:N.icon},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:378,columnNumber:11},this),c.jsxDEV("div",{className:"flex flex-col min-w-0",children:[c.jsxDEV("span",{className:"label truncate",children:N.title},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:380,columnNumber:13},this),c.jsxDEV("span",{className:"text-xs text-muted-foreground truncate",children:N.description},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:381,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:379,columnNumber:11},this)]},N.title,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:371,columnNumber:9},this))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SlashCommands.tsx",lineNumber:359,columnNumber:5},this)}function ee(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),n===!1||!r.defaultPrevented)return t?.(r)}}function Jr(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gn(...e){return t=>{let n=!1;const o=e.map(r=>{const s=Jr(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<o.length;r++){const s=o[r];typeof s=="function"?s():Jr(e[r],null)}}}}function Ne(...e){return k.useCallback(gn(...e),e)}function Nt(e,t=[]){let n=[];function o(s,i){const a=k.createContext(i),l=n.length;n=[...n,i];const u=m=>{const{scope:h,children:f,...p}=m,b=h?.[e]?.[l]||a,w=k.useMemo(()=>p,Object.values(p));return P.jsx(b.Provider,{value:w,children:f})};u.displayName=s+"Provider";function d(m,h){const f=h?.[e]?.[l]||a,p=k.useContext(f);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[u,d]}const r=()=>{const s=n.map(i=>k.createContext(i));return function(a){const l=a?.[e]||s;return k.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[o,Yc(r,...t)]}function Yc(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const i=o.reduce((a,{useScope:l,scopeName:u})=>{const m=l(s)[`__scope${u}`];return{...a,...m}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Qe=globalThis?.document?k.useLayoutEffect:()=>{},Zc=k[" useInsertionEffect ".trim().toString()]||Qe;function wn({prop:e,defaultProp:t,onChange:n=()=>{},caller:o}){const[r,s,i]=Qc({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:r;{const d=k.useRef(e!==void 0);k.useEffect(()=>{const m=d.current;m!==a&&console.warn(`${o} is changing from ${m?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,o])}const u=k.useCallback(d=>{if(a){const m=Jc(d)?d(e):d;m!==e&&i.current?.(m)}else s(d)},[a,e,s,i]);return[l,u]}function Qc({defaultProp:e,onChange:t}){const[n,o]=k.useState(e),r=k.useRef(n),s=k.useRef(t);return Zc(()=>{s.current=t},[t]),k.useEffect(()=>{r.current!==n&&(s.current?.(n),r.current=n)},[n,r]),[n,o,s]}function Jc(e){return typeof e=="function"}function jt(e){const t=eu(e),n=k.forwardRef((o,r)=>{const{children:s,...i}=o,a=k.Children.toArray(s),l=a.find(nu);if(l){const u=l.props.children,d=a.map(m=>m===l?k.Children.count(u)>1?k.Children.only(null):k.isValidElement(u)?u.props.children:null:m);return P.jsx(t,{...i,ref:r,children:k.isValidElement(u)?k.cloneElement(u,void 0,d):null})}return P.jsx(t,{...i,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}var Rc=jt("Slot");function eu(e){const t=k.forwardRef((n,o)=>{const{children:r,...s}=n;if(k.isValidElement(r)){const i=ru(r),a=ou(s,r.props);return r.type!==k.Fragment&&(a.ref=o?gn(o,i):i),k.cloneElement(r,a)}return k.Children.count(r)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rr=Symbol("radix.slottable");function tu(e){const t=({children:n})=>P.jsx(P.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Rr,t}function nu(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rr}function ou(e,t){const n={...t};for(const o in t){const r=e[o],s=t[o];/^on[A-Z]/.test(o)?r&&s?n[o]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[o]=r):o==="style"?n[o]={...r,...s}:o==="className"&&(n[o]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function ru(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var su=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ge=su.reduce((e,t)=>{const n=jt(`Primitive.${t}`),o=k.forwardRef((r,s)=>{const{asChild:i,...a}=r,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(l,{...a,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function es(e,t){e&&jr.flushSync(()=>e.dispatchEvent(t))}function ts(e){const t=e+"CollectionProvider",[n,o]=Nt(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=b=>{const{scope:w,children:g}=b,N=x.useRef(null),y=x.useRef(new Map).current;return P.jsx(r,{scope:w,itemMap:y,collectionRef:N,children:g})};i.displayName=t;const a=e+"CollectionSlot",l=jt(a),u=x.forwardRef((b,w)=>{const{scope:g,children:N}=b,y=s(a,g),E=Ne(w,y.collectionRef);return P.jsx(l,{ref:E,children:N})});u.displayName=a;const d=e+"CollectionItemSlot",m="data-radix-collection-item",h=jt(d),f=x.forwardRef((b,w)=>{const{scope:g,children:N,...y}=b,E=x.useRef(null),v=Ne(w,E),M=s(d,g);return x.useEffect(()=>(M.itemMap.set(E,{ref:E,...y}),()=>void M.itemMap.delete(E))),P.jsx(h,{[m]:"",ref:v,children:N})});f.displayName=d;function p(b){const w=s(e+"CollectionConsumer",b);return x.useCallback(()=>{const N=w.collectionRef.current;if(!N)return[];const y=Array.from(N.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((M,S)=>y.indexOf(M.ref.current)-y.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:f},p,o]}var iu=k.createContext(void 0);function ns(e){const t=k.useContext(iu);return e||t||"ltr"}function Ie(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>t.current?.(...n),[])}function au(e,t=globalThis?.document){const n=Ie(e);k.useEffect(()=>{const o=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[n,t])}var lu="DismissableLayer",ho="dismissableLayer.update",cu="dismissableLayer.pointerDownOutside",uu="dismissableLayer.focusOutside",os,rs=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),po=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=e,u=k.useContext(rs),[d,m]=k.useState(null),h=d?.ownerDocument??globalThis?.document,[,f]=k.useState({}),p=Ne(t,S=>m(S)),b=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=b.indexOf(w),N=d?b.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,E=N>=g,v=fu(S=>{const T=S.target,D=[...u.branches].some(z=>z.contains(T));!E||D||(r?.(S),i?.(S),S.defaultPrevented||a?.())},h),M=hu(S=>{const T=S.target;[...u.branches].some(z=>z.contains(T))||(s?.(S),i?.(S),S.defaultPrevented||a?.())},h);return au(S=>{N===u.layers.size-1&&(o?.(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},h),k.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(os=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ss(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=os)}},[d,h,n,u]),k.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ss())},[d,u]),k.useEffect(()=>{const S=()=>f({});return document.addEventListener(ho,S),()=>document.removeEventListener(ho,S)},[]),P.jsx(ge.div,{...l,ref:p,style:{pointerEvents:y?E?"auto":"none":void 0,...e.style},onFocusCapture:ee(e.onFocusCapture,M.onFocusCapture),onBlurCapture:ee(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ee(e.onPointerDownCapture,v.onPointerDownCapture)})});po.displayName=lu;var du="DismissableLayerBranch",mu=k.forwardRef((e,t)=>{const n=k.useContext(rs),o=k.useRef(null),r=Ne(t,o);return k.useEffect(()=>{const s=o.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),P.jsx(ge.div,{...e,ref:r})});mu.displayName=du;function fu(e,t=globalThis?.document){const n=Ie(e),o=k.useRef(!1),r=k.useRef(()=>{});return k.useEffect(()=>{const s=a=>{if(a.target&&!o.current){let l=function(){is(cu,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);o.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function hu(e,t=globalThis?.document){const n=Ie(e),o=k.useRef(!1);return k.useEffect(()=>{const r=s=>{s.target&&!o.current&&is(uu,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function ss(){const e=new CustomEvent(ho);document.dispatchEvent(e)}function is(e,t,n,{discrete:o}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),o?es(r,s):r.dispatchEvent(s)}var bo=0;function pu(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??as()),document.body.insertAdjacentElement("beforeend",e[1]??as()),bo++,()=>{bo===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bo--}},[])}function as(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var go="focusScope.autoFocusOnMount",wo="focusScope.autoFocusOnUnmount",ls={bubbles:!1,cancelable:!0},bu="FocusScope",cs=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...i}=e,[a,l]=k.useState(null),u=Ie(r),d=Ie(s),m=k.useRef(null),h=Ne(t,b=>l(b)),f=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(o){let b=function(y){if(f.paused||!a)return;const E=y.target;a.contains(E)?m.current=E:Je(m.current,{select:!0})},w=function(y){if(f.paused||!a)return;const E=y.relatedTarget;E!==null&&(a.contains(E)||Je(m.current,{select:!0}))},g=function(y){if(document.activeElement===document.body)for(const v of y)v.removedNodes.length>0&&Je(a)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const N=new MutationObserver(g);return a&&N.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),N.disconnect()}}},[o,a,f.paused]),k.useEffect(()=>{if(a){ms.add(f);const b=document.activeElement;if(!a.contains(b)){const g=new CustomEvent(go,ls);a.addEventListener(go,u),a.dispatchEvent(g),g.defaultPrevented||(gu(vu(us(a)),{select:!0}),document.activeElement===b&&Je(a))}return()=>{a.removeEventListener(go,u),setTimeout(()=>{const g=new CustomEvent(wo,ls);a.addEventListener(wo,d),a.dispatchEvent(g),g.defaultPrevented||Je(b??document.body,{select:!0}),a.removeEventListener(wo,d),ms.remove(f)},0)}}},[a,u,d,f]);const p=k.useCallback(b=>{if(!n&&!o||f.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,g=document.activeElement;if(w&&g){const N=b.currentTarget,[y,E]=wu(N);y&&E?!b.shiftKey&&g===E?(b.preventDefault(),n&&Je(y,{select:!0})):b.shiftKey&&g===y&&(b.preventDefault(),n&&Je(E,{select:!0})):g===N&&b.preventDefault()}},[n,o,f.paused]);return P.jsx(ge.div,{tabIndex:-1,...i,ref:h,onKeyDown:p})});cs.displayName=bu;function gu(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(Je(o,{select:t}),document.activeElement!==n)return}function wu(e){const t=us(e),n=ds(t,e),o=ds(t.reverse(),e);return[n,o]}function us(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ds(e,t){for(const n of e)if(!ku(n,{upTo:t}))return n}function ku(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Nu(e){return e instanceof HTMLInputElement&&"select"in e}function Je(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Nu(e)&&t&&e.select()}}var ms=xu();function xu(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=fs(e,t),e.unshift(t)},remove(t){e=fs(e,t),e[0]?.resume()}}}function fs(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function vu(e){return e.filter(t=>t.tagName!=="A")}var yu=k[" useId ".trim().toString()]||(()=>{}),Eu=0;function xt(e){const[t,n]=k.useState(yu());return Qe(()=>{n(o=>o??String(Eu++))},[e]),e||(t?`radix-${t}`:"")}const Cu=["top","right","bottom","left"],Re=Math.min,Te=Math.max,kn=Math.round,Nn=Math.floor,De=e=>({x:e,y:e}),Tu={left:"right",right:"left",bottom:"top",top:"bottom"},Su={start:"end",end:"start"};function ko(e,t,n){return Te(e,Re(t,n))}function Ue(e,t){return typeof e=="function"?e(t):e}function je(e){return e.split("-")[0]}function vt(e){return e.split("-")[1]}function No(e){return e==="x"?"y":"x"}function xo(e){return e==="y"?"height":"width"}const Au=new Set(["top","bottom"]);function Oe(e){return Au.has(je(e))?"y":"x"}function vo(e){return No(Oe(e))}function Mu(e,t,n){n===void 0&&(n=!1);const o=vt(e),r=vo(e),s=xo(r);let i=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=xn(i)),[i,xn(i)]}function Pu(e){const t=xn(e);return[yo(e),t,yo(t)]}function yo(e){return e.replace(/start|end/g,t=>Su[t])}const hs=["left","right"],ps=["right","left"],Lu=["top","bottom"],Vu=["bottom","top"];function Iu(e,t,n){switch(e){case"top":case"bottom":return n?t?ps:hs:t?hs:ps;case"left":case"right":return t?Lu:Vu;default:return[]}}function Du(e,t,n,o){const r=vt(e);let s=Iu(je(e),n==="start",o);return r&&(s=s.map(i=>i+"-"+r),t&&(s=s.concat(s.map(yo)))),s}function xn(e){return e.replace(/left|right|bottom|top/g,t=>Tu[t])}function Ou(e){return{top:0,right:0,bottom:0,left:0,...e}}function bs(e){return typeof e!="number"?Ou(e):{top:e,right:e,bottom:e,left:e}}function vn(e){const{x:t,y:n,width:o,height:r}=e;return{width:o,height:r,top:n,left:t,right:t+o,bottom:n+r,x:t,y:n}}function gs(e,t,n){let{reference:o,floating:r}=e;const s=Oe(t),i=vo(t),a=xo(i),l=je(t),u=s==="y",d=o.x+o.width/2-r.width/2,m=o.y+o.height/2-r.height/2,h=o[a]/2-r[a]/2;let f;switch(l){case"top":f={x:d,y:o.y-r.height};break;case"bottom":f={x:d,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:m};break;case"left":f={x:o.x-r.width,y:m};break;default:f={x:o.x,y:o.y}}switch(vt(t)){case"start":f[i]-=h*(n&&u?-1:1);break;case"end":f[i]+=h*(n&&u?-1:1);break}return f}const Bu=async(e,t,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:m}=gs(u,o,l),h=o,f={},p=0;for(let b=0;b<a.length;b++){const{name:w,fn:g}=a[b],{x:N,y,data:E,reset:v}=await g({x:d,y:m,initialPlacement:o,placement:h,strategy:r,middlewareData:f,rects:u,platform:i,elements:{reference:e,floating:t}});d=N??d,m=y??m,f={...f,[w]:{...f[w],...E}},v&&p<=50&&(p++,typeof v=="object"&&(v.placement&&(h=v.placement),v.rects&&(u=v.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):v.rects),{x:d,y:m}=gs(u,h,l)),b=-1)}return{x:d,y:m,placement:h,strategy:r,middlewareData:f}};async function qt(e,t){var n;t===void 0&&(t={});const{x:o,y:r,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:h=!1,padding:f=0}=Ue(t,e),p=bs(f),w=a[h?m==="floating"?"reference":"floating":m],g=vn(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),N=m==="floating"?{x:o,y:r,width:i.floating.width,height:i.floating.height}:i.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},v=vn(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:N,offsetParent:y,strategy:l}):N);return{top:(g.top-v.top+p.top)/E.y,bottom:(v.bottom-g.bottom+p.bottom)/E.y,left:(g.left-v.left+p.left)/E.x,right:(v.right-g.right+p.right)/E.x}}const $u=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:r,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=Ue(e,t)||{};if(u==null)return{};const m=bs(d),h={x:n,y:o},f=vo(r),p=xo(f),b=await i.getDimensions(u),w=f==="y",g=w?"top":"left",N=w?"bottom":"right",y=w?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[f]-h[f]-s.floating[p],v=h[f]-s.reference[f],M=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let S=M?M[y]:0;(!S||!await(i.isElement==null?void 0:i.isElement(M)))&&(S=a.floating[y]||s.floating[p]);const T=E/2-v/2,D=S/2-b[p]/2-1,z=Re(m[g],D),q=Re(m[N],D),U=z,j=S-b[p]-q,G=S/2-b[p]/2+T,R=ko(U,G,j),W=!l.arrow&&vt(r)!=null&&G!==R&&s.reference[p]/2-(G<U?z:q)-b[p]/2<0,X=W?G<U?G-U:G-j:0;return{[f]:h[f]+X,data:{[f]:R,centerOffset:G-R-X,...W&&{alignmentOffset:X}},reset:W}}}),zu=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:r,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:b=!0,...w}=Ue(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=je(r),N=Oe(a),y=je(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(u.floating)),v=h||(y||!b?[xn(a)]:Pu(a)),M=p!=="none";!h&&M&&v.push(...Du(a,b,p,E));const S=[a,...v],T=await qt(t,w),D=[];let z=((o=s.flip)==null?void 0:o.overflows)||[];if(d&&D.push(T[g]),m){const G=Mu(r,i,E);D.push(T[G[0]],T[G[1]])}if(z=[...z,{placement:r,overflows:D}],!D.every(G=>G<=0)){var q,U;const G=(((q=s.flip)==null?void 0:q.index)||0)+1,R=S[G];if(R&&(!(m==="alignment"?N!==Oe(R):!1)||z.every(L=>Oe(L.placement)===N?L.overflows[0]>0:!0)))return{data:{index:G,overflows:z},reset:{placement:R}};let W=(U=z.filter(X=>X.overflows[0]<=0).sort((X,L)=>X.overflows[1]-L.overflows[1])[0])==null?void 0:U.placement;if(!W)switch(f){case"bestFit":{var j;const X=(j=z.filter(L=>{if(M){const _=Oe(L.placement);return _===N||_==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(_=>_>0).reduce((_,A)=>_+A,0)]).sort((L,_)=>L[1]-_[1])[0])==null?void 0:j[0];X&&(W=X);break}case"initialPlacement":W=a;break}if(r!==W)return{reset:{placement:W}}}return{}}}};function ws(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ks(e){return Cu.some(t=>e[t]>=0)}const _u=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...r}=Ue(e,t);switch(o){case"referenceHidden":{const s=await qt(t,{...r,elementContext:"reference"}),i=ws(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ks(i)}}}case"escaped":{const s=await qt(t,{...r,altBoundary:!0}),i=ws(s,n.floating);return{data:{escapedOffsets:i,escaped:ks(i)}}}default:return{}}}}},Ns=new Set(["left","top"]);async function Hu(e,t){const{placement:n,platform:o,elements:r}=e,s=await(o.isRTL==null?void 0:o.isRTL(r.floating)),i=je(n),a=vt(n),l=Oe(n)==="y",u=Ns.has(i)?-1:1,d=s&&l?-1:1,m=Ue(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*d,y:h*u}:{x:h*u,y:f*d}}const Fu=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:r,y:s,placement:i,middlewareData:a}=t,l=await Hu(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(o=a.arrow)!=null&&o.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:i}}}}},Wu=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:r}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:w=>{let{x:g,y:N}=w;return{x:g,y:N}}},...l}=Ue(e,t),u={x:n,y:o},d=await qt(t,l),m=Oe(je(r)),h=No(m);let f=u[h],p=u[m];if(s){const w=h==="y"?"top":"left",g=h==="y"?"bottom":"right",N=f+d[w],y=f-d[g];f=ko(N,f,y)}if(i){const w=m==="y"?"top":"left",g=m==="y"?"bottom":"right",N=p+d[w],y=p-d[g];p=ko(N,p,y)}const b=a.fn({...t,[h]:f,[m]:p});return{...b,data:{x:b.x-n,y:b.y-o,enabled:{[h]:s,[m]:i}}}}}},Uu=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:o,placement:r,rects:s,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Ue(e,t),d={x:n,y:o},m=Oe(r),h=No(m);let f=d[h],p=d[m];const b=Ue(a,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const y=h==="y"?"height":"width",E=s.reference[h]-s.floating[y]+w.mainAxis,v=s.reference[h]+s.reference[y]-w.mainAxis;f<E?f=E:f>v&&(f=v)}if(u){var g,N;const y=h==="y"?"width":"height",E=Ns.has(je(r)),v=s.reference[m]-s.floating[y]+(E&&((g=i.offset)==null?void 0:g[m])||0)+(E?0:w.crossAxis),M=s.reference[m]+s.reference[y]+(E?0:((N=i.offset)==null?void 0:N[m])||0)-(E?w.crossAxis:0);p<v?p=v:p>M&&(p=M)}return{[h]:f,[m]:p}}}},ju=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,o;const{placement:r,rects:s,platform:i,elements:a}=t,{apply:l=()=>{},...u}=Ue(e,t),d=await qt(t,u),m=je(r),h=vt(r),f=Oe(r)==="y",{width:p,height:b}=s.floating;let w,g;m==="top"||m==="bottom"?(w=m,g=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(g=m,w=h==="end"?"top":"bottom");const N=b-d.top-d.bottom,y=p-d.left-d.right,E=Re(b-d[w],N),v=Re(p-d[g],y),M=!t.middlewareData.shift;let S=E,T=v;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=y),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(S=N),M&&!h){const z=Te(d.left,0),q=Te(d.right,0),U=Te(d.top,0),j=Te(d.bottom,0);f?T=p-2*(z!==0||q!==0?z+q:Te(d.left,d.right)):S=b-2*(U!==0||j!==0?U+j:Te(d.top,d.bottom))}await l({...t,availableWidth:T,availableHeight:S});const D=await i.getDimensions(a.floating);return p!==D.width||b!==D.height?{reset:{rects:!0}}:{}}}};function yn(){return typeof window<"u"}function yt(e){return xs(e)?(e.nodeName||"").toLowerCase():"#document"}function Se(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Be(e){var t;return(t=(xs(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xs(e){return yn()?e instanceof Node||e instanceof Se(e).Node:!1}function Me(e){return yn()?e instanceof Element||e instanceof Se(e).Element:!1}function $e(e){return yn()?e instanceof HTMLElement||e instanceof Se(e).HTMLElement:!1}function vs(e){return!yn()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Se(e).ShadowRoot}const qu=new Set(["inline","contents"]);function Kt(e){const{overflow:t,overflowX:n,overflowY:o,display:r}=Pe(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!qu.has(r)}const Ku=new Set(["table","td","th"]);function Gu(e){return Ku.has(yt(e))}const Xu=[":popover-open",":modal"];function En(e){return Xu.some(t=>{try{return e.matches(t)}catch{return!1}})}const Yu=["transform","translate","scale","rotate","perspective"],Zu=["transform","translate","scale","rotate","perspective","filter"],Qu=["paint","layout","strict","content"];function Eo(e){const t=Co(),n=Me(e)?Pe(e):e;return Yu.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Zu.some(o=>(n.willChange||"").includes(o))||Qu.some(o=>(n.contain||"").includes(o))}function Ju(e){let t=et(e);for(;$e(t)&&!Et(t);){if(Eo(t))return t;if(En(t))return null;t=et(t)}return null}function Co(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ru=new Set(["html","body","#document"]);function Et(e){return Ru.has(yt(e))}function Pe(e){return Se(e).getComputedStyle(e)}function Cn(e){return Me(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function et(e){if(yt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||vs(e)&&e.host||Be(e);return vs(t)?t.host:t}function ys(e){const t=et(e);return Et(t)?e.ownerDocument?e.ownerDocument.body:e.body:$e(t)&&Kt(t)?t:ys(t)}function Gt(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=ys(e),s=r===((o=e.ownerDocument)==null?void 0:o.body),i=Se(r);if(s){const a=To(i);return t.concat(i,i.visualViewport||[],Kt(r)?r:[],a&&n?Gt(a):[])}return t.concat(r,Gt(r,[],n))}function To(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Es(e){const t=Pe(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=$e(e),s=r?e.offsetWidth:n,i=r?e.offsetHeight:o,a=kn(n)!==s||kn(o)!==i;return a&&(n=s,o=i),{width:n,height:o,$:a}}function So(e){return Me(e)?e:e.contextElement}function Ct(e){const t=So(e);if(!$e(t))return De(1);const n=t.getBoundingClientRect(),{width:o,height:r,$:s}=Es(t);let i=(s?kn(n.width):n.width)/o,a=(s?kn(n.height):n.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const ed=De(0);function Cs(e){const t=Se(e);return!Co()||!t.visualViewport?ed:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function td(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Se(e)?!1:t}function dt(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=So(e);let i=De(1);t&&(o?Me(o)&&(i=Ct(o)):i=Ct(e));const a=td(s,n,o)?Cs(s):De(0);let l=(r.left+a.x)/i.x,u=(r.top+a.y)/i.y,d=r.width/i.x,m=r.height/i.y;if(s){const h=Se(s),f=o&&Me(o)?Se(o):o;let p=h,b=To(p);for(;b&&o&&f!==p;){const w=Ct(b),g=b.getBoundingClientRect(),N=Pe(b),y=g.left+(b.clientLeft+parseFloat(N.paddingLeft))*w.x,E=g.top+(b.clientTop+parseFloat(N.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,m*=w.y,l+=y,u+=E,p=Se(b),b=To(p)}}return vn({width:d,height:m,x:l,y:u})}function Tn(e,t){const n=Cn(e).scrollLeft;return t?t.left+n:dt(Be(e)).left+n}function Ts(e,t){const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-Tn(e,n),r=n.top+t.scrollTop;return{x:o,y:r}}function nd(e){let{elements:t,rect:n,offsetParent:o,strategy:r}=e;const s=r==="fixed",i=Be(o),a=t?En(t.floating):!1;if(o===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=De(1);const d=De(0),m=$e(o);if((m||!m&&!s)&&((yt(o)!=="body"||Kt(i))&&(l=Cn(o)),$e(o))){const f=dt(o);u=Ct(o),d.x=f.x+o.clientLeft,d.y=f.y+o.clientTop}const h=i&&!m&&!s?Ts(i,l):De(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-l.scrollTop*u.y+d.y+h.y}}function od(e){return Array.from(e.getClientRects())}function rd(e){const t=Be(e),n=Cn(e),o=e.ownerDocument.body,r=Te(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=Te(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let i=-n.scrollLeft+Tn(e);const a=-n.scrollTop;return Pe(o).direction==="rtl"&&(i+=Te(t.clientWidth,o.clientWidth)-r),{width:r,height:s,x:i,y:a}}const Ss=25;function sd(e,t){const n=Se(e),o=Be(e),r=n.visualViewport;let s=o.clientWidth,i=o.clientHeight,a=0,l=0;if(r){s=r.width,i=r.height;const d=Co();(!d||d&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const u=Tn(o);if(u<=0){const d=o.ownerDocument,m=d.body,h=getComputedStyle(m),f=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,p=Math.abs(o.clientWidth-m.clientWidth-f);p<=Ss&&(s-=p)}else u<=Ss&&(s+=u);return{width:s,height:i,x:a,y:l}}const id=new Set(["absolute","fixed"]);function ad(e,t){const n=dt(e,!0,t==="fixed"),o=n.top+e.clientTop,r=n.left+e.clientLeft,s=$e(e)?Ct(e):De(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,u=o*s.y;return{width:i,height:a,x:l,y:u}}function As(e,t,n){let o;if(t==="viewport")o=sd(e,n);else if(t==="document")o=rd(Be(e));else if(Me(t))o=ad(t,n);else{const r=Cs(e);o={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return vn(o)}function Ms(e,t){const n=et(e);return n===t||!Me(n)||Et(n)?!1:Pe(n).position==="fixed"||Ms(n,t)}function ld(e,t){const n=t.get(e);if(n)return n;let o=Gt(e,[],!1).filter(a=>Me(a)&&yt(a)!=="body"),r=null;const s=Pe(e).position==="fixed";let i=s?et(e):e;for(;Me(i)&&!Et(i);){const a=Pe(i),l=Eo(i);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&id.has(r.position)||Kt(i)&&!l&&Ms(e,i))?o=o.filter(d=>d!==i):r=a,i=et(i)}return t.set(e,o),o}function cd(e){let{element:t,boundary:n,rootBoundary:o,strategy:r}=e;const i=[...n==="clippingAncestors"?En(t)?[]:ld(t,this._c):[].concat(n),o],a=i[0],l=i.reduce((u,d)=>{const m=As(t,d,r);return u.top=Te(m.top,u.top),u.right=Re(m.right,u.right),u.bottom=Re(m.bottom,u.bottom),u.left=Te(m.left,u.left),u},As(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ud(e){const{width:t,height:n}=Es(e);return{width:t,height:n}}function dd(e,t,n){const o=$e(t),r=Be(t),s=n==="fixed",i=dt(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=De(0);function u(){l.x=Tn(r)}if(o||!o&&!s)if((yt(t)!=="body"||Kt(r))&&(a=Cn(t)),o){const f=dt(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&u();s&&!o&&r&&u();const d=r&&!o&&!s?Ts(r,a):De(0),m=i.left+a.scrollLeft-l.x-d.x,h=i.top+a.scrollTop-l.y-d.y;return{x:m,y:h,width:i.width,height:i.height}}function Ao(e){return Pe(e).position==="static"}function Ps(e,t){if(!$e(e)||Pe(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Be(e)===n&&(n=n.ownerDocument.body),n}function Ls(e,t){const n=Se(e);if(En(e))return n;if(!$e(e)){let r=et(e);for(;r&&!Et(r);){if(Me(r)&&!Ao(r))return r;r=et(r)}return n}let o=Ps(e,t);for(;o&&Gu(o)&&Ao(o);)o=Ps(o,t);return o&&Et(o)&&Ao(o)&&!Eo(o)?n:o||Ju(e)||n}const md=async function(e){const t=this.getOffsetParent||Ls,n=this.getDimensions,o=await n(e.floating);return{reference:dd(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function fd(e){return Pe(e).direction==="rtl"}const hd={convertOffsetParentRelativeRectToViewportRelativeRect:nd,getDocumentElement:Be,getClippingRect:cd,getOffsetParent:Ls,getElementRects:md,getClientRects:od,getDimensions:ud,getScale:Ct,isElement:Me,isRTL:fd};function Vs(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pd(e,t){let n=null,o;const r=Be(e);function s(){var a;clearTimeout(o),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=e.getBoundingClientRect(),{left:d,top:m,width:h,height:f}=u;if(a||t(),!h||!f)return;const p=Nn(m),b=Nn(r.clientWidth-(d+h)),w=Nn(r.clientHeight-(m+f)),g=Nn(d),y={rootMargin:-p+"px "+-b+"px "+-w+"px "+-g+"px",threshold:Te(0,Re(1,l))||1};let E=!0;function v(M){const S=M[0].intersectionRatio;if(S!==l){if(!E)return i();S?i(!1,S):o=setTimeout(()=>{i(!1,1e-7)},1e3)}S===1&&!Vs(u,e.getBoundingClientRect())&&i(),E=!1}try{n=new IntersectionObserver(v,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(v,y)}n.observe(e)}return i(!0),s}function bd(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,u=So(e),d=r||s?[...u?Gt(u):[],...Gt(t)]:[];d.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const m=u&&a?pd(u,n):null;let h=-1,f=null;i&&(f=new ResizeObserver(g=>{let[N]=g;N&&N.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(t)})),n()}),u&&!l&&f.observe(u),f.observe(t));let p,b=l?dt(e):null;l&&w();function w(){const g=dt(e);b&&!Vs(b,g)&&n(),b=g,p=requestAnimationFrame(w)}return n(),()=>{var g;d.forEach(N=>{r&&N.removeEventListener("scroll",n),s&&N.removeEventListener("resize",n)}),m?.(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const gd=Fu,wd=Wu,kd=zu,Nd=ju,xd=_u,Is=$u,vd=Uu,yd=(e,t,n)=>{const o=new Map,r={platform:hd,...n},s={...r.platform,_c:o};return Bu(e,t,{...r,platform:s})};var Ed=typeof document<"u",Cd=function(){},Sn=Ed?x.useLayoutEffect:Cd;function An(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,o,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!An(e[o],t[o]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,r[o]))return!1;for(o=n;o--!==0;){const s=r[o];if(!(s==="_owner"&&e.$$typeof)&&!An(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ds(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Os(e,t){const n=Ds(e);return Math.round(t*n)/n}function Mo(e){const t=k.useRef(e);return Sn(()=>{t.current=e}),t}function Td(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:r,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[d,m]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=k.useState(o);An(h,o)||f(o);const[p,b]=k.useState(null),[w,g]=k.useState(null),N=k.useCallback(L=>{L!==M.current&&(M.current=L,b(L))},[]),y=k.useCallback(L=>{L!==S.current&&(S.current=L,g(L))},[]),E=s||p,v=i||w,M=k.useRef(null),S=k.useRef(null),T=k.useRef(d),D=l!=null,z=Mo(l),q=Mo(r),U=Mo(u),j=k.useCallback(()=>{if(!M.current||!S.current)return;const L={placement:t,strategy:n,middleware:h};q.current&&(L.platform=q.current),yd(M.current,S.current,L).then(_=>{const A={..._,isPositioned:U.current!==!1};G.current&&!An(T.current,A)&&(T.current=A,jr.flushSync(()=>{m(A)}))})},[h,t,n,q,U]);Sn(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[u]);const G=k.useRef(!1);Sn(()=>(G.current=!0,()=>{G.current=!1}),[]),Sn(()=>{if(E&&(M.current=E),v&&(S.current=v),E&&v){if(z.current)return z.current(E,v,j);j()}},[E,v,j,z,D]);const R=k.useMemo(()=>({reference:M,floating:S,setReference:N,setFloating:y}),[N,y]),W=k.useMemo(()=>({reference:E,floating:v}),[E,v]),X=k.useMemo(()=>{const L={position:n,left:0,top:0};if(!W.floating)return L;const _=Os(W.floating,d.x),A=Os(W.floating,d.y);return a?{...L,transform:"translate("+_+"px, "+A+"px)",...Ds(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:A}},[n,a,W.floating,d.x,d.y]);return k.useMemo(()=>({...d,update:j,refs:R,elements:W,floatingStyles:X}),[d,j,R,W,X])}const Sd=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:o,padding:r}=typeof e=="function"?e(n):e;return o&&t(o)?o.current!=null?Is({element:o.current,padding:r}).fn(n):{}:o?Is({element:o,padding:r}).fn(n):{}}}},Ad=(e,t)=>({...gd(e),options:[e,t]}),Md=(e,t)=>({...wd(e),options:[e,t]}),Pd=(e,t)=>({...vd(e),options:[e,t]}),Ld=(e,t)=>({...kd(e),options:[e,t]}),Vd=(e,t)=>({...Nd(e),options:[e,t]}),Id=(e,t)=>({...xd(e),options:[e,t]}),Dd=(e,t)=>({...Sd(e),options:[e,t]});var Od="Arrow",Bs=k.forwardRef((e,t)=>{const{children:n,width:o=10,height:r=5,...s}=e;return P.jsx(ge.svg,{...s,ref:t,width:o,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:P.jsx("polygon",{points:"0,0 30,0 15,10"})})});Bs.displayName=Od;var Bd=Bs;function $d(e){const[t,n]=k.useState(void 0);return Qe(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,a=u.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}var Po="Popper",[$s,Mn]=Nt(Po),[zd,zs]=$s(Po),_s=e=>{const{__scopePopper:t,children:n}=e,[o,r]=k.useState(null);return P.jsx(zd,{scope:t,anchor:o,onAnchorChange:r,children:n})};_s.displayName=Po;var Hs="PopperAnchor",Fs=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...r}=e,s=zs(Hs,n),i=k.useRef(null),a=Ne(t,i),l=k.useRef(null);return k.useEffect(()=>{const u=l.current;l.current=o?.current||i.current,u!==l.current&&s.onAnchorChange(l.current)}),o?null:P.jsx(ge.div,{...r,ref:a})});Fs.displayName=Hs;var Lo="PopperContent",[_d,Hd]=$s(Lo),Ws=k.forwardRef((e,t)=>{const{__scopePopper:n,side:o="bottom",sideOffset:r=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...b}=e,w=zs(Lo,n),[g,N]=k.useState(null),y=Ne(t,Z=>N(Z)),[E,v]=k.useState(null),M=$d(E),S=M?.width??0,T=M?.height??0,D=o+(s!=="center"?"-"+s:""),z=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},q=Array.isArray(u)?u:[u],U=q.length>0,j={padding:z,boundary:q.filter(Wd),altBoundary:U},{refs:G,floatingStyles:R,placement:W,isPositioned:X,middlewareData:L}=Td({strategy:"fixed",placement:D,whileElementsMounted:(...Z)=>bd(...Z,{animationFrame:f==="always"}),elements:{reference:w.anchor},middleware:[Ad({mainAxis:r+T,alignmentAxis:i}),l&&Md({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Pd():void 0,...j}),l&&Ld({...j}),Vd({...j,apply:({elements:Z,rects:Ce,availableWidth:_e,availableHeight:He})=>{const{width:it,height:Xe}=Ce.reference,wt=Z.floating.style;wt.setProperty("--radix-popper-available-width",`${_e}px`),wt.setProperty("--radix-popper-available-height",`${He}px`),wt.setProperty("--radix-popper-anchor-width",`${it}px`),wt.setProperty("--radix-popper-anchor-height",`${Xe}px`)}}),E&&Dd({element:E,padding:a}),Ud({arrowWidth:S,arrowHeight:T}),h&&Id({strategy:"referenceHidden",...j})]}),[_,A]=qs(W),$=Ie(p);Qe(()=>{X&&$?.()},[X,$]);const K=L.arrow?.x,Y=L.arrow?.y,se=L.arrow?.centerOffset!==0,[ce,be]=k.useState();return Qe(()=>{g&&be(window.getComputedStyle(g).zIndex)},[g]),P.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:X?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:P.jsx(_d,{scope:n,placedSide:_,onArrowChange:v,arrowX:K,arrowY:Y,shouldHideArrow:se,children:P.jsx(ge.div,{"data-side":_,"data-align":A,...b,ref:y,style:{...b.style,animation:X?void 0:"none"}})})})});Ws.displayName=Lo;var Us="PopperArrow",Fd={top:"bottom",right:"left",bottom:"top",left:"right"},js=k.forwardRef(function(t,n){const{__scopePopper:o,...r}=t,s=Hd(Us,o),i=Fd[s.placedSide];return P.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:P.jsx(Bd,{...r,ref:n,style:{...r.style,display:"block"}})})});js.displayName=Us;function Wd(e){return e!==null}var Ud=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:o,middlewareData:r}=t,i=r.arrow?.centerOffset!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[u,d]=qs(n),m={start:"0%",center:"50%",end:"100%"}[d],h=(r.arrow?.x??0)+a/2,f=(r.arrow?.y??0)+l/2;let p="",b="";return u==="bottom"?(p=i?m:`${h}px`,b=`${-l}px`):u==="top"?(p=i?m:`${h}px`,b=`${o.floating.height+l}px`):u==="right"?(p=`${-l}px`,b=i?m:`${f}px`):u==="left"&&(p=`${o.floating.width+l}px`,b=i?m:`${f}px`),{data:{x:p,y:b}}}});function qs(e){const[t,n="center"]=e.split("-");return[t,n]}var Vo=_s,Ks=Fs,Gs=Ws,Xs=js,jd="Portal",Io=k.forwardRef((e,t)=>{const{container:n,...o}=e,[r,s]=k.useState(!1);Qe(()=>s(!0),[]);const i=n||r&&globalThis?.document?.body;return i?kt.createPortal(P.jsx(ge.div,{...o,ref:t}),i):null});Io.displayName=jd;function qd(e,t){return k.useReducer((n,o)=>t[n][o]??n,e)}var mt=e=>{const{present:t,children:n}=e,o=Kd(t),r=typeof n=="function"?n({present:o.isPresent}):k.Children.only(n),s=Ne(o.ref,Gd(r));return typeof n=="function"||o.isPresent?k.cloneElement(r,{ref:s}):null};mt.displayName="Presence";function Kd(e){const[t,n]=k.useState(),o=k.useRef(null),r=k.useRef(e),s=k.useRef("none"),i=e?"mounted":"unmounted",[a,l]=qd(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const u=Pn(o.current);s.current=a==="mounted"?u:"none"},[a]),Qe(()=>{const u=o.current,d=r.current;if(d!==e){const h=s.current,f=Pn(u);e?l("MOUNT"):f==="none"||u?.display==="none"?l("UNMOUNT"):l(d&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),Qe(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,m=f=>{const b=Pn(o.current).includes(CSS.escape(f.animationName));if(f.target===t&&b&&(l("ANIMATION_END"),!r.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},h=f=>{f.target===t&&(s.current=Pn(o.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(u=>{o.current=u?getComputedStyle(u):null,n(u)},[])}}function Pn(e){return e?.animationName||"none"}function Gd(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Do="rovingFocusGroup.onEntryFocus",Xd={bubbles:!1,cancelable:!0},Xt="RovingFocusGroup",[Oo,Ys,Yd]=ts(Xt),[Zd,Zs]=Nt(Xt,[Yd]),[Qd,Jd]=Zd(Xt),Qs=k.forwardRef((e,t)=>P.jsx(Oo.Provider,{scope:e.__scopeRovingFocusGroup,children:P.jsx(Oo.Slot,{scope:e.__scopeRovingFocusGroup,children:P.jsx(Rd,{...e,ref:t})})}));Qs.displayName=Xt;var Rd=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:r=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=e,h=k.useRef(null),f=Ne(t,h),p=ns(s),[b,w]=wn({prop:i,defaultProp:a??null,onChange:l,caller:Xt}),[g,N]=k.useState(!1),y=Ie(u),E=Ys(n),v=k.useRef(!1),[M,S]=k.useState(0);return k.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(Do,y),()=>T.removeEventListener(Do,y)},[y]),P.jsx(Qd,{scope:n,orientation:o,dir:p,loop:r,currentTabStopId:b,onItemFocus:k.useCallback(T=>w(T),[w]),onItemShiftTab:k.useCallback(()=>N(!0),[]),onFocusableItemAdd:k.useCallback(()=>S(T=>T+1),[]),onFocusableItemRemove:k.useCallback(()=>S(T=>T-1),[]),children:P.jsx(ge.div,{tabIndex:g||M===0?-1:0,"data-orientation":o,...m,ref:f,style:{outline:"none",...e.style},onMouseDown:ee(e.onMouseDown,()=>{v.current=!0}),onFocus:ee(e.onFocus,T=>{const D=!v.current;if(T.target===T.currentTarget&&D&&!g){const z=new CustomEvent(Do,Xd);if(T.currentTarget.dispatchEvent(z),!z.defaultPrevented){const q=E().filter(W=>W.focusable),U=q.find(W=>W.active),j=q.find(W=>W.id===b),R=[U,j,...q].filter(Boolean).map(W=>W.ref.current);ei(R,d)}}v.current=!1}),onBlur:ee(e.onBlur,()=>N(!1))})})}),Js="RovingFocusGroupItem",Rs=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:r=!1,tabStopId:s,children:i,...a}=e,l=xt(),u=s||l,d=Jd(Js,n),m=d.currentTabStopId===u,h=Ys(n),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:b}=d;return k.useEffect(()=>{if(o)return f(),()=>p()},[o,f,p]),P.jsx(Oo.ItemSlot,{scope:n,id:u,focusable:o,active:r,children:P.jsx(ge.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...a,ref:t,onMouseDown:ee(e.onMouseDown,w=>{o?d.onItemFocus(u):w.preventDefault()}),onFocus:ee(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ee(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const g=nm(w,d.orientation,d.dir);if(g!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=h().filter(E=>E.focusable).map(E=>E.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const E=y.indexOf(w.currentTarget);y=d.loop?om(y,E+1):y.slice(E+1)}setTimeout(()=>ei(y))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:b!=null}):i})})});Rs.displayName=Js;var em={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tm(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function nm(e,t,n){const o=tm(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return em[o]}function ei(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function om(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var rm=Qs,sm=Rs,im=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tt=new WeakMap,Ln=new WeakMap,Vn={},Bo=0,ti=function(e){return e&&(e.host||ti(e.parentNode))},am=function(e,t){return t.map(function(n){if(e.contains(n))return n;var o=ti(n);return o&&e.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},lm=function(e,t,n,o){var r=am(t,Array.isArray(e)?e:[e]);Vn[n]||(Vn[n]=new WeakMap);var s=Vn[n],i=[],a=new Set,l=new Set(r),u=function(m){!m||a.has(m)||(a.add(m),u(m.parentNode))};r.forEach(u);var d=function(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,function(h){if(a.has(h))d(h);else try{var f=h.getAttribute(o),p=f!==null&&f!=="false",b=(Tt.get(h)||0)+1,w=(s.get(h)||0)+1;Tt.set(h,b),s.set(h,w),i.push(h),b===1&&p&&Ln.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(o,"true")}catch(g){console.error("aria-hidden: cannot operate on ",h,g)}})};return d(t),a.clear(),Bo++,function(){i.forEach(function(m){var h=Tt.get(m)-1,f=s.get(m)-1;Tt.set(m,h),s.set(m,f),h||(Ln.has(m)||m.removeAttribute(o),Ln.delete(m)),f||m.removeAttribute(n)}),Bo--,Bo||(Tt=new WeakMap,Tt=new WeakMap,Ln=new WeakMap,Vn={})}},cm=function(e,t,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),r=im(e);return r?(o.push.apply(o,Array.from(r.querySelectorAll("[aria-live], script"))),lm(o,r,n,"aria-hidden")):function(){return null}},ze=function(){return ze=Object.assign||function(t){for(var n,o=1,r=arguments.length;o<r;o++){n=arguments[o];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ze.apply(this,arguments)};function ni(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function um(e,t,n){if(n||arguments.length===2)for(var o=0,r=t.length,s;o<r;o++)(s||!(o in t))&&(s||(s=Array.prototype.slice.call(t,0,o)),s[o]=t[o]);return e.concat(s||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;var In="right-scroll-bar-position",Dn="width-before-scroll-bar",dm="with-scroll-bars-hidden",mm="--removed-body-scroll-bar-size";function $o(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function fm(e,t){var n=x.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(o){var r=n.value;r!==o&&(n.value=o,n.callback(o,r))}}}})[0];return n.callback=t,n.facade}var hm=typeof window<"u"?k.useLayoutEffect:k.useEffect,oi=new WeakMap;function pm(e,t){var n=fm(null,function(o){return e.forEach(function(r){return $o(r,o)})});return hm(function(){var o=oi.get(n);if(o){var r=new Set(o),s=new Set(e),i=n.current;r.forEach(function(a){s.has(a)||$o(a,null)}),s.forEach(function(a){r.has(a)||$o(a,i)})}oi.set(n,e)},[e]),n}function bm(e){return e}function gm(e,t){t===void 0&&(t=bm);var n=[],o=!1,r={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,o);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(o=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){o=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var d=i;i=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return r}function wm(e){e===void 0&&(e={});var t=gm(null);return t.options=ze({async:!0,ssr:!1},e),t}var ri=function(e){var t=e.sideCar,n=ni(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return k.createElement(o,ze({},n))};ri.isSideCarExport=!0;function km(e,t){return e.useMedium(t),ri}var si=wm(),zo=function(){},On=k.forwardRef(function(e,t){var n=k.useRef(null),o=k.useState({onScrollCapture:zo,onWheelCapture:zo,onTouchMoveCapture:zo}),r=o[0],s=o[1],i=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,b=e.inert,w=e.allowPinchZoom,g=e.as,N=g===void 0?"div":g,y=e.gapMode,E=ni(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=h,M=pm([n,t]),S=ze(ze({},E),r);return k.createElement(k.Fragment,null,d&&k.createElement(v,{sideCar:si,removeScrollBar:u,shards:m,noRelative:f,noIsolation:p,inert:b,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:y}),i?k.cloneElement(k.Children.only(a),ze(ze({},S),{ref:M})):k.createElement(N,ze({},S,{className:l,ref:M}),a))});On.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},On.classNames={fullWidth:Dn,zeroRight:In};var Nm=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xm(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Nm();return t&&e.setAttribute("nonce",t),e}function vm(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ym(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Em=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xm())&&(vm(t,n),ym(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Cm=function(){var e=Em();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ii=function(){var e=Cm(),t=function(n){var o=n.styles,r=n.dynamic;return e(o,r),null};return t},Tm={left:0,top:0,right:0,gap:0},_o=function(e){return parseInt(e||"",10)||0},Sm=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[_o(n),_o(o),_o(r)]},Am=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Tm;var t=Sm(e),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-n+t[2]-t[0])}},Mm=ii(),St="data-scroll-locked",Pm=function(e,t,n,o){var r=e.left,s=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(dm,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(a,"px ").concat(o,`;
  }
  body[`).concat(St,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(In,` {
    right: `).concat(a,"px ").concat(o,`;
  }
  
  .`).concat(Dn,` {
    margin-right: `).concat(a,"px ").concat(o,`;
  }
  
  .`).concat(In," .").concat(In,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(Dn," .").concat(Dn,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(St,`] {
    `).concat(mm,": ").concat(a,`px;
  }
`)},ai=function(){var e=parseInt(document.body.getAttribute(St)||"0",10);return isFinite(e)?e:0},Lm=function(){k.useEffect(function(){return document.body.setAttribute(St,(ai()+1).toString()),function(){var e=ai()-1;e<=0?document.body.removeAttribute(St):document.body.setAttribute(St,e.toString())}},[])},Vm=function(e){var t=e.noRelative,n=e.noImportant,o=e.gapMode,r=o===void 0?"margin":o;Lm();var s=k.useMemo(function(){return Am(r)},[r]);return k.createElement(Mm,{styles:Pm(s,!t,r,n?"":"!important")})},Ho=!1;if(typeof window<"u")try{var Bn=Object.defineProperty({},"passive",{get:function(){return Ho=!0,!0}});window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{Ho=!1}var At=Ho?{passive:!1}:!1,Im=function(e){return e.tagName==="TEXTAREA"},li=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Im(e)&&n[t]==="visible")},Dm=function(e){return li(e,"overflowY")},Om=function(e){return li(e,"overflowX")},ci=function(e,t){var n=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var r=ui(e,o);if(r){var s=di(e,o),i=s[1],a=s[2];if(i>a)return!0}o=o.parentNode}while(o&&o!==n.body);return!1},Bm=function(e){var t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;return[t,n,o]},$m=function(e){var t=e.scrollLeft,n=e.scrollWidth,o=e.clientWidth;return[t,n,o]},ui=function(e,t){return e==="v"?Dm(t):Om(t)},di=function(e,t){return e==="v"?Bm(t):$m(t)},zm=function(e,t){return e==="h"&&t==="rtl"?-1:1},_m=function(e,t,n,o,r){var s=zm(e,window.getComputedStyle(t).direction),i=s*o,a=n.target,l=t.contains(a),u=!1,d=i>0,m=0,h=0;do{if(!a)break;var f=di(e,a),p=f[0],b=f[1],w=f[2],g=b-w-s*p;(p||g)&&ui(e,a)&&(m+=g,h+=p);var N=a.parentNode;a=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&Math.abs(m)<1||!d&&Math.abs(h)<1)&&(u=!0),u},$n=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mi=function(e){return[e.deltaX,e.deltaY]},fi=function(e){return e&&"current"in e?e.current:e},Hm=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Fm=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Wm=0,Mt=[];function Um(e){var t=k.useRef([]),n=k.useRef([0,0]),o=k.useRef(),r=k.useState(Wm++)[0],s=k.useState(ii)[0],i=k.useRef(e);k.useEffect(function(){i.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var b=um([e.lockRef.current],(e.shards||[]).map(fi),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!i.current.allowPinchZoom;var g=$n(b),N=n.current,y="deltaX"in b?b.deltaX:N[0]-g[0],E="deltaY"in b?b.deltaY:N[1]-g[1],v,M=b.target,S=Math.abs(y)>Math.abs(E)?"h":"v";if("touches"in b&&S==="h"&&M.type==="range")return!1;var T=ci(S,M);if(!T)return!0;if(T?v=S:(v=S==="v"?"h":"v",T=ci(S,M)),!T)return!1;if(!o.current&&"changedTouches"in b&&(y||E)&&(o.current=v),!v)return!0;var D=o.current||v;return _m(D,w,b,D==="h"?y:E)},[]),l=k.useCallback(function(b){var w=b;if(!(!Mt.length||Mt[Mt.length-1]!==s)){var g="deltaY"in w?mi(w):$n(w),N=t.current.filter(function(v){return v.name===w.type&&(v.target===w.target||w.target===v.shadowParent)&&Hm(v.delta,g)})[0];if(N&&N.should){w.cancelable&&w.preventDefault();return}if(!N){var y=(i.current.shards||[]).map(fi).filter(Boolean).filter(function(v){return v.contains(w.target)}),E=y.length>0?a(w,y[0]):!i.current.noIsolation;E&&w.cancelable&&w.preventDefault()}}},[]),u=k.useCallback(function(b,w,g,N){var y={name:b,delta:w,target:g,should:N,shadowParent:jm(g)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(E){return E!==y})},1)},[]),d=k.useCallback(function(b){n.current=$n(b),o.current=void 0},[]),m=k.useCallback(function(b){u(b.type,mi(b),b.target,a(b,e.lockRef.current))},[]),h=k.useCallback(function(b){u(b.type,$n(b),b.target,a(b,e.lockRef.current))},[]);k.useEffect(function(){return Mt.push(s),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",l,At),document.addEventListener("touchmove",l,At),document.addEventListener("touchstart",d,At),function(){Mt=Mt.filter(function(b){return b!==s}),document.removeEventListener("wheel",l,At),document.removeEventListener("touchmove",l,At),document.removeEventListener("touchstart",d,At)}},[]);var f=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:Fm(r)}):null,f?k.createElement(Vm,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function jm(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const qm=km(si,Um);var hi=k.forwardRef(function(e,t){return k.createElement(On,ze({},e,{ref:t,sideCar:qm}))});hi.classNames=On.classNames;var Fo=["Enter"," "],Km=["ArrowDown","PageUp","Home"],pi=["ArrowUp","PageDown","End"],Gm=[...Km,...pi],Xm={ltr:[...Fo,"ArrowRight"],rtl:[...Fo,"ArrowLeft"]},Ym={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Yt="Menu",[Zt,Zm,Qm]=ts(Yt),[ft,bi]=Nt(Yt,[Qm,Mn,Zs]),Qt=Mn(),gi=Zs(),[wi,tt]=ft(Yt),[Jm,Jt]=ft(Yt),ki=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:r,onOpenChange:s,modal:i=!0}=e,a=Qt(t),[l,u]=k.useState(null),d=k.useRef(!1),m=Ie(s),h=ns(r);return k.useEffect(()=>{const f=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),P.jsx(Vo,{...a,children:P.jsx(wi,{scope:t,open:n,onOpenChange:m,content:l,onContentChange:u,children:P.jsx(Jm,{scope:t,onClose:k.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:d,dir:h,modal:i,children:o})})})};ki.displayName=Yt;var Rm="MenuAnchor",Wo=k.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=Qt(n);return P.jsx(Ks,{...r,...o,ref:t})});Wo.displayName=Rm;var Uo="MenuPortal",[ef,Ni]=ft(Uo,{forceMount:void 0}),xi=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:r}=e,s=tt(Uo,t);return P.jsx(ef,{scope:t,forceMount:n,children:P.jsx(mt,{present:n||s.open,children:P.jsx(Io,{asChild:!0,container:r,children:o})})})};xi.displayName=Uo;var Ae="MenuContent",[tf,jo]=ft(Ae),vi=k.forwardRef((e,t)=>{const n=Ni(Ae,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,s=tt(Ae,e.__scopeMenu),i=Jt(Ae,e.__scopeMenu);return P.jsx(Zt.Provider,{scope:e.__scopeMenu,children:P.jsx(mt,{present:o||s.open,children:P.jsx(Zt.Slot,{scope:e.__scopeMenu,children:i.modal?P.jsx(nf,{...r,ref:t}):P.jsx(of,{...r,ref:t})})})})}),nf=k.forwardRef((e,t)=>{const n=tt(Ae,e.__scopeMenu),o=k.useRef(null),r=Ne(t,o);return k.useEffect(()=>{const s=o.current;if(s)return cm(s)},[]),P.jsx(qo,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ee(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),of=k.forwardRef((e,t)=>{const n=tt(Ae,e.__scopeMenu);return P.jsx(qo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),rf=jt("MenuContent.ScrollLock"),qo=k.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...b}=e,w=tt(Ae,n),g=Jt(Ae,n),N=Qt(n),y=gi(n),E=Zm(n),[v,M]=k.useState(null),S=k.useRef(null),T=Ne(t,S,w.onContentChange),D=k.useRef(0),z=k.useRef(""),q=k.useRef(0),U=k.useRef(null),j=k.useRef("right"),G=k.useRef(0),R=p?hi:k.Fragment,W=p?{as:rf,allowPinchZoom:!0}:void 0,X=_=>{const A=z.current+_,$=E().filter(Z=>!Z.disabled),K=document.activeElement,Y=$.find(Z=>Z.ref.current===K)?.textValue,se=$.map(Z=>Z.textValue),ce=gf(se,A,Y),be=$.find(Z=>Z.textValue===ce)?.ref.current;(function Z(Ce){z.current=Ce,window.clearTimeout(D.current),Ce!==""&&(D.current=window.setTimeout(()=>Z(""),1e3))})(A),be&&setTimeout(()=>be.focus())};k.useEffect(()=>()=>window.clearTimeout(D.current),[]),pu();const L=k.useCallback(_=>j.current===U.current?.side&&kf(_,U.current?.area),[]);return P.jsx(tf,{scope:n,searchRef:z,onItemEnter:k.useCallback(_=>{L(_)&&_.preventDefault()},[L]),onItemLeave:k.useCallback(_=>{L(_)||(S.current?.focus(),M(null))},[L]),onTriggerLeave:k.useCallback(_=>{L(_)&&_.preventDefault()},[L]),pointerGraceTimerRef:q,onPointerGraceIntentChange:k.useCallback(_=>{U.current=_},[]),children:P.jsx(R,{...W,children:P.jsx(cs,{asChild:!0,trapped:r,onMountAutoFocus:ee(s,_=>{_.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:P.jsx(po,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:h,onDismiss:f,children:P.jsx(rm,{asChild:!0,...y,dir:g.dir,orientation:"vertical",loop:o,currentTabStopId:v,onCurrentTabStopIdChange:M,onEntryFocus:ee(l,_=>{g.isUsingKeyboardRef.current||_.preventDefault()}),preventScrollOnEntryFocus:!0,children:P.jsx(Gs,{role:"menu","aria-orientation":"vertical","data-state":Hi(w.open),"data-radix-menu-content":"",dir:g.dir,...N,...b,ref:T,style:{outline:"none",...b.style},onKeyDown:ee(b.onKeyDown,_=>{const $=_.target.closest("[data-radix-menu-content]")===_.currentTarget,K=_.ctrlKey||_.altKey||_.metaKey,Y=_.key.length===1;$&&(_.key==="Tab"&&_.preventDefault(),!K&&Y&&X(_.key));const se=S.current;if(_.target!==se||!Gm.includes(_.key))return;_.preventDefault();const be=E().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);pi.includes(_.key)&&be.reverse(),pf(be)}),onBlur:ee(e.onBlur,_=>{_.currentTarget.contains(_.target)||(window.clearTimeout(D.current),z.current="")}),onPointerMove:ee(e.onPointerMove,en(_=>{const A=_.target,$=G.current!==_.clientX;if(_.currentTarget.contains(A)&&$){const K=_.clientX>G.current?"right":"left";j.current=K,G.current=_.clientX}}))})})})})})})});vi.displayName=Ae;var sf="MenuGroup",Ko=k.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return P.jsx(ge.div,{role:"group",...o,ref:t})});Ko.displayName=sf;var af="MenuLabel",yi=k.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return P.jsx(ge.div,{...o,ref:t})});yi.displayName=af;var zn="MenuItem",Ei="menu.itemSelect",_n=k.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...r}=e,s=k.useRef(null),i=Jt(zn,e.__scopeMenu),a=jo(zn,e.__scopeMenu),l=Ne(t,s),u=k.useRef(!1),d=()=>{const m=s.current;if(!n&&m){const h=new CustomEvent(Ei,{bubbles:!0,cancelable:!0});m.addEventListener(Ei,f=>o?.(f),{once:!0}),es(m,h),h.defaultPrevented?u.current=!1:i.onClose()}};return P.jsx(Ci,{...r,ref:l,disabled:n,onClick:ee(e.onClick,d),onPointerDown:m=>{e.onPointerDown?.(m),u.current=!0},onPointerUp:ee(e.onPointerUp,m=>{u.current||m.currentTarget?.click()}),onKeyDown:ee(e.onKeyDown,m=>{const h=a.searchRef.current!=="";n||h&&m.key===" "||Fo.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});_n.displayName=zn;var Ci=k.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:r,...s}=e,i=jo(zn,n),a=gi(n),l=k.useRef(null),u=Ne(t,l),[d,m]=k.useState(!1),[h,f]=k.useState("");return k.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[s.children]),P.jsx(Zt.ItemSlot,{scope:n,disabled:o,textValue:r??h,children:P.jsx(sm,{asChild:!0,...a,focusable:!o,children:P.jsx(ge.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...s,ref:u,onPointerMove:ee(e.onPointerMove,en(p=>{o?i.onItemLeave(p):(i.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ee(e.onPointerLeave,en(p=>i.onItemLeave(p))),onFocus:ee(e.onFocus,()=>m(!0)),onBlur:ee(e.onBlur,()=>m(!1))})})})}),lf="MenuCheckboxItem",Ti=k.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...r}=e;return P.jsx(Li,{scope:e.__scopeMenu,checked:n,children:P.jsx(_n,{role:"menuitemcheckbox","aria-checked":Hn(n)?"mixed":n,...r,ref:t,"data-state":Yo(n),onSelect:ee(r.onSelect,()=>o?.(Hn(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Ti.displayName=lf;var Si="MenuRadioGroup",[cf,uf]=ft(Si,{value:void 0,onValueChange:()=>{}}),Ai=k.forwardRef((e,t)=>{const{value:n,onValueChange:o,...r}=e,s=Ie(o);return P.jsx(cf,{scope:e.__scopeMenu,value:n,onValueChange:s,children:P.jsx(Ko,{...r,ref:t})})});Ai.displayName=Si;var Mi="MenuRadioItem",Pi=k.forwardRef((e,t)=>{const{value:n,...o}=e,r=uf(Mi,e.__scopeMenu),s=n===r.value;return P.jsx(Li,{scope:e.__scopeMenu,checked:s,children:P.jsx(_n,{role:"menuitemradio","aria-checked":s,...o,ref:t,"data-state":Yo(s),onSelect:ee(o.onSelect,()=>r.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Pi.displayName=Mi;var Go="MenuItemIndicator",[Li,df]=ft(Go,{checked:!1}),Vi=k.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...r}=e,s=df(Go,n);return P.jsx(mt,{present:o||Hn(s.checked)||s.checked===!0,children:P.jsx(ge.span,{...r,ref:t,"data-state":Yo(s.checked)})})});Vi.displayName=Go;var mf="MenuSeparator",Ii=k.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return P.jsx(ge.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});Ii.displayName=mf;var ff="MenuArrow",Di=k.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=Qt(n);return P.jsx(Xs,{...r,...o,ref:t})});Di.displayName=ff;var Xo="MenuSub",[hf,Oi]=ft(Xo),Bi=e=>{const{__scopeMenu:t,children:n,open:o=!1,onOpenChange:r}=e,s=tt(Xo,t),i=Qt(t),[a,l]=k.useState(null),[u,d]=k.useState(null),m=Ie(r);return k.useEffect(()=>(s.open===!1&&m(!1),()=>m(!1)),[s.open,m]),P.jsx(Vo,{...i,children:P.jsx(wi,{scope:t,open:o,onOpenChange:m,content:u,onContentChange:d,children:P.jsx(hf,{scope:t,contentId:xt(),triggerId:xt(),trigger:a,onTriggerChange:l,children:n})})})};Bi.displayName=Xo;var Rt="MenuSubTrigger",$i=k.forwardRef((e,t)=>{const n=tt(Rt,e.__scopeMenu),o=Jt(Rt,e.__scopeMenu),r=Oi(Rt,e.__scopeMenu),s=jo(Rt,e.__scopeMenu),i=k.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:e.__scopeMenu},d=k.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return k.useEffect(()=>d,[d]),k.useEffect(()=>{const m=a.current;return()=>{window.clearTimeout(m),l(null)}},[a,l]),P.jsx(Wo,{asChild:!0,...u,children:P.jsx(Ci,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Hi(n.open),...e,ref:gn(t,r.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ee(e.onPointerMove,en(m=>{s.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ee(e.onPointerLeave,en(m=>{d();const h=n.content?.getBoundingClientRect();if(h){const f=n.content?.dataset.side,p=f==="right",b=p?-5:5,w=h[p?"left":"right"],g=h[p?"right":"left"];s.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:w,y:h.top},{x:g,y:h.top},{x:g,y:h.bottom},{x:w,y:h.bottom}],side:f}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(m),m.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ee(e.onKeyDown,m=>{const h=s.searchRef.current!=="";e.disabled||h&&m.key===" "||Xm[o.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});$i.displayName=Rt;var zi="MenuSubContent",_i=k.forwardRef((e,t)=>{const n=Ni(Ae,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,s=tt(Ae,e.__scopeMenu),i=Jt(Ae,e.__scopeMenu),a=Oi(zi,e.__scopeMenu),l=k.useRef(null),u=Ne(t,l);return P.jsx(Zt.Provider,{scope:e.__scopeMenu,children:P.jsx(mt,{present:o||s.open,children:P.jsx(Zt.Slot,{scope:e.__scopeMenu,children:P.jsx(qo,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{i.isUsingKeyboardRef.current&&l.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ee(e.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ee(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:ee(e.onKeyDown,d=>{const m=d.currentTarget.contains(d.target),h=Ym[i.dir].includes(d.key);m&&h&&(s.onOpenChange(!1),a.trigger?.focus(),d.preventDefault())})})})})})});_i.displayName=zi;function Hi(e){return e?"open":"closed"}function Hn(e){return e==="indeterminate"}function Yo(e){return Hn(e)?"indeterminate":e?"checked":"unchecked"}function pf(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function bf(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function gf(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=bf(e,Math.max(s,0));r.length===1&&(i=i.filter(u=>u!==n));const l=i.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function wf(e,t){const{x:n,y:o}=e;let r=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s],l=t[i],u=a.x,d=a.y,m=l.x,h=l.y;d>o!=h>o&&n<(m-u)*(o-d)/(h-d)+u&&(r=!r)}return r}function kf(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return wf(n,t)}function en(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Nf=ki,xf=Wo,vf=xi,yf=vi,Ef=Ko,Cf=yi,Tf=_n,Sf=Ti,Af=Ai,Mf=Pi,Pf=Vi,Lf=Ii,Vf=Di,If=Bi,Df=$i,Of=_i,Fn="DropdownMenu",[Bf]=Nt(Fn,[bi]),xe=bi(),[$f,Fi]=Bf(Fn),Wi=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=xe(t),u=k.useRef(null),[d,m]=wn({prop:r,defaultProp:s??!1,onChange:i,caller:Fn});return P.jsx($f,{scope:t,triggerId:xt(),triggerRef:u,contentId:xt(),open:d,onOpenChange:m,onOpenToggle:k.useCallback(()=>m(h=>!h),[m]),modal:a,children:P.jsx(Nf,{...l,open:d,onOpenChange:m,dir:o,modal:a,children:n})})};Wi.displayName=Fn;var Ui="DropdownMenuTrigger",ji=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...r}=e,s=Fi(Ui,n),i=xe(n);return P.jsx(xf,{asChild:!0,...i,children:P.jsx(ge.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...r,ref:gn(t,s.triggerRef),onPointerDown:ee(e.onPointerDown,a=>{!o&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ee(e.onKeyDown,a=>{o||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});ji.displayName=Ui;var zf="DropdownMenuPortal",qi=e=>{const{__scopeDropdownMenu:t,...n}=e,o=xe(t);return P.jsx(vf,{...o,...n})};qi.displayName=zf;var Ki="DropdownMenuContent",Gi=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Fi(Ki,n),s=xe(n),i=k.useRef(!1);return P.jsx(yf,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...o,ref:t,onCloseAutoFocus:ee(e.onCloseAutoFocus,a=>{i.current||r.triggerRef.current?.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:ee(e.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!r.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Gi.displayName=Ki;var _f="DropdownMenuGroup",Hf=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Ef,{...r,...o,ref:t})});Hf.displayName=_f;var Ff="DropdownMenuLabel",Wf=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Cf,{...r,...o,ref:t})});Wf.displayName=Ff;var Uf="DropdownMenuItem",Xi=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Tf,{...r,...o,ref:t})});Xi.displayName=Uf;var jf="DropdownMenuCheckboxItem",qf=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Sf,{...r,...o,ref:t})});qf.displayName=jf;var Kf="DropdownMenuRadioGroup",Gf=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Af,{...r,...o,ref:t})});Gf.displayName=Kf;var Xf="DropdownMenuRadioItem",Yf=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Mf,{...r,...o,ref:t})});Yf.displayName=Xf;var Zf="DropdownMenuItemIndicator",Qf=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Pf,{...r,...o,ref:t})});Qf.displayName=Zf;var Jf="DropdownMenuSeparator",Yi=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Lf,{...r,...o,ref:t})});Yi.displayName=Jf;var Rf="DropdownMenuArrow",eh=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Vf,{...r,...o,ref:t})});eh.displayName=Rf;var th=e=>{const{__scopeDropdownMenu:t,children:n,open:o,onOpenChange:r,defaultOpen:s}=e,i=xe(t),[a,l]=wn({prop:o,defaultProp:s??!1,onChange:r,caller:"DropdownMenuSub"});return P.jsx(If,{...i,open:a,onOpenChange:l,children:n})},nh="DropdownMenuSubTrigger",Zi=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Df,{...r,...o,ref:t})});Zi.displayName=nh;var oh="DropdownMenuSubContent",Qi=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=xe(n);return P.jsx(Of,{...r,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qi.displayName=oh;var rh=Wi,sh=ji,ih=qi,ah=Gi,lh=Xi,ch=Yi,uh=th,dh=Zi,mh=Qi;function Ji(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Ji(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function Ri(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Ji(e))&&(o&&(o+=" "),o+=t);return o}const Zo="-",fh=e=>{const t=ph(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:i=>{const a=i.split(Zo);return a[0]===""&&a.length!==1&&a.shift(),ea(a,t)||hh(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&o[i]?[...l,...o[i]]:l}}},ea=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],o=t.nextPart.get(n),r=o?ea(e.slice(1),o):void 0;if(r)return r;if(t.validators.length===0)return;const s=e.join(Zo);return t.validators.find(({validator:i})=>i(s))?.classGroupId},ta=/^\[(.+)\]$/,hh=e=>{if(ta.test(e)){const t=ta.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ph=e=>{const{theme:t,classGroups:n}=e,o={nextPart:new Map,validators:[]};for(const r in n)Qo(n[r],o,r,t);return o},Qo=(e,t,n,o)=>{e.forEach(r=>{if(typeof r=="string"){const s=r===""?t:na(t,r);s.classGroupId=n;return}if(typeof r=="function"){if(bh(r)){Qo(r(o),t,n,o);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([s,i])=>{Qo(i,na(t,s),n,o)})})},na=(e,t)=>{let n=e;return t.split(Zo).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},bh=e=>e.isThemeGetter,gh=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,o=new Map;const r=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,o=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=o.get(s))!==void 0)return r(s,i),i},set(s,i){n.has(s)?n.set(s,i):r(s,i)}}},Jo="!",Ro=":",wh=Ro.length,kh=e=>{const{prefix:t,experimentalParseClassName:n}=e;let o=r=>{const s=[];let i=0,a=0,l=0,u;for(let p=0;p<r.length;p++){let b=r[p];if(i===0&&a===0){if(b===Ro){s.push(r.slice(l,p)),l=p+wh;continue}if(b==="/"){u=p;continue}}b==="["?i++:b==="]"?i--:b==="("?a++:b===")"&&a--}const d=s.length===0?r:r.substring(l),m=Nh(d),h=m!==d,f=u&&u>l?u-l:void 0;return{modifiers:s,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}};if(t){const r=t+Ro,s=o;o=i=>i.startsWith(r)?s(i.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const r=o;o=s=>n({className:s,parseClassName:r})}return o},Nh=e=>e.endsWith(Jo)?e.substring(0,e.length-1):e.startsWith(Jo)?e.substring(1):e,xh=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const r=[];let s=[];return o.forEach(i=>{i[0]==="["||t[i]?(r.push(...s.sort(),i),s=[]):s.push(i)}),r.push(...s.sort()),r}},vh=e=>({cache:gh(e.cacheSize),parseClassName:kh(e),sortModifiers:xh(e),...fh(e)}),yh=/\s+/,Eh=(e,t)=>{const{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:r,sortModifiers:s}=t,i=[],a=e.trim().split(yh);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{isExternal:m,modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:b}=n(d);if(m){l=d+(l.length>0?" "+l:l);continue}let w=!!b,g=o(w?p.substring(0,b):p);if(!g){if(!w){l=d+(l.length>0?" "+l:l);continue}if(g=o(p),!g){l=d+(l.length>0?" "+l:l);continue}w=!1}const N=s(h).join(":"),y=f?N+Jo:N,E=y+g;if(i.includes(E))continue;i.push(E);const v=r(g,w);for(let M=0;M<v.length;++M){const S=v[M];i.push(y+S)}l=d+(l.length>0?" "+l:l)}return l};function Ch(){let e=0,t,n,o="";for(;e<arguments.length;)(t=arguments[e++])&&(n=oa(t))&&(o&&(o+=" "),o+=n);return o}const oa=e=>{if(typeof e=="string")return e;let t,n="";for(let o=0;o<e.length;o++)e[o]&&(t=oa(e[o]))&&(n&&(n+=" "),n+=t);return n};function Th(e,...t){let n,o,r,s=i;function i(l){const u=t.reduce((d,m)=>m(d),e());return n=vh(u),o=n.cache.get,r=n.cache.set,s=a,a(l)}function a(l){const u=o(l);if(u)return u;const d=Eh(l,n);return r(l,d),d}return function(){return s(Ch.apply(null,arguments))}}const fe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ra=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sa=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Sh=/^\d+\/\d+$/,Ah=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Mh=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ph=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Lh=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vh=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pt=e=>Sh.test(e),te=e=>!!e&&!Number.isNaN(Number(e)),nt=e=>!!e&&Number.isInteger(Number(e)),er=e=>e.endsWith("%")&&te(e.slice(0,-1)),qe=e=>Ah.test(e),Ih=()=>!0,Dh=e=>Mh.test(e)&&!Ph.test(e),ia=()=>!1,Oh=e=>Lh.test(e),Bh=e=>Vh.test(e),$h=e=>!H(e)&&!F(e),zh=e=>Lt(e,da,ia),H=e=>ra.test(e),ht=e=>Lt(e,ma,Dh),tr=e=>Lt(e,Uh,te),aa=e=>Lt(e,ca,ia),_h=e=>Lt(e,ua,Bh),Wn=e=>Lt(e,fa,Oh),F=e=>sa.test(e),tn=e=>Vt(e,ma),Hh=e=>Vt(e,jh),la=e=>Vt(e,ca),Fh=e=>Vt(e,da),Wh=e=>Vt(e,ua),Un=e=>Vt(e,fa,!0),Lt=(e,t,n)=>{const o=ra.exec(e);return o?o[1]?t(o[1]):n(o[2]):!1},Vt=(e,t,n=!1)=>{const o=sa.exec(e);return o?o[1]?t(o[1]):n:!1},ca=e=>e==="position"||e==="percentage",ua=e=>e==="image"||e==="url",da=e=>e==="length"||e==="size"||e==="bg-size",ma=e=>e==="length",Uh=e=>e==="number",jh=e=>e==="family-name",fa=e=>e==="shadow",qh=Th(()=>{const e=fe("color"),t=fe("font"),n=fe("text"),o=fe("font-weight"),r=fe("tracking"),s=fe("leading"),i=fe("breakpoint"),a=fe("container"),l=fe("spacing"),u=fe("radius"),d=fe("shadow"),m=fe("inset-shadow"),h=fe("text-shadow"),f=fe("drop-shadow"),p=fe("blur"),b=fe("perspective"),w=fe("aspect"),g=fe("ease"),N=fe("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...E(),F,H],M=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],T=()=>[F,H,l],D=()=>[Pt,"full","auto",...T()],z=()=>[nt,"none","subgrid",F,H],q=()=>["auto",{span:["full",nt,F,H]},nt,F,H],U=()=>[nt,"auto",F,H],j=()=>["auto","min","max","fr",F,H],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],R=()=>["start","end","center","stretch","center-safe","end-safe"],W=()=>["auto",...T()],X=()=>[Pt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],L=()=>[e,F,H],_=()=>[...E(),la,aa,{position:[F,H]}],A=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",Fh,zh,{size:[F,H]}],K=()=>[er,tn,ht],Y=()=>["","none","full",u,F,H],se=()=>["",te,tn,ht],ce=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>[te,er,la,aa],Ce=()=>["","none",p,F,H],_e=()=>["none",te,F,H],He=()=>["none",te,F,H],it=()=>[te,F,H],Xe=()=>[Pt,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qe],breakpoint:[qe],color:[Ih],container:[qe],"drop-shadow":[qe],ease:["in","out","in-out"],font:[$h],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qe],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qe],shadow:[qe],spacing:["px",te],text:[qe],"text-shadow":[qe],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pt,H,F,w]}],container:["container"],columns:[{columns:[te,H,F,a]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[nt,"auto",F,H]}],basis:[{basis:[Pt,"full","auto",a,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[te,Pt,"auto","initial","none",H]}],grow:[{grow:["",te,F,H]}],shrink:[{shrink:["",te,F,H]}],order:[{order:[nt,"first","last","none",F,H]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...R(),"normal"]}],"justify-self":[{"justify-self":["auto",...R()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...R(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...R(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...R(),"baseline"]}],"place-self":[{"place-self":["auto",...R()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:W()}],mx:[{mx:W()}],my:[{my:W()}],ms:[{ms:W()}],me:[{me:W()}],mt:[{mt:W()}],mr:[{mr:W()}],mb:[{mb:W()}],ml:[{ml:W()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[a,"screen",...X()]}],"min-w":[{"min-w":[a,"screen","none",...X()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",n,tn,ht]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,F,tr]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",er,H]}],"font-family":[{font:[Hh,H,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,F,H]}],"line-clamp":[{"line-clamp":[te,"none",F,tr]}],leading:[{leading:[s,...T()]}],"list-image":[{"list-image":["none",F,H]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",F,H]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[te,"from-font","auto",F,ht]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[te,"auto",F,H]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",F,H]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",F,H]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_()}],"bg-repeat":[{bg:A()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},nt,F,H],radial:["",F,H],conic:[nt,F,H]},Wh,_h]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[te,F,H]}],"outline-w":[{outline:["",te,tn,ht]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",d,Un,Wn]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",m,Un,Wn]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[te,ht]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",h,Un,Wn]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[te,F,H]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[te]}],"mask-image-linear-from-pos":[{"mask-linear-from":Z()}],"mask-image-linear-to-pos":[{"mask-linear-to":Z()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":Z()}],"mask-image-t-to-pos":[{"mask-t-to":Z()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":Z()}],"mask-image-r-to-pos":[{"mask-r-to":Z()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":Z()}],"mask-image-b-to-pos":[{"mask-b-to":Z()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":Z()}],"mask-image-l-to-pos":[{"mask-l-to":Z()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":Z()}],"mask-image-x-to-pos":[{"mask-x-to":Z()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":Z()}],"mask-image-y-to-pos":[{"mask-y-to":Z()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[F,H]}],"mask-image-radial-from-pos":[{"mask-radial-from":Z()}],"mask-image-radial-to-pos":[{"mask-radial-to":Z()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[te]}],"mask-image-conic-from-pos":[{"mask-conic-from":Z()}],"mask-image-conic-to-pos":[{"mask-conic-to":Z()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_()}],"mask-repeat":[{mask:A()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",F,H]}],filter:[{filter:["","none",F,H]}],blur:[{blur:Ce()}],brightness:[{brightness:[te,F,H]}],contrast:[{contrast:[te,F,H]}],"drop-shadow":[{"drop-shadow":["","none",f,Un,Wn]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",te,F,H]}],"hue-rotate":[{"hue-rotate":[te,F,H]}],invert:[{invert:["",te,F,H]}],saturate:[{saturate:[te,F,H]}],sepia:[{sepia:["",te,F,H]}],"backdrop-filter":[{"backdrop-filter":["","none",F,H]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[te,F,H]}],"backdrop-contrast":[{"backdrop-contrast":[te,F,H]}],"backdrop-grayscale":[{"backdrop-grayscale":["",te,F,H]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[te,F,H]}],"backdrop-invert":[{"backdrop-invert":["",te,F,H]}],"backdrop-opacity":[{"backdrop-opacity":[te,F,H]}],"backdrop-saturate":[{"backdrop-saturate":[te,F,H]}],"backdrop-sepia":[{"backdrop-sepia":["",te,F,H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",F,H]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[te,"initial",F,H]}],ease:[{ease:["linear","initial",g,F,H]}],delay:[{delay:[te,F,H]}],animate:[{animate:["none",N,F,H]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,F,H]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:He()}],"scale-x":[{"scale-x":He()}],"scale-y":[{"scale-y":He()}],"scale-z":[{"scale-z":He()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[F,H,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xe()}],"translate-x":[{"translate-x":Xe()}],"translate-y":[{"translate-y":Xe()}],"translate-z":[{"translate-z":Xe()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",F,H]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",F,H]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[te,tn,ht,tr]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function pt(...e){return qh(Ri(e))}function It({...e}){return c.jsxDEV(rh,{"data-slot":"dropdown-menu",...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:10,columnNumber:10},this)}function Dt({...e}){return c.jsxDEV(sh,{"data-slot":"dropdown-menu-trigger",...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:25,columnNumber:5},this)}function Ot({className:e,sideOffset:t=4,...n}){return c.jsxDEV(ih,{children:c.jsxDEV(ah,{"data-slot":"dropdown-menu-content",sideOffset:t,className:pt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:39,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:38,columnNumber:5},this)}function J({className:e,inset:t,variant:n="default",...o}){return c.jsxDEV(lh,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:pt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:70,columnNumber:5},this)}function ot({className:e,...t}){return c.jsxDEV(ch,{"data-slot":"dropdown-menu-separator",className:pt("bg-border -mx-1 my-1 h-px",e),...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:169,columnNumber:5},this)}function ha({...e}){return c.jsxDEV(uh,{"data-slot":"dropdown-menu-sub",...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:196,columnNumber:10},this)}function pa({className:e,inset:t,children:n,...o}){return c.jsxDEV(dh,{"data-slot":"dropdown-menu-sub-trigger","data-inset":t,className:pt("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o,children:[n,c.jsxDEV(C.ChevronRightIcon,{className:"ml-auto size-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:218,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:208,columnNumber:5},this)}function ba({className:e,...t}){return c.jsxDEV(mh,{"data-slot":"dropdown-menu-sub-content",className:pt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",e),...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/dropdown-menu.tsx",lineNumber:228,columnNumber:5},this)}const ga=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,wa=Ri,Kh=((e,t)=>n=>{var o;if(t?.variants==null)return wa(e,n?.class,n?.className);const{variants:r,defaultVariants:s}=t,i=Object.keys(r).map(u=>{const d=n?.[u],m=s?.[u];if(d===null)return null;const h=ga(d)||ga(m);return r[u][h]}),a=n&&Object.entries(n).reduce((u,d)=>{let[m,h]=d;return h===void 0||(u[m]=h),u},{}),l=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((u,d)=>{let{class:m,className:h,...f}=d;return Object.entries(f).every(p=>{let[b,w]=p;return Array.isArray(w)?w.includes({...s,...a}[b]):{...s,...a}[b]===w})?[...u,m,h]:u},[]);return wa(e,i,l,n?.class,n?.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-transparent shadow-xs hover:bg-accent dark:bg-transparent dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function Bt({className:e,variant:t,size:n,asChild:o=!1,...r}){const s=o?Rc:"button";return c.jsxDEV(s,{"data-slot":"button",className:pt(Kh({variant:t,size:n,className:e})),...r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/button.tsx",lineNumber:52,columnNumber:5},this)}var Gh=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Xh="VisuallyHidden",ka=k.forwardRef((e,t)=>P.jsx(ge.span,{...e,ref:t,style:{...Gh,...e.style}}));ka.displayName=Xh;var Yh=ka,[jn]=Nt("Tooltip",[Mn]),qn=Mn(),Na="TooltipProvider",Zh=700,nr="tooltip.open",[Qh,or]=jn(Na),xa=e=>{const{__scopeTooltip:t,delayDuration:n=Zh,skipDelayDuration:o=300,disableHoverableContent:r=!1,children:s}=e,i=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),P.jsx(Qh,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,o)},[o]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(u=>{a.current=u},[]),disableHoverableContent:r,children:s})};xa.displayName=Na;var nn="Tooltip",[Jh,on]=jn(nn),va=e=>{const{__scopeTooltip:t,children:n,open:o,defaultOpen:r,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=e,l=or(nn,e.__scopeTooltip),u=qn(t),[d,m]=k.useState(null),h=xt(),f=k.useRef(0),p=i??l.disableHoverableContent,b=a??l.delayDuration,w=k.useRef(!1),[g,N]=wn({prop:o,defaultProp:r??!1,onChange:S=>{S?(l.onOpen(),document.dispatchEvent(new CustomEvent(nr))):l.onClose(),s?.(S)},caller:nn}),y=k.useMemo(()=>g?w.current?"delayed-open":"instant-open":"closed",[g]),E=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w.current=!1,N(!0)},[N]),v=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,N(!1)},[N]),M=k.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{w.current=!0,N(!0),f.current=0},b)},[b,N]);return k.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),P.jsx(Vo,{...u,children:P.jsx(Jh,{scope:t,contentId:h,open:g,stateAttribute:y,trigger:d,onTriggerChange:m,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?M():E()},[l.isOpenDelayedRef,M,E]),onTriggerLeave:k.useCallback(()=>{p?v():(window.clearTimeout(f.current),f.current=0)},[v,p]),onOpen:E,onClose:v,disableHoverableContent:p,children:n})})};va.displayName=nn;var rr="TooltipTrigger",ya=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...o}=e,r=on(rr,n),s=or(rr,n),i=qn(n),a=k.useRef(null),l=Ne(t,a,r.onTriggerChange),u=k.useRef(!1),d=k.useRef(!1),m=k.useCallback(()=>u.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),P.jsx(Ks,{asChild:!0,...i,children:P.jsx(ge.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...o,ref:l,onPointerMove:ee(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:ee(e.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:ee(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:ee(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:ee(e.onBlur,r.onClose),onClick:ee(e.onClick,r.onClose)})})});ya.displayName=rr;var sr="TooltipPortal",[Rh,ep]=jn(sr,{forceMount:void 0}),Ea=e=>{const{__scopeTooltip:t,forceMount:n,children:o,container:r}=e,s=on(sr,t);return P.jsx(Rh,{scope:t,forceMount:n,children:P.jsx(mt,{present:n||s.open,children:P.jsx(Io,{asChild:!0,container:r,children:o})})})};Ea.displayName=sr;var $t="TooltipContent",Ca=k.forwardRef((e,t)=>{const n=ep($t,e.__scopeTooltip),{forceMount:o=n.forceMount,side:r="top",...s}=e,i=on($t,e.__scopeTooltip);return P.jsx(mt,{present:o||i.open,children:i.disableHoverableContent?P.jsx(Ta,{side:r,...s,ref:t}):P.jsx(tp,{side:r,...s,ref:t})})}),tp=k.forwardRef((e,t)=>{const n=on($t,e.__scopeTooltip),o=or($t,e.__scopeTooltip),r=k.useRef(null),s=Ne(t,r),[i,a]=k.useState(null),{trigger:l,onClose:u}=n,d=r.current,{onPointerInTransitChange:m}=o,h=k.useCallback(()=>{a(null),m(!1)},[m]),f=k.useCallback((p,b)=>{const w=p.currentTarget,g={x:p.clientX,y:p.clientY},N=sp(g,w.getBoundingClientRect()),y=ip(g,N),E=ap(b.getBoundingClientRect()),v=cp([...y,...E]);a(v),m(!0)},[m]);return k.useEffect(()=>()=>h(),[h]),k.useEffect(()=>{if(l&&d){const p=w=>f(w,d),b=w=>f(w,l);return l.addEventListener("pointerleave",p),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",p),d.removeEventListener("pointerleave",b)}}},[l,d,f,h]),k.useEffect(()=>{if(i){const p=b=>{const w=b.target,g={x:b.clientX,y:b.clientY},N=l?.contains(w)||d?.contains(w),y=!lp(g,i);N?h():y&&(h(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,d,i,u,h]),P.jsx(Ta,{...e,ref:s})}),[np,op]=jn(nn,{isInside:!1}),rp=tu("TooltipContent"),Ta=k.forwardRef((e,t)=>{const{__scopeTooltip:n,children:o,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=e,l=on($t,n),u=qn(n),{onClose:d}=l;return k.useEffect(()=>(document.addEventListener(nr,d),()=>document.removeEventListener(nr,d)),[d]),k.useEffect(()=>{if(l.trigger){const m=h=>{h.target?.contains(l.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[l.trigger,d]),P.jsx(po,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:P.jsxs(Gs,{"data-state":l.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[P.jsx(rp,{children:o}),P.jsx(np,{scope:n,isInside:!0,children:P.jsx(Yh,{id:l.contentId,role:"tooltip",children:r||o})})]})})});Ca.displayName=$t;var Sa="TooltipArrow",Aa=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...o}=e,r=qn(n);return op(Sa,n).isInside?null:P.jsx(Xs,{...r,...o,ref:t})});Aa.displayName=Sa;function sp(e,t){const n=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,o,r,s)){case s:return"left";case r:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function ip(e,t,n=5){const o=[];switch(t){case"top":o.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":o.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":o.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":o.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return o}function ap(e){const{top:t,right:n,bottom:o,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:o},{x:r,y:o}]}function lp(e,t){const{x:n,y:o}=e;let r=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s],l=t[i],u=a.x,d=a.y,m=l.x,h=l.y;d>o!=h>o&&n<(m-u)*(o-d)/(h-d)+u&&(r=!r)}return r}function cp(e){const t=e.slice();return t.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),up(t)}function up(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const r=e[o];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(r.y-i.y)>=(s.y-i.y)*(r.x-i.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(r.y-i.y)>=(s.y-i.y)*(r.x-i.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var dp=xa,mp=va,fp=ya,hp=Ea,pp=Ca,bp=Aa;function gp({delayDuration:e=0,...t}){return c.jsxDEV(dp,{"data-slot":"tooltip-provider",delayDuration:e,...t},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:11,columnNumber:5},this)}function Ma({...e}){return c.jsxDEV(gp,{children:c.jsxDEV(mp,{"data-slot":"tooltip",...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:24,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:23,columnNumber:5},this)}function Pa({...e}){return c.jsxDEV(fp,{"data-slot":"tooltip-trigger",...e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:32,columnNumber:10},this)}function La({className:e,sideOffset:t=0,children:n,...o}){return c.jsxDEV(hp,{children:c.jsxDEV(pp,{"data-slot":"tooltip-content",sideOffset:t,className:pt("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...o,children:[n,c.jsxDEV(bp,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:43,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/ui/tooltip.tsx",lineNumber:42,columnNumber:5},this)}const he=({onClick:e,isActive:t,disabled:n,children:o,tooltip:r})=>{const s=c.jsxDEV("button",{onClick:e,disabled:n,className:`
        flex items-center justify-center w-9 h-9 sm:w-8 sm:h-8 rounded-md
        transition-all duration-100 ease-out touch-manipulation
        ${t?"bg-primary text-primary-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
        ${n?"opacity-50 cursor-not-allowed":""}
      `,children:o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:95,columnNumber:5},void 0);return r?c.jsxDEV(Ma,{children:[c.jsxDEV(Pa,{asChild:!0,children:s},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:115,columnNumber:9},void 0),c.jsxDEV(La,{side:"bottom",className:"text-xs hidden sm:block",children:r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:114,columnNumber:7},void 0):s},rn=()=>c.jsxDEV("div",{className:"w-px h-6 bg-border mx-0.5 hidden sm:block"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:127,columnNumber:3},void 0),Va=x.memo(function({editor:t,onCopyMarkdown:n,onOpenLinkPopover:o,className:r=""}){const[s,i]=x.useState(""),[a,l]=x.useState(!1),u=Ee.useEditorState({editor:t,selector:({editor:f})=>({canUndo:f.can().undo(),canRedo:f.can().redo(),isBold:f.isActive("bold"),isItalic:f.isActive("italic"),isUnderline:f.isActive("underline"),isStrike:f.isActive("strike"),isCode:f.isActive("code"),isHighlight:f.isActive("highlight"),isH1:f.isActive("heading",{level:1}),isH2:f.isActive("heading",{level:2}),isH3:f.isActive("heading",{level:3}),isBlockquote:f.isActive("blockquote"),isBulletList:f.isActive("bulletList"),isOrderedList:f.isActive("orderedList"),isTaskList:f.isActive("taskList"),isCodeBlock:f.isActive("codeBlock"),isLink:f.isActive("link")})}),d=x.useCallback(()=>{s&&(t.chain().focus().setImage({src:s}).run(),i(""),l(!1))},[t,s]),m=x.useCallback(()=>{t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},[t]),h=x.useCallback(f=>{t.chain().focus().insertCallout({type:f}).run()},[t]);return c.jsxDEV("div",{className:`flex items-center gap-0.5 sm:gap-1 px-2 sm:px-3 py-1.5 sm:py-2 border-b border-border bg-card/50 overflow-x-auto scrollbar-hide ${r}`,children:[c.jsxDEV(he,{onClick:()=>t.chain().focus().undo().run(),disabled:!u?.canUndo,tooltip:"Undo (Ctrl+Z)",children:c.jsxDEV(C.Undo,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:183,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:178,columnNumber:7},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().redo().run(),disabled:!u?.canRedo,tooltip:"Redo (Ctrl+Shift+Z)",children:c.jsxDEV(C.Redo,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:190,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:185,columnNumber:7},this),c.jsxDEV(rn,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:193,columnNumber:7},this),c.jsxDEV("div",{className:"hidden sm:flex items-center gap-0.5",children:[c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:u?.isBold,tooltip:"Bold (Ctrl+B)",children:c.jsxDEV(C.Bold,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:202,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:197,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:u?.isItalic,tooltip:"Italic (Ctrl+I)",children:c.jsxDEV(C.Italic,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:209,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:204,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:u?.isUnderline,tooltip:"Underline (Ctrl+U)",children:c.jsxDEV(C.Underline,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:216,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:211,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:u?.isStrike,tooltip:"Strikethrough",children:c.jsxDEV(C.Strikethrough,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:223,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:218,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleCode().run(),isActive:u?.isCode,tooltip:"Inline Code (Ctrl+E)",children:c.jsxDEV(C.Code,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:230,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:225,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleHighlight().run(),isActive:u?.isHighlight,tooltip:"Highlight",children:c.jsxDEV(C.Highlighter,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:237,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:232,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>o?.(),isActive:u?.isLink,tooltip:"Link (Ctrl+K)",children:c.jsxDEV(C.Link,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:244,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:239,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:196,columnNumber:7},this),c.jsxDEV(It,{children:[c.jsxDEV(Dt,{asChild:!0,children:c.jsxDEV(Bt,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 sm:hidden",children:c.jsxDEV(C.Type,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:252,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:251,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:250,columnNumber:9},this),c.jsxDEV(Ot,{align:"start",className:"w-48",children:[c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleBold().run(),children:[c.jsxDEV(C.Bold,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:257,columnNumber:13},this)," Bold"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:256,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleItalic().run(),children:[c.jsxDEV(C.Italic,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:260,columnNumber:13},this)," Italic"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:259,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleUnderline().run(),children:[c.jsxDEV(C.Underline,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:263,columnNumber:13},this)," Underline"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:262,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleStrike().run(),children:[c.jsxDEV(C.Strikethrough,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:266,columnNumber:13},this)," Strikethrough"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:265,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleCode().run(),children:[c.jsxDEV(C.Code,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:269,columnNumber:13},this)," Inline Code"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:268,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleHighlight().run(),children:[c.jsxDEV(C.Highlighter,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:272,columnNumber:13},this)," Highlight"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:271,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>o?.(),children:[c.jsxDEV(C.Link,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:275,columnNumber:13},this)," Link"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:274,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:255,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:249,columnNumber:7},this),c.jsxDEV(rn,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:280,columnNumber:7},this),c.jsxDEV(It,{children:[c.jsxDEV(Dt,{asChild:!0,children:c.jsxDEV(Bt,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-1.5 sm:px-2 gap-1",children:[c.jsxDEV(C.Heading1,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:286,columnNumber:13},this),c.jsxDEV("span",{className:"text-xs hidden sm:inline",children:"Heading"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:287,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:285,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:284,columnNumber:9},this),c.jsxDEV(Ot,{align:"start",children:[c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),children:[c.jsxDEV(C.Heading1,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:292,columnNumber:13},this)," Heading 1"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:291,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),children:[c.jsxDEV(C.Heading2,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:295,columnNumber:13},this)," Heading 2"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:294,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),children:[c.jsxDEV(C.Heading3,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:298,columnNumber:13},this)," Heading 3"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:297,columnNumber:11},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:300,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().setParagraph().run(),children:[c.jsxDEV(C.FileText,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:302,columnNumber:13},this)," Paragraph"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:301,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:290,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:283,columnNumber:7},this),c.jsxDEV(rn,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:307,columnNumber:7},this),c.jsxDEV("div",{className:"hidden md:flex items-center gap-0.5",children:[c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:u?.isBulletList,tooltip:"Bullet List",children:c.jsxDEV(C.List,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:316,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:311,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:u?.isOrderedList,tooltip:"Numbered List",children:c.jsxDEV(C.ListOrdered,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:323,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:318,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleTaskList().run(),isActive:u?.isTaskList,tooltip:"Task List",children:c.jsxDEV(C.CheckSquare,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:330,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:325,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleBlockquote().run(),isActive:u?.isBlockquote,tooltip:"Quote",children:c.jsxDEV(C.Quote,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:332,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().toggleCodeBlock().run(),isActive:u?.isCodeBlock,tooltip:"Code Block",children:c.jsxDEV(C.Code2,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:344,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:339,columnNumber:9},this),c.jsxDEV(rn,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:346,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>{u?.isTaskList?t.chain().focus().sinkListItem("taskItem").run():(u?.isBulletList||u?.isOrderedList)&&t.chain().focus().sinkListItem("listItem").run()},disabled:!u?.isBulletList&&!u?.isOrderedList&&!u?.isTaskList,tooltip:"Indent (Tab)",children:c.jsxDEV(C.IndentIncrease,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:359,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:347,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>{u?.isTaskList?t.chain().focus().liftListItem("taskItem").run():(u?.isBulletList||u?.isOrderedList)&&t.chain().focus().liftListItem("listItem").run()},disabled:!u?.isBulletList&&!u?.isOrderedList&&!u?.isTaskList,tooltip:"Outdent (Shift+Tab)",children:c.jsxDEV(C.IndentDecrease,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:373,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:361,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:310,columnNumber:7},this),c.jsxDEV(It,{children:[c.jsxDEV(Dt,{asChild:!0,children:c.jsxDEV(Bt,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 md:hidden",children:c.jsxDEV(C.ListIcon,{size:18},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:381,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:380,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:379,columnNumber:9},this),c.jsxDEV(Ot,{align:"start",className:"w-48",children:[c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleBulletList().run(),children:[c.jsxDEV(C.List,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:386,columnNumber:13},this)," Bullet List"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:385,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleOrderedList().run(),children:[c.jsxDEV(C.ListOrdered,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:389,columnNumber:13},this)," Numbered List"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:388,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleTaskList().run(),children:[c.jsxDEV(C.CheckSquare,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:392,columnNumber:13},this)," Task List"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:391,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleBlockquote().run(),children:[c.jsxDEV(C.Quote,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:395,columnNumber:13},this)," Quote"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:394,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleCodeBlock().run(),children:[c.jsxDEV(C.Code2,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:398,columnNumber:13},this)," Code Block"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:397,columnNumber:11},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:400,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>{u?.isTaskList?t.chain().focus().sinkListItem("taskItem").run():(u?.isBulletList||u?.isOrderedList)&&t.chain().focus().sinkListItem("listItem").run()},disabled:!u?.isBulletList&&!u?.isOrderedList&&!u?.isTaskList,children:[c.jsxDEV(C.IndentIncrease,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:411,columnNumber:13},this)," Indent"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:401,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>{u?.isTaskList?t.chain().focus().liftListItem("taskItem").run():(u?.isBulletList||u?.isOrderedList)&&t.chain().focus().liftListItem("listItem").run()},disabled:!u?.isBulletList&&!u?.isOrderedList&&!u?.isTaskList,children:[c.jsxDEV(C.IndentDecrease,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:423,columnNumber:13},this)," Outdent"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:413,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:384,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:378,columnNumber:7},this),c.jsxDEV(rn,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:428,columnNumber:7},this),c.jsxDEV("div",{className:"hidden lg:flex items-center gap-0.5",children:[c.jsxDEV(he,{onClick:m,tooltip:"Insert Table (3×3)",children:c.jsxDEV(C.Table,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:437,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:433,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>l(!0),tooltip:"Insert Image",children:c.jsxDEV(C.Image,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:443,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:439,columnNumber:9},this),c.jsxDEV(he,{onClick:()=>t.chain().focus().setHorizontalRule().run(),tooltip:"Horizontal Rule",children:c.jsxDEV(C.Minus,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:449,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:445,columnNumber:9},this),c.jsxDEV(It,{children:[c.jsxDEV(Dt,{asChild:!0,children:c.jsxDEV("button",{className:"flex items-center justify-center w-8 h-8 rounded-md transition-all duration-100 ease-out touch-manipulation bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80",title:"Insert Callout",children:c.jsxDEV(C.Info,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:458,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:454,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:453,columnNumber:11},this),c.jsxDEV(Ot,{align:"start",children:[c.jsxDEV(J,{onClick:()=>h("info"),children:[c.jsxDEV(C.Info,{size:16,className:"mr-2 text-blue-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:463,columnNumber:15},this)," Info"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:462,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>h("warning"),children:[c.jsxDEV(C.AlertTriangle,{size:16,className:"mr-2 text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:466,columnNumber:15},this)," Warning"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:465,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>h("error"),children:[c.jsxDEV(C.AlertCircle,{size:16,className:"mr-2 text-red-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:469,columnNumber:15},this)," Error"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:468,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>h("success"),children:[c.jsxDEV(C.CheckCircle,{size:16,className:"mr-2 text-green-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:472,columnNumber:15},this)," Success"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:471,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>h("note"),children:[c.jsxDEV(C.FileText,{size:16,className:"mr-2 text-purple-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:475,columnNumber:15},this)," Note"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:474,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:461,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:452,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:432,columnNumber:7},this),c.jsxDEV(It,{children:[c.jsxDEV(Dt,{asChild:!0,children:c.jsxDEV(Bt,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-1.5 sm:px-2 gap-1 lg:hidden",children:[c.jsxDEV(C.PlusCircle,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:485,columnNumber:13},this),c.jsxDEV("span",{className:"text-xs hidden sm:inline",children:"Insert"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:486,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:484,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:483,columnNumber:9},this),c.jsxDEV(Ot,{align:"start",className:"w-56",children:[c.jsxDEV(J,{onClick:m,children:[c.jsxDEV(C.Table,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:491,columnNumber:13},this)," Table (3×3)"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:490,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>l(!0),children:[c.jsxDEV(C.Image,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:494,columnNumber:13},this)," Image"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:493,columnNumber:11},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().setHorizontalRule().run(),children:[c.jsxDEV(C.Minus,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:497,columnNumber:13},this)," Horizontal Rule"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:496,columnNumber:11},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:499,columnNumber:11},this),c.jsxDEV(ha,{children:[c.jsxDEV(pa,{children:[c.jsxDEV(C.Info,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:502,columnNumber:15},this)," Callout"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:501,columnNumber:13},this),c.jsxDEV(ba,{children:[c.jsxDEV(J,{onClick:()=>h("info"),children:[c.jsxDEV(C.Info,{size:16,className:"mr-2 text-blue-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:506,columnNumber:17},this)," Info"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:505,columnNumber:15},this),c.jsxDEV(J,{onClick:()=>h("warning"),children:[c.jsxDEV(C.AlertTriangle,{size:16,className:"mr-2 text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:509,columnNumber:17},this)," Warning"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:508,columnNumber:15},this),c.jsxDEV(J,{onClick:()=>h("error"),children:[c.jsxDEV(C.AlertCircle,{size:16,className:"mr-2 text-red-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:512,columnNumber:17},this)," Error"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:511,columnNumber:15},this),c.jsxDEV(J,{onClick:()=>h("success"),children:[c.jsxDEV(C.CheckCircle,{size:16,className:"mr-2 text-green-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:515,columnNumber:17},this)," Success"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:514,columnNumber:15},this),c.jsxDEV(J,{onClick:()=>h("note"),children:[c.jsxDEV(C.FileText,{size:16,className:"mr-2 text-purple-400"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:518,columnNumber:17},this)," Note"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:517,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:504,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:500,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:489,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:482,columnNumber:7},this),t.isActive("table")&&c.jsxDEV(It,{children:[c.jsxDEV(Dt,{asChild:!0,children:c.jsxDEV(Bt,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-1.5 sm:px-2 gap-1 bg-primary/10",children:[c.jsxDEV(C.Table,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:534,columnNumber:15},this),c.jsxDEV("span",{className:"text-xs hidden sm:inline",children:"Table"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:535,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:529,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:528,columnNumber:11},this),c.jsxDEV(Ot,{align:"start",className:"w-56",children:[c.jsxDEV(J,{onClick:()=>t.chain().focus().addColumnBefore().run(),disabled:!t.can().addColumnBefore(),children:[c.jsxDEV(C.Columns,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:543,columnNumber:15},this)," Add Column Before"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:539,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().addColumnAfter().run(),disabled:!t.can().addColumnAfter(),children:[c.jsxDEV(C.Columns,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:549,columnNumber:15},this)," Add Column After"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:545,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().deleteColumn().run(),disabled:!t.can().deleteColumn(),children:[c.jsxDEV(C.Trash2,{size:16,className:"mr-2 text-destructive"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:555,columnNumber:15},this)," Delete Column"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:551,columnNumber:13},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:557,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().addRowBefore().run(),disabled:!t.can().addRowBefore(),children:[c.jsxDEV(C.Rows,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:562,columnNumber:15},this)," Add Row Before"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:558,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().addRowAfter().run(),disabled:!t.can().addRowAfter(),children:[c.jsxDEV(C.Rows,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:568,columnNumber:15},this)," Add Row After"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:564,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().deleteRow().run(),disabled:!t.can().deleteRow(),children:[c.jsxDEV(C.Trash2,{size:16,className:"mr-2 text-destructive"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:574,columnNumber:15},this)," Delete Row"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:570,columnNumber:13},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:576,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleHeaderRow().run(),disabled:!t.can().toggleHeaderRow(),children:[c.jsxDEV(C.ToggleLeft,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:581,columnNumber:15},this)," Toggle Header Row"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:577,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().toggleHeaderColumn().run(),disabled:!t.can().toggleHeaderColumn(),children:[c.jsxDEV(C.ToggleLeft,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:587,columnNumber:15},this)," Toggle Header Column"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:583,columnNumber:13},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:589,columnNumber:13},this),c.jsxDEV(ha,{children:[c.jsxDEV(pa,{children:[c.jsxDEV(C.Palette,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:592,columnNumber:17},this)," Cell Background"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:591,columnNumber:15},this),c.jsxDEV(ba,{className:"w-48",children:[c.jsxDEV("div",{className:"p-2",children:[c.jsxDEV("div",{className:"text-xs text-muted-foreground mb-2",children:"Quick Colors"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:596,columnNumber:19},this),c.jsxDEV("div",{className:"grid grid-cols-6 gap-1 mb-2",children:[{color:"#ef4444",name:"Red"},{color:"#f97316",name:"Orange"},{color:"#eab308",name:"Yellow"},{color:"#22c55e",name:"Green"},{color:"#3b82f6",name:"Blue"},{color:"#8b5cf6",name:"Purple"},{color:"#ec4899",name:"Pink"},{color:"#14b8a6",name:"Teal"},{color:"#6366f1",name:"Indigo"},{color:"#64748b",name:"Slate"},{color:"#1e293b",name:"Dark"},{color:"#f1f5f9",name:"Light"}].map(({color:f,name:p})=>c.jsxDEV("button",{onClick:()=>t.chain().focus().setCellBackground(f).run(),className:"w-6 h-6 rounded border border-border hover:scale-110 transition-transform touch-manipulation",style:{backgroundColor:f},title:p},f,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:612,columnNumber:23},this))},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:597,columnNumber:19},this),c.jsxDEV("div",{className:"text-xs text-muted-foreground mb-1",children:"Custom Color"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:621,columnNumber:19},this),c.jsxDEV("input",{type:"color",defaultValue:"#3b82f6",onChange:f=>t.chain().focus().setCellBackground(f.target.value).run(),className:"w-full h-8 rounded cursor-pointer border border-border",style:{backgroundColor:"transparent"}},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:622,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:595,columnNumber:17},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:630,columnNumber:17},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().unsetCellBackground().run(),children:[c.jsxDEV(C.X,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:632,columnNumber:19},this)," Remove Background"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:631,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:594,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:590,columnNumber:13},this),c.jsxDEV(ot,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:636,columnNumber:13},this),c.jsxDEV(J,{onClick:()=>t.chain().focus().deleteTable().run(),disabled:!t.can().deleteTable(),className:"text-destructive",children:[c.jsxDEV(C.Trash2,{size:16,className:"mr-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:642,columnNumber:15},this)," Delete Table"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:637,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:538,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:527,columnNumber:9},this),a&&c.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 sm:relative sm:inset-auto sm:bg-transparent sm:p-0",children:c.jsxDEV("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 p-4 sm:p-0 bg-card sm:bg-secondary rounded-lg sm:rounded-md w-full max-w-sm sm:max-w-none sm:w-auto",children:[c.jsxDEV("input",{type:"url",placeholder:"Image URL...",value:s,onChange:f=>i(f.target.value),onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),d()),f.key==="Escape"&&(l(!1),i(""))},className:"bg-secondary sm:bg-transparent border sm:border-none rounded px-3 py-2 sm:py-0 outline-none text-sm w-full sm:w-40",autoFocus:!0},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:652,columnNumber:13},this),c.jsxDEV("div",{className:"flex gap-2 sm:gap-1",children:[c.jsxDEV("button",{onClick:d,className:"flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-0.5 text-sm sm:text-xs bg-primary text-primary-foreground rounded",children:"Add"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:671,columnNumber:15},this),c.jsxDEV("button",{onClick:()=>{l(!1),i("")},className:"flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-0.5 text-sm sm:text-xs text-muted-foreground bg-secondary sm:bg-transparent rounded",children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:677,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:670,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:651,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:650,columnNumber:9},this),c.jsxDEV("div",{className:"flex-1 min-w-2"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:692,columnNumber:7},this),n&&c.jsxDEV(Ma,{children:[c.jsxDEV(Pa,{asChild:!0,children:c.jsxDEV(Bt,{variant:"ghost",size:"sm",className:"h-9 sm:h-8 px-2 gap-1 shrink-0",onClick:n,children:[c.jsxDEV(C.Copy,{size:18,className:"sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:704,columnNumber:15},this),c.jsxDEV("span",{className:"text-xs hidden md:inline",children:"Copy MD"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:705,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:698,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:697,columnNumber:11},this),c.jsxDEV(La,{side:"bottom",className:"text-xs",children:"Copy content as Markdown"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:708,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:696,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/EditorToolbar.tsx",lineNumber:176,columnNumber:5},this)});function Ia({editor:e,isOpen:t,onClose:n,focusTrigger:o=0,initialSearchQuery:r}){const[s,i]=x.useState(""),[a,l]=x.useState(""),[u,d]=x.useState(!1),[m,h]=x.useState(!1),[f,p]=x.useState(!1),[b,w]=x.useState(!1),[g,N]=x.useState([]),[y,E]=x.useState(0),[v,M]=x.useState(null),[S,T]=x.useState(!1),D=x.useRef(!1),z=x.useRef(null),q=x.useRef(null),U=x.useRef(!1);x.useEffect(()=>{t&&r&&r.trim()&&i(r)},[t,r,o]);const j=x.useCallback(()=>{if(!s||!e){N([]),E(0),M(null);return}const{doc:A}=e.state,$=[];let K;try{if(m)K=new RegExp(s,u?"g":"gi");else{let Y=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");f&&(Y=`\\b${Y}\\b`),K=new RegExp(Y,u?"g":"gi")}M(null)}catch(Y){M(Y.message),N([]);return}A.descendants((Y,se)=>{if(Y.isText&&Y.text){let ce;for(;(ce=K.exec(Y.text))!==null;)$.push({from:se+ce.index,to:se+ce.index+ce[0].length,text:ce[0]})}return!0}),N($),$.length>0&&y>=$.length&&E(0)},[s,u,m,f,e,y]);x.useEffect(()=>{j()},[j]),x.useEffect(()=>{if(!e)return;const A=typeof e.commands.setSearchHighlight=="function";t&&s&&A?e.commands.setSearchHighlight({searchTerm:s,caseSensitive:u,useRegex:m,currentMatchIndex:y}):A&&e.commands.clearSearchHighlight()},[e,t,s,u,m,y]),x.useEffect(()=>{!t&&e&&(typeof e.commands.clearSearchHighlight=="function"&&e.commands.clearSearchHighlight(),D.current||typeof e.commands.clearAllOccurrences=="function"&&(e.commands.clearAllOccurrences(),T(!1)),D.current=!1)},[t,e]),x.useEffect(()=>{if(g.length>0&&y<g.length){const A=g[y],$=e.view.domAtPos(A.from);$.node&&$.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"}),U.current&&(U.current=!1)}},[y,g,e]),x.useEffect(()=>{t&&z.current&&(z.current.focus(),z.current.select())},[t,o]);const G=x.useCallback(()=>{g.length!==0&&(U.current=!0,E(A=>(A+1)%g.length))},[g.length]),R=x.useCallback(()=>{g.length!==0&&(U.current=!0,E(A=>(A-1+g.length)%g.length))},[g.length]),W=x.useCallback(()=>{if(g.length===0||y>=g.length)return;const A=g[y];e.chain().focus().setTextSelection({from:A.from,to:A.to}).deleteSelection().insertContent(a).run(),setTimeout(j,10)},[g,y,a,e,j]),X=x.useCallback(()=>{if(g.length===0)return;const A=[...g].sort(($,K)=>K.from-$.from);e.chain().focus(),A.forEach($=>{e.chain().setTextSelection({from:$.from,to:$.to}).deleteSelection().insertContent(a).run()}),setTimeout(j,10)},[g,a,e,j]),L=x.useCallback(()=>{if(g.length===0||!s||!(typeof e.commands.selectAllOccurrences=="function"))return;e.commands.selectAllOccurrences({searchTerm:s,caseSensitive:u,useRegex:m,wholeWord:f})&&(T(!0),D.current=!0,typeof e.commands.clearSearchHighlight=="function"&&e.commands.clearSearchHighlight(),n(),e.commands.focus())},[g,s,u,m,f,e,n]),_=x.useCallback(A=>{A.key==="Enter"?(A.preventDefault(),A.shiftKey?R():G(),z.current?.focus()):A.key==="Escape"?(A.preventDefault(),n()):A.key==="h"&&(A.ctrlKey||A.metaKey)?(A.preventDefault(),w($=>!$)):A.key==="l"&&(A.ctrlKey||A.metaKey)&&A.shiftKey&&(A.preventDefault(),L())},[G,R,n,L]);return t?c.jsxDEV("div",{className:"find-replace-panel",onKeyDown:_,children:[c.jsxDEV("div",{className:"find-replace-row",children:[c.jsxDEV("div",{className:"find-replace-input-wrapper",children:[c.jsxDEV(C.Search,{size:14,className:"find-replace-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:300,columnNumber:11},this),c.jsxDEV("input",{ref:z,type:"text",placeholder:"Find...",value:s,onChange:A=>i(A.target.value),className:`find-replace-input ${v?"has-error":""}`},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:301,columnNumber:11},this),v&&c.jsxDEV("span",{className:"find-replace-error",title:v,children:"!"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:310,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:299,columnNumber:9},this),c.jsxDEV("span",{className:"find-replace-count",children:g.length>0?`${y+1} of ${g.length}`:s?"No results":""},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:315,columnNumber:9},this),c.jsxDEV("button",{onClick:R,disabled:g.length===0,className:"find-replace-btn",title:"Previous match (Shift+Enter)",children:c.jsxDEV(C.ChevronUp,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:329,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:323,columnNumber:9},this),c.jsxDEV("button",{onClick:G,disabled:g.length===0,className:"find-replace-btn",title:"Next match (Enter)",children:c.jsxDEV(C.ChevronDown,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:331,columnNumber:9},this),c.jsxDEV("button",{onClick:L,disabled:g.length===0,className:`find-replace-btn ${S?"active":""}`,title:`Select all occurrences (${navigator.platform?.includes("Mac")?"⌘":"Ctrl"}+Shift+L) — Apply formatting to all ${g.length} matches`,children:c.jsxDEV(C.MousePointerClick,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:347,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:341,columnNumber:9},this),c.jsxDEV("div",{className:"find-replace-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:351,columnNumber:9},this),c.jsxDEV("button",{onClick:()=>d(A=>!A),className:`find-replace-btn ${u?"active":""}`,title:"Match case",children:c.jsxDEV(C.CaseSensitive,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:359,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:354,columnNumber:9},this),c.jsxDEV("button",{onClick:()=>p(A=>!A),className:`find-replace-btn ${f?"active":""}`,title:"Match whole word",children:c.jsxDEV(C.WholeWord,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:366,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:361,columnNumber:9},this),c.jsxDEV("button",{onClick:()=>h(A=>!A),className:`find-replace-btn ${m?"active":""}`,title:"Use regex",children:c.jsxDEV(C.Regex,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:373,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:368,columnNumber:9},this),c.jsxDEV("button",{onClick:()=>w(A=>!A),className:`find-replace-btn ${b?"active":""}`,title:"Toggle replace (Ctrl+H)",children:c.jsxDEV(C.Replace,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:382,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:377,columnNumber:9},this),c.jsxDEV("button",{onClick:n,className:"find-replace-btn",title:"Close (Escape)",children:c.jsxDEV(C.X,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:391,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:386,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:298,columnNumber:7},this),b&&c.jsxDEV("div",{className:"find-replace-row",children:[c.jsxDEV("div",{className:"find-replace-input-wrapper",children:[c.jsxDEV(C.Replace,{size:14,className:"find-replace-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:399,columnNumber:13},this),c.jsxDEV("input",{ref:q,type:"text",placeholder:"Replace with...",value:a,onChange:A=>l(A.target.value),className:"find-replace-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:400,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:398,columnNumber:11},this),c.jsxDEV("button",{onClick:W,disabled:g.length===0,className:"find-replace-btn replace-btn",title:"Replace current",children:"Replace"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:410,columnNumber:11},this),c.jsxDEV("button",{onClick:X,disabled:g.length===0,className:"find-replace-btn replace-btn",title:"Replace all",children:[c.jsxDEV(C.ReplaceAll,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:424,columnNumber:13},this),"All"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:418,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:397,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/FindReplace.tsx",lineNumber:293,columnNumber:5},this):null}const Ke=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"⌘":"Ctrl",wp=({editor:e})=>{const[t,n]=x.useState(!1),[o,r]=x.useState(0),[s,i]=x.useState(0),[a,l]=x.useState(""),[u,d]=x.useState(""),[m,h]=x.useState(!1),[f,p]=x.useState(!1);x.useEffect(()=>{if(!e)return;const S=()=>{const D=e.storage.selectAllOccurrences;D?(n(D.isActive),r(D.ranges.length),i(D.allMatches.length),l(D.searchTerm),d(D.typedBuffer),h(D.isTypingReplace),p(D.isIncremental)):(n(!1),r(0),i(0))},T=()=>{S()};return e.on("transaction",T),S(),()=>{e.off("transaction",T)}},[e]);const b=x.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("bold"),e.commands.focus()},[e]),w=x.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("italic"),e.commands.focus()},[e]),g=x.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("underline"),e.commands.focus()},[e]),N=x.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("strike"),e.commands.focus()},[e]),y=x.useCallback(()=>{e.commands.deleteAllOccurrences(),e.commands.focus()},[e]),E=x.useCallback(()=>{e.commands.clearAllOccurrences(),e.commands.focus()},[e]),v=x.useCallback(()=>{e.commands.selectNextOccurrence(),e.commands.focus()},[e]),M=x.useCallback(()=>{a&&(e.commands.selectAllOccurrences({searchTerm:a,caseSensitive:!1,useRegex:!1,wholeWord:!1}),e.commands.focus())},[e,a]);return!t||o===0?null:c.jsxDEV("div",{className:"select-all-action-bar",children:[c.jsxDEV("div",{className:"select-all-action-bar-inner",children:[c.jsxDEV("div",{className:"select-all-action-bar-count",children:[c.jsxDEV("span",{className:"select-all-action-bar-count-number",children:f&&s>0?`${o}/${s}`:o},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:131,columnNumber:11},void 0),c.jsxDEV("span",{className:"select-all-action-bar-count-label",children:"selected"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:134,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:130,columnNumber:9},void 0),c.jsxDEV("div",{className:"select-all-action-bar-preview",children:m?c.jsxDEV(c.Fragment,{children:[c.jsxDEV(C.Type,{size:12,className:"select-all-action-bar-preview-icon"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:141,columnNumber:15},void 0),c.jsxDEV("span",{className:"select-all-action-bar-preview-old",children:a},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:142,columnNumber:15},void 0),c.jsxDEV("span",{className:"select-all-action-bar-preview-arrow",children:"→"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:143,columnNumber:15},void 0),c.jsxDEV("span",{className:"select-all-action-bar-preview-new",children:u||"∅"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:140,columnNumber:13},void 0):c.jsxDEV(c.Fragment,{children:c.jsxDEV("span",{className:"select-all-action-bar-preview-term",children:['"',a,'"']},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:148,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:147,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:138,columnNumber:9},void 0),c.jsxDEV("div",{className:"select-all-action-bar-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:154,columnNumber:9},void 0),f&&o<s&&c.jsxDEV(c.Fragment,{children:[c.jsxDEV("button",{onClick:v,className:"select-all-action-bar-btn select-all-action-bar-btn-primary",title:`Select next occurrence (${Ke}+D)`,children:c.jsxDEV(C.Plus,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:164,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:159,columnNumber:13},void 0),c.jsxDEV("button",{onClick:M,className:"select-all-action-bar-btn select-all-action-bar-btn-secondary",title:`Select all remaining (${Ke}+Shift+L)`,children:"All"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:166,columnNumber:13},void 0),c.jsxDEV("div",{className:"select-all-action-bar-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:173,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:158,columnNumber:11},void 0),c.jsxDEV("button",{onClick:b,className:"select-all-action-bar-btn",title:`Bold all occurrences (${Ke}+B)`,children:c.jsxDEV(C.Bold,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:183,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:178,columnNumber:9},void 0),c.jsxDEV("button",{onClick:w,className:"select-all-action-bar-btn",title:`Italic all occurrences (${Ke}+I)`,children:c.jsxDEV(C.Italic,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:190,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:185,columnNumber:9},void 0),c.jsxDEV("button",{onClick:g,className:"select-all-action-bar-btn",title:`Underline all occurrences (${Ke}+U)`,children:c.jsxDEV(C.Underline,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:197,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:192,columnNumber:9},void 0),c.jsxDEV("button",{onClick:N,className:"select-all-action-bar-btn",title:"Strikethrough all occurrences",children:c.jsxDEV(C.Strikethrough,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:204,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:199,columnNumber:9},void 0),c.jsxDEV("div",{className:"select-all-action-bar-separator"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:208,columnNumber:9},void 0),c.jsxDEV("button",{onClick:y,className:"select-all-action-bar-btn select-all-action-bar-btn-danger",title:"Delete all occurrences",children:c.jsxDEV(C.Trash2,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:216,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:211,columnNumber:9},void 0),c.jsxDEV("button",{onClick:E,className:"select-all-action-bar-btn",title:"Exit select all mode (Escape)",children:c.jsxDEV(C.X,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:225,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:220,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:128,columnNumber:7},void 0),c.jsxDEV("div",{className:"select-all-action-bar-hint",children:f&&o<s?c.jsxDEV(c.Fragment,{children:[c.jsxDEV("kbd",{children:[Ke,"+D"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:13},void 0)," next · ",c.jsxDEV("kbd",{children:[Ke,"+Shift+L"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:42},void 0)," all · Type to replace · ",c.jsxDEV("kbd",{children:"Esc"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:94},void 0)," to exit · ",c.jsxDEV("kbd",{children:[Ke,"+Z"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:233,columnNumber:119},void 0)," undo"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:232,columnNumber:11},void 0):c.jsxDEV(c.Fragment,{children:["Type to replace all · ",c.jsxDEV("kbd",{children:"Esc"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:237,columnNumber:35},void 0)," to exit · ",c.jsxDEV("kbd",{children:"Backspace"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:237,columnNumber:60},void 0)," to delete · ",c.jsxDEV("kbd",{children:[Ke,"+Z"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:237,columnNumber:93},void 0)," undo"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:236,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:230,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SelectAllActionBar.tsx",lineNumber:127,columnNumber:5},void 0)},Da=x.memo(wp),Kn="-dismissed";function kp(e){let t=0;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);t=(t<<5)-t+o,t=t&t}return t}function Oa(e,t={}){const{storageKey:n="manus-editor-content",debounceMs:o=1e3,enabled:r=!0,onSave:s,onRecover:i}=t,[a,l]=x.useState({status:"idle",lastSaved:null,hasRecoverableContent:!1,error:null}),u=x.useRef(null),d=x.useRef(""),m=x.useRef(0);x.useEffect(()=>{if(r&&!(!e||e.isDestroyed))try{const g=localStorage.getItem(n),N=localStorage.getItem(n+Kn);if(g&&!N){let y="";try{y=e.getHTML()||""}catch{return}g!==y&&g.length>50&&l(E=>({...E,hasRecoverableContent:!0}))}}catch(g){console.warn("useAutoSave: Error checking for recoverable content",g)}},[e,n,r]);const h=x.useCallback(()=>{if(!(!e||!r||e.isDestroyed))try{const g=e.getHTML(),N=kp(g);if(N===m.current&&g.length===d.current.length){l(y=>({...y,status:"saved"}));return}if(g.length<20)return;l(y=>({...y,status:"saving"})),localStorage.setItem(n,g),localStorage.setItem(n+"-timestamp",new Date().toISOString()),d.current=g,m.current=N,l(y=>({...y,status:"saved",lastSaved:new Date,error:null})),s?.(g),setTimeout(()=>{l(y=>y.status==="saved"?{...y,status:"idle"}:y)},2e3)}catch(g){console.error("useAutoSave: Error saving content",g),l(N=>({...N,status:"error",error:g instanceof Error?g.message:"Failed to save"}))}},[e,n,r,s]);x.useEffect(()=>{if(!e||!r||e.isDestroyed)return;const g=()=>{e.isDestroyed||(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{h()},o))};return e.on("update",g),()=>{e.off("update",g),u.current&&clearTimeout(u.current)}},[e,o,r,h]),x.useEffect(()=>{if(!e||!r||e.isDestroyed)return;const g=()=>{if(!e.isDestroyed)try{const N=e.getHTML();N.length>=20&&(localStorage.setItem(n,N),localStorage.setItem(n+"-timestamp",new Date().toISOString()))}catch(N){console.warn("useAutoSave: Error saving on unload",N)}};return window.addEventListener("beforeunload",g),()=>{window.removeEventListener("beforeunload",g)}},[e,n,r]);const f=x.useCallback(()=>{u.current&&clearTimeout(u.current),h()},[h]),p=x.useCallback(()=>{try{localStorage.removeItem(n),localStorage.removeItem(n+"-timestamp"),localStorage.removeItem(n+Kn),d.current="",l({status:"idle",lastSaved:null,hasRecoverableContent:!1,error:null})}catch(g){console.warn("useAutoSave: Error clearing content",g)}},[n]),b=x.useCallback(()=>{if(!e||e.isDestroyed)return null;try{const g=localStorage.getItem(n);return g&&e&&!e.isDestroyed?(l(N=>({...N,hasRecoverableContent:!1})),queueMicrotask(()=>{if(e&&!e.isDestroyed)try{e.commands.setContent(g),d.current=g,localStorage.removeItem(n+Kn),i?.(g)}catch(N){console.warn("useAutoSave: Error setting content during recovery",N)}}),g):null}catch(g){return console.warn("useAutoSave: Error recovering content",g),null}},[e,n,i]),w=x.useCallback(()=>{try{localStorage.setItem(n+Kn,"true"),l(g=>({...g,hasRecoverableContent:!1}))}catch(g){console.warn("useAutoSave: Error dismissing recovery",g)}},[n]);return{...a,save:f,clear:p,recover:b,dismissRecovery:w}}const Np=200;function Ba(e,t={}){const{debounceMs:n=500,extendedStats:o=!1,enabled:r=!0}=t,[s,i]=x.useState({words:0,characters:0,charactersWithSpaces:0,paragraphs:0,sentences:0,readingTime:0,isCalculating:!1}),a=x.useRef(null),l=x.useRef(""),u=x.useCallback(d=>{const m=d.trim(),h=m.length>0?m.split(/\s+/).filter(N=>N.length>0).length:0,f=m.replace(/\s/g,"").length,p=d.length;let b=0,w=0;o&&(b=m.length>0?m.split(/\n\s*\n/).filter(N=>N.trim().length>0).length:0,w=m.length>0?(m.match(/[.!?]+/g)||[]).length:0);const g=Math.max(1,Math.ceil(h/Np));return{words:h,characters:f,charactersWithSpaces:p,paragraphs:b,sentences:w,readingTime:g,isCalculating:!1}},[o]);return x.useEffect(()=>{if(!e||!r)return;const d=()=>{a.current&&clearTimeout(a.current),i(m=>({...m,isCalculating:!0})),a.current=setTimeout(()=>{try{const m=e.getText();if(m===l.current){i(f=>({...f,isCalculating:!1}));return}l.current=m;const h=u(m);i(h)}catch(m){console.warn("useWordCount: Error calculating word count",m),i(h=>({...h,isCalculating:!1}))}},n)};return d(),e.on("update",d),()=>{e.off("update",d),a.current&&clearTimeout(a.current)}},[e,n,r,u]),s}function $a({status:e,lastSaved:t,className:n=""}){const o=r=>{if(!r)return"";const i=new Date().getTime()-r.getTime(),a=Math.floor(i/1e3),l=Math.floor(a/60),u=Math.floor(l/60);return a<10?"Just now":a<60?`${a}s ago`:l<60?`${l}m ago`:u<24?`${u}h ago`:r.toLocaleDateString()};return c.jsxDEV("div",{className:`auto-save-indicator flex items-center gap-1.5 text-xs ${n}`,title:t?`Last saved: ${t.toLocaleString()}`:"Not saved yet",children:[e==="idle"&&t&&c.jsxDEV(c.Fragment,{children:[c.jsxDEV(C.Cloud,{className:"w-3.5 h-3.5 text-muted-foreground"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:40,columnNumber:11},this),c.jsxDEV("span",{className:"text-muted-foreground",children:["Saved ",o(t)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:41,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:39,columnNumber:9},this),e==="saving"&&c.jsxDEV(c.Fragment,{children:[c.jsxDEV(C.Loader2,{className:"w-3.5 h-3.5 text-cyan-500 animate-spin"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:47,columnNumber:11},this),c.jsxDEV("span",{className:"text-cyan-500",children:"Saving..."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:48,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:46,columnNumber:9},this),e==="saved"&&c.jsxDEV(c.Fragment,{children:[c.jsxDEV(C.Check,{className:"w-3.5 h-3.5 text-emerald-500"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:54,columnNumber:11},this),c.jsxDEV("span",{className:"text-emerald-500",children:"Saved"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:55,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:53,columnNumber:9},this),e==="error"&&c.jsxDEV(c.Fragment,{children:[c.jsxDEV(C.CloudOff,{className:"w-3.5 h-3.5 text-red-500"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:61,columnNumber:11},this),c.jsxDEV("span",{className:"text-red-500",children:"Save failed"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:62,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:60,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/AutoSaveIndicator.tsx",lineNumber:34,columnNumber:5},this)}function za({onRecover:e,onDismiss:t,className:n=""}){return c.jsxDEV("div",{className:`recovery-banner flex items-center justify-between gap-4 px-4 py-3 rounded-lg ${n}`,children:[c.jsxDEV("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsxDEV(C.AlertCircle,{className:"w-5 h-5 recovery-banner-icon flex-shrink-0"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:22,columnNumber:9},this),c.jsxDEV("span",{className:"text-sm recovery-banner-text",children:"We found unsaved content from your last session."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:23,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:21,columnNumber:7},this),c.jsxDEV("div",{className:"flex items-center gap-3 flex-shrink-0",children:[c.jsxDEV("button",{onClick:e,className:"recovery-banner-btn flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-md transition-colors duration-150",children:[c.jsxDEV(C.RotateCcw,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:33,columnNumber:11},this),"Recover"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:29,columnNumber:9},this),c.jsxDEV("button",{onClick:t,className:"recovery-banner-dismiss p-2 rounded-md transition-colors duration-150",title:"Dismiss","aria-label":"Dismiss recovery banner",children:c.jsxDEV(C.X,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:43,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:37,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:28,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/RecoveryBanner.tsx",lineNumber:18,columnNumber:5},this)}const xp=/\[\[([^\[\]]+)\]\]$/,_a=ue.Mark.create({name:"wikiLink",addOptions(){return{HTMLAttributes:{},onWikiLinkClick:void 0,validateLink:void 0,linkClass:"wiki-link",invalidLinkClass:"wiki-link-invalid"}},addAttributes(){return{pageName:{default:null,parseHTML:e=>e.getAttribute("data-page-name"),renderHTML:e=>e.pageName?{"data-page-name":e.pageName}:{}}}},parseHTML(){return[{tag:"span[data-wiki-link]"}]},renderHTML({HTMLAttributes:e}){const t=e["data-page-name"]||"",n=this.options.validateLink?this.options.validateLink(t):!0;return["span",ue.mergeAttributes(this.options.HTMLAttributes,e,{"data-wiki-link":"",class:n?this.options.linkClass:`${this.options.linkClass} ${this.options.invalidLinkClass}`}),0]},addCommands(){return{setWikiLink:e=>({commands:t})=>t.setMark(this.name,e),unsetWikiLink:()=>({commands:e})=>e.unsetMark(this.name)}},addInputRules(){const e=this.type;return[new ue.InputRule({find:xp,handler:({state:t,range:n,match:o})=>{try{const r=o[1];if(!r)return;const{tr:s}=t,i=n.from,a=n.to;s.delete(i,a);const l=e.create({pageName:r}),u=t.schema.text(r,[l]);s.insert(i,u),this.editor.view.dispatch(s)}catch(r){console.warn("WikiLinkSafe: Error in input rule",r)}}})]},onCreate(){const{onWikiLinkClick:e}=this.options;if(!e)return;const t=n=>{const o=n.target;if(o.hasAttribute("data-wiki-link")){const r=o.getAttribute("data-page-name");r&&(n.preventDefault(),e(r))}};this.editor.view.dom.addEventListener("click",t),this._clickHandler=t},onDestroy(){const e=this._clickHandler;e&&this.editor.view.dom.removeEventListener("click",e)}}),rt={header:/^#{1,6}\s+/m,bold:/\*\*[^*]+\*\*/,codeBlock:/```[\s\S]*?```/,list:/^\s*[-*]\s+/m,taskList:/^\s*[-*]\s*\[[ x]\]/im,link:/\[.+\]\(.+\)/,table:/^\|[^\n]+\n\|[-:\s|]+/m,callout:/```(?:info|warning|error|success|note)\s*\n[\s\S]*?```/},Ha=["info","warning","error","success","note"];function vp(e){return e.length<3?!1:!!(rt.header.test(e)||rt.bold.test(e)||rt.list.test(e)||rt.taskList.test(e)||rt.codeBlock.test(e)||rt.callout.test(e)||rt.link.test(e)||rt.table.test(e))}function yp(e){const t=e.trim().split(`
`);if(t.length<2)return"";const o=t[0].split("|").map(a=>a.trim()).filter(a=>a.length>0);if(o.length===0||!t[1].includes("-"))return"";const s=t.slice(2);let i="<table><thead><tr>";for(const a of o)i+="<th><p>"+a+"</p></th>";i+="</tr></thead><tbody>";for(const a of s){if(!a.trim())continue;const l=a.split("|"),u=[];for(let d=0;d<l.length;d++){const m=l[d].trim();d===0&&m===""&&a.trim().startsWith("|")||d===l.length-1&&m===""&&a.trim().endsWith("|")||u.push(m)}if(u.length!==0){i+="<tr>";for(let d=0;d<o.length;d++){const m=u[d]||"";i+="<td><p>"+m+"</p></td>"}i+="</tr>"}}return i+="</tbody></table>",i}function Ep(e){let t=e;const n=/^(\|[^\n]*(?:\n\|[^\n]*)*)/gm,o=[];t=t.replace(n,i=>{const a=i.split(`
`);if(a.length>=2){const l=a[1];if(/^\|?[\s\-:|]+\|?$/.test(l)&&l.includes("-")){const u=yp(i);if(u){const d=`MANUSTABLEPLACEHOLDER${o.length}END`;return o.push(u),d}}}return i}),Ha.forEach(i=>{const a=new RegExp(`\`\`\`${i}\\s*\\n([\\s\\S]*?)\`\`\``,"g");t=t.replace(a,(l,u)=>{let d=u.trim();return d=d.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),d=d.replace(/__([^_]+)__/g,"<strong>$1</strong>"),d=d.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),d=d.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),d=d.replace(/`([^`]+)`/g,"<code>$1</code>"),d.startsWith("<")||(d=`<p>${d}</p>`),`<div data-callout="" data-type="${i}" class="callout callout-${i}">${d}</div>`})}),t=t.replace(/```(\w*)\n([\s\S]*?)```/g,(i,a,l)=>{if(Ha.includes(a))return`<div data-callout="" data-type="${a}" class="callout callout-${a}"><p>${l.trim()}</p></div>`;const u=a||"plaintext",d=l.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return`<pre><code class="language-${u}">${d}</code></pre>`}),t=t.replace(/`([^`]+)`/g,"<code>$1</code>"),t=t.replace(/^(#{1,6})\s+(.+)$/gm,(i,a,l)=>{const u=a.length;return`<h${u}>${l}</h${u}>`}),t=t.replace(/^(\s*)[-*]\s*\[x\]\s+(.+)$/gim,'$1<li data-type="taskItem" data-checked="true"><p>$2</p></li>'),t=t.replace(/^(\s*)[-*]\s*\[\s*\]\s+(.+)$/gim,'$1<li data-type="taskItem" data-checked="false"><p>$2</p></li>'),t=t.replace(/^(\s*)[-*]\s+(?!\[)(.+)$/gm,"$1<li><p>$2</p></li>"),t=t.replace(/^(\s*)\d+\.\s+(.+)$/gm,"$1<li><p>$2</p></li>"),t=t.replace(/(<li data-type="taskItem"[^>]*>[\s\S]*?<\/li>\n?)+/g,'<ul data-type="taskList">$&</ul>'),t=t.replace(/(<li><p>[\s\S]*?<\/p><\/li>\n?)+/g,"<ul>$&</ul>"),t=t.replace(/^>\s+(.+)$/gm,"<blockquote><p>$1</p></blockquote>"),t=t.replace(/^[-*_]{3,}$/gm,"<hr>"),t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),t=t.replace(/__([^_]+)__/g,"<strong>$1</strong>"),t=t.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),t=t.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),t=t.replace(/~~([^~]+)~~/g,"<s>$1</s>"),t=t.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">'),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),t=t.split(`
`).map(i=>{const a=i.trim();return a?/^<[a-z]/.test(a)||/^<\//.test(a)||a.startsWith("MANUSTABLEPLACEHOLDER")?i:`<p>${a}</p>`:""}).join(`
`),t=t.replace(/<p>\s*<\/p>/g,"");for(let i=0;i<o.length;i++)t=t.replace(`MANUSTABLEPLACEHOLDER${i}END`,o[i]);return t}const Fa=ue.Extension.create({name:"markdownPasteSafe",addOptions(){return{enableMarkdownPaste:!0}},addProseMirrorPlugins(){if(!this.options.enableMarkdownPaste)return[];const e=this.editor;return[new de.Plugin({key:new de.PluginKey("markdownPaste"),props:{handlePaste(t,n,o){const r=n.clipboardData;if(!r)return!1;const s=r.getData("text/html");if(s&&s.trim())return!1;const i=r.getData("text/plain");if(!i||!vp(i))return!1;n.preventDefault();const a=Ep(i);return e.commands.insertContent(a,{parseOptions:{preserveWhitespace:!1}}),!0}}})]}}),Wa=new de.PluginKey("collapsibleHeading");function Gn(e,t,n){return`h${t}-${n}-${e.textContent.slice(0,50)}`}let zt=null;function ir(e,t,n){const o=[],r=[];e.descendants((l,u)=>{if(l.type.name==="heading"&&n.levels.includes(l.attrs.level)){const d=Gn(l,l.attrs.level,u);r.push({pos:u,level:l.attrs.level,id:d,isCollapsed:t.collapsedHeadings.has(d),nodeSize:l.nodeSize})}});const s=[];for(let l=0;l<r.length;l++){const u=r[l];if(u.isCollapsed){const d=u.pos+u.nodeSize;let m=e.content.size;for(let h=l+1;h<r.length;h++)if(r[h].level<=u.level){m=r[h].pos;break}d<m&&s.push({start:d,end:m})}}const i=[];for(const l of s)if(i.length===0)i.push(l);else{const u=i[i.length-1];l.start<=u.end?u.end=Math.max(u.end,l.end):i.push(l)}function a(l){for(const u of i)if(l>=u.start&&l<u.end)return!0;return!1}return e.descendants((l,u)=>{if(l.type.name==="heading"&&n.levels.includes(l.attrs.level)){const d=Gn(l,l.attrs.level,u),m=t.collapsedHeadings.has(d),h=a(u);o.push(me.Decoration.node(u,u+l.nodeSize,{class:`collapsible-heading collapsible-heading-level-${l.attrs.level} ${m?"is-collapsed":"is-expanded"}${h?" collapsible-heading-hidden":""}`,"data-heading-id":d,"data-heading-level":String(l.attrs.level)}));const f=me.Decoration.widget(u+l.nodeSize-1,()=>{const p=document.querySelector(`button.collapsible-heading-chevron[data-heading-id="${d}"]`);if(p){p.classList.contains("collapsed")!==m&&(p.classList.remove("collapsed","expanded"),p.classList.add(m?"collapsed":"expanded"),p.title=m?"Click to expand":"Click to collapse");const N=p.parentElement;if(N)return N}const b=document.createElement("span");b.className="collapsible-heading-chevron-wrapper",b.setAttribute("contenteditable","false");const w=document.createElement("button");return w.className=`collapsible-heading-chevron ${m?"collapsed":"expanded"}`,w.setAttribute("data-heading-id",d),w.setAttribute("data-heading-level",String(l.attrs.level)),w.setAttribute("contenteditable","false"),w.setAttribute("tabindex","-1"),w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',w.title=m?"Click to expand":"Click to collapse",w.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation();const N=w.classList.contains("collapsed");w.classList.remove("collapsed","expanded"),w.classList.add(N?"expanded":"collapsed"),w.title=N?"Click to collapse":"Click to expand",t.collapsedHeadings.has(d)?t.collapsedHeadings.delete(d):t.collapsedHeadings.add(d),zt&&zt.dispatch(zt.state.tr.setMeta("collapsibleHeading",{toggled:d}))}),b.appendChild(w),b},{side:1,key:`chevron-${d}`});o.push(f)}else l.isBlock&&a(u)&&o.push(me.Decoration.node(u,u+l.nodeSize,{class:"collapsible-heading-hidden"}))}),me.DecorationSet.create(e,o)}const Ua=ue.Extension.create({name:"collapsibleHeading",addOptions(){return{levels:[1,2,3,4,5,6]}},addStorage(){return{collapsedHeadings:new Set}},addCommands(){return{toggleHeadingCollapse:e=>({editor:t,tr:n})=>{const o=this.storage,r=n.doc.nodeAt(e);if(!r||r.type.name!=="heading")return!1;const s=Gn(r,r.attrs.level,e);return o.collapsedHeadings.has(s)?o.collapsedHeadings.delete(s):o.collapsedHeadings.add(s),t.view.dispatch(n.setMeta("collapsibleHeading",{toggled:s})),!0},expandAllHeadings:()=>({editor:e,tr:t})=>(this.storage.collapsedHeadings.clear(),e.view.dispatch(t.setMeta("collapsibleHeading",{expandAll:!0})),!0),collapseAllHeadings:()=>({editor:e,tr:t})=>{const n=this.storage;return t.doc.descendants((r,s)=>{r.type.name==="heading"&&n.collapsedHeadings.add(Gn(r,r.attrs.level,s))}),e.view.dispatch(t.setMeta("collapsibleHeading",{collapseAll:!0})),!0}}},addProseMirrorPlugins(){const e=this.storage,t=this.options;return[new de.Plugin({key:Wa,view(n){return zt=n,{update(o){zt=o},destroy(){zt=null}}},state:{init(n,o){return{collapsedHeadings:new Set,decorations:ir(o.doc,e,t),docVersion:0}},apply(n,o,r,s){return n.getMeta("collapsibleHeading")||n.docChanged?{collapsedHeadings:new Set(e.collapsedHeadings),decorations:ir(s.doc,e,t),docVersion:o.docVersion+1}:{...o,decorations:o.decorations.map(n.mapping,n.doc)}}},props:{decorations(n){const o=Wa.getState(n);return o?.decorations?o.decorations:ir(n.doc,e,t)}}})]}}),Cp=/\[([^\]]+)\]\(([^)]+)\)$/,Tp=/^(https?:\/\/|www\.)[^\s]+$/i,ja=ue.Extension.create({name:"markdownLinkInputRule",addInputRules(){return[new ue.InputRule({find:Cp,handler:({state:e,range:t,match:n,chain:o})=>{const r=n[1];let s=n[2];s&&!s.startsWith("http://")&&!s.startsWith("https://")&&(s.startsWith("www."),s="https://"+s),o().deleteRange(t).insertContent({type:"text",text:r,marks:[{type:"link",attrs:{href:s,target:"_blank",rel:"noopener noreferrer"}}]}).run()}})]},addProseMirrorPlugins(){const e=this.editor;return[new de.Plugin({key:new de.PluginKey("pasteUrlAsLink"),props:{handlePaste(t,n){const o=n.clipboardData;if(!o)return!1;const r=o.getData("text/plain");if(!r)return!1;const s=r.trim();if(!Tp.test(s))return!1;const{state:i}=t,{selection:a}=i,{from:l,to:u,empty:d}=a;let m=s;if(!m.startsWith("http://")&&!m.startsWith("https://")&&(m.startsWith("www."),m="https://"+m),!d&&i.doc.textBetween(l,u))return e.chain().focus().extendMarkRange("link").setLink({href:m}).run(),!0;const h=i.schema.marks.link.create({href:m}),f=i.tr;return f.insertText(m,l,u),f.addMark(l,l+m.length,h),t.dispatch(f),!0}}})]}}),Sp=["info","warning","error","success","note"],qa=ue.Extension.create({name:"calloutInputRule",addProseMirrorPlugins(){const e=this.editor;return[new de.Plugin({key:new de.PluginKey("calloutInputRule"),props:{handleKeyDown(t,n){if(n.key!=="Enter")return!1;const{state:o}=t,{selection:r,doc:s}=o,{$from:i}=r,a=i.start();i.end();const l=s.textBetween(a,i.pos,""),u=l.trim();for(const d of Sp)if(u===`\`\`\`${d}`){n.preventDefault();const m=o.tr,h=a+l.indexOf("```");m.delete(h,i.pos);const f=e.schema.nodes.callout,p=e.schema.nodes.paragraph;if(f&&p){const b=p.create(),w=f.create({type:d},wc.Fragment.from(b));m.insert(h,w);const g=m.doc.resolve(h+2);m.setSelection(de.TextSelection.near(g)),t.dispatch(m)}return!0}return!1}}})]}}),Xn=new de.PluginKey("searchHighlight"),Ka=ue.Extension.create({name:"searchHighlight",addOptions(){return{searchTerm:"",caseSensitive:!1,useRegex:!1,currentMatchIndex:0}},addStorage(){return{searchTerm:"",caseSensitive:!1,useRegex:!1,currentMatchIndex:0}},addCommands(){return{setSearchHighlight:e=>({editor:t,tr:n,dispatch:o})=>(this.storage.searchTerm=e.searchTerm??this.storage.searchTerm,this.storage.caseSensitive=e.caseSensitive??this.storage.caseSensitive,this.storage.useRegex=e.useRegex??this.storage.useRegex,this.storage.currentMatchIndex=e.currentMatchIndex??this.storage.currentMatchIndex,o&&o(n.setMeta(Xn,{update:!0})),!0),clearSearchHighlight:()=>({editor:e,tr:t,dispatch:n})=>(this.storage.searchTerm="",this.storage.caseSensitive=!1,this.storage.useRegex=!1,this.storage.currentMatchIndex=0,n&&n(t.setMeta(Xn,{update:!0})),!0)}},addProseMirrorPlugins(){const e=this.storage;return[new de.Plugin({key:Xn,state:{init(){return me.DecorationSet.empty},apply(t,n,o,r){const{searchTerm:s,caseSensitive:i,useRegex:a,currentMatchIndex:l}=e,u=t.getMeta(Xn),d=t.docChanged;if(!s)return me.DecorationSet.empty;if(!d&&!u)return n.map(t.mapping,r.doc);const m=[];let h=0;try{let f;if(a)f=new RegExp(s,i?"g":"gi");else{const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");f=new RegExp(p,i?"g":"gi")}r.doc.descendants((p,b)=>{if(p.isText&&p.text){let w;for(;(w=f.exec(p.text))!==null;){const g=b+w.index,N=b+w.index+w[0].length,y=h===l;m.push(me.Decoration.inline(g,N,{class:y?"search-highlight-current":"search-highlight"})),h++}}return!0})}catch{return me.DecorationSet.empty}return me.DecorationSet.create(r.doc,m)}},props:{decorations(t){return this.getState(t)}}})]}}),Ga=ue.Extension.create({name:"tabIndent",priority:1e3,addProseMirrorPlugins(){const e=this.editor;return[kc.keymap({Tab:(t,n)=>{const{$from:o}=t.selection;let r=!1,s=!1;for(let i=o.depth;i>=0;i--){const a=o.node(i);if(a.type.name==="taskList"){r=!0,s=!0;break}if(a.type.name==="bulletList"||a.type.name==="orderedList"){r=!0;break}}return r&&(s?e.chain().focus().sinkListItem("taskItem").run():e.chain().focus().sinkListItem("listItem").run()),!0},"Shift-Tab":(t,n)=>{const{$from:o}=t.selection;let r=!1,s=!1;for(let i=o.depth;i>=0;i--){const a=o.node(i);if(a.type.name==="taskList"){r=!0,s=!0;break}if(a.type.name==="bulletList"||a.type.name==="orderedList"){r=!0;break}}return r&&(s?e.chain().focus().liftListItem("taskItem").run():e.chain().focus().liftListItem("listItem").run()),!0}})]}}),we=new de.PluginKey("selectAllOccurrences");function Xa(e,t,n,o,r){const s=[];if(!t)return s;let i;try{if(o)i=new RegExp(t,n?"g":"gi");else{let a=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r&&(a=`\\b${a}\\b`),i=new RegExp(a,n?"g":"gi")}}catch{return s}return e.descendants((a,l)=>{if(a.isText&&a.text){let u;for(;(u=i.exec(a.text))!==null;)s.push({from:l+u.index,to:l+u.index+u[0].length,text:u[0]})}return!0}),s}function st(e,t){const n=we.getState(e.state);if(!n)return[];const o=[];return n.find().forEach(r=>{if(r.from===r.to)return;const s=e.state.doc.textBetween(r.from,r.to,"");o.push({from:r.from,to:r.to,text:s})}),o}function Ap(e,t){for(let n=0;n<e.length;n++)if(e[n].from>=t)return n;return 0}function pe(e){e.isActive=!1,e.ranges=[],e.searchTerm="",e.typedBuffer="",e.isTypingReplace=!1,e.allMatches=[],e.nextMatchIndex=0,e.isIncremental=!1,e.undoStack=[],e.redoStack=[]}const Ya=ue.Extension.create({name:"selectAllOccurrences",addStorage(){return{isActive:!1,ranges:[],searchTerm:"",caseSensitive:!1,useRegex:!1,wholeWord:!1,typedBuffer:"",isTypingReplace:!1,originalTermLength:0,allMatches:[],nextMatchIndex:0,isIncremental:!1,undoStack:[],redoStack:[]}},addCommands(){return{selectAllOccurrences:e=>({editor:t,tr:n,dispatch:o})=>{const{searchTerm:r,caseSensitive:s=!1,useRegex:i=!1,wholeWord:a=!1}=e;if(!r)return!1;const l=Xa(t.state.doc,r,s,i,a);return l.length===0?!1:(this.storage.isActive=!0,this.storage.ranges=l,this.storage.searchTerm=r,this.storage.caseSensitive=s,this.storage.useRegex=i,this.storage.wholeWord=a,this.storage.typedBuffer="",this.storage.isTypingReplace=!1,this.storage.originalTermLength=r.length,this.storage.allMatches=l,this.storage.nextMatchIndex=l.length,this.storage.isIncremental=!1,this.storage.undoStack=[],this.storage.redoStack=[],o&&o(n.setMeta(we,{activate:!0})),!0)},selectNextOccurrence:()=>({editor:e,tr:t,dispatch:n})=>{const o=this.storage;if(!o.isActive){const{state:r}=e,{from:s,to:i}=r.selection;let a="";if(s!==i)a=r.doc.textBetween(s,i,"");else{const m=r.doc.resolve(s),h=m.parent;if(h.isTextblock){const f=h.textContent,p=m.parentOffset;let b=p,w=p;for(;b>0&&/\w/.test(f[b-1]);)b--;for(;w<f.length&&/\w/.test(f[w]);)w++;b<w&&(a=f.slice(b,w))}}if(!a)return!1;const l=Xa(r.doc,a,!1,!1,!1);if(l.length===0)return!1;const u=Ap(l,s),d=l[u];return o.isActive=!0,o.ranges=[d],o.searchTerm=a,o.caseSensitive=!1,o.useRegex=!1,o.wholeWord=!1,o.typedBuffer="",o.isTypingReplace=!1,o.originalTermLength=a.length,o.allMatches=l,o.nextMatchIndex=(u+1)%l.length,o.isIncremental=!0,o.undoStack=[],o.redoStack=[],n&&n(t.setMeta(we,{activate:!0})),setTimeout(()=>{try{const m=e.view.domAtPos(d.from);m.node&&m.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},20),!0}if(o.isIncremental&&o.allMatches.length>0){const r=o.nextMatchIndex,s=o.allMatches[r];return o.ranges.some(a=>a.from===s.from&&a.to===s.to)?!1:(o.ranges=[...o.ranges,s],o.nextMatchIndex=(r+1)%o.allMatches.length,o.ranges.length>=o.allMatches.length&&(o.isIncremental=!1),n&&n(t.setMeta(we,{activate:!0})),setTimeout(()=>{try{const a=e.view.domAtPos(s.from);a.node&&a.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},20),!0)}return!1},clearAllOccurrences:()=>({tr:e,dispatch:t})=>(pe(this.storage),t&&t(e.setMeta(we,{deactivate:!0})),!0),toggleMarkOnAllOccurrences:e=>({editor:t,tr:n,dispatch:o})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;const r=t.schema.marks[e];if(!r)return!1;const{ranges:s}=this.storage,i=s.every(a=>{let l=!0;return t.state.doc.nodesBetween(a.from,a.to,u=>{u.isText&&!r.isInSet(u.marks)&&(l=!1)}),l});if(o){for(const a of s)i?n.removeMark(a.from,a.to,r):n.addMark(a.from,a.to,r.create());o(n)}return setTimeout(()=>{try{const a=t.view;if(a){const l=st(a,this.storage);this.storage.ranges=l,l.length===0&&pe(this.storage)}}catch{}},10),!0},deleteAllOccurrences:()=>({editor:e,tr:t,dispatch:n})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;if(n){const o=[...this.storage.ranges].sort((r,s)=>s.from-r.from);for(const r of o)t.delete(r.from,r.to);n(t)}return pe(this.storage),!0},replaceAllOccurrences:e=>({editor:t,tr:n,dispatch:o})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;if(o){const r=[...this.storage.ranges].sort((s,i)=>i.from-s.from);for(const s of r)n.replaceWith(s.from,s.to,t.schema.text(e));o(n)}return e?setTimeout(()=>{try{const r=t.view;if(r){const s=st(r,this.storage);this.storage.ranges=s,this.storage.searchTerm=e,s.length===0&&pe(this.storage)}}catch{}},10):pe(this.storage),!0},getOccurrencesState:()=>()=>!0}},addKeyboardShortcuts(){return{"Mod-d":()=>this.editor.commands.selectNextOccurrence()}},addProseMirrorPlugins(){const e=this.storage;return[new de.Plugin({key:we,state:{init(){return me.DecorationSet.empty},apply(t,n,o,r){const s=t.getMeta(we);if(s?.deactivate||!e.isActive)return me.DecorationSet.empty;if(s?.activate||s?.refresh){const i=[];for(const a of e.ranges){i.push(me.Decoration.inline(a.from,a.to,{class:"select-all-occurrence-highlight","data-occurrence":"true"}));const l=document.createElement("span");l.className="select-all-multi-cursor",l.setAttribute("aria-hidden","true"),i.push(me.Decoration.widget(a.to,l,{side:1,key:`cursor-${a.from}-${a.to}`}))}return me.DecorationSet.create(r.doc,i)}return t.docChanged?n.map(t.mapping,r.doc):n}},props:{decorations(t){return this.getState(t)},handleClick(t,n){if(!e.isActive)return!1;if(!e.ranges.some(r=>n>=r.from&&n<=r.to)){pe(e);const{tr:r}=t.state;t.dispatch(r.setMeta(we,{deactivate:!0}))}return!1},handleKeyDown(t,n){if(!e.isActive)return!1;if(n.key==="Escape"){pe(e);const{tr:o}=t.state;return t.dispatch(o.setMeta(we,{deactivate:!0})),!0}if((n.metaKey||n.ctrlKey)&&n.key==="z"&&!n.shiftKey){if(n.preventDefault(),e.isTypingReplace&&e.undoStack.length>0){e.redoStack.push(e.typedBuffer);const r=e.undoStack.pop();return e.typedBuffer=r,r===""&&(e.isTypingReplace=!1),Wr.undo(t.state,t.dispatch),setTimeout(()=>{const s=st(t);e.ranges=s,s.length===0&&pe(e)},10),!0}pe(e);const{tr:o}=t.state;return t.dispatch(o.setMeta(we,{deactivate:!0})),!1}if((n.metaKey||n.ctrlKey)&&(n.key==="z"&&n.shiftKey||n.key==="y")){if(n.preventDefault(),e.redoStack.length>0){e.undoStack.push(e.isTypingReplace?e.typedBuffer:"");const r=e.redoStack.pop();return e.typedBuffer=r,e.isTypingReplace=!0,Wr.redo(t.state,t.dispatch),setTimeout(()=>{const s=st(t);e.ranges=s,s.length===0&&pe(e)},10),!0}pe(e);const{tr:o}=t.state;return t.dispatch(o.setMeta(we,{deactivate:!0})),!1}if(n.metaKey||n.ctrlKey)return!1;if(n.key==="Backspace"){if(n.preventDefault(),e.isTypingReplace&&e.typedBuffer.length>0){e.undoStack.push(e.typedBuffer),e.typedBuffer=e.typedBuffer.slice(0,-1);const o=st(t);if(o.length===0){pe(e);const{tr:a}=t.state;return t.dispatch(a.setMeta(we,{deactivate:!0})),!0}const r=e.typedBuffer.length>0?e.typedBuffer:e.searchTerm,s=[...o].sort((a,l)=>l.from-a.from),{tr:i}=t.state;for(const a of s)i.replaceWith(a.from,a.to,t.state.schema.text(r));t.dispatch(i),e.typedBuffer.length===0&&(e.isTypingReplace=!1),setTimeout(()=>{const a=st(t);e.ranges=a,a.length===0&&pe(e)},10)}else if(!e.isTypingReplace){const o=[...e.ranges].sort((i,a)=>a.from-i.from),{tr:r}=t.state;for(const i of o)r.delete(i.from,i.to);t.dispatch(r),pe(e);const{tr:s}=t.state;t.dispatch(s.setMeta(we,{deactivate:!0}))}return!0}if(n.key==="Delete"){n.preventDefault();const o=[...e.ranges].sort((i,a)=>a.from-i.from),{tr:r}=t.state;for(const i of o)r.delete(i.from,i.to);t.dispatch(r),pe(e);const{tr:s}=t.state;return t.dispatch(s.setMeta(we,{deactivate:!0})),!0}if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(n.key)){pe(e);const{tr:o}=t.state;return t.dispatch(o.setMeta(we,{deactivate:!0})),!1}if(n.key==="Enter"){pe(e);const{tr:o}=t.state;return t.dispatch(o.setMeta(we,{deactivate:!0})),!1}return!1},handleTextInput(t,n,o,r){if(!e.isActive||!r)return!1;const s=st(t);if(s.length===0){pe(e);const{tr:l}=t.state;return t.dispatch(l.setMeta(we,{deactivate:!0})),!0}e.undoStack.push(e.isTypingReplace?e.typedBuffer:""),e.redoStack=[],e.isTypingReplace?e.typedBuffer+=r:(e.isTypingReplace=!0,e.typedBuffer=r);const i=[...s].sort((l,u)=>u.from-l.from),{tr:a}=t.state;for(const l of i)a.replaceWith(l.from,l.to,t.state.schema.text(e.typedBuffer));return t.dispatch(a),setTimeout(()=>{const l=st(t);e.ranges=l,l.length===0&&pe(e)},10),!0}}})]}});function Mp(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=()=>{typeof o.result=="string"?t(o.result):n(new Error("Failed to read file"))},o.onerror=()=>n(new Error("Failed to read file")),o.readAsDataURL(e)})}function Pp(e,t){return t.includes(e.type)}function Lp(e){return new Promise(t=>{const n=new Image;n.onload=()=>{t({width:n.width,height:n.height})},n.onerror=()=>{t({width:400,height:300})},n.src=e})}async function Vp(e,t,n){return new Promise((o,r)=>{const s=new Image,i=new FileReader;i.onload=a=>{s.src=a.target?.result},i.onerror=()=>r(new Error("Failed to read file")),s.onload=()=>{let a=s.width,l=s.height;if(a>t){const b=t/a;a=t,l=Math.round(l*b)}const u=document.createElement("canvas");u.width=a,u.height=l;const d=u.getContext("2d");if(!d){r(new Error("Failed to get canvas context"));return}d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(s,0,0,a,l);const m=e.type==="image/png"||e.type==="image/gif",h=m?"image/png":"image/jpeg",f=m?void 0:n,p=u.toDataURL(h,f);o({dataUrl:p,width:a,height:l})},s.onerror=()=>r(new Error("Failed to load image")),i.readAsDataURL(e)})}async function Za(e,t,n){if(!Pp(e,n.allowedMimeTypes))return n.onUploadError?.(`Invalid file type: ${e.type}. Allowed types: ${n.allowedMimeTypes.join(", ")}`),!1;if(e.size>n.maxFileSize){const o=(n.maxFileSize/1048576).toFixed(1),r=(e.size/(1024*1024)).toFixed(1);return n.onUploadError?.(`File too large: ${r}MB. Maximum size: ${o}MB`),!1}try{n.onUploadStart?.();let o,r;const s=["image/jpeg","image/png","image/webp"].includes(e.type);if(n.enableCompression&&s){const i=await Vp(e,n.maxCompressedWidth,n.compressionQuality);o=i.dataUrl,r=Math.min(i.width,600)}else{o=await Mp(e);const i=await Lp(o);r=Math.min(i.width,600)}return t.chain().focus().setImage({src:o,alt:e.name,width:r}).run(),n.onUploadComplete?.(),!0}catch(o){return n.onUploadError?.(`Failed to process image: ${o instanceof Error?o.message:"Unknown error"}`),!1}}function Qa(e){const t=[];if(e.items)for(let n=0;n<e.items.length;n++){const o=e.items[n];if(o.kind==="file"&&o.type.startsWith("image/")){const r=o.getAsFile();r&&t.push(r)}}if(t.length===0&&e.files)for(let n=0;n<e.files.length;n++){const o=e.files[n];o.type.startsWith("image/")&&t.push(o)}return t}const Ja=ue.Extension.create({name:"imageUpload",addOptions(){return{maxFileSize:5*1024*1024,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],enableCompression:!0,maxCompressedWidth:1200,compressionQuality:.8,onUploadStart:void 0,onUploadComplete:void 0,onUploadError:void 0}},addProseMirrorPlugins(){const e=this.options,t=this.editor;return[new de.Plugin({key:new de.PluginKey("imageUpload"),props:{handlePaste(n,o){const r=o.clipboardData;if(!r)return!1;const s=Qa(r);return s.length===0?!1:(o.preventDefault(),s.forEach(i=>{Za(i,t,e)}),!0)},handleDrop(n,o,r,s){if(s)return!1;const i=o.dataTransfer;if(!i)return!1;const a=Qa(i);if(a.length===0)return!1;o.preventDefault();const l=n.posAtCoords({left:o.clientX,top:o.clientY});if(l){const u=n.state.tr.setSelection(de.TextSelection.near(n.state.doc.resolve(l.pos)));n.dispatch(u)}return a.forEach(u=>{Za(u,t,e)}),!0}}})]}});function Ra({containerRef:e,enabled:t=!0}){const[n,o]=x.useState(!1),[r,s]=x.useState(0),i=x.useCallback(d=>{d.preventDefault(),d.stopPropagation(),d.dataTransfer?.types.includes("Files")&&(s(m=>m+1),o(!0))},[]),a=x.useCallback(d=>{d.preventDefault(),d.stopPropagation(),s(m=>{const h=m-1;return h===0&&o(!1),h})},[]),l=x.useCallback(d=>{d.preventDefault(),d.stopPropagation()},[]),u=x.useCallback(d=>{d.preventDefault(),d.stopPropagation(),o(!1),s(0)},[]);return x.useEffect(()=>{if(!t||!e.current)return;const d=e.current;return d.addEventListener("dragenter",i),d.addEventListener("dragleave",a),d.addEventListener("dragover",l),d.addEventListener("drop",u),()=>{d.removeEventListener("dragenter",i),d.removeEventListener("dragleave",a),d.removeEventListener("dragover",l),d.removeEventListener("drop",u)}},[t,e,i,a,l,u]),n?c.jsxDEV("div",{className:"image-drop-zone",children:c.jsxDEV("div",{className:"image-drop-zone-content",children:[c.jsxDEV("div",{className:"image-drop-zone-icon",children:c.jsxDEV(C.ImagePlus,{className:"w-12 h-12"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:84,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:83,columnNumber:9},this),c.jsxDEV("div",{className:"image-drop-zone-text",children:[c.jsxDEV("span",{className:"image-drop-zone-title",children:"Drop image here"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:87,columnNumber:11},this),c.jsxDEV("span",{className:"image-drop-zone-subtitle",children:"Release to insert image into the editor"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:88,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:86,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:82,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageDropZone.tsx",lineNumber:81,columnNumber:5},this):null}function Ip({src:e,alt:t,position:n,onSave:o,onDelete:r,onClose:s}){const[i,a]=x.useState(e),[l,u]=x.useState(t),d=x.useRef(null),m=x.useRef(null);x.useEffect(()=>{m.current?.focus(),m.current?.select()},[]),x.useEffect(()=>{const b=g=>{d.current&&!d.current.contains(g.target)&&s()},w=setTimeout(()=>{document.addEventListener("mousedown",b)},100);return()=>{clearTimeout(w),document.removeEventListener("mousedown",b)}},[s]),x.useEffect(()=>{const b=w=>{w.key==="Escape"?s():w.key==="Enter"&&(w.metaKey||w.ctrlKey)&&h()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i,l,s]);const h=()=>{i.trim()&&o(i.trim(),l.trim())},p=(()=>{let N=n.x,y=n.y+10;return N+320>window.innerWidth-16&&(N=window.innerWidth-320-16),N<16&&(N=16),y+200>window.innerHeight-16&&(y=n.y-200-10),{left:N,top:y}})();return c.jsxDEV("div",{ref:d,className:"image-edit-popover",style:{position:"fixed",left:p.left,top:p.top,zIndex:1e3},children:[c.jsxDEV("div",{className:"image-edit-popover-header",children:[c.jsxDEV("span",{className:"image-edit-popover-title",children:"Edit Image"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:135,columnNumber:9},this),c.jsxDEV("button",{onClick:s,className:"image-edit-popover-close","aria-label":"Close",children:c.jsxDEV(C.X,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:141,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:136,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:134,columnNumber:7},this),c.jsxDEV("div",{className:"image-edit-popover-content",children:[c.jsxDEV("div",{className:"image-edit-popover-field",children:[c.jsxDEV("label",{className:"image-edit-popover-label",children:[c.jsxDEV(C.Link,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:150,columnNumber:13},this),c.jsxDEV("span",{children:"Image URL"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:149,columnNumber:11},this),c.jsxDEV("input",{ref:m,type:"text",value:i,onChange:b=>a(b.target.value),placeholder:"https://example.com/image.jpg",className:"image-edit-popover-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:153,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:148,columnNumber:9},this),c.jsxDEV("div",{className:"image-edit-popover-field",children:[c.jsxDEV("label",{className:"image-edit-popover-label",children:[c.jsxDEV(C.Type,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:166,columnNumber:13},this),c.jsxDEV("span",{children:"Alt Text"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:167,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:165,columnNumber:11},this),c.jsxDEV("input",{type:"text",value:l,onChange:b=>u(b.target.value),placeholder:"Describe the image...",className:"image-edit-popover-input"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:169,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:164,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:146,columnNumber:7},this),c.jsxDEV("div",{className:"image-edit-popover-footer",children:[c.jsxDEV("button",{onClick:r,className:"image-edit-popover-btn image-edit-popover-btn-delete",title:"Delete image",children:c.jsxDEV(C.Trash2,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:186,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:181,columnNumber:9},this),c.jsxDEV("div",{className:"image-edit-popover-actions",children:[c.jsxDEV("button",{onClick:s,className:"image-edit-popover-btn image-edit-popover-btn-cancel",children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:189,columnNumber:11},this),c.jsxDEV("button",{onClick:h,className:"image-edit-popover-btn image-edit-popover-btn-save",disabled:!i.trim(),children:[c.jsxDEV(C.Check,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:200,columnNumber:13},this),"Save"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:195,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:188,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:180,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ImageEditPopover.tsx",lineNumber:123,columnNumber:5},this)}function Dp(e){const t=[],n=e.split(`
`);let o=0,r=!1,s="";for(let i=0;i<n.length;i++){const a=n[i],l=o;if(a.startsWith("```")){r?(r=!1,t.push({type:"code-block",content:a,start:l,end:l+a.length})):(r=!0,s=a.slice(3).trim(),t.push({type:"code-block",content:"```",start:l,end:l+3}),s&&t.push({type:"code-block-lang",content:s,start:l+3,end:l+3+s.length})),o+=a.length+1;continue}if(r){t.push({type:"code-block",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}const u=a.match(/^(#{1,6})\s+(.*)$/);if(u){const N=u[1].length;t.push({type:`heading${N}`,content:a,start:l,end:l+a.length}),o+=a.length+1;continue}if(/^(-{3,}|\*{3,}|_{3,})$/.test(a.trim())){t.push({type:"horizontal-rule",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}if(a.startsWith(">")){t.push({type:"blockquote",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}if(/^\|?[\s-:|]+\|?$/.test(a)&&a.includes("-")){t.push({type:"table-separator",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}if(a.includes("|")&&(a.startsWith("|")||a.trim().includes(" | "))){t.push({type:"table-cell",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}const d=a.match(/^(\s*[-*+]\s+)\[([xX ])\]\s+(.*)$/);if(d){const N=d[2].toLowerCase()==="x";t.push({type:N?"task-checked":"task-list",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}if(a.match(/^(\s*[-*+])\s+(.*)$/)){t.push({type:"list-bullet",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}if(a.match(/^(\s*\d+\.)\s+(.*)$/)){t.push({type:"list-number",content:a,start:l,end:l+a.length}),o+=a.length+1;continue}let f=0;const p=[{regex:/\*\*\*(.+?)\*\*\*|___(.+?)___/g,type:"bold-italic"},{regex:/\*\*(.+?)\*\*|__(.+?)__/g,type:"bold"},{regex:/\*(.+?)\*|_(.+?)_/g,type:"italic"},{regex:/~~(.+?)~~/g,type:"strikethrough"},{regex:/`([^`]+)`/g,type:"code-inline"},{regex:/!\[([^\]]*)\]\(([^)]+)\)/g,type:"image"},{regex:/\[([^\]]+)\]\(([^)]+)\)/g,type:"link"}],b=[];for(const N of p){let y;for(N.regex.lastIndex=0;(y=N.regex.exec(a))!==null;)b.push({start:l+y.index,end:l+y.index+y[0].length,type:N.type,content:y[0]})}b.sort((N,y)=>N.start-y.start);const w=[];let g=l;for(const N of b)N.start>=g&&(w.push(N),g=N.end);for(const N of w)N.start>l+f&&t.push({type:"text",content:a.substring(f,N.start-l),start:l+f,end:N.start}),t.push({type:N.type,content:N.content,start:N.start,end:N.end}),f=N.end-l;f<a.length&&t.push({type:"text",content:a.substring(f),start:l+f,end:l+a.length}),w.length===0&&a.length>0&&t.push({type:"text",content:a,start:l,end:l+a.length}),o+=a.length+1}return t}function Op(e){return{heading1:"md-heading md-h1",heading2:"md-heading md-h2",heading3:"md-heading md-h3",heading4:"md-heading md-h4",heading5:"md-heading md-h5",heading6:"md-heading md-h6",bold:"md-bold",italic:"md-italic","bold-italic":"md-bold-italic",strikethrough:"md-strikethrough","code-inline":"md-code-inline","code-block":"md-code-block","code-block-lang":"md-code-lang",link:"md-link","link-text":"md-link-text","link-url":"md-link-url",image:"md-image","list-bullet":"md-list-bullet","list-number":"md-list-number","task-list":"md-task","task-checked":"md-task-checked",blockquote:"md-blockquote","horizontal-rule":"md-hr","table-header":"md-table-header","table-separator":"md-table-separator","table-cell":"md-table-cell",text:"md-text"}[e]||"md-text"}function sn(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function Bp(e,t){if(t.length===0)return sn(e);let n="";const o=e.split(`
`);let r=0;for(let s=0;s<o.length;s++){const i=o[s],a=r+i.length,l=t.filter(d=>d.start>=r&&d.start<a);let u=r;for(const d of l)d.start>u&&(n+=sn(e.substring(u,d.start))),n+=`<span class="${Op(d.type)}">${sn(d.content)}</span>`,u=d.end;u<a&&(n+=sn(e.substring(u,a))),s<o.length-1&&(n+=`
`),r=a+1}return n}function $p({content:e,onChange:t,placeholder:n="Write your markdown here...",editable:o=!0,autofocus:r=!1,className:s=""}){const i=x.useRef(null),a=x.useRef(null),l=x.useRef(null),u=x.useMemo(()=>{const f=Dp(e);return Bp(e,f)},[e]),d=x.useCallback(()=>{const f=i.current,p=a.current;if(f){f.style.height="auto";const b=Math.max(f.scrollHeight,200);f.style.height=`${b}px`,p&&(p.style.height=`${b}px`)}},[]),m=x.useCallback(()=>{const f=i.current,p=a.current;f&&p&&(p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft)},[]);x.useEffect(()=>{d()},[e,d]),x.useEffect(()=>{r&&i.current&&i.current.focus()},[r]);const h=x.useCallback(f=>{if(f.key==="Tab"){f.preventDefault();const p=f.currentTarget,b=p.selectionStart,w=p.selectionEnd,g=p.value;if(f.shiftKey){const N=g.substring(0,b),y=g.substring(b,w),E=g.substring(w),M=N.lastIndexOf(`
`)+1,S=N.substring(0,M),T=N.substring(M),D=(T+y).split(`
`),z=D.map(U=>U.startsWith("  ")?U.substring(2):U.startsWith("	")?U.substring(1):U),q=S+z.join(`
`)+E;t(q),setTimeout(()=>{const U=(T+y).length-z.join(`
`).length;p.selectionStart=Math.max(M,b-(D[0].length-z[0].length)),p.selectionEnd=w-U},0)}else if(b===w){const N=g.substring(0,b)+"  "+g.substring(w);t(N),setTimeout(()=>{p.selectionStart=p.selectionEnd=b+2},0)}else{const N=g.substring(0,b),y=g.substring(b,w),E=g.substring(w),M=N.lastIndexOf(`
`)+1,S=N.substring(0,M),D=(N.substring(M)+y).split(`
`),z=D.map(U=>"  "+U),q=S+z.join(`
`)+E;t(q),setTimeout(()=>{p.selectionStart=b+2,p.selectionEnd=w+D.length*2},0)}}},[t]);return c.jsxDEV("div",{ref:l,className:`syntax-highlighted-editor ${s}`,children:[c.jsxDEV("div",{ref:a,className:"syntax-highlight-overlay",dangerouslySetInnerHTML:{__html:u||`<span class="md-placeholder">${sn(n)}</span>`},"aria-hidden":"true"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SyntaxHighlightedMarkdown.tsx",lineNumber:502,columnNumber:7},this),c.jsxDEV("textarea",{ref:i,value:e,onChange:f=>t(f.target.value),onKeyDown:h,onScroll:m,placeholder:"",disabled:!o,className:"syntax-textarea",spellCheck:!1},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SyntaxHighlightedMarkdown.tsx",lineNumber:508,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/SyntaxHighlightedMarkdown.tsx",lineNumber:501,columnNumber:5},this)}let el=0,ar=0,tl=0;function zp(e){ar++,tl=e}const _p=x.memo(function({visible:t,onClose:n,editor:o}){const[r,s]=x.useState(!1),[i,a]=x.useState({fps:0,frameTime:0,frameTimeMax:0,memoryUsed:0,memoryTotal:0,renderCount:0,transactionCount:0,lastTransactionTime:0,domNodes:0,longFrames:0}),l=x.useRef([]),u=x.useRef(performance.now()),d=x.useRef(0),m=x.useRef(0),h=x.useRef(0),f=x.useRef(0),[p,b]=x.useState(new Array(60).fill(0)),[w,g]=x.useState(new Array(60).fill(0));x.useEffect(()=>{if(!t||!o)return;const S=()=>{const T=performance.now();queueMicrotask(()=>{const D=performance.now()-T;zp(D)})};return o.on("transaction",S),()=>{o.off("transaction",S)}},[t,o]),x.useEffect(()=>{if(!t)return;let S=0,T=performance.now(),D=0;const z=q=>{const U=q-u.current;if(u.current=q,l.current.push({time:q,duration:U}),l.current.length>120&&(l.current=l.current.slice(-120)),U>16.67&&m.current++,S++,q-T>=1e3){D=S,S=0,T=q;const j=l.current.slice(-60),G=j.length>0?j.reduce((K,Y)=>K+Y.duration,0)/j.length:0,R=j.length>0?Math.max(...j.map(K=>K.duration)):0,W=performance.memory,X=W?W.usedJSHeapSize/(1024*1024):0,L=W?W.jsHeapSizeLimit/(1024*1024):0,_=document.querySelectorAll("*").length,A=el-h.current,$=ar-f.current;h.current=el,f.current=ar,a({fps:D,frameTime:Math.round(G*100)/100,frameTimeMax:Math.round(R*100)/100,memoryUsed:Math.round(X*10)/10,memoryTotal:Math.round(L),renderCount:A,transactionCount:$,lastTransactionTime:Math.round(tl*100)/100,domNodes:_,longFrames:m.current}),b(K=>[...K.slice(1),D]),g(K=>[...K.slice(1),G]),m.current=0}d.current=requestAnimationFrame(z)};return d.current=requestAnimationFrame(z),()=>{cancelAnimationFrame(d.current)}},[t]);const N=x.useCallback(()=>{n?.()},[n]),y=x.useCallback(()=>{s(S=>!S)},[]);if(!t)return null;const E=S=>S>=55?"#4ade80":S>=30?"#fbbf24":"#f87171",v=S=>S<=16.67?"#4ade80":S<=33.33?"#fbbf24":"#f87171",M=(S,T,D)=>{const U=S.map((j,G)=>{const R=G/(S.length-1)*120,W=24-Math.min(j,T)/T*24;return`${R},${W}`}).join(" ");return c.jsxDEV("svg",{width:120,height:24,className:"perf-sparkline",children:c.jsxDEV("polyline",{points:U,fill:"none",stroke:D,strokeWidth:"1.5",strokeLinejoin:"round"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:225,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:224,columnNumber:7},this)};return c.jsxDEV("div",{className:"perf-profiler-overlay",children:[c.jsxDEV("div",{className:"perf-profiler-header",children:[c.jsxDEV("div",{className:"perf-profiler-title",children:[c.jsxDEV(C.Activity,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:241,columnNumber:11},this),c.jsxDEV("span",{children:"Performance"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:240,columnNumber:9},this),c.jsxDEV("div",{className:"perf-profiler-actions",children:[c.jsxDEV("button",{onClick:y,title:r?"Expand":"Minimize",children:r?c.jsxDEV(C.Maximize2,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:246,columnNumber:28},this):c.jsxDEV(C.Minimize2,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:246,columnNumber:54},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:245,columnNumber:11},this),c.jsxDEV("button",{onClick:N,title:"Close profiler",children:c.jsxDEV(C.X,{size:12},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:249,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:248,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:244,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:239,columnNumber:7},this),!r&&c.jsxDEV("div",{className:"perf-profiler-body",children:[c.jsxDEV("div",{className:"perf-section",children:[c.jsxDEV("div",{className:"perf-row",children:[c.jsxDEV("span",{className:"perf-label",children:"FPS"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:259,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value",style:{color:E(i.fps)},children:i.fps},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:258,columnNumber:13},this),M(p,70,E(i.fps))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:257,columnNumber:11},this),c.jsxDEV("div",{className:"perf-section",children:[c.jsxDEV("div",{className:"perf-row",children:[c.jsxDEV("span",{className:"perf-label",children:"Frame Time"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:270,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value",style:{color:v(i.frameTime)},children:[i.frameTime,"ms"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:271,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:269,columnNumber:13},this),c.jsxDEV("div",{className:"perf-row perf-row-sub",children:[c.jsxDEV("span",{className:"perf-label-sub",children:"Max"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:276,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value-sub",style:{color:v(i.frameTimeMax)},children:[i.frameTimeMax,"ms"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:277,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:275,columnNumber:13},this),c.jsxDEV("div",{className:"perf-row perf-row-sub",children:[c.jsxDEV("span",{className:"perf-label-sub",children:["Jank (",">"," 16.7ms)"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:282,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value-sub",style:{color:i.longFrames>3?"#f87171":"#4ade80"},children:[i.longFrames,"/s"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:283,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:281,columnNumber:13},this),M(w,50,v(i.frameTime))]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:268,columnNumber:11},this),c.jsxDEV("div",{className:"perf-section",children:[c.jsxDEV("div",{className:"perf-row",children:[c.jsxDEV("span",{className:"perf-label",children:"Renders/s"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:293,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value",children:i.renderCount},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:294,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:292,columnNumber:13},this),c.jsxDEV("div",{className:"perf-row",children:[c.jsxDEV("span",{className:"perf-label",children:"Transactions/s"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:297,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value",children:i.transactionCount},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:298,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:296,columnNumber:13},this),c.jsxDEV("div",{className:"perf-row perf-row-sub",children:[c.jsxDEV("span",{className:"perf-label-sub",children:"Last TX time"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:301,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value-sub",children:[i.lastTransactionTime,"ms"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:302,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:300,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:291,columnNumber:11},this),c.jsxDEV("div",{className:"perf-section",children:[c.jsxDEV("div",{className:"perf-row",children:[c.jsxDEV("span",{className:"perf-label",children:"DOM Nodes"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:309,columnNumber:15},this),c.jsxDEV("span",{className:"perf-value",children:i.domNodes.toLocaleString()},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:310,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:308,columnNumber:13},this),i.memoryTotal>0&&c.jsxDEV("div",{className:"perf-row",children:[c.jsxDEV("span",{className:"perf-label",children:"Memory"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:314,columnNumber:17},this),c.jsxDEV("span",{className:"perf-value",children:[i.memoryUsed,"MB / ",i.memoryTotal,"MB"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:315,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:313,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:307,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:255,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/PerformanceProfiler.tsx",lineNumber:237,columnNumber:5},this)});function Hp(e,t,n){const o=[];return e.state.doc.descendants((s,i)=>{if(s.type.name==="heading"){const a=s.attrs.level;if(a>=t&&a<=n){const l=s.textContent;l.trim()&&o.push({id:`toc-heading-${i}`,text:l.trim(),level:a,pos:i})}}}),o}function Fp(e){if(e.length===0)return[];const t=[],n=[];for(const o of e){const r={...o,children:[]};for(;n.length>0&&n[n.length-1].level>=o.level;)n.pop();if(n.length===0)t.push(r);else{const s=n[n.length-1].item;s.children||(s.children=[]),s.children.push(r)}n.push({item:r,level:o.level})}return t}function nl(e,t){try{const n=e.state.doc.resolve(t),o=e.view.nodeDOM(n.before(n.depth+1));if(o instanceof HTMLElement)return o;const r=e.view.nodeDOM(t);if(r instanceof HTMLElement)return r}catch{}return null}const lr=x.memo(function({editor:t,visible:n=!0,onVisibilityChange:o,title:r="",minLevel:s=1,maxLevel:i=4,showLevelIndicators:a=!1,highlightActive:l=!0,treeView:u=!1,className:d="",width:m="220px",position:h="right",scrollOffset:f=20,onItemClick:p,renderItem:b,showToggleButton:w=!0,scrollContainerRef:g}){const[N,y]=x.useState([]),[E,v]=x.useState(null),[M,S]=x.useState(n),[T,D]=x.useState(new Set),z=x.useRef(null),q=x.useRef(null);x.useEffect(()=>{S(n)},[n]);const U=x.useCallback(()=>{if(!t||t.isDestroyed)return;const A=Hp(t,s,i);y(A),E&&!A.find($=>$.id===E)&&v(null)},[t,s,i,E]);x.useEffect(()=>{if(!t)return;const A=()=>{q.current&&clearTimeout(q.current),q.current=setTimeout(()=>U(),300)};return U(),t.on("update",A),t.on("create",A),()=>{t.off("update",A),t.off("create",A),q.current&&clearTimeout(q.current)}},[t,U]),x.useEffect(()=>{if(!t||!l||!M||N.length===0)return;const A=g?.current||t.view.dom.closest(".editor-content-wrapper");if(!A)return;const $=()=>{const se=A.getBoundingClientRect();let ce=null;for(let be=N.length-1;be>=0;be--){const Z=N[be],Ce=nl(t,Z.pos);if(Ce&&Ce.getBoundingClientRect().top-se.top<=f+10){ce=Z.id;break}}!ce&&N.length>0&&(ce=N[0].id),v(ce)};let K;const Y=()=>{cancelAnimationFrame(K),K=requestAnimationFrame($)};return A.addEventListener("scroll",Y,{passive:!0}),$(),()=>{A.removeEventListener("scroll",Y),cancelAnimationFrame(K)}},[t,N,l,M,f,g]);const j=x.useCallback(A=>{if(!t||t.isDestroyed)return;const $=nl(t,A.pos);if($){const K=g?.current||t.view.dom.closest(".editor-content-wrapper");if(K){const Y=K.getBoundingClientRect(),ce=$.getBoundingClientRect().top-Y.top+K.scrollTop;K.scrollTo({top:ce-f,behavior:"smooth"})}else $.scrollIntoView({behavior:"smooth",block:"start"})}try{t.commands.setTextSelection(A.pos+1)}catch{}v(A.id),p?.(A)},[t,f,p,g]),G=x.useCallback(()=>{const A=!M;S(A),o?.(A)},[M,o]),R=x.useCallback(A=>{D($=>{const K=new Set($);return K.has(A)?K.delete(A):K.add(A),K})},[]),W=x.useCallback((A,$,K=0)=>{if(b)return b(A,$,()=>j(A));const Y=(A.level-s)*14,se=u&&A.children&&A.children.length>0,ce=T.has(A.id);return c.jsxDEV("div",{className:`toc-item ${$?"toc-item-active":""} toc-level-${A.level}`,style:{paddingLeft:`${Y+10}px`},children:c.jsxDEV("button",{className:"toc-item-button",onClick:()=>j(A),title:A.text,children:[se&&c.jsxDEV("span",{className:"toc-collapse-toggle",onClick:be=>{be.stopPropagation(),R(A.id)},children:c.jsxDEV("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:ce?c.jsxDEV("path",{d:"M3.5 2L7 5L3.5 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:257,columnNumber:21},this):c.jsxDEV("path",{d:"M2 3.5L5 7L8 3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:258,columnNumber:21},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:255,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:248,columnNumber:13},this),a&&c.jsxDEV("span",{className:"toc-level-indicator",children:["H",A.level]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:264,columnNumber:13},this),c.jsxDEV("span",{className:"toc-item-text",children:A.text},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:242,columnNumber:9},this)},A.id,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:237,columnNumber:7},this)},[b,j,u,s,a,T,R]),X=x.useCallback((A,$=0)=>A.map(K=>{const Y=E===K.id,se=T.has(K.id),ce=K.children&&K.children.length>0;return c.jsxDEV("div",{children:[W(K,Y,$),ce&&!se&&c.jsxDEV("div",{className:"toc-children",children:X(K.children,$+1)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:281,columnNumber:13},this)]},K.id,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:278,columnNumber:9},this)}),[E,T,W]),L=x.useCallback(()=>N.map(A=>{const $=E===A.id;return W(A,$)}),[N,E,W]);if(!t)return null;const _=u?Fp(N):[];return c.jsxDEV(c.Fragment,{children:[w&&c.jsxDEV("button",{className:`toc-toggle-button toc-toggle-${h}`,onClick:G,title:M?"Hide Table of Contents":"Show Table of Contents",children:M?c.jsxDEV(C.PanelRightClose,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:310,columnNumber:24},this):c.jsxDEV(C.PanelRightOpen,{size:16},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:310,columnNumber:56},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:305,columnNumber:9},this),c.jsxDEV("div",{ref:z,className:`toc-sidebar ${M?"toc-visible":"toc-hidden"} toc-${h} ${d}`,style:{width:M?m:"0px"},children:c.jsxDEV("div",{className:"toc-inner",children:[r&&c.jsxDEV("div",{className:"toc-header",children:c.jsxDEV("span",{className:"toc-title",children:r},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:324,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:323,columnNumber:13},this),c.jsxDEV("div",{className:"toc-content",children:N.length===0?c.jsxDEV("div",{className:"toc-empty",children:[c.jsxDEV("p",{children:"No headings yet"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:332,columnNumber:17},this),c.jsxDEV("p",{className:"toc-empty-hint",children:"Add headings to see the outline."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:333,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:331,columnNumber:15},this):c.jsxDEV("div",{className:"toc-list",children:u?X(_):L()},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:336,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:329,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:320,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:315,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/TableOfContents.tsx",lineNumber:302,columnNumber:5},this)});function Wp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}function cr(e,t){return Array(t+1).join(e)}function ol(e){return e.replace(/^\n*/,"")}function rl(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}function sl(e){return rl(ol(e))}var Up=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function ur(e){return dr(e,Up)}var il=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function al(e){return dr(e,il)}function jp(e){return cl(e,il)}var ll=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function qp(e){return dr(e,ll)}function Kp(e){return cl(e,ll)}function dr(e,t){return t.indexOf(e.nodeName)>=0}function cl(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var ve={};ve.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}},ve.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}},ve.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var o=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&o<3){var r=cr(o===1?"=":"-",e.length);return`

`+e+`
`+r+`

`}else return`

`+cr("#",o)+" "+e+`

`}},ve.blockquote={filter:"blockquote",replacement:function(e){return e=sl(e).replace(/^/gm,"> "),`

`+e+`

`}},ve.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}},ve.listItem={filter:"li",replacement:function(e,t,n){var o=n.bulletListMarker+"   ",r=t.parentNode;if(r.nodeName==="OL"){var s=r.getAttribute("start"),i=Array.prototype.indexOf.call(r.children,t);o=(s?Number(s)+i:i+1)+".  "}var a=/\n$/.test(e);return e=sl(e)+(a?`
`:""),e=e.replace(/\n/gm,`
`+" ".repeat(o.length)),o+e+(t.nextSibling?`
`:"")}},ve.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}},ve.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var o=t.firstChild.getAttribute("class")||"",r=(o.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,i=n.fence.charAt(0),a=3,l=new RegExp("^"+i+"{3,}","gm"),u;u=l.exec(s);)u[0].length>=a&&(a=u[0].length+1);var d=cr(i,a);return`

`+d+r+`
`+s.replace(/\n$/,"")+`
`+d+`

`}},ve.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}},ve.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var o=Yn(t.getAttribute("title"));return o&&(o=' "'+o.replace(/"/g,'\\"')+'"'),"["+e+"]("+n+o+")"}},ve.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var o=t.getAttribute("href"),r=Yn(t.getAttribute("title"));r&&(r=' "'+r+'"');var s,i;switch(n.linkReferenceStyle){case"collapsed":s="["+e+"][]",i="["+e+"]: "+o+r;break;case"shortcut":s="["+e+"]",i="["+e+"]: "+o+r;break;default:var a=this.references.length+1;s="["+e+"]["+a+"]",i="["+a+"]: "+o+r}return this.references.push(i),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}},ve.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},ve.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},ve.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",o=e.match(/`+/gm)||[];o.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}},ve.image={filter:"img",replacement:function(e,t){var n=Yn(t.getAttribute("alt")),o=t.getAttribute("src")||"",r=Yn(t.getAttribute("title")),s=r?' "'+r+'"':"";return o?"!["+n+"]("+o+s+")":""}};function Yn(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function ul(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}ul.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=mr(this.array,e,this.options))||(t=mr(this._keep,e,this.options))||(t=mr(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function mr(e,t,n){for(var o=0;o<e.length;o++){var r=e[o];if(Gp(r,t,n))return r}}function Gp(e,t,n){var o=e.filter;if(typeof o=="string"){if(o===t.nodeName.toLowerCase())return!0}else if(Array.isArray(o)){if(o.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof o=="function"){if(o.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Xp(e){var t=e.element,n=e.isBlock,o=e.isVoid,r=e.isPre||function(m){return m.nodeName==="PRE"};if(!(!t.firstChild||r(t))){for(var s=null,i=!1,a=null,l=dl(a,t,r);l!==t;){if(l.nodeType===3||l.nodeType===4){var u=l.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!i&&u[0]===" "&&(u=u.substr(1)),!u){l=fr(l);continue}l.data=u,s=l}else if(l.nodeType===1)n(l)||l.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,i=!1):o(l)||r(l)?(s=null,i=!0):s&&(i=!1);else{l=fr(l);continue}var d=dl(a,l,r);a=l,l=d}s&&(s.data=s.data.replace(/ $/,""),s.data||fr(s))}}function fr(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function dl(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var hr=typeof window<"u"?window:{};function Yp(){var e=hr.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function Zp(){var e=function(){};return Qp()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function Qp(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{hr.ActiveXObject&&(e=!0)}return e}var Jp=Yp()?hr.DOMParser:Zp();function Rp(e,t){var n;if(typeof e=="string"){var o=eb().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=o.getElementById("turndown-root")}else n=e.cloneNode(!0);return Xp({element:n,isBlock:ur,isVoid:al,isPre:t.preformattedCode?tb:null}),n}var pr;function eb(){return pr=pr||new Jp,pr}function tb(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function nb(e,t){return e.isBlock=ur(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=ob(e),e.flankingWhitespace=rb(e,t),e}function ob(e){return!al(e)&&!qp(e)&&/^\s*$/i.test(e.textContent)&&!jp(e)&&!Kp(e)}function rb(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=sb(e.textContent);return n.leadingAscii&&ml("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&ml("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function sb(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function ml(e,t,n){var o,r,s;return e==="left"?(o=t.previousSibling,r=/ $/):(o=t.nextSibling,r=/^ /),o&&(o.nodeType===3?s=r.test(o.nodeValue):n.preformattedCode&&o.nodeName==="CODE"?s=!1:o.nodeType===1&&!ur(o)&&(s=r.test(o.textContent))),s}var ib=Array.prototype.reduce,ab=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Zn(e){if(!(this instanceof Zn))return new Zn(e);var t={rules:ve,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,o){return o.isBlock?`

`:""},keepReplacement:function(n,o){return o.isBlock?`

`+o.outerHTML+`

`:o.outerHTML},defaultReplacement:function(n,o){return o.isBlock?`

`+n+`

`:n}};this.options=Wp({},t,e),this.rules=new ul(this.options)}Zn.prototype={turndown:function(e){if(!ub(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=fl.call(this,new Rp(e,this.options));return lb.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return ab.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function fl(e){var t=this;return ib.call(e.childNodes,function(n,o){o=new nb(o,t.options);var r="";return o.nodeType===3?r=o.isCode?o.nodeValue:t.escape(o.nodeValue):o.nodeType===1&&(r=cb.call(t,o)),hl(n,r)},"")}function lb(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=hl(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function cb(e){var t=this.rules.forNode(e),n=fl.call(this,e),o=e.flankingWhitespace;return(o.leading||o.trailing)&&(n=n.trim()),o.leading+t.replacement(n,e,this.options)+o.trailing}function hl(e,t){var n=rl(e),o=ol(t),r=Math.max(e.length-n.length,t.length-o.length),s=`

`.substring(0,r);return n+s+o}function ub(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}var pl=/highlight-(?:text|source)-([a-z0-9]+)/;function db(e){e.addRule("highlightedCodeBlock",{filter:function(t){var n=t.firstChild;return t.nodeName==="DIV"&&pl.test(t.className)&&n&&n.nodeName==="PRE"},replacement:function(t,n,o){var r=n.className||"",s=(r.match(pl)||[null,""])[1];return`

`+o.fence+s+`
`+n.firstChild.textContent+`
`+o.fence+`

`}})}function mb(e){e.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var fb=Array.prototype.indexOf,hb=Array.prototype.every,_t={};_t.tableCell={filter:["th","td"],replacement:function(e,t){return bl(e,t)}},_t.tableRow={filter:"tr",replacement:function(e,t){var n="",o={left:":--",right:"--:",center:":-:"};if(br(t))for(var r=0;r<t.childNodes.length;r++){var s="---",i=(t.childNodes[r].getAttribute("align")||"").toLowerCase();i&&(s=o[i]||s),n+=bl(s,t.childNodes[r])}return`
`+e+(n?`
`+n:"")}},_t.table={filter:function(e){return e.nodeName==="TABLE"&&br(e.rows[0])},replacement:function(e){return e=e.replace(`

`,`
`),`

`+e+`

`}},_t.tableSection={filter:["thead","tbody","tfoot"],replacement:function(e){return e}};function br(e){var t=e.parentNode;return t.nodeName==="THEAD"||t.firstChild===e&&(t.nodeName==="TABLE"||pb(t))&&hb.call(e.childNodes,function(n){return n.nodeName==="TH"})}function pb(e){var t=e.previousSibling;return e.nodeName==="TBODY"&&(!t||t.nodeName==="THEAD"&&/^\s*$/i.test(t.textContent))}function bl(e,t){var n=fb.call(t.parentNode.childNodes,t),o=" ";return n===0&&(o="| "),o+e+" |"}function bb(e){e.keep(function(n){return n.nodeName==="TABLE"&&!br(n.rows[0])});for(var t in _t)e.addRule(t,_t[t])}function gb(e){e.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,n){return(n.checked?"[x]":"[ ]")+" "}})}function wb(e){e.use([db,mb,bb,gb])}function gr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var bt=gr();function gl(e){bt=e}var an={exec:()=>null};function re(e,t=""){let n=typeof e=="string"?e:e.source,o={replace:(r,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(ye.caret,"$1"),n=n.replace(r,i),o},getRegex:()=>new RegExp(n,t)};return o}var kb=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),ye={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Nb=/^(?:[ \t]*(?:\n|$))+/,xb=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,vb=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ln=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,yb=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,wr=/(?:[*+-]|\d{1,9}[.)])/,wl=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,kl=re(wl).replace(/bull/g,wr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Eb=re(wl).replace(/bull/g,wr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),kr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Cb=/^[^\n]+/,Nr=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Tb=re(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Nr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Sb=re(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,wr).getRegex(),Qn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",xr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ab=re("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",xr).replace("tag",Qn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Nl=re(kr).replace("hr",ln).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qn).getRegex(),Mb=re(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Nl).getRegex(),vr={blockquote:Mb,code:xb,def:Tb,fences:vb,heading:yb,hr:ln,html:Ab,lheading:kl,list:Sb,newline:Nb,paragraph:Nl,table:an,text:Cb},xl=re("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ln).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qn).getRegex(),Pb={...vr,lheading:Eb,table:xl,paragraph:re(kr).replace("hr",ln).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",xl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qn).getRegex()},Lb={...vr,html:re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",xr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:an,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:re(kr).replace("hr",ln).replace("heading",` *#{1,6} *[^
]`).replace("lheading",kl).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Vb=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ib=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,vl=/^( {2,}|\\)\n(?!\s*$)/,Db=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Jn=/[\p{P}\p{S}]/u,yr=/[\s\p{P}\p{S}]/u,yl=/[^\s\p{P}\p{S}]/u,Ob=re(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yr).getRegex(),El=/(?!~)[\p{P}\p{S}]/u,Bb=/(?!~)[\s\p{P}\p{S}]/u,$b=/(?:[^\s\p{P}\p{S}]|~)/u,zb=re(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",kb?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Cl=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,_b=re(Cl,"u").replace(/punct/g,Jn).getRegex(),Hb=re(Cl,"u").replace(/punct/g,El).getRegex(),Tl="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Fb=re(Tl,"gu").replace(/notPunctSpace/g,yl).replace(/punctSpace/g,yr).replace(/punct/g,Jn).getRegex(),Wb=re(Tl,"gu").replace(/notPunctSpace/g,$b).replace(/punctSpace/g,Bb).replace(/punct/g,El).getRegex(),Ub=re("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,yl).replace(/punctSpace/g,yr).replace(/punct/g,Jn).getRegex(),jb=re(/\\(punct)/,"gu").replace(/punct/g,Jn).getRegex(),qb=re(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Kb=re(xr).replace("(?:-->|$)","-->").getRegex(),Gb=re("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Kb).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Rn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Xb=re(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Rn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Sl=re(/^!?\[(label)\]\[(ref)\]/).replace("label",Rn).replace("ref",Nr).getRegex(),Al=re(/^!?\[(ref)\](?:\[\])?/).replace("ref",Nr).getRegex(),Yb=re("reflink|nolink(?!\\()","g").replace("reflink",Sl).replace("nolink",Al).getRegex(),Ml=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Er={_backpedal:an,anyPunctuation:jb,autolink:qb,blockSkip:zb,br:vl,code:Ib,del:an,emStrongLDelim:_b,emStrongRDelimAst:Fb,emStrongRDelimUnd:Ub,escape:Vb,link:Xb,nolink:Al,punctuation:Ob,reflink:Sl,reflinkSearch:Yb,tag:Gb,text:Db,url:an},Zb={...Er,link:re(/^!?\[(label)\]\((.*?)\)/).replace("label",Rn).getRegex(),reflink:re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Rn).getRegex()},Cr={...Er,emStrongRDelimAst:Wb,emStrongLDelim:Hb,url:re(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ml).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:re(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ml).getRegex()},Qb={...Cr,br:re(vl).replace("{2,}","*").getRegex(),text:re(Cr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},eo={normal:vr,gfm:Pb,pedantic:Lb},cn={normal:Er,gfm:Cr,breaks:Qb,pedantic:Zb},Jb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pl=e=>Jb[e];function Ge(e,t){if(t){if(ye.escapeTest.test(e))return e.replace(ye.escapeReplace,Pl)}else if(ye.escapeTestNoEncode.test(e))return e.replace(ye.escapeReplaceNoEncode,Pl);return e}function Ll(e){try{e=encodeURI(e).replace(ye.percentDecode,"%")}catch{return null}return e}function Vl(e,t){let n=e.replace(ye.findPipe,(s,i,a)=>{let l=!1,u=i;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),o=n.split(ye.splitPipe),r=0;if(o[0].trim()||o.shift(),o.length>0&&!o.at(-1)?.trim()&&o.pop(),t)if(o.length>t)o.splice(t);else for(;o.length<t;)o.push("");for(;r<o.length;r++)o[r]=o[r].trim().replace(ye.slashPipe,"|");return o}function un(e,t,n){let o=e.length;if(o===0)return"";let r=0;for(;r<o&&e.charAt(o-r-1)===t;)r++;return e.slice(0,o-r)}function Rb(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let o=0;o<e.length;o++)if(e[o]==="\\")o++;else if(e[o]===t[0])n++;else if(e[o]===t[1]&&(n--,n<0))return o;return n>0?-2:-1}function Il(e,t,n,o,r){let s=t.href,i=t.title||null,a=e[1].replace(r.other.outputLinkReplace,"$1");o.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:i,text:a,tokens:o.inlineTokens(a)};return o.state.inLink=!1,l}function eg(e,t,n){let o=e.match(n.other.indentCodeCompensation);if(o===null)return t;let r=o[1];return t.split(`
`).map(s=>{let i=s.match(n.other.beginningSpace);if(i===null)return s;let[a]=i;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var to=class{options;rules;lexer;constructor(e){this.options=e||bt}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:un(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],o=eg(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:o}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let o=un(n,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(n=o.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:un(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=un(t[0],`
`).split(`
`),o="",r="",s=[];for(;n.length>0;){let i=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),i=!0;else if(!i)a.push(n[l]);else break;n=n.slice(l);let u=a.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");o=o?`${o}
${u}`:u,r=r?`${r}
${d}`:d;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=m,n.length===0)break;let h=s.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let f=h,p=f.raw+`
`+n.join(`
`),b=this.blockquote(p);s[s.length-1]=b,o=o.substring(0,o.length-f.raw.length)+b.raw,r=r.substring(0,r.length-f.text.length)+b.text;break}else if(h?.type==="list"){let f=h,p=f.raw+`
`+n.join(`
`),b=this.list(p);s[s.length-1]=b,o=o.substring(0,o.length-h.raw.length)+b.raw,r=r.substring(0,r.length-f.raw.length)+b.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),o=n.length>1,r={type:"list",raw:"",ordered:o,start:o?+n.slice(0,-1):"",loose:!1,items:[]};n=o?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=o?n:"[*+-]");let s=this.rules.other.listItemRegex(n),i=!1;for(;e;){let l=!1,u="",d="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let m=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),h=e.split(`
`,1)[0],f=!m.trim(),p=0;if(this.options.pedantic?(p=2,d=m.trimStart()):f?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,d=m.slice(p),p+=t[1].length),f&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,e=e.substring(h.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(p),w=this.rules.other.hrRegex(p),g=this.rules.other.fencesBeginRegex(p),N=this.rules.other.headingBeginRegex(p),y=this.rules.other.htmlBeginRegex(p);for(;e;){let E=e.split(`
`,1)[0],v;if(h=E,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),v=h):v=h.replace(this.rules.other.tabCharGlobal,"    "),g.test(h)||N.test(h)||y.test(h)||b.test(h)||w.test(h))break;if(v.search(this.rules.other.nonSpaceChar)>=p||!h.trim())d+=`
`+v.slice(p);else{if(f||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(m)||N.test(m)||w.test(m))break;d+=`
`+h}!f&&!h.trim()&&(f=!0),u+=E+`
`,e=e.substring(E.length+1),m=v.slice(p)}}r.loose||(i?r.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(i=!0)),r.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),r.raw+=u}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let l of r.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(l.raw);if(u){let d={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};l.checked=d.checked,r.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=d.raw+l.tokens[0].raw,l.tokens[0].text=d.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(d)):l.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):l.tokens.unshift(d)}}if(!r.loose){let u=l.tokens.filter(m=>m.type==="space"),d=u.length>0&&u.some(m=>this.rules.other.anyLine.test(m.raw));r.loose=d}}if(r.loose)for(let l of r.items){l.loose=!0;for(let u of l.tokens)u.type==="text"&&(u.type="paragraph")}return r}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:o,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=Vl(t[1]),o=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===o.length){for(let i of o)this.rules.other.tableAlignRight.test(i)?s.align.push("right"):this.rules.other.tableAlignCenter.test(i)?s.align.push("center"):this.rules.other.tableAlignLeft.test(i)?s.align.push("left"):s.align.push(null);for(let i=0;i<n.length;i++)s.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:s.align[i]});for(let i of r)s.rows.push(Vl(i,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=un(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=Rb(t[2],"()");if(s===-2)return;if(s>-1){let i=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let o=t[2],r="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(o);s&&(o=s[1],r=s[3])}else r=t[3]?t[3].slice(1,-1):"";return o=o.trim(),this.rules.other.startAngleBracket.test(o)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?o=o.slice(1):o=o.slice(1,-1)),Il(t,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let o=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[o.toLowerCase()];if(!r){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return Il(n,r,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!(!o||o[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(o[1]||o[2])||!n||this.rules.inline.punctuation.exec(n))){let r=[...o[0]].length-1,s,i,a=r,l=0,u=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+r);(o=u.exec(t))!=null;){if(s=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!s)continue;if(i=[...s].length,o[3]||o[4]){a+=i;continue}else if((o[5]||o[6])&&r%3&&!((r+i)%3)){l+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+l);let d=[...o[0]][0].length,m=e.slice(0,r+o.index+d+i);if(Math.min(r,i)%2){let f=m.slice(1,-1);return{type:"em",raw:m,text:f,tokens:this.lexer.inlineTokens(f)}}let h=m.slice(2,-2);return{type:"strong",raw:m,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return o&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,o;return t[2]==="@"?(n=t[1],o="mailto:"+n):(n=t[1],o=n),{type:"link",raw:t[0],text:n,href:o,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,o;if(t[2]==="@")n=t[0],o="mailto:"+n;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);n=t[0],t[1]==="www."?o="http://"+t[0]:o=t[0]}return{type:"link",raw:t[0],text:n,href:o,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},Le=class Ir{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||bt,this.options.tokenizer=this.options.tokenizer||new to,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:ye,block:eo.normal,inline:cn.normal};this.options.pedantic?(n.block=eo.pedantic,n.inline=cn.pedantic):this.options.gfm&&(n.block=eo.gfm,this.options.breaks?n.inline=cn.breaks:n.inline=cn.gfm),this.tokenizer.rules=n}static get rules(){return{block:eo,inline:cn}}static lex(t,n){return new Ir(n).lex(t)}static lexInline(t,n){return new Ir(n).inlineTokens(t)}lex(t){t=t.replace(ye.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let o=this.inlineQueue[n];this.inlineTokens(o.src,o.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],o=!1){for(this.options.pedantic&&(t=t.replace(ye.tabCharGlobal,"    ").replace(ye.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(i=>(r=i.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let i=n.at(-1);r.raw.length===1&&i!==void 0?i.raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.at(-1).src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},n.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}let s=t;if(this.options.extensions?.startBlock){let i=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(i=Math.min(i,l))}),i<1/0&&i>=0&&(s=t.substring(0,i+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let i=n.at(-1);o&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(r),o=s.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let i=n.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(r);continue}if(t){let i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let o=t,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,r.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)s=r[2]?r[2].length:0,o=o.slice(0,r.index+s)+"["+"a".repeat(r[0].length-s-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);o=this.options.hooks?.emStrongMask?.call({lexer:this},o)??o;let i=!1,a="";for(;t;){i||(a=""),i=!1;let l;if(this.options.extensions?.inline?.some(d=>(l=d.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let d=n.at(-1);l.type==="text"&&d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,o,a)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let u=t;if(this.options.extensions?.startInline){let d=1/0,m=t.slice(1),h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},m),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(u=t.substring(0,d+1))}if(l=this.tokenizer.inlineText(u)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),i=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},no=class{options;parser;constructor(e){this.options=e||bt}space(e){return""}code({text:e,lang:t,escaped:n}){let o=(t||"").match(ye.notSpaceStart)?.[0],r=e.replace(ye.endingNewline,"")+`
`;return o?'<pre><code class="language-'+Ge(o)+'">'+(n?r:Ge(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:Ge(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,o="";for(let i=0;i<e.items.length;i++){let a=e.items[i];o+=this.listitem(a)}let r=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+r+s+`>
`+o+"</"+r+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let o="";for(let r=0;r<e.rows.length;r++){let s=e.rows[r];n="";for(let i=0;i<s.length;i++)n+=this.tablecell(s[i]);o+=this.tablerow({text:n})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+o+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ge(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let o=this.parser.parseInline(n),r=Ll(e);if(r===null)return o;e=r;let s='<a href="'+e+'"';return t&&(s+=' title="'+Ge(t)+'"'),s+=">"+o+"</a>",s}image({href:e,title:t,text:n,tokens:o}){o&&(n=this.parser.parseInline(o,this.parser.textRenderer));let r=Ll(e);if(r===null)return Ge(n);e=r;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Ge(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ge(e.text)}},Tr=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},Ve=class Dr{options;renderer;textRenderer;constructor(t){this.options=t||bt,this.options.renderer=this.options.renderer||new no,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Tr}static parse(t,n){return new Dr(n).parse(t)}static parseInline(t,n){return new Dr(n).parseInline(t)}parse(t){let n="";for(let o=0;o<t.length;o++){let r=t[o];if(this.options.extensions?.renderers?.[r.type]){let i=r,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){n+=a||"";continue}}let s=r;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let i='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return n}parseInline(t,n=this.renderer){let o="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){o+=a||"";continue}}let i=s;switch(i.type){case"escape":{o+=n.text(i);break}case"html":{o+=n.html(i);break}case"link":{o+=n.link(i);break}case"image":{o+=n.image(i);break}case"checkbox":{o+=n.checkbox(i);break}case"strong":{o+=n.strong(i);break}case"em":{o+=n.em(i);break}case"codespan":{o+=n.codespan(i);break}case"br":{o+=n.br(i);break}case"del":{o+=n.del(i);break}case"text":{o+=n.text(i);break}default:{let a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return o}},dn=class{options;block;constructor(e){this.options=e||bt}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Le.lex:Le.lexInline}provideParser(){return this.block?Ve.parse:Ve.parseInline}},tg=class{defaults=gr();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ve;Renderer=no;TextRenderer=Tr;Lexer=Le;Tokenizer=to;Hooks=dn;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let o of e)switch(n=n.concat(t.call(this,o)),o.type){case"table":{let r=o;for(let s of r.header)n=n.concat(this.walkTokens(s.tokens,t));for(let s of r.rows)for(let i of s)n=n.concat(this.walkTokens(i.tokens,t));break}case"list":{let r=o;n=n.concat(this.walkTokens(r.items,t));break}default:{let r=o;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{let i=r[s].flat(1/0);n=n.concat(this.walkTokens(i,t))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let o={...n};if(o.async=this.defaults.async||o.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let s=t.renderers[r.name];s?t.renderers[r.name]=function(...i){let a=r.renderer.apply(this,i);return a===!1&&(a=s.apply(this,i)),a}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[r.level];s?s.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),o.extensions=t),n.renderer){let r=this.defaults.renderer||new no(this.defaults);for(let s in n.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let i=s,a=n.renderer[i],l=r[i];r[i]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=l.apply(r,u)),d||""}}o.renderer=r}if(n.tokenizer){let r=this.defaults.tokenizer||new to(this.defaults);for(let s in n.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let i=s,a=n.tokenizer[i],l=r[i];r[i]=(...u)=>{let d=a.apply(r,u);return d===!1&&(d=l.apply(r,u)),d}}o.tokenizer=r}if(n.hooks){let r=this.defaults.hooks||new dn;for(let s in n.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let i=s,a=n.hooks[i],l=r[i];dn.passThroughHooks.has(s)?r[i]=u=>{if(this.defaults.async&&dn.passThroughHooksRespectAsync.has(s))return(async()=>{let m=await a.call(r,u);return l.call(r,m)})();let d=a.call(r,u);return l.call(r,d)}:r[i]=(...u)=>{if(this.defaults.async)return(async()=>{let m=await a.apply(r,u);return m===!1&&(m=await l.apply(r,u)),m})();let d=a.apply(r,u);return d===!1&&(d=l.apply(r,u)),d}}o.hooks=r}if(n.walkTokens){let r=this.defaults.walkTokens,s=n.walkTokens;o.walkTokens=function(i){let a=[];return a.push(s.call(this,i)),r&&(a=a.concat(r.call(this,i))),a}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Le.lex(e,t??this.defaults)}parser(e,t){return Ve.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let o={...n},r={...this.defaults,...o},s=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&o.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=e),r.async)return(async()=>{let i=r.hooks?await r.hooks.preprocess(t):t,a=await(r.hooks?await r.hooks.provideLexer():e?Le.lex:Le.lexInline)(i,r),l=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(l,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():e?Ve.parse:Ve.parseInline)(l,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(s);try{r.hooks&&(t=r.hooks.preprocess(t));let i=(r.hooks?r.hooks.provideLexer():e?Le.lex:Le.lexInline)(t,r);r.hooks&&(i=r.hooks.processAllTokens(i)),r.walkTokens&&this.walkTokens(i,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():e?Ve.parse:Ve.parseInline)(i,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(i){return s(i)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let o="<p>An error occurred:</p><pre>"+Ge(n.message+"",!0)+"</pre>";return t?Promise.resolve(o):o}if(t)return Promise.reject(n);throw n}}},gt=new tg;function ie(e,t){return gt.parse(e,t)}ie.options=ie.setOptions=function(e){return gt.setOptions(e),ie.defaults=gt.defaults,gl(ie.defaults),ie},ie.getDefaults=gr,ie.defaults=bt,ie.use=function(...e){return gt.use(...e),ie.defaults=gt.defaults,gl(ie.defaults),ie},ie.walkTokens=function(e,t){return gt.walkTokens(e,t)},ie.parseInline=gt.parseInline,ie.Parser=Ve,ie.parser=Ve.parse,ie.Renderer=no,ie.TextRenderer=Tr,ie.Lexer=Le,ie.lexer=Le.lex,ie.Tokenizer=to,ie.Hooks=dn,ie.parse=ie,ie.options,ie.setOptions,ie.use,ie.walkTokens,ie.parseInline,Ve.parse,Le.lex;const ng=()=>{if(typeof window>"u")return!1;const e="ontouchstart"in window,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.innerWidth<768;return e&&(t||n)||t&&n},og=x.forwardRef(function({content:t="",onChange:n,onHTMLChange:o,onMarkdownChange:r,placeholder:s='Start writing... Use "/" for commands',editable:i=!0,autofocus:a=!1,className:l="",showToolbar:u=!0,showWordCount:d=!0,theme:m,autoSave:h=!0,autoSaveKey:f="manus-editor-content",autoSaveDelay:p=1e3,showRecoveryBanner:b=!0,showFloatingToolbar:w=!0,maxImageSize:g=5*1024*1024,onImageUploadStart:N,onImageUploadComplete:y,onImageUploadError:E,showModeToggle:v=!0,initialMode:M="wysiwyg",onModeChange:S,onReady:T,onFocus:D,onBlur:z,onSelectionChange:q,onDestroy:U,onSave:j,onRecover:G,onWikiLinkClick:R,onLinkClick:W,findReplaceOpen:X,onFindReplaceChange:L,renderToolbar:_,renderFooter:A,disabledFeatures:$={},minHeight:K="200px",maxHeight:Y,spellCheck:se=!0,headingLevels:ce=[1,2,3,4,5,6],collapsibleHeadingLevels:be=[1,2,3],showTableOfContents:Z=!1,tocVisible:Ce=!0,onTocVisibilityChange:_e,tocTitle:He="",tocMinLevel:it=1,tocMaxLevel:Xe=4,tocShowLevelIndicators:wt=!1,tocHighlightActive:Hl=!0,tocTreeView:Fl=!1,tocWidth:Wl="240px",tocPosition:oo="right",tocScrollOffset:Ul=20,onTocItemClick:jl,renderTocItem:ql,tocShowToggleButton:Kl=!0,showPerformanceProfiler:cg=!1,onPerformanceProfilerClose:ug},dg){const[Ye]=x.useState(()=>ng()),[mn,mg]=x.useState(M),[fg,Gl]=x.useState(""),Fe=x.useRef(M),ro=x.useRef(""),so=x.useRef(null),hg=x.useMemo(()=>{const I=[Zl.configure({heading:{levels:ce},codeBlock:!1,dropcursor:{color:"var(--primary)",width:2},link:!1,underline:!1,bold:{HTMLAttributes:{class:"font-bold"}},italic:{HTMLAttributes:{class:"italic"}}}),Ql.configure({placeholder:s,emptyEditorClass:"is-editor-empty"}),Jl.configure({types:["heading","paragraph"]}),Rl.configure({multicolor:!0}),ec.configure({openOnClick:!1,autolink:!0,linkOnPaste:!0,HTMLAttributes:{rel:"noopener noreferrer",target:"_blank"}}),ac,lc,cc,uc,ja,Ka,Ya,Ga];return $.tables||I.push(tc.Table.configure({resizable:!Ye,HTMLAttributes:{class:"editor-table"}}),nc,Tc,Sc,Dc),$.taskLists||I.push(sc.configure({HTMLAttributes:{class:"task-list"}}),ic.configure({nested:!0,HTMLAttributes:{class:"task-item"}})),$.codeBlocks||I.push(Bc),$.callouts||I.push(Fc,qa),$.collapsibleHeadings||I.push(Ua.configure({levels:be})),$.images||I.push(Yr.configure({allowBase64:!0,HTMLAttributes:{class:"editor-image"},onImageClick:B=>{ao({isOpen:!0,src:B.src,alt:B.alt,pos:B.pos,position:{x:B.rect.left+B.rect.width/2,y:B.rect.bottom}})}}),Ja.configure({maxFileSize:g,onUploadStart:N,onUploadComplete:y,onUploadError:E})),!Ye&&!$.datePills&&I.push(Zr.configure({HTMLAttributes:{class:"date-pill"}})),$.wikiLinks||I.push(_a.configure({onWikiLinkClick:B=>{console.log("WikiLink clicked:",B),R?.(B)}})),$.markdownPaste||I.push(Fa.configure({enableMarkdownPaste:!0})),I},[s,Ye,g,N,y,E,ce,be,$,R]),fn=x.useRef(null),Ar=x.useRef(n),Mr=x.useRef(o),pg=x.useRef(r);Ar.current=n,Mr.current=o,pg.current=r;const V=Ee.useEditor({immediatelyRender:!0,shouldRerenderOnTransaction:!1,onCreate:({editor:I})=>{window.__tiptapEditor=I,T?.(I)},onDestroy:()=>{U?.()},extensions:hg,content:t,editable:i,autofocus:a,editorProps:{attributes:{class:"tiptap-editor outline-none min-h-full",spellcheck:se?"true":"false"},handleClick:(I,B,ne)=>{if(W){const Q=ne.target.closest("a");if(Q){const le=Q.getAttribute("href");if(le&&W(le,ne)===!1)return ne.preventDefault(),!0}}return!1}},onUpdate:({editor:I})=>{fn.current&&clearTimeout(fn.current),fn.current=setTimeout(()=>{if(!I.isDestroyed&&(Ar.current||Mr.current)){const B=I.getHTML();Ar.current?.(B),Mr.current?.(B)}},150)},onFocus:()=>{D?.()},onBlur:()=>{z?.()},onSelectionUpdate:({editor:I})=>{if(q){const{from:B,to:ne,empty:ae}=I.state.selection;q({from:B,to:ne,empty:ae})}}});x.useEffect(()=>()=>{fn.current&&clearTimeout(fn.current)},[]);const[bg,io]=x.useState(!1),[Ft,ao]=x.useState(null),[gg,wg]=x.useState(!1),kg=X!==void 0?X:gg,at=x.useCallback(I=>{wg(I),L?.(I)},[L]),[Ng,Pr]=x.useState(0),[xg,vg]=x.useState(""),Ze=Oa(V,{storageKey:f,debounceMs:p,enabled:h,onSave:I=>{j?.(I)},onRecover:I=>{G?.(I)}}),lo=x.useMemo(()=>{const I=new Zn({headingStyle:"atx",codeBlockStyle:"fenced",bulletListMarker:"-",emDelimiter:"*",strongDelimiter:"**"});return I.use(wb),I.addRule("highlight",{filter:B=>B.nodeName==="MARK",replacement:B=>`==${B}==`}),I.addRule("resizableImage",{filter:"img",replacement:(B,ne)=>{const ae=ne,Q=ae.getAttribute("src")||"",le=ae.getAttribute("alt")||"",ct=ae.getAttribute("width")||ae.style.width?.replace("px","");return ct?`<img src="${Q}" alt="${le}" width="${ct}" />`:`![${le}](${Q})`}}),I.addRule("taskListItem",{filter:B=>B.nodeName==="LI"&&B.getAttribute("data-type")==="taskItem",replacement:(B,ne)=>{const ae=ne.querySelector('input[type="checkbox"]');return`- [${ae?.hasAttribute("checked")||ae?.checked?"x":" "}] ${B.trim()}
`}}),I.addRule("table",{filter:"table",replacement:function(B,ne){const ae=ne,Q=Array.from(ae.querySelectorAll("tr"));if(Q.length===0)return"";const le=[];return Q.forEach((ct,Lr)=>{const co=Array.from(ct.querySelectorAll("th, td")),Cg=co.map(Vr=>(Vr.textContent?.trim()||"").replace(/\|/g,"\\|"));if(le.push("| "+Cg.join(" | ")+" |"),Lr===0){const Vr=co.map(()=>"---").join(" | ");le.push("| "+Vr+" |")}}),`

`+le.join(`
`)+`

`}}),I.addRule("tableCell",{filter:["th","td"],replacement:function(B){return B}}),I.addRule("callout",{filter:B=>B.nodeName==="DIV"&&B.hasAttribute("data-callout"),replacement:(B,ne)=>{const ae=ne.getAttribute("data-type")||"info",Q=B.trim().replace(/\n{3,}/g,`

`);return`

\`\`\`${ae}
${Q}
\`\`\`

`}}),I},[]),We=x.useCallback(I=>{if(V){if(I==="markdown"&&Fe.current==="wysiwyg"){const B=V.getHTML(),ne=lo.turndown(B);Gl(ne),ro.current=ne}else if(I==="wysiwyg"&&Fe.current==="markdown"){const B=["info","warning","error","success","note"];let ne=ro.current;B.forEach(Q=>{const le=new RegExp(`\`\`\`${Q}\\s*\\n([\\s\\S]*?)\`\`\``,"g");ne=ne.replace(le,(ct,Lr)=>{const co=ie.parse(Lr.trim(),{async:!1});return`<div data-callout="" data-type="${Q}" class="callout callout-${Q}">${co}</div>`})});const ae=ie.parse(ne,{async:!1});queueMicrotask(()=>{V.isDestroyed||V.commands.setContent(ae)})}mg(I),Fe.current=I,S?.(I)}},[V,lo,S]),yg=x.useCallback(I=>{Gl(I),ro.current=I,r?.(I)},[r]),lt=Ba(V,{debounceMs:500,extendedStats:!1,enabled:d});if(x.useImperativeHandle(dg,()=>({getEditor:()=>V,getHTML:()=>V?.getHTML()||"",getMarkdown:()=>V?lo.turndown(V.getHTML()):"",getText:()=>V?.getText()||"",setContent:I=>{V&&!V.isDestroyed&&queueMicrotask(()=>{V.commands.setContent(I)})},clearContent:()=>{V&&!V.isDestroyed&&V.commands.clearContent()},focus:I=>{V&&!V.isDestroyed&&V.commands.focus(I)},blur:()=>{V&&!V.isDestroyed&&V.commands.blur()},isEmpty:()=>V?.isEmpty||!0,isFocused:()=>V?.isFocused||!1,getMode:()=>Fe.current,setMode:I=>We(I),toggleMode:()=>{const I=Fe.current==="wysiwyg"?"markdown":"wysiwyg";return We(I),I},getWordCount:()=>({words:lt.words,characters:lt.characters,charactersWithSpaces:lt.charactersWithSpaces}),undo:()=>V?.commands.undo(),redo:()=>V?.commands.redo(),canUndo:()=>V?.can().undo()||!1,canRedo:()=>V?.can().redo()||!1,insertContent:I=>V?.commands.insertContent(I),insertImage:(I,B="")=>V?.commands.setImage({src:I,alt:B}),insertTable:(I=3,B=3)=>V?.commands.insertTable({rows:I,cols:B,withHeaderRow:!0}),insertCodeBlock:I=>{I?V?.commands.setCodeBlock({language:I}):V?.commands.setCodeBlock()},insertCallout:(I="info")=>V?.commands.insertCallout?.({type:I}),insertHorizontalRule:()=>V?.commands.setHorizontalRule(),toggleBold:()=>V?.commands.toggleBold(),toggleItalic:()=>V?.commands.toggleItalic(),toggleUnderline:()=>V?.commands.toggleUnderline(),toggleStrike:()=>V?.commands.toggleStrike(),toggleCode:()=>V?.commands.toggleCode(),toggleHighlight:()=>V?.commands.toggleHighlight(),setHeading:I=>{I===0?V?.commands.setParagraph():V?.commands.setHeading({level:I})},toggleBulletList:()=>V?.commands.toggleBulletList(),toggleOrderedList:()=>V?.commands.toggleOrderedList(),toggleTaskList:()=>V?.commands.toggleTaskList(),toggleBlockquote:()=>V?.commands.toggleBlockquote(),setLink:I=>V?.commands.setLink({href:I}),unsetLink:()=>V?.commands.unsetLink(),openFindReplace:()=>{at(!0),Pr(I=>I+1)},closeFindReplace:()=>at(!1),save:()=>Ze.save(),clearSavedContent:()=>Ze.clear(),getSelectedText:()=>{if(!V)return"";const{from:I,to:B}=V.state.selection;return V.state.doc.textBetween(I,B," ")},isEditable:()=>V?.isEditable||!1,setEditable:I=>V?.setEditable(I),getTableOfContents:()=>{if(!V)return[];const I=[];return V.state.doc.descendants((B,ne)=>{if(B.type.name==="heading"){const ae=B.attrs.level,Q=B.textContent.trim();Q&&I.push({id:`toc-heading-${ne}`,text:Q,level:ae,pos:ne})}}),I},scrollToHeading:I=>{if(!(!V||V.isDestroyed))try{const B=V.state.doc.resolve(I),ne=V.view.nodeDOM(B.before(B.depth+1));if(ne instanceof HTMLElement){const ae=V.view.dom.closest(".editor-content-wrapper");if(ae){const Q=ae.getBoundingClientRect(),ct=ne.getBoundingClientRect().top-Q.top+ae.scrollTop;ae.scrollTo({top:ct-20,behavior:"smooth"})}else ne.scrollIntoView({behavior:"smooth",block:"start"})}V.commands.setTextSelection(I+1)}catch{}}}),[V,lo,We,lt,Ze,at]),x.useEffect(()=>{const I={getMode:()=>Fe.current,setMode:B=>{if(B!=="wysiwyg"&&B!=="markdown"){console.error('Invalid mode. Use "wysiwyg" or "markdown"');return}We(B)},toggleMode:()=>{const B=Fe.current==="wysiwyg"?"markdown":"wysiwyg";return We(B),B},switchToVisual:()=>{We("wysiwyg")},switchToMarkdown:()=>{We("markdown")},isVisualMode:()=>Fe.current==="wysiwyg",isMarkdownMode:()=>Fe.current==="markdown",getRawMarkdown:()=>Fe.current==="markdown"?ro.current:null,onModeChange:B=>{const ne=ae=>{B(ae.detail.mode)};return window.addEventListener("manus-editor-mode-change",ne),()=>window.removeEventListener("manus-editor-mode-change",ne)}};return window.__manusEditorModeAPI=I,console.log("Manus Editor Mode API exposed globally as window.__manusEditorModeAPI"),console.log("Available methods: getMode(), setMode(mode), toggleMode(), switchToVisual(), switchToMarkdown(), isVisualMode(), isMarkdownMode(), getRawMarkdown(), onModeChange(callback)"),()=>{delete window.__manusEditorModeAPI}},[We]),x.useEffect(()=>{window.dispatchEvent(new CustomEvent("manus-editor-mode-change",{detail:{mode:mn}}))},[mn]),x.useEffect(()=>{if(!V||V.isDestroyed)return;const I=B=>{if(!V.isDestroyed){if((B.metaKey||B.ctrlKey)&&B.key==="k"){B.preventDefault(),io(!0);return}if(!Ye&&(B.metaKey||B.ctrlKey)&&B.key==="f"){if(B.preventDefault(),V){const{state:ne}=V,{from:ae,to:Q}=ne.selection;if(ae!==Q){const le=ne.doc.textBetween(ae,Q," ");le.trim()&&vg(le.trim())}}at(!0),Pr(ne=>ne+1);return}if(!Ye&&(B.metaKey||B.ctrlKey)&&B.key==="h"){B.preventDefault(),at(!0);return}if(B.key===" ")try{const{state:ne}=V,{selection:ae}=ne,{$from:Q}=ae,le=Q.nodeBefore?.textContent||"";if(le==="#"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-1,to:Q.pos}).setHeading({level:1}).run();return}if(le==="##"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-2,to:Q.pos}).setHeading({level:2}).run();return}if(le==="###"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-3,to:Q.pos}).setHeading({level:3}).run();return}if(le==="-"||le==="*"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-1,to:Q.pos}).toggleBulletList().run();return}if(/^\d+\.$/.test(le)){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-le.length,to:Q.pos}).toggleOrderedList().run();return}if(le==="[]"||le==="[ ]"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-le.length,to:Q.pos}).toggleTaskList().run();return}if(le===">"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-1,to:Q.pos}).toggleBlockquote().run();return}if(le==="```"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-3,to:Q.pos}).toggleCodeBlock().run();return}if(le==="---"||le==="***"){B.preventDefault(),V.chain().focus().deleteRange({from:Q.pos-3,to:Q.pos}).setHorizontalRule().run();return}}catch(ne){console.warn("Space shortcut error:",ne)}}};return document.addEventListener("keydown",I,!0),()=>document.removeEventListener("keydown",I,!0)},[V,Ye,at]),!V)return c.jsxDEV("div",{className:`markdown-editor-container ${l}`,"data-theme":m,children:c.jsxDEV("div",{className:"editor-loading",children:"Loading editor..."},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1216,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1215,columnNumber:7},this);const Xl=c.jsxDEV(Va,{editor:V,onOpenLinkPopover:()=>io(!0),className:"flex-1 border-b-0",onOpenFindReplace:()=>{at(!0),Pr(I=>I+1)},disabledFeatures:$},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1223,columnNumber:5},this),Yl=c.jsxDEV("div",{className:"editor-footer",children:[c.jsxDEV("div",{className:"word-count",children:[c.jsxDEV("span",{children:[lt.words," words"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1239,columnNumber:9},this),c.jsxDEV("span",{children:[lt.characters," characters"]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1240,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1238,columnNumber:7},this),h&&c.jsxDEV($a,{status:Ze.status,lastSaved:Ze.lastSaved},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1243,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1237,columnNumber:5},this),Eg={minHeight:K,...Y&&{maxHeight:Y,overflowY:"auto"}};return c.jsxDEV("div",{className:`markdown-editor-container ${l}`,"data-theme":m,children:[h&&b&&Ze.hasRecoverableContent&&c.jsxDEV(za,{onRecover:()=>{Ze.recover()},onDismiss:Ze.dismissRecovery},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1261,columnNumber:9},this),u&&c.jsxDEV("div",{className:"flex items-center border-b border-border bg-card/50",children:[_?_(V,Xl):Xl,v&&c.jsxDEV("div",{className:"editor-mode-toggle mr-2 sm:mr-3",children:[c.jsxDEV("button",{onClick:()=>We("wysiwyg"),className:`editor-mode-toggle-btn ${mn==="wysiwyg"?"active":""}`,title:"Visual Editor",children:c.jsxDEV(C.Eye,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1280,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1275,columnNumber:15},this),c.jsxDEV("button",{onClick:()=>We("markdown"),className:`editor-mode-toggle-btn ${mn==="markdown"?"active":""}`,title:"Raw Markdown",children:c.jsxDEV(C.FileText,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1287,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1282,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1274,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1271,columnNumber:9},this),!Ye&&c.jsxDEV(Ia,{editor:V,isOpen:kg,onClose:()=>at(!1),focusTrigger:Ng,initialSearchQuery:xg},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1296,columnNumber:9},this),c.jsxDEV(Da,{editor:V},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1306,columnNumber:7},this),c.jsxDEV("div",{className:`editor-main-area ${Z?"editor-with-toc":""}`,children:[Z&&oo==="left"&&c.jsxDEV(lr,{editor:V,visible:Ce,onVisibilityChange:_e,title:He,minLevel:it,maxLevel:Xe,showLevelIndicators:wt,highlightActive:Hl,treeView:Fl,width:Wl,position:oo,scrollOffset:Ul,onItemClick:jl,renderItem:ql,showToggleButton:Kl,scrollContainerRef:so},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1312,columnNumber:9},this),c.jsxDEV("div",{className:"editor-content-wrapper",ref:so,style:Eg,children:mn==="wysiwyg"?c.jsxDEV(c.Fragment,{children:[c.jsxDEV(Ee.EditorContent,{editor:V,className:"editor-content"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1334,columnNumber:13},this),!$.images&&!$.dragAndDrop&&c.jsxDEV(Ra,{containerRef:so,enabled:i},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1338,columnNumber:15},this),!Ye&&w&&c.jsxDEV(Xr,{editor:V},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1344,columnNumber:50},this),!$.slashCommands&&c.jsxDEV(Qr,{editor:V,disabledFeatures:$},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1347,columnNumber:49},this),c.jsxDEV($c,{editor:V,isOpen:bg,onClose:()=>io(!1)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1350,columnNumber:13},this),!Ye&&c.jsxDEV(zc,{editor:V,onEditLink:()=>io(!0)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1358,columnNumber:15},this),!$.images&&Ft?.isOpen&&c.jsxDEV(Ip,{src:Ft.src,alt:Ft.alt,position:Ft.position,onSave:(I,B)=>{V.chain().focus().setNodeSelection(Ft.pos).updateAttributes("resizableImage",{src:I,alt:B}).run(),ao(null)},onDelete:()=>{V.chain().focus().setNodeSelection(Ft.pos).deleteSelection().run(),ao(null)},onClose:()=>ao(null)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1366,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1333,columnNumber:11},this):c.jsxDEV($p,{content:fg,onChange:yg,placeholder:"Write your markdown here...",editable:i,autofocus:!0},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1388,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1331,columnNumber:7},this),Z&&oo==="right"&&c.jsxDEV(lr,{editor:V,visible:Ce,onVisibilityChange:_e,title:He,minLevel:it,maxLevel:Xe,showLevelIndicators:wt,highlightActive:Hl,treeView:Fl,width:Wl,position:oo,scrollOffset:Ul,onItemClick:jl,renderItem:ql,showToggleButton:Kl,scrollContainerRef:so},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1399,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1309,columnNumber:7},this),d&&(A?A({words:lt.words,characters:lt.characters},Ze.status,Yl):Yl),c.jsxDEV(_p,{visible:cg,onClose:ug,editor:V},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1432,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/MarkdownEditor.tsx",lineNumber:1258,columnNumber:5},this)}),rg=ue.Node.create({name:"callout",addOptions(){return{HTMLAttributes:{},types:["info","warning","error","success","note"]}},content:"block+",group:"block",defining:!0,addAttributes(){return{type:{default:"info",parseHTML:e=>e.getAttribute("data-type")||"info",renderHTML:e=>({"data-type":e.type})}}},parseHTML(){return[{tag:"div[data-callout]"}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.type;return["div",ue.mergeAttributes(this.options.HTMLAttributes,t,{"data-callout":"","data-type":n,class:`callout callout-${n}`}),0]},addCommands(){return{setCallout:e=>({commands:t})=>t.wrapIn(this.name,e),toggleCallout:e=>({commands:t})=>t.toggleWrap(this.name,e),unsetCallout:()=>({commands:e})=>e.lift(this.name),insertCallout:e=>({chain:t})=>{const n=e?.type||"info";return t().insertContent({type:this.name,attrs:{type:n},content:[{type:"paragraph"}]}).focus().run()}}},addKeyboardShortcuts(){return{"Mod-Shift-c":()=>this.editor.commands.toggleCallout({type:"info"})}}}),Sr={name:"dark",description:"Dark theme inspired by VS Code and GitHub Dark",variables:{"--editor-bg":"oklch(0.13 0.01 250)","--editor-fg":"oklch(0.93 0.01 250)","--editor-border":"oklch(0.28 0.01 250)","--editor-primary":"oklch(0.7 0.15 220)","--editor-primary-fg":"oklch(0.13 0.01 250)","--editor-secondary":"oklch(0.22 0.01 250)","--editor-secondary-fg":"oklch(0.75 0.02 250)","--editor-muted":"oklch(0.25 0.01 250)","--editor-muted-fg":"oklch(0.6 0.02 250)","--editor-selection":"oklch(0.35 0.08 220 / 0.4)","--editor-cursor":"oklch(0.7 0.15 220)","--editor-code-bg":"oklch(0.17 0.01 250)","--editor-line-number":"oklch(0.45 0.02 250)","--editor-callout-info":"oklch(0.5 0.12 220)","--editor-callout-warning":"oklch(0.6 0.15 70)","--editor-callout-error":"oklch(0.5 0.15 25)","--editor-callout-success":"oklch(0.5 0.12 160)","--editor-callout-note":"oklch(0.5 0.12 280)","--syntax-keyword":"oklch(0.7 0.18 320)","--syntax-string":"oklch(0.7 0.12 160)","--syntax-number":"oklch(0.75 0.12 70)","--syntax-comment":"oklch(0.5 0.02 250)","--syntax-function":"oklch(0.75 0.15 280)","--syntax-variable":"oklch(0.8 0.1 220)"}},Dl={name:"light",description:"Light theme for bright environments",variables:{"--editor-bg":"oklch(0.99 0.005 250)","--editor-fg":"oklch(0.2 0.01 250)","--editor-border":"oklch(0.88 0.01 250)","--editor-primary":"oklch(0.55 0.2 220)","--editor-primary-fg":"oklch(0.99 0.005 250)","--editor-secondary":"oklch(0.95 0.01 250)","--editor-secondary-fg":"oklch(0.4 0.02 250)","--editor-muted":"oklch(0.92 0.01 250)","--editor-muted-fg":"oklch(0.5 0.02 250)","--editor-selection":"oklch(0.7 0.12 220 / 0.3)","--editor-cursor":"oklch(0.55 0.2 220)","--editor-code-bg":"oklch(0.96 0.005 250)","--editor-line-number":"oklch(0.6 0.02 250)","--editor-callout-info":"oklch(0.6 0.15 220)","--editor-callout-warning":"oklch(0.7 0.18 70)","--editor-callout-error":"oklch(0.6 0.18 25)","--editor-callout-success":"oklch(0.6 0.15 160)","--editor-callout-note":"oklch(0.6 0.15 280)","--syntax-keyword":"oklch(0.5 0.2 320)","--syntax-string":"oklch(0.45 0.15 160)","--syntax-number":"oklch(0.5 0.15 70)","--syntax-comment":"oklch(0.55 0.02 250)","--syntax-function":"oklch(0.5 0.18 280)","--syntax-variable":"oklch(0.45 0.12 220)"}},Ol={name:"sepia",description:"Warm sepia tones for comfortable reading",variables:{"--editor-bg":"oklch(0.95 0.02 80)","--editor-fg":"oklch(0.25 0.02 60)","--editor-border":"oklch(0.85 0.03 70)","--editor-primary":"oklch(0.55 0.15 50)","--editor-primary-fg":"oklch(0.98 0.01 80)","--editor-secondary":"oklch(0.9 0.025 75)","--editor-secondary-fg":"oklch(0.4 0.02 60)","--editor-muted":"oklch(0.88 0.02 75)","--editor-muted-fg":"oklch(0.5 0.02 60)","--editor-selection":"oklch(0.7 0.1 50 / 0.3)","--editor-cursor":"oklch(0.55 0.15 50)","--editor-code-bg":"oklch(0.92 0.02 75)","--editor-line-number":"oklch(0.6 0.02 60)","--editor-callout-info":"oklch(0.55 0.12 220)","--editor-callout-warning":"oklch(0.65 0.15 50)","--editor-callout-error":"oklch(0.55 0.15 25)","--editor-callout-success":"oklch(0.55 0.12 160)","--editor-callout-note":"oklch(0.55 0.12 280)","--syntax-keyword":"oklch(0.5 0.15 320)","--syntax-string":"oklch(0.45 0.12 160)","--syntax-number":"oklch(0.5 0.12 50)","--syntax-comment":"oklch(0.55 0.02 60)","--syntax-function":"oklch(0.5 0.15 280)","--syntax-variable":"oklch(0.45 0.1 220)"}},Bl={name:"nord",description:"Arctic, north-bluish color palette",variables:{"--editor-bg":"oklch(0.23 0.02 240)","--editor-fg":"oklch(0.9 0.01 230)","--editor-border":"oklch(0.32 0.02 240)","--editor-primary":"oklch(0.72 0.1 210)","--editor-primary-fg":"oklch(0.23 0.02 240)","--editor-secondary":"oklch(0.28 0.02 240)","--editor-secondary-fg":"oklch(0.75 0.01 230)","--editor-muted":"oklch(0.35 0.02 240)","--editor-muted-fg":"oklch(0.6 0.01 230)","--editor-selection":"oklch(0.5 0.08 210 / 0.4)","--editor-cursor":"oklch(0.72 0.1 210)","--editor-code-bg":"oklch(0.26 0.02 240)","--editor-line-number":"oklch(0.5 0.01 230)","--editor-callout-info":"oklch(0.68 0.12 210)","--editor-callout-warning":"oklch(0.75 0.12 80)","--editor-callout-error":"oklch(0.65 0.15 15)","--editor-callout-success":"oklch(0.7 0.12 150)","--editor-callout-note":"oklch(0.7 0.1 280)","--syntax-keyword":"oklch(0.7 0.12 280)","--syntax-string":"oklch(0.7 0.1 150)","--syntax-number":"oklch(0.75 0.1 280)","--syntax-comment":"oklch(0.55 0.01 230)","--syntax-function":"oklch(0.72 0.1 210)","--syntax-variable":"oklch(0.9 0.01 230)"}},Ht={dark:Sr,light:Dl,sepia:Ol,nord:Bl};function $l(e,t){Object.entries(t.variables).forEach(([n,o])=>{e.style.setProperty(n,o)})}function sg(e,t,n,o){const r=Ht[e]||Sr;return{name:t,description:n,variables:{...r.variables,...o}}}const zl=x.createContext(null);function ig({children:e,defaultTheme:t="dark",containerRef:n}){const[o,r]=x.useState(t),s=Ht[o]||Ht.dark,i=x.useCallback(l=>{Ht[l]&&r(l)},[]);x.useEffect(()=>{n?.current&&$l(n.current,s)},[s,n]);const a={theme:s,themeName:o,setTheme:i,availableThemes:Object.keys(Ht)};return c.jsxDEV(zl.Provider,{value:a,children:e},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/ThemeProvider.tsx",lineNumber:54,columnNumber:5},this)}function ag(){const e=x.useContext(zl);if(!e)throw new Error("useEditorTheme must be used within an EditorThemeProvider");return e}const _l=[{value:"plaintext",label:"Plain Text"},{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"jsx",label:"JSX"},{value:"tsx",label:"TSX"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"c",label:"C"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"ruby",label:"Ruby"},{value:"php",label:"PHP"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"scss",label:"SCSS"},{value:"json",label:"JSON"},{value:"yaml",label:"YAML"},{value:"markdown",label:"Markdown"},{value:"sql",label:"SQL"},{value:"bash",label:"Bash"},{value:"shell",label:"Shell"}];function lg({node:e,updateAttributes:t}){const[n,o]=x.useState(!1),r=e.attrs.language||"plaintext";_l.find(i=>i.value===r)?.label;const s=x.useCallback(()=>{const i=e.textContent;navigator.clipboard.writeText(i).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})},[e.textContent]);return c.jsxDEV(Ee.NodeViewWrapper,{className:"code-block-wrapper",children:[c.jsxDEV("div",{className:"code-block-controls",contentEditable:!1,children:[c.jsxDEV("div",{className:"code-block-language-wrapper",children:[c.jsxDEV("select",{value:r,onChange:i=>t({language:i.target.value}),className:"code-block-language-select",children:_l.map(({value:i,label:a})=>c.jsxDEV("option",{value:i,children:a},i,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:64,columnNumber:15},this))},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:58,columnNumber:11},this),c.jsxDEV(C.ChevronDown,{size:12,className:"code-block-language-chevron"},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:69,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:57,columnNumber:9},this),c.jsxDEV("button",{onClick:s,className:`code-block-copy-btn ${n?"copied":""}`,title:n?"Copied!":"Copy code",children:n?c.jsxDEV(C.Check,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:76,columnNumber:21},this):c.jsxDEV(C.Copy,{size:14},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:76,columnNumber:43},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:56,columnNumber:7},this),c.jsxDEV("pre",{className:"code-block-pre",children:c.jsxDEV("code",{children:c.jsxDEV(Ee.NodeViewContent,{},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:83,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:82,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:81,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/manus-markdown-editor/client/src/components/editor/CodeBlockComponent.tsx",lineNumber:54,columnNumber:5},this)}O.AutoSaveIndicator=$a,O.Callout=rg,O.CalloutInputRule=qa,O.CodeBlockComponent=lg,O.CollapsibleHeading=Ua,O.DatePill=Zr,O.EditorThemeProvider=ig,O.EditorToolbar=Va,O.FindReplace=Ia,O.FloatingToolbar=Xr,O.ImageDropZone=Ra,O.ImageUpload=Ja,O.MarkdownEditor=og,O.MarkdownLinkInputRule=ja,O.MarkdownPasteSafe=Fa,O.RecoveryBanner=za,O.ResizableImage=Yr,O.SearchHighlight=Ka,O.SelectAllActionBar=Da,O.SelectAllOccurrences=Ya,O.SlashCommands=Qr,O.TabIndent=Ga,O.TableOfContents=lr,O.WikiLinkSafe=_a,O.applyTheme=$l,O.createCustomTheme=sg,O.darkTheme=Sr,O.lightTheme=Dl,O.lowlight=oe,O.nordTheme=Bl,O.sepiaTheme=Ol,O.themes=Ht,O.useAutoSave=Oa,O.useEditorTheme=ag,O.useWordCount=Ba,Object.defineProperty(O,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=manus-editor.umd.cjs.map
