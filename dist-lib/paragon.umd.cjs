(function(q,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react/jsx-runtime"),require("@tiptap/react"),require("@tiptap/starter-kit"),require("@tiptap/extension-placeholder"),require("@tiptap/extension-text-align"),require("@tiptap/extension-highlight"),require("@tiptap/extension-link"),require("@tiptap/extension-table"),require("@tiptap/extension-table-row"),require("@tiptap/extension-table-cell"),require("@tiptap/extension-table-header"),require("@tiptap/pm/state"),require("@tiptap/pm/view"),require("@tiptap/core"),require("@tiptap/extension-bullet-list"),require("@tiptap/extension-ordered-list"),require("@tiptap/extension-list-item"),require("@tiptap/extension-task-list"),require("@tiptap/extension-task-item"),require("@tiptap/pm/transform"),require("@tiptap/extension-underline"),require("@tiptap/extension-subscript"),require("@tiptap/extension-superscript"),require("@tiptap/extension-typography"),require("@tiptap/extension-code-block-lowlight"),require("lowlight"),require("react"),require("lucide-react"),require("highlight.js/lib/languages/javascript"),require("highlight.js/lib/languages/typescript"),require("highlight.js/lib/languages/python"),require("highlight.js/lib/languages/xml"),require("highlight.js/lib/languages/css"),require("highlight.js/lib/languages/json"),require("highlight.js/lib/languages/bash"),require("highlight.js/lib/languages/sql"),require("highlight.js/lib/languages/java"),require("highlight.js/lib/languages/cpp"),require("highlight.js/lib/languages/go"),require("highlight.js/lib/languages/rust"),require("highlight.js/lib/languages/markdown"),require("highlight.js/lib/languages/yaml"),require("highlight.js/lib/languages/diff"),require("react-dom"),require("@tiptap/extension-image"),require("react-dom/client"),require("@tiptap/pm/model"),require("@tiptap/pm/schema-list"),require("@tiptap/pm/history")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","@tiptap/react","@tiptap/starter-kit","@tiptap/extension-placeholder","@tiptap/extension-text-align","@tiptap/extension-highlight","@tiptap/extension-link","@tiptap/extension-table","@tiptap/extension-table-row","@tiptap/extension-table-cell","@tiptap/extension-table-header","@tiptap/pm/state","@tiptap/pm/view","@tiptap/core","@tiptap/extension-bullet-list","@tiptap/extension-ordered-list","@tiptap/extension-list-item","@tiptap/extension-task-list","@tiptap/extension-task-item","@tiptap/pm/transform","@tiptap/extension-underline","@tiptap/extension-subscript","@tiptap/extension-superscript","@tiptap/extension-typography","@tiptap/extension-code-block-lowlight","lowlight","react","lucide-react","highlight.js/lib/languages/javascript","highlight.js/lib/languages/typescript","highlight.js/lib/languages/python","highlight.js/lib/languages/xml","highlight.js/lib/languages/css","highlight.js/lib/languages/json","highlight.js/lib/languages/bash","highlight.js/lib/languages/sql","highlight.js/lib/languages/java","highlight.js/lib/languages/cpp","highlight.js/lib/languages/go","highlight.js/lib/languages/rust","highlight.js/lib/languages/markdown","highlight.js/lib/languages/yaml","highlight.js/lib/languages/diff","react-dom","@tiptap/extension-image","react-dom/client","@tiptap/pm/model","@tiptap/pm/schema-list","@tiptap/pm/history"],c):(q=typeof globalThis<"u"?globalThis:q||self,c(q.Paragon={},q.jsxRuntime,q.TiptapReact,q.StarterKit,q.Placeholder,q.TextAlign,q.Highlight,q.Link,q.extensionTable,q.TableRow,q.TableCell,q.TableHeader,q.state,q.view,q.TiptapCore,q.BulletList,q.OrderedList,q.ListItem,q.TaskList,q.TaskItem,q.transform,q.Underline,q.Subscript,q.Superscript,q.Typography,q.CodeBlockLowlight,q.lowlight,q.React,q.LucideReact,q.javascript,q.typescript,q.python,q.xml,q.css,q.json,q.bash,q.sql,q.java,q.cpp,q.go,q.rust,q.markdown,q.yaml,q.diff,q.ReactDOM,q.Image,q.client,q.model,q.schemaList,q.history))})(this,(function(q,c,je,tf,nf,rf,of,sf,af,lf,cf,df,ge,Me,me,uf,ff,pf,hf,gf,Wo,mf,bf,yf,vf,wf,kf,g,I,Fo,Uo,Va,jo,xf,Cf,Ar,Sf,Tf,Ka,Ga,Xa,Za,Qa,Ja,Yo,Ef,Mf,Df,Lr,Ra){"use strict";function ei(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const S=ei(g),ti=ei(Yo),Nf=new ge.PluginKey("tableCellMenu");let ni=!1,Pr=null;function Af(){ni||(ni=!0,document.addEventListener("mouseover",e=>{const n=e.target.closest("td, th");if(n&&n.closest(".ProseMirror")){const r=n.querySelector(".table-cell-menu-btn");r&&(r.style.opacity="1")}},!0),document.addEventListener("mouseout",e=>{const t=e.target,n=e.relatedTarget,r=t.closest("td, th");if(r&&r.closest(".ProseMirror")){if(n&&r.contains(n)||document.querySelector(".table-cell-menu-dropdown"))return;const s=r.querySelector(".table-cell-menu-btn");s&&(s.style.opacity="0")}},!0))}function Lf(e){return Af(),new ge.Plugin({key:Nf,state:{init(){return Me.DecorationSet.empty},apply(t,n,r,o){return!t.docChanged&&Pr?Pr.map(t.mapping,t.doc):(Pr=Pf(o.doc,e),Pr)}},props:{decorations(t){return this.getState(t)}}})}function Pf(e,t){const n=[];return e.descendants((r,o)=>{if(r.type.name==="tableCell"||r.type.name==="tableHeader"){const s=Me.Decoration.widget(o+1,a=>{const i=document.createElement("div");i.className="table-cell-menu-wrapper ProseMirror-widget",i.setAttribute("contenteditable","false"),i.style.cssText="position:absolute;top:2px;right:2px;z-index:50;pointer-events:auto;";const l=document.createElement("button");l.className="table-cell-menu-btn",l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1.5"/><circle cx="12" cy="5" r="1.5"/><circle cx="12" cy="19" r="1.5"/></svg>',l.title="Table options",l.type="button";const u=document.documentElement.classList.contains("dark"),d=u?"rgba(30,30,30,0.95)":"rgba(255,255,255,0.95)",f=u?"rgba(60,60,60,0.5)":"rgba(200,200,200,0.5)",p=u?"#999":"#666",h=u?"#2a2a2a":"#f5f5f5";return l.style.cssText="width:18px;height:18px;display:flex;align-items:center;justify-content:center;background:"+d+";border:1px solid "+f+";border-radius:4px;cursor:pointer;opacity:0;transition:opacity 0.15s ease,background-color 0.15s ease,transform 0.1s ease;color:"+p+";pointer-events:auto;padding:0;",l.addEventListener("mouseenter",()=>{l.style.opacity="1",l.style.background=h,l.style.transform="scale(1.05)"}),l.addEventListener("mouseleave",()=>{document.querySelector(".table-cell-menu-dropdown"),l.style.background=d,l.style.transform="scale(1)"}),l.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation();const y=l.getBoundingClientRect();t.chain().focus().setTextSelection(o+1).run(),If(m,t,o,y)}),i.appendChild(l),i},{side:-1,key:"menu-"+o});n.push(s)}}),Me.DecorationSet.create(e,n)}function If(e,t,n,r){const o=document.querySelector(".table-cell-menu-dropdown");o&&o.remove();const s=document.createElement("div");s.className="table-cell-menu-dropdown";const a=170,i=280;let l=Math.max(0,Math.min(r.top,window.innerHeight)),u=Math.max(0,Math.min(r.bottom,window.innerHeight)),d=Math.max(0,Math.min(r.left,window.innerWidth)),f=u+4,p=d-a+r.width+8;p+a>window.innerWidth-12&&(p=window.innerWidth-a-12),p<12&&(p=12),f+i>window.innerHeight-12&&(f=l-i-4),f<12&&(f=12),f+i>window.innerHeight-12&&(f=window.innerHeight-i-12);const h=document.documentElement.classList.contains("dark"),m=h?"#1f1f1f":"#ffffff",y=h?"#3a3a3a":"#e5e5e5",b=h?"#e5e5e5":"#333333";s.style.cssText="position:fixed;top:"+f+"px;left:"+p+"px;z-index:99999;display:flex;flex-direction:column;gap:2px;min-width:170px;max-width:220px;width:auto;padding:6px;background:"+m+";border:1px solid "+y+";border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.15),0 2px 6px rgba(0,0,0,0.1);color:"+b+";font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;pointer-events:auto;";const w=t.state.doc.resolve(n);let v=!1;for(let A=w.depth;A>=0;A--)if(w.node(A).type.name==="table"){w.node(A).firstChild?.firstChild?.type.name==="tableHeader"&&(v=!0);break}const x=[{label:"Insert Column Left",icon:"col-left",action:()=>t.chain().focus().setTextSelection(n+1).addColumnBefore().run()},{label:"Insert Column Right",icon:"col-right",action:()=>t.chain().focus().setTextSelection(n+1).addColumnAfter().run()},{label:"Insert Row Above",icon:"row-up",action:()=>t.chain().focus().setTextSelection(n+1).addRowBefore().run()},{label:"Insert Row Below",icon:"row-down",action:()=>t.chain().focus().setTextSelection(n+1).addRowAfter().run()},{label:"divider"},{label:v?"✓ Header Row":"  Header Row",icon:"toggle-header",action:()=>t.chain().focus().setTextSelection(n+1).toggleHeaderRow().run()},{label:"divider"},{label:"Delete Column",icon:"delete",action:()=>t.chain().focus().setTextSelection(n+1).deleteColumn().run(),destructive:!0},{label:"Delete Row",icon:"delete",action:()=>t.chain().focus().setTextSelection(n+1).deleteRow().run(),destructive:!0},{label:"Delete Table",icon:"table-delete",action:()=>t.chain().focus().setTextSelection(n+1).deleteTable().run(),destructive:!0},{label:"divider"},{label:"Copy Table",icon:"copy",action:()=>Of(t)}],M={"col-left":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/><path d="M9 12H3m0 0l2-2m-2 2l2 2"/></svg>',"col-right":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="3" width="12" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/><path d="M15 12h6m0 0l-2-2m2 2l-2 2"/></svg>',"row-up":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="6" width="18" height="12" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 9V3m0 0l-2 2m2-2l2 2"/></svg>',"row-down":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="6" width="18" height="12" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/><path d="M12 15v6m0 0l-2-2m2 2l2-2"/></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>',"table-delete":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="21" y1="15" x2="15" y2="21"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>',"toggle-header":'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="3" x2="9" y2="9"/><line x1="15" y1="3" x2="15" y2="9"/></svg>'},k=h?"#2a2a2a":"#f5f5f5",T=h?"#ff6b6b":"#dc2626",N=h?"#999999":"#666666",C=h?"#333333":"#e5e5e5";x.forEach(A=>{if(A.label==="divider"){const L=document.createElement("div");L.style.cssText="height:1px;background:"+C+";margin:4px 0;",s.appendChild(L)}else{const L=document.createElement("button");L.type="button";const $=A.destructive?T:b;L.style.cssText="display:flex;align-items:center;gap:10px;width:100%;padding:8px 10px;font-size:13px;font-weight:450;color:"+$+";background:transparent;border:none;border-radius:5px;cursor:pointer;text-align:left;transition:background 0.15s ease;pointer-events:auto;";const _=M[A.icon||""]||"",B=A.destructive?T:N;L.innerHTML='<span style="display:flex;align-items:center;justify-content:center;width:16px;height:16px;flex-shrink:0;color:'+B+';">'+_+'</span><span style="flex:1;white-space:nowrap;">'+A.label+"</span>",L.addEventListener("mouseenter",()=>{L.style.background=A.destructive?h?"rgba(255,107,107,0.15)":"rgba(220,38,38,0.1)":k}),L.addEventListener("mouseleave",()=>{L.style.background="transparent"}),L.addEventListener("click",U=>{U.preventDefault(),U.stopPropagation(),A.action&&A.action(),s.remove()}),s.appendChild(L)}}),document.body.appendChild(s);const E=A=>{const L=A.target;if(s.contains(L)||L.classList.contains("table-cell-menu-btn"))return;const $=L.closest('[role="dialog"]');$&&$.contains(s)||(s.remove(),document.removeEventListener("mousedown",E),document.removeEventListener("keydown",D))},D=A=>{A.key==="Escape"&&(s.remove(),document.removeEventListener("mousedown",E),document.removeEventListener("keydown",D))};setTimeout(()=>{document.addEventListener("mousedown",E),document.addEventListener("keydown",D)},0)}function Of(e){const{state:t}=e,{selection:n}=t;let r=null;if(t.doc.descendants((o,s)=>{if(o.type.name==="table"&&s<=n.from&&s+o.nodeSize>=n.to)return r=o,!1}),r){const o=a=>{if(a.type.name==="table")return"<table>"+a.content.content.map(o).join("")+"</table>";if(a.type.name==="tableRow")return"<tr>"+a.content.content.map(o).join("")+"</tr>";if(a.type.name==="tableCell"){const i=a.attrs,l=i.colspan>1?' colspan="'+i.colspan+'"':"",u=i.rowspan>1?' rowspan="'+i.rowspan+'"':"";return"<td"+l+u+">"+a.textContent+"</td>"}if(a.type.name==="tableHeader"){const i=a.attrs,l=i.colspan>1?' colspan="'+i.colspan+'"':"",u=i.rowspan>1?' rowspan="'+i.rowspan+'"':"";return"<th"+l+u+">"+a.textContent+"</th>"}return a.textContent||""},s=o(r);navigator.clipboard.writeText(s).then(()=>{const a=document.createElement("div");a.className="tcm-toast",a.textContent="Table copied to clipboard",a.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:white;padding:10px 20px;border-radius:6px;font-size:13px;z-index:99999;animation:fadeInOut 2s ease-in-out forwards;",document.body.appendChild(a),setTimeout(()=>a.remove(),2e3)})}}const $f=cf.extend({addProseMirrorPlugins(){return[...this.parent?.()||[],Lf(this.editor)]}}),_f=df.extend({}),Xn=new ge.PluginKey("tableSorting");let Qt=null,Zn=null;function Hf(e){const t=parseFloat(e.replace(/[,$%]/g,""));if(!isNaN(t)&&e.match(/^[\d,.$%\-+]+$/))return{type:"number",value:t};const n=[/^\d{4}-\d{2}-\d{2}/,/^\d{1,2}\/\d{1,2}\/\d{2,4}/,/^\d{1,2}-\d{1,2}-\d{2,4}/];for(const r of n)if(r.test(e)){const o=new Date(e);if(!isNaN(o.getTime()))return{type:"date",value:o}}return{type:"string",value:e.toLowerCase()}}function zf(e,t,n){let r=0;return e.type==="number"&&t.type==="number"?r=e.value-t.value:e.type==="date"&&t.type==="date"?r=e.value.getTime()-t.value.getTime():r=String(e.value).localeCompare(String(t.value)),n==="asc"?r:-r}function Bf(e,t,n){const{state:r,view:o}=e;let s=null;if(r.doc.nodesBetween(t,t+1,(m,y)=>{if(m.type.name==="table"&&y===t)return s=m,!1}),!s){console.log("Table not found at position",t);return}const a=Qt?.tablePos===t&&Qt?.columnIndex===n&&Qt?.direction==="asc"?"desc":"asc";Qt={tablePos:t,columnIndex:n,direction:a},Zn=null;const i=[];s.forEach(m=>{if(m.type.name==="tableRow"){let y=!1;m.forEach(b=>{b.type.name==="tableHeader"&&(y=!0)}),i.push({node:m,isHeader:y})}});const l=i.filter(m=>m.isHeader),u=i.filter(m=>!m.isHeader);if(u.length<2){ri(n,a),o.dispatch(r.tr.setMeta(Xn,{updated:!0}));return}const d=u.map(m=>{let y="",b=0;return m.node.forEach(w=>{b===n&&(y=w.textContent||""),b++}),{...m,sortValue:Hf(y)}}),f=d.map((m,y)=>y);d.sort((m,y)=>zf(m.sortValue,y.sortValue,a));const p=d.map((m,y)=>u.indexOf(m));if(f.some((m,y)=>m!==p[y])){const m=[];l.forEach(w=>m.push(w.node)),d.forEach(w=>m.push(w.node));const y=s.type.create(s.attrs,m),{tr:b}=r;b.replaceWith(t,t+s.nodeSize,y),b.setMeta(Xn,{updated:!0}),o.dispatch(b)}else o.dispatch(r.tr.setMeta(Xn,{updated:!0}));ri(n,a)}function ri(e,t){const n=document.querySelector(".table-sort-toast");n&&n.remove();const r=document.createElement("div");r.className="table-sort-toast";const o=t==="asc"?"ascending":"descending",s=t==="asc"?"↑":"↓";r.innerHTML='<span style="margin-right:6px;">'+s+"</span> Sorted column "+(e+1)+" "+o;const a=document.documentElement.classList.contains("dark");r.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:"+(a?"rgba(30,30,30,0.95)":"rgba(255,255,255,0.95)")+";color:"+(a?"#e5e5e5":"#333")+";padding:10px 20px;border-radius:8px;font-size:13px;font-weight:500;z-index:99999;box-shadow:0 4px 12px rgba(0,0,0,0.15);border:1px solid "+(a?"#3a3a3a":"#e5e5e5")+";animation:sortToastIn 0.2s ease;",document.body.appendChild(r),setTimeout(()=>{r.style.animation="sortToastOut 0.2s ease forwards",setTimeout(()=>r.remove(),200)},1500)}function Wf(e,t,n,r){const o=document.createElement("span");o.className="table-sort-btn-inline",o.setAttribute("contenteditable","false"),o.style.cssText="display:inline-flex;align-items:center;margin-left:4px;vertical-align:middle;pointer-events:auto;";const s=document.createElement("button");s.className="table-sort-btn",s.setAttribute("contenteditable","false"),s.type="button";const a=document.documentElement.classList.contains("dark"),i=a?"#60a5fa":"#3b82f6",l=a?"#666":"#aaa",u=a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)";return s.style.cssText="display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;padding:0;font-size:10px;color:"+(e?i:l)+";background:transparent;border:none;border-radius:3px;cursor:pointer;user-select:none;transition:all 0.15s ease;opacity:"+(e?"1":"0.5")+";pointer-events:auto;vertical-align:middle;",s.addEventListener("mouseenter",()=>{s.style.background=u,s.style.opacity="1",s.style.color=i}),s.addEventListener("mouseleave",()=>{s.style.background="transparent",s.style.opacity=e?"1":"0.5",s.style.color=e?i:l}),s.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),Bf(r,t,n)}),e==="asc"?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19V5M5 12l7-7 7 7"/></svg>',s.title="Sorted ascending - Click to sort descending"):e==="desc"?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12l7 7 7-7"/></svg>',s.title="Sorted descending - Click to sort ascending"):(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 15l5 5 5-5M7 9l5-5 5 5"/></svg>',s.title="Click to sort this column"),o.appendChild(s),o}function Ff(e){return new ge.Plugin({key:Xn,state:{init(){return Me.DecorationSet.empty},apply(t,n,r,o){const s=t.getMeta(Xn);return!t.docChanged&&!s?.updated&&Zn?Zn.map(t.mapping,t.doc):(Zn=Uf(o.doc,e),Zn)}},props:{decorations(t){return this.getState(t)}}})}function Uf(e,t){const n=[];return e.descendants((r,o)=>{if(r.type.name==="table"){const s=o;r.forEach((a,i)=>{if(a.type.name==="tableRow"){let l=0,u=0;a.forEach((d,f)=>{if(d.type.name==="tableHeader"){const p=o+1+i+1+u;let h=p+1;d.forEach((x,M)=>{x.type.name==="paragraph"&&(h=p+1+M+x.nodeSize-1)});const y=Qt?.tablePos===s&&Qt?.columnIndex===l?Qt.direction:null,b=l,w=s,v=Me.Decoration.widget(h,()=>Wf(y,w,b,t),{side:1,key:"sort-"+s+"-"+b});n.push(v)}u+=d.nodeSize,l++})}})}}),Me.DecorationSet.create(e,n)}const jf=me.Extension.create({name:"tableSorting",addProseMirrorPlugins(){return[Ff(this.editor)]}});function qo(e,t,n,r,o,s={}){const a=e.doc.nodeAt(t);if(!a)return!1;e.setNodeMarkup(t,n,a.attrs);const i=e.doc.nodeAt(t);if(!i)return!1;const l=[];i.forEach((u,d)=>{u.type===o&&l.push(t+1+d)});for(let u=l.length-1;u>=0;u--){const d=l[u],f=e.doc.nodeAt(d);f&&f.type===o&&e.setNodeMarkup(d,r,s)}return!0}const oi=uf.extend({content:"(listItem | taskItem)+",addCommands(){return{toggleBulletList:()=>({commands:e,state:t,tr:n,dispatch:r})=>{const{selection:o}=t,{$from:s}=o,a=t.schema.nodes.bulletList,i=t.schema.nodes.taskList,l=t.schema.nodes.orderedList,u=t.schema.nodes.listItem,d=t.schema.nodes.taskItem;let f=null,p=-1;for(let h=s.depth;h>0;h--){const m=s.node(h);if(m.type===a||m.type===i||m.type===l){f=m.type,p=s.before(h);break}}if(f===a)return e.liftListItem("listItem");if(f===i||f===l){if(!r)return!0;if(qo(n,p,a,u,d,{}))return r(n),!0}return e.toggleList(this.name,this.options.itemTypeName)}}}}),si=ff.extend({content:"(listItem | taskItem)+",addCommands(){return{toggleOrderedList:()=>({commands:e,state:t,tr:n,dispatch:r})=>{const{selection:o}=t,{$from:s}=o,a=t.schema.nodes.bulletList,i=t.schema.nodes.taskList,l=t.schema.nodes.orderedList,u=t.schema.nodes.listItem,d=t.schema.nodes.taskItem;let f=null,p=-1;for(let h=s.depth;h>0;h--){const m=s.node(h);if(m.type===a||m.type===i||m.type===l){f=m.type,p=s.before(h);break}}if(f===l)return e.liftListItem("listItem");if(f===i||f===a){if(!r)return!0;if(qo(n,p,l,u,d,{}))return r(n),!0}return e.toggleList(this.name,this.options.itemTypeName)}}}}),ai=hf.extend({content:"(taskItem | listItem)+",addCommands(){return{toggleTaskList:()=>({editor:e,commands:t,state:n,tr:r,dispatch:o,chain:s,can:a})=>{const{selection:i}=n,{$from:l,$to:u}=i,d=l.blockRange(u);if(!d)return!1;const f=n.schema.nodes.taskList,p=n.schema.nodes.taskItem;let h=!1;for(let k=l.depth;k>0;k--)if(l.node(k).type===f){h=!0,l.before(k);break}if(h)return t.liftListItem("taskItem");const m=n.schema.nodes.bulletList,y=n.schema.nodes.orderedList,b=n.schema.nodes.listItem;let w=null,v=-1;for(let k=l.depth;k>0;k--){const T=l.node(k);if(T.type===m||T.type===y){w=T,v=l.before(k);break}}if(w){if(!o)return!0;const k=v,T=r.doc.nodeAt(k);if(!T)return!1;r.setNodeMarkup(k,f,T.attrs);const N=r.doc.nodeAt(k);if(!N)return!1;const C=[];N.forEach((E,D)=>{E.type===b&&C.push(k+1+D)});for(let E=C.length-1;E>=0;E--){const D=C[E],A=r.doc.nodeAt(D);A&&A.type===b&&r.setNodeMarkup(D,p,{checked:!1})}return o(r),!0}if(!o)return!0;const x=Wo.findWrapping(d,f);if(x){r.wrap(d,x);const{$from:k}=r.selection;let T=-1;for(let N=k.depth;N>0;N--)if(k.node(N).type===f){T=k.before(N);break}if(T>=0){const N=r.doc.nodeAt(T);if(N){const C=[];N.forEach((E,D)=>{E.type===b&&C.push(T+1+D)});for(let E=C.length-1;E>=0;E--){const D=C[E],A=r.doc.nodeAt(D);A&&A.type===b&&r.setNodeMarkup(D,p,{checked:!1})}}}return o(r),!0}const M=Wo.findWrapping(d,m);if(M){r.wrap(d,M);const{$from:k}=r.selection;let T=-1;for(let N=k.depth;N>0;N--)if(k.node(N).type===m){T=k.before(N);break}return T>=0&&qo(r,T,f,p,b,{checked:!1}),o(r),!0}return t.toggleList(this.name,this.options.itemTypeName)}}}}),ii=gf.extend({content:"paragraph block*",addKeyboardShortcuts(){return{...this.parent?.()||{},Enter:()=>{const{editor:t}=this,{state:n}=t,{$from:r,$to:o}=n.selection;if(!r.sameParent(o)||r.pos!==o.pos)return t.commands.splitListItem(this.name);let s=-1;for(let f=r.depth;f>=1;f--)if(r.node(f).type.name==="taskItem"){s=f;break}if(s===-1)return t.commands.splitListItem(this.name);const a=r.node(s);if(!a.attrs.checked)return t.commands.splitListItem(this.name);const l=r.start(s),u=a.firstChild;if(!u||!u.isTextblock)return t.commands.splitListItem(this.name);if(r.pos-l<=1){const f=r.before(s),{tr:p}=n,h=n.schema.nodes.taskItem,m=n.schema.nodes.paragraph,y=h.create({checked:!1},m.create());p.insert(f,y);const b=f+1;return p.setSelection(ge.TextSelection.create(p.doc,b)),p.scrollIntoView(),t.view.dispatch(p),!0}return t.commands.splitListItem(this.name)}}},addInputRules(){return[]},addProseMirrorPlugins(){const e=this.type,t=this.editor.schema.nodes.taskList;return[new ge.Plugin({key:new ge.PluginKey("taskItemInputRule"),props:{handleTextInput(n,r,o,s){if(s!==" ")return!1;const{state:a}=n,i=a.doc.resolve(r),l=i.parent.textBetween(0,i.parentOffset,void 0,"￼"),d=/^\s*(-\s*)?\[([( |x])?\]$/.exec(l);if(!d)return!1;const f=d[2]==="x",p=i.start()+(d.index||0),h=r,m=a.tr;m.delete(p,h);const b=m.doc.resolve(p).blockRange();if(!b||!t||!e)return!1;const w=[{type:t,attrs:{}},{type:e,attrs:{checked:f}}];if(m.wrap(b,w),p>1){const v=m.doc.resolve(p-1).nodeBefore;v&&v.type===t&&Wo.canJoin(m.doc,p-1)&&m.join(p-1)}return n.dispatch(m),!0}}})]}}),li=pf.extend({content:"paragraph block*"}),ci=new ge.PluginKey("collapsibleList");function Vo(e,t){let n="";return e.firstChild&&e.firstChild.type.name==="paragraph"&&(n=e.firstChild.textContent.slice(0,50)),`li-${t}-${n}`}function Ko(e){const t=["bulletList","orderedList","taskList"];let n=!1;return e.forEach(r=>{t.includes(r.type.name)&&(n=!0)}),n}function Yf(e,t){const n=["bulletList","orderedList","taskList"];let r=-1,o=-1,s=t+1;return e.forEach(a=>{n.includes(a.type.name)&&(r===-1&&(r=s),o=s+a.nodeSize),s+=a.nodeSize}),r===-1?null:{start:r,end:o}}let gn=null;function Go(e,t,n){const r=[];return e.descendants((o,s)=>{if(!n.listItemTypes.includes(o.type.name)||!Ko(o))return!0;const a=Vo(o,s),i=t.collapsedItems.has(a);r.push(Me.Decoration.node(s,s+o.nodeSize,{class:`collapsible-list-item ${i?"is-collapsed":"is-expanded"}`,"data-list-item-id":a}));const l=o.firstChild;if(l&&l.type.name==="paragraph"){const u=s+1+l.nodeSize-1,d=Me.Decoration.widget(u,()=>{const f=CSS.escape(a),p=document.querySelector(`button.collapsible-list-chevron[data-list-item-id="${f}"]`);if(p){p.classList.contains("collapsed")!==i&&(p.classList.remove("collapsed","expanded"),p.classList.add(i?"collapsed":"expanded"),p.title=i?"Click to expand":"Click to collapse");const b=p.parentElement;if(b)return b}const h=document.createElement("span");h.className="collapsible-list-chevron-wrapper",h.setAttribute("contenteditable","false");const m=document.createElement("button");return m.className=`collapsible-list-chevron ${i?"collapsed":"expanded"}`,m.setAttribute("data-list-item-id",a),m.setAttribute("contenteditable","false"),m.setAttribute("tabindex","-1"),m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',m.title=i?"Click to expand":"Click to collapse",m.addEventListener("click",y=>{y.preventDefault(),y.stopPropagation();const b=m.classList.contains("collapsed");m.classList.remove("collapsed","expanded"),m.classList.add(b?"expanded":"collapsed"),m.title=b?"Click to collapse":"Click to expand",t.collapsedItems.has(a)?t.collapsedItems.delete(a):t.collapsedItems.add(a),gn&&gn.dispatch(gn.state.tr.setMeta("collapsibleList",{toggled:a}))}),h.appendChild(m),h},{side:1,key:`list-chevron-${a}`});r.push(d)}if(i&&Yf(o,s)){let d=s+1;o.forEach(f=>{["bulletList","orderedList","taskList"].includes(f.type.name)&&r.push(Me.Decoration.node(d,d+f.nodeSize,{class:"collapsible-list-hidden"})),d+=f.nodeSize})}return!0}),Me.DecorationSet.create(e,r)}const di=me.Extension.create({name:"collapsibleList",addOptions(){return{listItemTypes:["listItem","taskItem"]}},addStorage(){return{collapsedItems:new Set}},addCommands(){return{toggleListItemCollapse:e=>({editor:t,tr:n})=>{const r=this.storage,o=n.doc.nodeAt(e);if(!o||!this.options.listItemTypes.includes(o.type.name)||!Ko(o))return!1;const s=Vo(o,e);return r.collapsedItems.has(s)?r.collapsedItems.delete(s):r.collapsedItems.add(s),t.view.dispatch(n.setMeta("collapsibleList",{toggled:s})),!0},expandAllListItems:()=>({editor:e,tr:t})=>(this.storage.collapsedItems.clear(),e.view.dispatch(t.setMeta("collapsibleList",{expandAll:!0})),!0),collapseAllListItems:()=>({editor:e,tr:t})=>{const n=this.storage;return t.doc.descendants((o,s)=>{this.options.listItemTypes.includes(o.type.name)&&Ko(o)&&n.collapsedItems.add(Vo(o,s))}),e.view.dispatch(t.setMeta("collapsibleList",{collapseAll:!0})),!0}}},addProseMirrorPlugins(){const e=this.storage,t=this.options;return[new ge.Plugin({key:ci,view(n){return gn=n,{update(r){gn=r},destroy(){gn=null}}},state:{init(n,r){return{collapsedItems:new Set,decorations:Go(r.doc,e,t),docVersion:0}},apply(n,r,o,s){return n.getMeta("collapsibleList")||n.docChanged?{collapsedItems:new Set(e.collapsedItems),decorations:Go(s.doc,e,t),docVersion:r.docVersion+1}:{...r,decorations:r.decorations.map(n.mapping,n.doc)}}},props:{decorations(n){const r=ci.getState(n);return r?.decorations?r.decorations:Go(n.doc,e,t)}}})]}}),ye=kf.createLowlight();ye.register("javascript",Fo),ye.register("js",Fo),ye.register("jsx",Fo),ye.register("typescript",Uo),ye.register("ts",Uo),ye.register("tsx",Uo),ye.register("python",Va),ye.register("py",Va),ye.register("xml",jo),ye.register("html",jo),ye.register("svg",jo),ye.register("css",xf),ye.register("json",Cf),ye.register("bash",Ar),ye.register("sh",Ar),ye.register("shell",Ar),ye.register("zsh",Ar),ye.register("sql",Sf),ye.register("java",Tf),ye.register("cpp",Ka),ye.register("c",Ka),ye.register("go",Ga),ye.register("golang",Ga),ye.register("rust",Xa),ye.register("rs",Xa),ye.register("markdown",Za),ye.register("md",Za),ye.register("yaml",Qa),ye.register("yml",Qa),ye.register("diff",Ja),ye.register("patch",Ja);function qf({node:e,updateAttributes:t,extension:n}){const[r,o]=g.useState(!1),[s,a]=g.useState(!1),i=g.useRef(null);g.useEffect(()=>{const p=i.current;if(!p||s)return;const h=new IntersectionObserver(m=>{for(const y of m)y.isIntersecting&&(a(!0),h.unobserve(p))},{rootMargin:"200px 0px",threshold:0});return h.observe(p),()=>{h.disconnect()}},[s]);const l=g.useCallback(async()=>{try{await navigator.clipboard.writeText(e.textContent),o(!0),setTimeout(()=>o(!1),2e3)}catch(p){console.error("Failed to copy:",p)}},[e.textContent]),u=n.options.lowlight?.listLanguages?.()||[],d=e.attrs.language||"plaintext",f=d==="plaintext"?"Plain Text":d.charAt(0).toUpperCase()+d.slice(1);return c.jsxs(je.NodeViewWrapper,{className:"code-block-wrapper",ref:i,children:[c.jsxs("div",{className:"code-block-controls",contentEditable:!1,children:[c.jsxs("div",{className:"code-block-language-wrapper",children:[c.jsxs("select",{value:d,onChange:p=>t({language:p.target.value}),className:"code-block-language-select",children:[c.jsx("option",{value:"plaintext",children:"Plain Text"}),u.map(p=>c.jsx("option",{value:p,children:p.charAt(0).toUpperCase()+p.slice(1)},p))]}),c.jsx("span",{className:"code-block-language-label",children:f}),c.jsx(I.ChevronDown,{size:12,className:"code-block-language-chevron"})]}),c.jsx("button",{type:"button",onClick:l,className:`code-block-copy-btn ${r?"copied":""}`,title:r?"Copied!":"Copy code",children:r?c.jsx(I.Check,{size:14}):c.jsx(I.Copy,{size:14})})]}),c.jsx("pre",{className:`code-block-pre ${s?"":"code-block-deferred"}`,children:c.jsx(je.NodeViewContent,{className:s?`language-${d}`:"language-plaintext"})})]})}const Vf=wf.extend({addNodeView(){return je.ReactNodeViewRenderer(qf)}}).configure({lowlight:ye,defaultLanguage:"plaintext",HTMLAttributes:{class:"code-block"}});function vt({children:e,className:t,zIndex:n=99999,onMouseDown:r}){const o=g.useCallback(i=>{r?.(i),i.stopPropagation()},[r]),s=g.useCallback(i=>{i.stopPropagation()},[]),a=g.useCallback(i=>{i.stopPropagation()},[]);return Yo.createPortal(c.jsx("div",{className:t,style:{position:"fixed",top:0,left:0,width:0,height:0,overflow:"visible",zIndex:n,pointerEvents:"auto"},onMouseDown:o,onPointerDown:s,onClick:a,children:e}),document.body)}function Kf({editor:e,isOpen:t,onClose:n}){const[r,o]=g.useState(""),s=g.useRef(null),a=g.useRef(null),[i,l]=g.useState({top:0,left:0});g.useEffect(()=>{if(t){const m=e.getAttributes("link").href||"";o(m);try{const{view:y}=e,{from:b}=y.state.selection,w=y.coordsAtPos(b),v=w.bottom+8,x=Math.max(16,Math.min(w.left,window.innerWidth-420));l({top:v,left:x})}catch{l({top:200,left:window.innerWidth/2-160})}setTimeout(()=>{s.current?.focus(),s.current?.select()},50)}},[t,e]),g.useEffect(()=>{if(!t)return;const m=v=>{a.current&&!a.current.contains(v.target)&&n()},y=()=>{n()},b=setTimeout(()=>{document.addEventListener("mousedown",m)},10),w=e.view.dom.closest(".editor-content-wrapper");return w?.addEventListener("scroll",y),()=>{clearTimeout(b),document.removeEventListener("mousedown",m),w?.removeEventListener("scroll",y)}},[t,n,e]);const u=g.useCallback(m=>{if(m?.preventDefault(),r.trim()){let y=r.trim();!/^https?:\/\//i.test(y)&&!y.startsWith("mailto:")&&(y="https://"+y),e.chain().focus().extendMarkRange("link").setLink({href:y}).run()}else e.chain().focus().unsetLink().run();n()},[r,e,n]),d=g.useCallback(m=>{m.key==="Escape"?(m.preventDefault(),n()):m.key==="Enter"&&(m.preventDefault(),u())},[n,u]);if(!t)return null;const p=(e.view.dom.closest(".markdown-editor-container")||e.view.dom.closest("[data-theme]"))?.getAttribute("data-theme")||"",h=c.jsx("div",{ref:a,className:"link-popover","data-theme":p,style:{position:"fixed",top:`${i.top}px`,left:`${i.left}px`},children:c.jsxs("form",{onSubmit:u,className:"link-popover-form",children:[c.jsxs("div",{className:"link-popover-input-wrapper",children:[c.jsx(I.Link2,{className:"link-popover-icon",size:16}),c.jsx("input",{ref:s,type:"text",value:r,onChange:m=>o(m.target.value),onKeyDown:d,placeholder:"Enter URL or paste link",className:"link-popover-input",autoComplete:"off",spellCheck:!1})]}),c.jsx("div",{className:"link-popover-hint",children:"Press Enter to save · Escape to cancel"})]})});return c.jsx(vt,{children:h})}function Gf({editor:e,onEditLink:t}){const[n,r]=g.useState({isVisible:!1,url:"",position:{top:0,left:0},linkElement:null}),o=g.useRef(null),s=g.useRef(null),a=g.useCallback(x=>{if(!(!e||e.isDestroyed)){s.current&&(clearTimeout(s.current),s.current=null);try{const M=x.getAttribute("href")||"",k=x.getBoundingClientRect(),T=k.bottom+8,N=Math.max(16,Math.min(k.left,window.innerWidth-340));r({isVisible:!0,url:M,position:{top:T,left:N},linkElement:x})}catch(M){console.warn("LinkHoverTooltip: Error showing tooltip",M)}}},[e]),i=g.useCallback(()=>{s.current=setTimeout(()=>{r(x=>({...x,isVisible:!1,linkElement:null}))},150)},[]),l=g.useCallback(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]);g.useEffect(()=>{if(!e||e.isDestroyed)return;const x=e.view.dom;if(!x)return;const M=T=>{const C=T.target.closest("a");C&&x.contains(C)&&a(C)},k=T=>{const N=T.target,C=T.relatedTarget;if(N.closest("a")){if(C&&o.current?.contains(C))return;i()}};return x.addEventListener("mouseover",M),x.addEventListener("mouseout",k),()=>{x.removeEventListener("mouseover",M),x.removeEventListener("mouseout",k),s.current&&clearTimeout(s.current)}},[e,a,i]),g.useEffect(()=>{if(!n.isVisible)return;const x=()=>{r(k=>({...k,isVisible:!1,linkElement:null}))},M=e.view.dom.closest(".editor-content-wrapper");return M?.addEventListener("scroll",x),window.addEventListener("scroll",x,!0),()=>{M?.removeEventListener("scroll",x),window.removeEventListener("scroll",x,!0)}},[n.isVisible,e]);const[u,d]=g.useState(!1),f=g.useCallback(()=>{n.url&&navigator.clipboard.writeText(n.url).then(()=>{d(!0),setTimeout(()=>d(!1),1500)})},[n.url]),p=g.useCallback(()=>{n.url&&window.open(n.url,"_blank","noopener,noreferrer")},[n.url]),h=g.useCallback(()=>{if(n.linkElement){const{view:x}=e,{doc:M}=x.state;let k=null,T=null;M.descendants((N,C)=>{if(N.isText&&N.marks.some(E=>E.type.name==="link")){const E=x.nodeDOM(C);if(E&&(E===n.linkElement||E.parentElement===n.linkElement))return k=C,T=C+N.nodeSize,!1}return!0}),k!==null&&T!==null?e.chain().focus().setTextSelection({from:k,to:T}).unsetLink().run():e.chain().focus().unsetLink().run()}r(x=>({...x,isVisible:!1}))},[e,n.linkElement]),m=g.useCallback(()=>{if(n.linkElement){const{view:x}=e,{doc:M}=x.state;M.descendants((k,T)=>{if(k.isText&&k.marks.some(N=>N.type.name==="link")){const N=x.nodeDOM(T);if(N&&(N===n.linkElement||N.parentElement===n.linkElement))return e.chain().focus().setTextSelection({from:T,to:T+k.nodeSize}).run(),!1}return!0})}r(x=>({...x,isVisible:!1})),t()},[e,n.linkElement,t]);if(!n.isVisible)return null;const y=n.url.length>40?n.url.substring(0,40)+"...":n.url,w=(e.view.dom.closest(".markdown-editor-container")||e.view.dom.closest("[data-theme]"))?.getAttribute("data-theme")||"",v=c.jsx("div",{ref:o,className:"link-hover-tooltip","data-theme":w,style:{position:"fixed",top:`${n.position.top}px`,left:`${n.position.left}px`},onMouseEnter:l,onMouseLeave:i,children:c.jsxs("div",{className:"link-hover-tooltip-content",children:[c.jsxs("button",{onClick:p,className:"link-hover-tooltip-link",title:n.url,children:[c.jsx(I.ExternalLink,{size:13,className:"link-hover-tooltip-link-icon"}),c.jsx("span",{className:"link-hover-tooltip-url",children:y||"No URL"})]}),c.jsxs("div",{className:"link-hover-tooltip-actions",children:[c.jsx("button",{onClick:m,className:"link-hover-tooltip-btn",title:"Edit link",children:c.jsx(I.Pencil,{size:14})}),c.jsx("button",{onClick:f,className:"link-hover-tooltip-btn",title:"Copy link",children:u?c.jsx(I.Check,{size:14,style:{color:"var(--primary)"}}):c.jsx(I.Copy,{size:14})}),c.jsx("button",{onClick:h,className:"link-hover-tooltip-btn link-hover-tooltip-btn-danger",title:"Remove link",children:c.jsx(I.Unlink,{size:14})})]})]})});return c.jsx(vt,{children:v})}const et=({onMouseDown:e,isActive:t,disabled:n,children:r,title:o})=>c.jsx("button",{onMouseDown:e,disabled:n,title:o,className:`
      flex items-center justify-center w-7 h-7 rounded-md flex-shrink-0
      transition-all duration-100 ease-out touch-manipulation
      ${t?"bg-primary text-primary-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
      ${n?"opacity-50 cursor-not-allowed":""}
    `,children:r}),ui=()=>c.jsx("div",{className:"w-px h-5 bg-border mx-0.5 flex-shrink-0"}),fi=[{label:"Paragraph",value:"paragraph",shortLabel:"P"},{label:"Heading 1",value:"h1",shortLabel:"H1"},{label:"Heading 2",value:"h2",shortLabel:"H2"},{label:"Heading 3",value:"h3",shortLabel:"H3"},{label:"Heading 4",value:"h4",shortLabel:"H4"},{label:"Heading 5",value:"h5",shortLabel:"H5"}],Xf=g.memo(function({editor:t,isH1:n,isH2:r,isH3:o,isH4:s,isH5:a,executeCommand:i}){const[l,u]=g.useState(!1),d=g.useRef(null),f=n?"h1":r?"h2":o?"h3":s?"h4":a?"h5":"paragraph",p=fi.find(m=>m.value===f)?.shortLabel||"P";g.useEffect(()=>{if(!l)return;const m=y=>{d.current&&!d.current.contains(y.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[l]);const h=(m,y)=>{if(m.preventDefault(),m.stopPropagation(),y==="paragraph")t.chain().focus().setParagraph().run();else{const b=parseInt(y.replace("h",""));t.chain().focus().toggleHeading({level:b}).run()}u(!1)};return c.jsxs("div",{ref:d,className:"relative flex-shrink-0",children:[c.jsxs("button",{onMouseDown:m=>{m.preventDefault(),m.stopPropagation(),u(!l)},title:"Text style",className:`
          flex items-center gap-1 h-7 px-2 rounded-md flex-shrink-0
          transition-all duration-100 ease-out touch-manipulation
          text-xs font-normal overflow-visible
          ${f!=="paragraph"?"bg-primary text-primary-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
        `,children:[c.jsx("span",{className:"min-w-[18px] text-center",children:p}),c.jsx(I.ChevronDown,{size:12,strokeWidth:2.5,className:`flex-shrink-0 transition-transform duration-150 ${l?"rotate-180":""}`})]}),l&&c.jsx("div",{className:`
            absolute top-full left-0 mt-1.5
            bg-popover text-popover-foreground
            border border-border rounded-lg shadow-lg
            py-1 min-w-[130px] z-[10000]
          `,style:{animation:"slash-fade-in-below 0.12s ease-out"},children:fi.map(m=>{const y=m.value===f;return c.jsxs("button",{onMouseDown:b=>h(b,m.value),className:`
                  flex items-center gap-2 w-full px-3 py-1.5 text-left text-sm
                  transition-colors duration-75
                  ${y?"bg-accent text-accent-foreground font-medium":"hover:bg-accent/50"}
                `,children:[c.jsx("span",{className:"w-6 text-xs font-normal text-muted-foreground",children:m.shortLabel}),c.jsx("span",{children:m.label})]},m.value)})})]})}),pi=g.memo(function({editor:t,className:n="",suppressWhenLinkPopoverOpen:r=!1,aiEnabled:o=!1,onAISparklesClick:s}){const a=g.useRef(null),i=je.useEditorState({editor:t,selector:({editor:E})=>({isBold:E.isActive("bold"),isItalic:E.isActive("italic"),isUnderline:E.isActive("underline"),isStrike:E.isActive("strike"),isCode:E.isActive("code"),isHighlight:E.isActive("highlight"),isLink:E.isActive("link"),isH1:E.isActive("heading",{level:1}),isH2:E.isActive("heading",{level:2}),isH3:E.isActive("heading",{level:3}),isH4:E.isActive("heading",{level:4}),isH5:E.isActive("heading",{level:5}),isBulletList:E.isActive("bulletList"),isOrderedList:E.isActive("orderedList"),isTaskList:E.isActive("taskList"),isBlockquote:E.isActive("blockquote"),isCodeBlock:E.isActive("codeBlock")})}),[l,u]=g.useState(!1),[d,f]=g.useState(""),[p,h]=g.useState(!1),[m,y]=g.useState({top:0,left:0}),b=g.useRef(null),w=g.useRef(null),v=g.useRef(null),x=g.useCallback(()=>{if(d){let E=d.trim();!/^https?:\/\//i.test(E)&&!E.startsWith("mailto:")&&(E="https://"+E),t.chain().focus().extendMarkRange("link").setLink({href:E}).run()}else t.chain().focus().extendMarkRange("link").unsetLink().run();u(!1),f("")},[t,d]),M=E=>{E.preventDefault(),E.stopPropagation();const D=t.getAttributes("link").href;f(D||""),u(!0)},k=g.useCallback((E,D)=>{E.preventDefault(),E.stopPropagation(),D()},[]);g.useEffect(()=>{if(!t||t.isDestroyed)return;const E=()=>{if(!t.isDestroyed)try{const{selection:D}=t.state,{empty:A,from:L,to:$}=D,U=("node"in D&&D.node?D.node:null)?.type?.name==="resizableImage";if(A||U||t.isActive("codeBlock")){v.current&&(clearTimeout(v.current),v.current=null),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{h(!1),u(!1)},150);return}w.current&&(clearTimeout(w.current),w.current=null);const K=t.view.coordsAtPos(L),O=t.view.coordsAtPos($),P=b.current?.offsetWidth||500,V=b.current?.offsetHeight||40,X=8,G=window.innerWidth;let Z=0,ee=0;if(b.current){const pe=b.current.closest('[data-slot="dialog-content"]');if(pe){const be=pe.getBoundingClientRect();Z=be.left,ee=be.top}}let F=(K.left+O.left)/2-P/2-Z;const j=Z?G-Z:G;F=Math.max(X,Math.min(j-P-X,F));let Q=K.top-V-10-ee;Q<X&&(Q=O.bottom+10-ee),p?y({top:Math.max(X,Q),left:F}):(v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{y({top:Math.max(X,Q),left:F}),h(!0)},50))}catch(D){console.warn("FloatingToolbar: Error updating position",D)}};return t.on("selectionUpdate",E),()=>{t.off("selectionUpdate",E),w.current&&clearTimeout(w.current),v.current&&clearTimeout(v.current)}},[t,p]);const T=E=>{w.current&&(clearTimeout(w.current),w.current=null)};if(!p||r)return null;const N=15,C=l?c.jsx("div",{ref:b,className:`floating-toolbar ${n}`,style:{position:"fixed",top:m.top,left:m.left},onMouseDown:T,children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 px-2 w-[280px] sm:w-auto",children:[c.jsx("input",{type:"url",placeholder:"Enter URL...",value:d,onChange:E=>f(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),x()),E.key==="Escape"&&(u(!1),f(""))},className:`
            bg-secondary/50 rounded px-3 py-2 sm:py-1
            text-sm text-foreground placeholder:text-muted-foreground
            outline-none border border-border/50
            w-full sm:w-48
          `,autoFocus:!0}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onMouseDown:E=>{E.preventDefault(),x()},className:`
              flex-1 sm:flex-none px-4 sm:px-3 py-2 sm:py-1 text-sm sm:text-xs font-medium rounded
              bg-primary text-primary-foreground
              hover:opacity-90 active:opacity-80 transition-opacity touch-manipulation
            `,children:"Apply"}),c.jsx("button",{onMouseDown:E=>{E.preventDefault(),u(!1),f("")},className:`
              flex-1 sm:flex-none px-4 sm:px-2 py-2 sm:py-1 text-sm sm:text-xs font-medium rounded
              bg-secondary text-secondary-foreground
              hover:bg-accent active:bg-accent/80 transition-colors touch-manipulation
            `,children:"Cancel"})]})]})}):c.jsxs("div",{ref:b,className:`floating-toolbar ${n}`,style:{position:"fixed",top:m.top,left:m.left},onMouseDown:T,children:[c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleBold().run()),isActive:i?.isBold,title:"Bold (Ctrl+B)",children:c.jsx(I.Bold,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleItalic().run()),isActive:i?.isItalic,title:"Italic (Ctrl+I)",children:c.jsx(I.Italic,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleUnderline().run()),isActive:i?.isUnderline,title:"Underline (Ctrl+U)",children:c.jsx(I.Underline,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleStrike().run()),isActive:i?.isStrike,title:"Strikethrough",children:c.jsx(I.Strikethrough,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleCode().run()),isActive:i?.isCode,title:"Inline Code (Ctrl+E)",children:c.jsx(I.Code,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleHighlight().run()),isActive:i?.isHighlight,title:"Highlight",children:c.jsx(I.Highlighter,{size:N})}),c.jsx(et,{onMouseDown:M,isActive:i?.isLink,title:"Link (Ctrl+K)",children:c.jsx(I.Link,{size:N})}),c.jsx(ui,{}),c.jsx(Xf,{editor:t,isH1:i?.isH1??!1,isH2:i?.isH2??!1,isH3:i?.isH3??!1,isH4:i?.isH4??!1,isH5:i?.isH5??!1,executeCommand:k}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleBlockquote().run()),isActive:i?.isBlockquote,title:"Quote",children:c.jsx(I.Quote,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleBulletList().run()),isActive:i?.isBulletList,title:"Bullet List",children:c.jsx(I.List,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleOrderedList().run()),isActive:i?.isOrderedList,title:"Numbered List",children:c.jsx(I.ListOrdered,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleTaskList().run()),isActive:i?.isTaskList,title:"Task List",children:c.jsx(I.CheckSquare,{size:N})}),c.jsx(et,{onMouseDown:E=>k(E,()=>t.chain().focus().toggleCodeBlock().run()),isActive:i?.isCodeBlock,title:"Code Block",children:c.jsx(I.FileCode,{size:N})}),o&&c.jsxs(c.Fragment,{children:[c.jsx(ui,{}),c.jsx("button",{ref:a,onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),a.current&&s?.(a.current)},title:"AI Writing Assistant",className:`
              flex items-center justify-center w-7 h-7 rounded-md flex-shrink-0
              transition-all duration-100 ease-out touch-manipulation
              bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80
              hover:text-foreground
            `,children:c.jsx(I.Sparkles,{size:N})})]})]});return c.jsx(vt,{onMouseDown:T,children:C})}),Ir={info:{icon:I.Info,label:"Info",color:"var(--callout-info)",borderColor:"var(--callout-info-border)"},note:{icon:I.StickyNote,label:"Note",color:"var(--callout-note)",borderColor:"var(--callout-note-border)"},prompt:{icon:I.MessageSquareText,label:"Prompt",color:"var(--callout-prompt)",borderColor:"var(--callout-prompt-border)"},resources:{icon:I.BookOpen,label:"Resources",color:"var(--callout-resources)",borderColor:"var(--callout-resources-border)"},todo:{icon:I.ListTodo,label:"Todo",color:"var(--callout-todo)",borderColor:"var(--callout-todo-border)"}};function Zf({node:e,updateAttributes:t,editor:n}){const[r,o]=g.useState(!1),[s,a]=g.useState(!1),[i,l]=g.useState(null),u=g.useRef(null),d=g.useRef(null),f=e.attrs.type||"info",p=Ir[f]||Ir.info,h=p.icon,m=g.useCallback(()=>{if(d.current){const v=d.current.getBoundingClientRect();l({top:v.bottom+4,left:v.left})}},[]);g.useEffect(()=>{if(!r)return;const v=x=>{u.current&&!u.current.contains(x.target)&&d.current&&!d.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v,{passive:!0}),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[r]),g.useEffect(()=>{if(!r)return;const v=()=>o(!1);return window.addEventListener("scroll",v,!0),()=>window.removeEventListener("scroll",v,!0)},[r]);const y=g.useCallback(()=>{n.isEditable&&(r||m(),o(!r))},[n.isEditable,r,m]),b=v=>{t({type:v}),o(!1)},w=g.useCallback(v=>{v.stopPropagation(),a(x=>!x)},[]);return c.jsxs(je.NodeViewWrapper,{className:`callout callout-${f}${s?" callout-collapsed":""}`,"data-callout":"","data-type":f,children:[c.jsxs("div",{className:"callout-header",contentEditable:!1,onClick:w,style:{cursor:"pointer"},title:s?"Click to expand":"Click to collapse",children:[c.jsxs("button",{ref:d,className:"callout-header-button",onClick:v=>{v.stopPropagation(),y()},title:n.isEditable?"Click to change callout type":p.label,style:{color:p.borderColor},contentEditable:!1,children:[c.jsx(h,{size:18}),c.jsx("span",{className:"callout-label",children:p.label}),n.isEditable&&c.jsx(I.ChevronDown,{size:12,className:"callout-type-chevron"})]}),c.jsx("div",{className:"callout-collapse-indicator",style:{color:p.borderColor},children:s?c.jsx(I.ChevronRight,{size:16}):c.jsx(I.ChevronDown,{size:16})}),r&&n.isEditable&&i&&c.jsx(vt,{children:c.jsx("div",{ref:u,className:"callout-type-dropdown",contentEditable:!1,style:{position:"fixed",top:i.top,left:i.left},children:Object.keys(Ir).map(v=>{const x=Ir[v],M=x.icon;return c.jsxs("button",{className:`callout-type-option ${v===f?"active":""}`,onClick:k=>{k.stopPropagation(),b(v)},onMouseDown:k=>k.stopPropagation(),style:{"--callout-option-color":x.color},children:[c.jsx(M,{size:16,style:{color:x.borderColor}}),c.jsx("span",{children:x.label})]},v)})})})]}),c.jsx("div",{className:`callout-content${s?" callout-content-hidden":""}`,children:c.jsx(je.NodeViewContent,{})})]})}const Qf=me.Node.create({name:"callout",addOptions(){return{HTMLAttributes:{},types:["info","note","prompt","resources","todo"]}},content:"block+",group:"block",defining:!0,addAttributes(){return{type:{default:"info",parseHTML:e=>e.getAttribute("data-type")||"info",renderHTML:e=>({"data-type":e.type})}}},parseHTML(){return[{tag:"div[data-callout]"}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.type;return["div",me.mergeAttributes(this.options.HTMLAttributes,t,{"data-callout":"","data-type":n,class:`callout callout-${n}`}),0]},addNodeView(){return je.ReactNodeViewRenderer(Zf)},addCommands(){return{setCallout:e=>({commands:t})=>t.wrapIn(this.name,e),toggleCallout:e=>({commands:t})=>t.toggleWrap(this.name,e),unsetCallout:()=>({commands:e})=>e.lift(this.name),insertCallout:e=>({chain:t})=>{const n=e?.type||"info";return t().insertContent({type:this.name,attrs:{type:n},content:[{type:"paragraph"}]}).focus().run()},updateCalloutType:e=>({commands:t})=>t.updateAttributes(this.name,{type:e})}},addKeyboardShortcuts(){return{"Mod-Shift-c":()=>this.editor.commands.toggleCallout({type:"info"})}}}),hi=Ef.extend({name:"resizableImage",addOptions(){return{...this.parent?.(),HTMLAttributes:{},allowBase64:!0,onImageClick:void 0,resolveImageSrc:void 0}},addAttributes(){return{...this.parent?.(),width:{default:null,parseHTML:e=>{const t=e.getAttribute("width")||e.style.width;return t?parseInt(t,10):null},renderHTML:e=>e.width?{width:e.width,style:`width: ${e.width}px`}:{}},height:{default:null,parseHTML:e=>{const t=e.getAttribute("height")||e.style.height;return t?parseInt(t,10):null},renderHTML:e=>e.height?{height:e.height}:{}},align:{default:"left",parseHTML:e=>e.getAttribute("data-align")||"left",renderHTML:e=>({"data-align":e.align})}}},parseHTML(){return[{tag:"img[src]"},{tag:"figure.image-resizer img[src]"}]},addCommands(){return{...this.parent?.(),updateImage:e=>({commands:t})=>t.updateAttributes("resizableImage",e),setImageAlign:e=>({commands:t})=>t.updateAttributes("resizableImage",{align:e})}},renderHTML({HTMLAttributes:e}){const t=e["data-align"]||"center";return["figure",{class:"image-resizer",style:{left:"margin-right: auto;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto;"}[t]||"margin-left: auto; margin-right: auto;"},["img",me.mergeAttributes(this.options.HTMLAttributes,e)]]},addNodeView(){const e=this.options;return({node:t,editor:n,getPos:r})=>{let o=t;const s=document.createElement("figure");s.classList.add("image-resizer");const a=P=>{const V={left:"margin-right: auto; margin-left: 0;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto; margin-right: 0;"}[P]||"margin-left: auto; margin-right: auto;";s.style.cssText=`display: block; position: relative; width: fit-content; ${V}`};a(t.attrs.align||"left");const i=document.createElement("img");i.alt=t.attrs.alt||"",t.attrs.width&&(i.style.width=`${t.attrs.width}px`);const l=P=>!(!P||P.startsWith("data:")||P.startsWith("blob:")||P.startsWith("http://")||P.startsWith("https://")),u=P=>{l(P)&&e.resolveImageSrc?(i.style.opacity="0.5",i.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23f0f0f0" width="100" height="100"/%3E%3C/svg%3E',e.resolveImageSrc(P).then(V=>{i.src=V,i.style.opacity="1"}).catch(()=>{i.src=P,i.style.opacity="1"})):i.src=P};u(t.attrs.src);const d=document.createElement("div");d.classList.add("resize-handle"),d.style.cssText=`
        position: absolute;
        bottom: 4px;
        right: 4px;
        width: 24px;
        height: 24px;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: se-resize;
        opacity: 0;
        transition: opacity 0.15s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
      `,d.innerHTML=`
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="oklch(0.4 0 0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(90deg);">
          <polyline points="15 3 21 3 21 9"></polyline>
          <polyline points="9 21 3 21 3 15"></polyline>
          <line x1="21" y1="3" x2="14" y2="10"></line>
          <line x1="3" y1="21" x2="10" y2="14"></line>
        </svg>
      `;const f=document.createElement("button");f.classList.add("image-menu-btn"),f.setAttribute("type","button"),f.setAttribute("title","Image options"),f.style.cssText=`
        position: absolute;
        top: 8px;
        right: 8px;
        width: 28px;
        height: 28px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.15s ease, background 0.15s ease;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
        z-index: 10;
      `,f.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="5" r="1"></circle>
          <circle cx="12" cy="12" r="1"></circle>
          <circle cx="12" cy="19" r="1"></circle>
        </svg>
      `;const p=document.createElement("div");p.classList.add("image-menu-dropdown"),p.style.cssText=`
        position: fixed;
        display: none;
        flex-direction: column;
        min-width: 200px;
        padding: 4px;
        background: oklch(0.99 0 0);
        border: 1px solid oklch(0.9 0 0);
        border-radius: 8px;
        box-shadow: 0 4px 16px oklch(0 0 0 / 0.15);
        z-index: 9999;
        pointer-events: auto;
      `;const h=(P,V,X)=>{const G=document.createElement("button");return G.setAttribute("type","button"),G.style.cssText=`
          display: flex;
          align-items: center;
          gap: 8px;
          width: 100%;
          padding: 8px 12px;
          font-size: 13px;
          color: oklch(0.3 0 0);
          background: transparent;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          text-align: left;
          transition: background 0.15s ease;
        `,G.innerHTML=`${V}<span>${P}</span>`,G.addEventListener("mouseenter",()=>{G.style.background="oklch(0.95 0 0)"}),G.addEventListener("mouseleave",()=>{G.style.background="transparent"}),G.addEventListener("click",Z=>{Z.preventDefault(),Z.stopPropagation(),X(),p.style.display="none",E=!1}),G},m='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',y='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',b='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',w='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>';p.appendChild(h("Edit",m,()=>{const P=typeof r=="function"?r():null;if(P!=null&&e.onImageClick){const V=i.getBoundingClientRect();e.onImageClick({src:o.attrs.src,alt:o.attrs.alt||"",pos:P,rect:V})}})),p.appendChild(h("Copy image",y,async()=>{const P=o.attrs.src;try{const X=await(await fetch(P)).blob();await navigator.clipboard.write([new ClipboardItem({[X.type]:X})])}catch{try{await navigator.clipboard.writeText(P)}catch{}}})),p.appendChild(h("Copy URL",w,async()=>{const P=o.attrs.src;try{await navigator.clipboard.writeText(P)}catch{}})),p.appendChild(h("Save image",b,()=>{const P=o.attrs.src,V=o.attrs.alt||"image",X=document.createElement("a");X.href=P,X.download=V,X.target="_blank",X.rel="noopener noreferrer",document.body.appendChild(X),X.click(),setTimeout(()=>{document.body.removeChild(X)},100)}));const v=document.createElement("div");v.style.cssText=`
        height: 1px;
        background: oklch(0.92 0 0);
        margin: 4px 8px;
      `,p.appendChild(v);const x=document.createElement("div");x.style.cssText=`
        font-size: 11px;
        font-weight: 500;
        color: oklch(0.55 0 0);
        padding: 4px 12px 4px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      `,x.textContent="Alignment",p.appendChild(x);const M=document.createElement("div");M.style.cssText=`
        display: flex;
        margin: 4px 8px 4px;
        background: oklch(0.94 0 0);
        border-radius: 8px;
        padding: 3px;
        gap: 2px;
      `;const k=[{value:"left",label:"Left",icon:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line></svg>'},{value:"center",label:"Center",icon:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line></svg>'},{value:"right",label:"Right",icon:'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line></svg>'}],T=[],N=P=>{T.forEach(V=>{(V.getAttribute("data-align-value")||"left")===P?(V.style.background="oklch(1 0 0)",V.style.boxShadow="0 1px 3px oklch(0 0 0 / 0.1)",V.style.color="oklch(0.25 0 0)",V.style.fontWeight="600"):(V.style.background="transparent",V.style.boxShadow="none",V.style.color="oklch(0.5 0 0)",V.style.fontWeight="400")})};k.forEach(({value:P,label:V,icon:X})=>{const G=document.createElement("button");G.setAttribute("type","button"),G.setAttribute("data-align-value",P),G.setAttribute("title",`Align ${V.toLowerCase()}`),G.style.cssText=`
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
          padding: 5px 8px;
          font-size: 12px;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          transition: all 0.15s ease;
          white-space: nowrap;
        `,G.innerHTML=`${X}<span>${V}</span>`,G.addEventListener("click",Z=>{Z.preventDefault(),Z.stopPropagation();const ee=typeof r=="function"?r():null;if(ee!=null)try{const{state:z,dispatch:F}=n.view,j=z.doc.nodeAt(ee);if(j&&j.type.name==="resizableImage"){const Q=z.tr.setNodeMarkup(ee,void 0,{...j.attrs,align:P});F(Q)}}catch{n.chain().focus().setNodeSelection(ee).updateAttributes("resizableImage",{align:P}).run()}N(P)}),T.push(G),M.appendChild(G)}),p.appendChild(M);const C=()=>{const P=o.attrs.align||"left";N(P)};let E=!1;f.addEventListener("click",P=>{if(P.preventDefault(),P.stopPropagation(),E)p.style.display="none",E=!1;else{const V=f.getBoundingClientRect(),X=200,G=p.closest('[role="dialog"]');let Z=0,ee=0;if(G){const be=G.getBoundingClientRect();Z=be.left,ee=be.top}let z=V.bottom+4-ee,F=V.right-X-Z;const j=window.innerHeight,Q=window.innerWidth,pe=200;V.bottom+4+pe>j&&(z=V.top-pe-4-ee),F+Z<8&&(F=8-Z),F+X+Z>Q-8&&(F=Q-X-8-Z),p.style.top=`${z}px`,p.style.left=`${F}px`,p.style.display="flex",E=!0,C()}});const D=P=>{!p.contains(P.target)&&!f.contains(P.target)&&(p.style.display="none",E=!1)};document.addEventListener("click",D);const A=document.createElement("button");A.setAttribute("type","button"),A.setAttribute("title","View full size"),A.style.cssText=`
        position: absolute;
        top: 8px;
        right: 40px;
        width: 28px;
        height: 28px;
        background: oklch(0.98 0 0 / 0.95);
        border: 1px solid oklch(0.85 0 0);
        border-radius: 6px;
        cursor: pointer;
        opacity: 0;
        transition: opacity 0.15s ease, background 0.15s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px oklch(0 0 0 / 0.15);
        z-index: 10;
        padding: 0;
      `,A.innerHTML=`
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="oklch(0.4 0 0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          <line x1="11" y1="8" x2="11" y2="14"></line>
          <line x1="8" y1="11" x2="14" y2="11"></line>
        </svg>
      `,A.addEventListener("mouseenter",()=>{A.style.background="oklch(0.95 0 0)"}),A.addEventListener("mouseleave",()=>{A.style.background="oklch(0.98 0 0 / 0.95)"}),s.appendChild(i),s.appendChild(A),s.appendChild(d),s.appendChild(f);const L=s.closest('[role="dialog"]');L?L.appendChild(p):document.body.appendChild(p),s.addEventListener("mouseenter",()=>{d.style.opacity="1",f.style.opacity="1",A.style.opacity="1"}),s.addEventListener("mouseleave",()=>{d.style.opacity="0",A.style.opacity="0",E||(f.style.opacity="0")}),f.addEventListener("mouseenter",()=>{f.style.background="oklch(0.95 0 0)"}),f.addEventListener("mouseleave",()=>{f.style.background="oklch(0.98 0 0 / 0.95)"});const $=P=>{P.preventDefault(),P.stopPropagation();const V=document.createElement("div");V.style.cssText=`
          position: fixed;
          inset: 0;
          z-index: 99999;
          background: rgba(0, 0, 0, 0.85);
          backdrop-filter: blur(8px);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: zoom-out;
          opacity: 0;
          transition: opacity 0.2s ease;
          padding: 24px;
        `;const X=document.createElement("img");X.src=i.src,X.alt=i.alt||"",X.style.cssText=`
          max-width: 95vw;
          max-height: 92vh;
          object-fit: contain;
          border-radius: 8px;
          box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
          transform: scale(0.92);
          transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          cursor: default;
        `;const G=document.createElement("button");G.setAttribute("type","button"),G.setAttribute("aria-label","Close"),G.style.cssText=`
          position: absolute;
          top: 16px;
          right: 16px;
          width: 40px;
          height: 40px;
          border-radius: 50%;
          border: none;
          background: rgba(255, 255, 255, 0.15);
          color: white;
          font-size: 20px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background 0.15s ease;
          z-index: 1;
        `,G.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',G.addEventListener("mouseenter",()=>{G.style.background="rgba(255, 255, 255, 0.25)"}),G.addEventListener("mouseleave",()=>{G.style.background="rgba(255, 255, 255, 0.15)"});const Z=o.attrs.alt;let ee=null;Z&&Z.trim()&&(ee=document.createElement("div"),ee.style.cssText=`
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            max-width: 80vw;
            padding: 8px 16px;
            background: rgba(0, 0, 0, 0.6);
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
            border-radius: 6px;
            text-align: center;
            pointer-events: none;
          `,ee.textContent=Z);const z=()=>{V.style.opacity="0",X.style.transform="scale(0.92)",setTimeout(()=>V.remove(),200)};V.addEventListener("click",Q=>{Q.target===V&&z()}),G.addEventListener("click",z);const F=Q=>{Q.key==="Escape"&&(z(),document.removeEventListener("keydown",F))};document.addEventListener("keydown",F),V.appendChild(X),V.appendChild(G),ee&&V.appendChild(ee);const j=s.closest('[role="dialog"]');j?j.appendChild(V):document.body.appendChild(V),requestAnimationFrame(()=>{V.style.opacity="1",X.style.transform="scale(1)"})};A.addEventListener("click",$);let _,B;const U=P=>{P.preventDefault(),_=P.clientX,B=i.offsetWidth,document.addEventListener("mousemove",K),document.addEventListener("mouseup",O)},K=P=>{const V=P.clientX-_,X=Math.max(100,B+V);i.style.width=`${X}px`},O=()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",O),setTimeout(()=>{},100);const P=typeof r=="function"?r():null,V=i.offsetWidth;if(P!=null)try{const{state:X,dispatch:G}=n.view,Z=X.doc.nodeAt(P);if(Z&&Z.type.name==="resizableImage"){const ee=X.tr.setNodeMarkup(P,void 0,{...Z.attrs,width:V});G(ee)}}catch{n.chain().focus().setNodeSelection(P).updateAttributes("resizableImage",{width:V}).run()}};return d.addEventListener("mousedown",U),{dom:s,update:P=>P.type.name!=="resizableImage"?!1:(o=P,u(P.attrs.src),i.alt=P.attrs.alt||"",P.attrs.width&&(i.style.width=`${P.attrs.width}px`),a(P.attrs.align||"left"),!0),destroy:()=>{d.removeEventListener("mousedown",U),A.removeEventListener("click",$),document.removeEventListener("click",D),p.remove()}}}}});function Jf(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const Rf={},Qn={};function Jt(e,t){try{const r=(Rf[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return r in Qn?Qn[r]:gi(r,r.split(":"))}catch{if(e in Qn)return Qn[e];const n=e?.match(ep);return n?gi(e,n.slice(1)):NaN}}const ep=/([+-]\d\d):?(\d\d)?/;function gi(e,t){const n=+(t[0]||0),r=+(t[1]||0),o=+(t[2]||0)/60;return Qn[e]=n*60+r>0?n*60+r+o:n*60-r-o}class dt extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Jt(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),bi(this),Xo(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new dt(...n,t):new dt(Date.now(),t)}withTimeZone(t){return new dt(+this,t)}getTimezoneOffset(){const t=-Jt(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),Xo(this),+this}[Symbol.for("constructDateFrom")](t){return new dt(+new Date(t),this.timeZone)}}const mi=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!mi.test(e))return;const t=e.replace(mi,"$1UTC");dt.prototype[t]&&(e.startsWith("get")?dt.prototype[e]=function(){return this.internal[t]()}:(dt.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),tp(this),+this},dt.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),Xo(this),+this}))});function Xo(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-Jt(e.timeZone,e)*60))}function tp(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),bi(e)}function bi(e){const t=Jt(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const o=-new Date(+e).getTimezoneOffset(),s=-new Date(+r).getTimezoneOffset(),a=o-s,i=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();a&&i&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+a);const l=o-n;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const u=new Date(+e);u.setUTCSeconds(0);const d=o>0?u.getSeconds():(u.getSeconds()-60)%60,f=Math.round(-(Jt(e.timeZone,e)*60))%60;(f||d)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+f+d));const p=Jt(e.timeZone,e),h=p>0?Math.floor(p):Math.ceil(p),y=-new Date(+e).getTimezoneOffset()-h,b=h!==n,w=y-l;if(b&&w){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+w);const v=Jt(e.timeZone,e),x=v>0?Math.floor(v):Math.ceil(v),M=h-x;M&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+M),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+M))}}class Ye extends dt{static tz(t,...n){return n.length?new Ye(...n,t):new Ye(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),o=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+o}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,o]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${r} ${n} ${o}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,o]=this.tzComponents();return`${t} GMT${n}${r}${o} (${Jf(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),o=String(Math.abs(t)%60).padStart(2,"0");return[n,r,o]}withTimeZone(t){return new Ye(+this,t)}[Symbol.for("constructDateFrom")](t){return new Ye(+new Date(t),this.timeZone)}}const yi=6048e5,np=864e5,vi=Symbol.for("constructDateFrom");function Ie(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&vi in e?e[vi](t):e instanceof Date?new e.constructor(t):new Date(t)}function Se(e,t){return Ie(t||e,e)}function wi(e,t,n){const r=Se(e,n?.in);return isNaN(t)?Ie(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function ki(e,t,n){const r=Se(e,n?.in);if(isNaN(t))return Ie(e,NaN);if(!t)return r;const o=r.getDate(),s=Ie(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const a=s.getDate();return o>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),o),r)}let rp={};function Jn(){return rp}function mn(e,t){const n=Jn(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=Se(e,t?.in),s=o.getDay(),a=(s<r?7:0)+s-r;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Rn(e,t){return mn(e,{...t,weekStartsOn:1})}function xi(e,t){const n=Se(e,t?.in),r=n.getFullYear(),o=Ie(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const s=Rn(o),a=Ie(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=Rn(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function Ci(e){const t=Se(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function bn(e,...t){const n=Ie.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function er(e,t){const n=Se(e,t?.in);return n.setHours(0,0,0,0),n}function Si(e,t,n){const[r,o]=bn(n?.in,e,t),s=er(r),a=er(o),i=+s-Ci(s),l=+a-Ci(a);return Math.round((i-l)/np)}function op(e,t){const n=xi(e,t),r=Ie(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Rn(r)}function sp(e,t,n){return wi(e,t*7,n)}function ap(e,t,n){return ki(e,t*12,n)}function ip(e,t){let n,r=t?.in;return e.forEach(o=>{!r&&typeof o=="object"&&(r=Ie.bind(null,o));const s=Se(o,r);(!n||n<s||isNaN(+s))&&(n=s)}),Ie(r,n||NaN)}function lp(e,t){let n,r=t?.in;return e.forEach(o=>{!r&&typeof o=="object"&&(r=Ie.bind(null,o));const s=Se(o,r);(!n||n>s||isNaN(+s))&&(n=s)}),Ie(r,n||NaN)}function cp(e,t,n){const[r,o]=bn(n?.in,e,t);return+er(r)==+er(o)}function Ti(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function dp(e){return!(!Ti(e)&&typeof e!="number"||isNaN(+Se(e)))}function up(e,t,n){const[r,o]=bn(n?.in,e,t),s=r.getFullYear()-o.getFullYear(),a=r.getMonth()-o.getMonth();return s*12+a}function fp(e,t){const n=Se(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Ei(e,t){const[n,r]=bn(e,t.start,t.end);return{start:n,end:r}}function pp(e,t){const{start:n,end:r}=Ei(t?.in,e);let o=+n>+r;const s=o?+n:+r,a=o?r:n;a.setHours(0,0,0,0),a.setDate(1);let i=1;const l=[];for(;+a<=s;)l.push(Ie(n,a)),a.setMonth(a.getMonth()+i);return o?l.reverse():l}function hp(e,t){const n=Se(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function gp(e,t){const n=Se(e,t?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Mi(e,t){const n=Se(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function mp(e,t){const{start:n,end:r}=Ei(t?.in,e);let o=+n>+r;const s=o?+n:+r,a=o?r:n;a.setHours(0,0,0,0),a.setMonth(0,1);let i=1;const l=[];for(;+a<=s;)l.push(Ie(n,a)),a.setFullYear(a.getFullYear()+i);return o?l.reverse():l}function Di(e,t){const n=Jn(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=Se(e,t?.in),s=o.getDay(),a=(s<r?-7:0)+6-(s-r);return o.setDate(o.getDate()+a),o.setHours(23,59,59,999),o}function bp(e,t){return Di(e,{...t,weekStartsOn:1})}const yp={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vp=(e,t,n)=>{let r;const o=yp[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Zo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const wp={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kp={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xp={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cp={date:Zo({formats:wp,defaultWidth:"full"}),time:Zo({formats:kp,defaultWidth:"full"}),dateTime:Zo({formats:xp,defaultWidth:"full"})},Sp={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tp=(e,t,n,r)=>Sp[e];function tr(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):a;o=e.formattingValues[i]||e.formattingValues[a]}else{const a=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;o=e.values[i]||e.values[a]}const s=e.argumentCallback?e.argumentCallback(t):t;return o[s]}}const Ep={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mp={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Dp={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Np={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ap={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Lp={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pp={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:tr({values:Ep,defaultWidth:"wide"}),quarter:tr({values:Mp,defaultWidth:"wide",argumentCallback:e=>e-1}),month:tr({values:Dp,defaultWidth:"wide"}),day:tr({values:Np,defaultWidth:"wide"}),dayPeriod:tr({values:Ap,defaultWidth:"wide",formattingValues:Lp,defaultFormattingWidth:"wide"})};function nr(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;const a=s[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?Op(i,f=>f.test(a)):Ip(i,f=>f.test(a));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}function Ip(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Op(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function $p(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],s=t.match(e.parsePattern);if(!s)return null;let a=e.valueCallback?e.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const i=t.slice(o.length);return{value:a,rest:i}}}const _p=/^(\d+)(th|st|nd|rd)?/i,Hp=/\d+/i,zp={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Bp={any:[/^b/i,/^(a|c)/i]},Wp={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fp={any:[/1/i,/2/i,/3/i,/4/i]},Up={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jp={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yp={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qp={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vp={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kp={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gp={ordinalNumber:$p({matchPattern:_p,parsePattern:Hp,valueCallback:e=>parseInt(e,10)}),era:nr({matchPatterns:zp,defaultMatchWidth:"wide",parsePatterns:Bp,defaultParseWidth:"any"}),quarter:nr({matchPatterns:Wp,defaultMatchWidth:"wide",parsePatterns:Fp,defaultParseWidth:"any",valueCallback:e=>e+1}),month:nr({matchPatterns:Up,defaultMatchWidth:"wide",parsePatterns:jp,defaultParseWidth:"any"}),day:nr({matchPatterns:Yp,defaultMatchWidth:"wide",parsePatterns:qp,defaultParseWidth:"any"}),dayPeriod:nr({matchPatterns:Vp,defaultMatchWidth:"any",parsePatterns:Kp,defaultParseWidth:"any"})},Qo={code:"en-US",formatDistance:vp,formatLong:Cp,formatRelative:Tp,localize:Pp,match:Gp,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Xp(e,t){const n=Se(e,t?.in);return Si(n,Mi(n))+1}function Ni(e,t){const n=Se(e,t?.in),r=+Rn(n)-+op(n);return Math.round(r/yi)+1}function Ai(e,t){const n=Se(e,t?.in),r=n.getFullYear(),o=Jn(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,a=Ie(t?.in||e,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const i=mn(a,t),l=Ie(t?.in||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const u=mn(l,t);return+n>=+i?r+1:+n>=+u?r:r-1}function Zp(e,t){const n=Jn(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Ai(e,t),s=Ie(t?.in||e,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),mn(s,t)}function Li(e,t){const n=Se(e,t?.in),r=+mn(n,t)-+Zp(n,t);return Math.round(r/yi)+1}function xe(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ot={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xe(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xe(n+1,2)},d(e,t){return xe(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xe(e.getHours()%12||12,t.length)},H(e,t){return xe(e.getHours(),t.length)},m(e,t){return xe(e.getMinutes(),t.length)},s(e,t){return xe(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return xe(o,t.length)}},yn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Pi={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Ot.y(e,t)},Y:function(e,t,n,r){const o=Ai(e,r),s=o>0?o:1-o;if(t==="YY"){const a=s%100;return xe(a,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):xe(s,t.length)},R:function(e,t){const n=xi(e);return xe(n,t.length)},u:function(e,t){const n=e.getFullYear();return xe(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ot.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=Li(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):xe(o,t.length)},I:function(e,t,n){const r=Ni(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xe(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ot.d(e,t)},D:function(e,t,n){const r=Xp(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xe(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return xe(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return xe(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return xe(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=yn.noon:r===0?o=yn.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=yn.evening:r>=12?o=yn.afternoon:r>=4?o=yn.morning:o=yn.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ot.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ot.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xe(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xe(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ot.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ot.s(e,t)},S:function(e,t){return Ot.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Oi(r);case"XXXX":case"XX":return Rt(r);case"XXXXX":case"XXX":default:return Rt(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Oi(r);case"xxxx":case"xx":return Rt(r);case"xxxxx":case"xxx":default:return Rt(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ii(r,":");case"OOOO":default:return"GMT"+Rt(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ii(r,":");case"zzzz":default:return"GMT"+Rt(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return xe(r,t.length)},T:function(e,t,n){return xe(+e,t.length)}};function Ii(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+t+xe(s,2)}function Oi(e,t){return e%60===0?(e>0?"-":"+")+xe(Math.abs(e)/60,2):Rt(e,t)}function Rt(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=xe(Math.trunc(r/60),2),s=xe(r%60,2);return n+o+t+s}const $i=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_i=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Qp={p:_i,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return $i(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",$i(r,t)).replace("{{time}}",_i(o,t))}},Jp=/^D+$/,Rp=/^Y+$/,eh=["D","DD","YY","YYYY"];function th(e){return Jp.test(e)}function nh(e){return Rp.test(e)}function rh(e,t,n){const r=oh(e,t,n);if(console.warn(r),eh.includes(e))throw new RangeError(r)}function oh(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ah=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ih=/^'([^]*?)'?$/,lh=/''/g,ch=/[a-zA-Z]/;function dh(e,t,n){const r=Jn(),o=n?.locale??r.locale??Qo,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Se(e,n?.in);if(!dp(i))throw new RangeError("Invalid time value");let l=t.match(ah).map(d=>{const f=d[0];if(f==="p"||f==="P"){const p=Qp[f];return p(d,o.formatLong)}return d}).join("").match(sh).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:uh(d)};if(Pi[f])return{isToken:!0,value:d};if(f.match(ch))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});o.localize.preprocessor&&(l=o.localize.preprocessor(i,l));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:o};return l.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!n?.useAdditionalWeekYearTokens&&nh(f)||!n?.useAdditionalDayOfYearTokens&&th(f))&&rh(f,t,String(e));const p=Pi[f[0]];return p(i,f,o.localize,u)}).join("")}function uh(e){const t=e.match(ih);return t?t[1].replace(lh,"'"):e}function fh(e,t){const n=Se(e,t?.in),r=n.getFullYear(),o=n.getMonth(),s=Ie(n,0);return s.setFullYear(r,o+1,0),s.setHours(0,0,0,0),s.getDate()}function ph(e,t){return Se(e,t?.in).getMonth()}function hh(e,t){return Se(e,t?.in).getFullYear()}function gh(e,t){return+Se(e)>+Se(t)}function mh(e,t){return+Se(e)<+Se(t)}function bh(e,t,n){const[r,o]=bn(n?.in,e,t);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function yh(e,t,n){const[r,o]=bn(n?.in,e,t);return r.getFullYear()===o.getFullYear()}function vh(e,t,n){const r=Se(e,n?.in),o=r.getFullYear(),s=r.getDate(),a=Ie(e,0);a.setFullYear(o,t,15),a.setHours(0,0,0,0);const i=fh(a);return r.setMonth(t,Math.min(s,i)),r}function wh(e,t,n){const r=Se(e,n?.in);return isNaN(+r)?Ie(e,NaN):(r.setFullYear(t),r)}const Hi=5,kh=4;function xh(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,o=t.addDays(e,-r+1),s=t.addDays(o,Hi*7-1);return t.getMonth(e)===t.getMonth(s)?Hi:kh}function zi(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-6):t.addDays(n,-1*(r-1))}function Ch(e,t){const n=zi(e,t),r=xh(e,t);return t.addDays(n,r*7-1)}class Ze{constructor(t,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Ye.tz(this.options.timeZone):new this.Date,this.newDate=(r,o,s)=>this.overrides?.newDate?this.overrides.newDate(r,o,s):this.options.timeZone?new Ye(r,o,s,this.options.timeZone):new Date(r,o,s),this.addDays=(r,o)=>this.overrides?.addDays?this.overrides.addDays(r,o):wi(r,o),this.addMonths=(r,o)=>this.overrides?.addMonths?this.overrides.addMonths(r,o):ki(r,o),this.addWeeks=(r,o)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,o):sp(r,o),this.addYears=(r,o)=>this.overrides?.addYears?this.overrides.addYears(r,o):ap(r,o),this.differenceInCalendarDays=(r,o)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,o):Si(r,o),this.differenceInCalendarMonths=(r,o)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,o):up(r,o),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):pp(r),this.eachYearOfInterval=r=>{const o=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(r):mp(r),s=new Set(o.map(i=>this.getYear(i)));if(s.size===o.length)return o;const a=[];return s.forEach(i=>{a.push(new Date(i,0,1))}),a},this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Ch(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):bp(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):fp(r),this.endOfWeek=(r,o)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,o):Di(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):gp(r),this.format=(r,o,s)=>{const a=this.overrides?.format?this.overrides.format(r,o,this.options):dh(r,o,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(a):a},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):Ni(r),this.getMonth=(r,o)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):ph(r,this.options),this.getYear=(r,o)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):hh(r,this.options),this.getWeek=(r,o)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):Li(r,this.options),this.isAfter=(r,o)=>this.overrides?.isAfter?this.overrides.isAfter(r,o):gh(r,o),this.isBefore=(r,o)=>this.overrides?.isBefore?this.overrides.isBefore(r,o):mh(r,o),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):Ti(r),this.isSameDay=(r,o)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,o):cp(r,o),this.isSameMonth=(r,o)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,o):bh(r,o),this.isSameYear=(r,o)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,o):yh(r,o),this.max=r=>this.overrides?.max?this.overrides.max(r):ip(r),this.min=r=>this.overrides?.min?this.overrides.min(r):lp(r),this.setMonth=(r,o)=>this.overrides?.setMonth?this.overrides.setMonth(r,o):vh(r,o),this.setYear=(r,o)=>this.overrides?.setYear?this.overrides.setYear(r,o):wh(r,o),this.startOfBroadcastWeek=(r,o)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):zi(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):er(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):Rn(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):hp(r),this.startOfWeek=(r,o)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):mn(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):Mi(r),this.options={locale:Qo,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let o=0;o<10;o++)r[o.toString()]=n.format(o);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){const t=this.options.locale?.code;return t&&Ze.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:r,numerals:o}=this.options,s=n?.code;if(s&&Ze.yearFirstLocales.has(s))try{return new Intl.DateTimeFormat(s,{month:"long",year:"numeric",timeZone:r,numberingSystem:o}).format(t)}catch{}const a=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,a)}}Ze.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const ut=new Ze;class Bi{constructor(t,n,r=ut){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class Sh{constructor(t,n){this.date=t,this.weeks=n}}class Th{constructor(t,n){this.days=n,this.weekNumber=t}}function Eh(e){return g.createElement("button",{...e})}function Mh(e){return g.createElement("span",{...e})}function Dh(e){const{size:t=24,orientation:n="left",className:r}=e;return g.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&g.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&g.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&g.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&g.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Nh(e){const{day:t,modifiers:n,...r}=e;return g.createElement("td",{...r})}function Ah(e){const{day:t,modifiers:n,...r}=e,o=g.useRef(null);return g.useEffect(()=>{n.focused&&o.current?.focus()},[n.focused]),g.createElement("button",{ref:o,...r})}var ne;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(ne||(ne={}));var Ne;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(Ne||(Ne={}));var st;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(st||(st={}));var Qe;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Qe||(Qe={}));function Lh(e){const{options:t,className:n,components:r,classNames:o,...s}=e,a=[o[ne.Dropdown],n].join(" "),i=t?.find(({value:l})=>l===s.value);return g.createElement("span",{"data-disabled":s.disabled,className:o[ne.DropdownRoot]},g.createElement(r.Select,{className:a,...s},t?.map(({value:l,label:u,disabled:d})=>g.createElement(r.Option,{key:l,value:l,disabled:d},u))),g.createElement("span",{className:o[ne.CaptionLabel],"aria-hidden":!0},i?.label,g.createElement(r.Chevron,{orientation:"down",size:18,className:o[ne.Chevron]})))}function Ph(e){return g.createElement("div",{...e})}function Ih(e){return g.createElement("div",{...e})}function Oh(e){const{calendarMonth:t,displayIndex:n,...r}=e;return g.createElement("div",{...r},e.children)}function $h(e){const{calendarMonth:t,displayIndex:n,...r}=e;return g.createElement("div",{...r})}function _h(e){return g.createElement("table",{...e})}function Hh(e){return g.createElement("div",{...e})}const Wi=g.createContext(void 0);function rr(){const e=g.useContext(Wi);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function zh(e){const{components:t}=rr();return g.createElement(t.Dropdown,{...e})}function Bh(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:o,...s}=e,{components:a,classNames:i,labels:{labelPrevious:l,labelNext:u}}=rr(),d=g.useCallback(p=>{o&&n?.(p)},[o,n]),f=g.useCallback(p=>{r&&t?.(p)},[r,t]);return g.createElement("nav",{...s},g.createElement(a.PreviousMonthButton,{type:"button",className:i[ne.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:f},g.createElement(a.Chevron,{disabled:r?void 0:!0,className:i[ne.Chevron],orientation:"left"})),g.createElement(a.NextMonthButton,{type:"button",className:i[ne.NextMonthButton],tabIndex:o?void 0:-1,"aria-disabled":o?void 0:!0,"aria-label":u(o),onClick:d},g.createElement(a.Chevron,{disabled:o?void 0:!0,orientation:"right",className:i[ne.Chevron]})))}function Wh(e){const{components:t}=rr();return g.createElement(t.Button,{...e})}function Fh(e){return g.createElement("option",{...e})}function Uh(e){const{components:t}=rr();return g.createElement(t.Button,{...e})}function jh(e){const{rootRef:t,...n}=e;return g.createElement("div",{...n,ref:t})}function Yh(e){return g.createElement("select",{...e})}function qh(e){const{week:t,...n}=e;return g.createElement("tr",{...n})}function Vh(e){return g.createElement("th",{...e})}function Kh(e){return g.createElement("thead",{"aria-hidden":!0},g.createElement("tr",{...e}))}function Gh(e){const{week:t,...n}=e;return g.createElement("th",{...n})}function Xh(e){return g.createElement("th",{...e})}function Zh(e){return g.createElement("tbody",{...e})}function Qh(e){const{components:t}=rr();return g.createElement(t.Dropdown,{...e})}const Jh=Object.freeze(Object.defineProperty({__proto__:null,Button:Eh,CaptionLabel:Mh,Chevron:Dh,Day:Nh,DayButton:Ah,Dropdown:Lh,DropdownNav:Ph,Footer:Ih,Month:Oh,MonthCaption:$h,MonthGrid:_h,Months:Hh,MonthsDropdown:zh,Nav:Bh,NextMonthButton:Wh,Option:Fh,PreviousMonthButton:Uh,Root:jh,Select:Yh,Week:qh,WeekNumber:Gh,WeekNumberHeader:Xh,Weekday:Vh,Weekdays:Kh,Weeks:Zh,YearsDropdown:Qh},Symbol.toStringTag,{value:"Module"}));function wt(e,t,n=!1,r=ut){let{from:o,to:s}=e;const{differenceInCalendarDays:a,isSameDay:i}=r;return o&&s?(a(s,o)<0&&([o,s]=[s,o]),a(t,o)>=(n?1:0)&&a(s,t)>=(n?1:0)):!n&&s?i(s,t):!n&&o?i(o,t):!1}function Fi(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Jo(e){return!!(e&&typeof e=="object"&&"from"in e)}function Ui(e){return!!(e&&typeof e=="object"&&"after"in e)}function ji(e){return!!(e&&typeof e=="object"&&"before"in e)}function Yi(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function qi(e,t){return Array.isArray(e)&&e.every(t.isDate)}function kt(e,t,n=ut){const r=Array.isArray(t)?t:[t],{isSameDay:o,differenceInCalendarDays:s,isAfter:a}=n;return r.some(i=>{if(typeof i=="boolean")return i;if(n.isDate(i))return o(e,i);if(qi(i,n))return i.includes(e);if(Jo(i))return wt(i,e,!1,n);if(Yi(i))return Array.isArray(i.dayOfWeek)?i.dayOfWeek.includes(e.getDay()):i.dayOfWeek===e.getDay();if(Fi(i)){const l=s(i.before,e),u=s(i.after,e),d=l>0,f=u<0;return a(i.before,i.after)?f&&d:d||f}return Ui(i)?s(e,i.after)>0:ji(i)?s(i.before,e)>0:typeof i=="function"?i(e):!1})}function Rh(e,t,n,r,o){const{disabled:s,hidden:a,modifiers:i,showOutsideDays:l,broadcastCalendar:u,today:d}=t,{isSameDay:f,isSameMonth:p,startOfMonth:h,isBefore:m,endOfMonth:y,isAfter:b}=o,w=n&&h(n),v=r&&y(r),x={[Ne.focused]:[],[Ne.outside]:[],[Ne.disabled]:[],[Ne.hidden]:[],[Ne.today]:[]},M={};for(const k of e){const{date:T,displayMonth:N}=k,C=!!(N&&!p(T,N)),E=!!(w&&m(T,w)),D=!!(v&&b(T,v)),A=!!(s&&kt(T,s,o)),L=!!(a&&kt(T,a,o))||E||D||!u&&!l&&C||u&&l===!1&&C,$=f(T,d??o.today());C&&x.outside.push(k),A&&x.disabled.push(k),L&&x.hidden.push(k),$&&x.today.push(k),i&&Object.keys(i).forEach(_=>{const B=i?.[_];B&&kt(T,B,o)&&(M[_]?M[_].push(k):M[_]=[k])})}return k=>{const T={[Ne.focused]:!1,[Ne.disabled]:!1,[Ne.hidden]:!1,[Ne.outside]:!1,[Ne.today]:!1},N={};for(const C in x){const E=x[C];T[C]=E.some(D=>D===k)}for(const C in M)N[C]=M[C].some(E=>E===k);return{...T,...N}}}function eg(e,t,n={}){return Object.entries(e).filter(([,o])=>o===!0).reduce((o,[s])=>(n[s]?o.push(n[s]):t[Ne[s]]?o.push(t[Ne[s]]):t[st[s]]&&o.push(t[st[s]]),o),[t[ne.Day]])}function tg(e){return{...Jh,...e}}function ng(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function Ro(){const e={};for(const t in ne)e[ne[t]]=`rdp-${ne[t]}`;for(const t in Ne)e[Ne[t]]=`rdp-${Ne[t]}`;for(const t in st)e[st[t]]=`rdp-${st[t]}`;for(const t in Qe)e[Qe[t]]=`rdp-${Qe[t]}`;return e}function Vi(e,t,n){return(n??new Ze(t)).formatMonthYear(e)}const rg=Vi;function og(e,t,n){return(n??new Ze(t)).format(e,"d")}function sg(e,t=ut){return t.format(e,"LLLL")}function ag(e,t,n){return(n??new Ze(t)).format(e,"cccccc")}function ig(e,t=ut){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function lg(){return""}function Ki(e,t=ut){return t.format(e,"yyyy")}const cg=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Vi,formatDay:og,formatMonthCaption:rg,formatMonthDropdown:sg,formatWeekNumber:ig,formatWeekNumberHeader:lg,formatWeekdayName:ag,formatYearCaption:Ki,formatYearDropdown:Ki},Symbol.toStringTag,{value:"Module"}));function dg(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...cg,...e}}function ug(e,t,n,r,o){const{startOfMonth:s,startOfYear:a,endOfYear:i,eachMonthOfInterval:l,getMonth:u}=o;return l({start:a(e),end:i(e)}).map(p=>{const h=r.formatMonthDropdown(p,o),m=u(p),y=t&&p<s(t)||n&&p>s(n)||!1;return{value:m,label:h,disabled:y}})}function fg(e,t={},n={}){let r={...t?.[ne.Day]};return Object.entries(e).filter(([,o])=>o===!0).forEach(([o])=>{r={...r,...n?.[o]}}),r}function pg(e,t,n){const r=e.today(),o=t?e.startOfISOWeek(r):e.startOfWeek(r),s=[];for(let a=0;a<7;a++){const i=e.addDays(o,a);s.push(i)}return s}function hg(e,t,n,r,o=!1){if(!e||!t)return;const{startOfYear:s,endOfYear:a,eachYearOfInterval:i,getYear:l}=r,u=s(e),d=a(t),f=i({start:u,end:d});return o&&f.reverse(),f.map(p=>{const h=n.formatYearDropdown(p,r);return{value:l(p),label:h,disabled:!1}})}function Gi(e,t,n,r){let o=(r??new Ze(n)).format(e,"PPPP");return t.today&&(o=`Today, ${o}`),t.selected&&(o=`${o}, selected`),o}const gg=Gi;function Xi(e,t,n){return(n??new Ze(t)).formatMonthYear(e)}const mg=Xi;function bg(e,t,n,r){let o=(r??new Ze(n)).format(e,"PPPP");return t?.today&&(o=`Today, ${o}`),o}function yg(e){return"Choose the Month"}function vg(){return""}function wg(e){return"Go to the Next Month"}function kg(e){return"Go to the Previous Month"}function xg(e,t,n){return(n??new Ze(t)).format(e,"cccc")}function Cg(e,t){return`Week ${e}`}function Sg(e){return"Week Number"}function Tg(e){return"Choose the Year"}const Eg=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:mg,labelDay:gg,labelDayButton:Gi,labelGrid:Xi,labelGridcell:bg,labelMonthDropdown:yg,labelNav:vg,labelNext:wg,labelPrevious:kg,labelWeekNumber:Cg,labelWeekNumberHeader:Sg,labelWeekday:xg,labelYearDropdown:Tg},Symbol.toStringTag,{value:"Module"})),or=e=>e instanceof HTMLElement?e:null,es=e=>[...e.querySelectorAll("[data-animated-month]")??[]],Mg=e=>or(e.querySelector("[data-animated-month]")),ts=e=>or(e.querySelector("[data-animated-caption]")),ns=e=>or(e.querySelector("[data-animated-weeks]")),Dg=e=>or(e.querySelector("[data-animated-nav]")),Ng=e=>or(e.querySelector("[data-animated-weekdays]"));function Ag(e,t,{classNames:n,months:r,focused:o,dateLib:s}){const a=g.useRef(null),i=g.useRef(r),l=g.useRef(!1);g.useLayoutEffect(()=>{const u=i.current;if(i.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||u.length===0||r.length!==u.length)return;const d=s.isSameMonth(r[0].date,u[0].date),f=s.isAfter(r[0].date,u[0].date),p=f?n[Qe.caption_after_enter]:n[Qe.caption_before_enter],h=f?n[Qe.weeks_after_enter]:n[Qe.weeks_before_enter],m=a.current,y=e.current.cloneNode(!0);if(y instanceof HTMLElement?(es(y).forEach(x=>{if(!(x instanceof HTMLElement))return;const M=Mg(x);M&&x.contains(M)&&x.removeChild(M);const k=ts(x);k&&k.classList.remove(p);const T=ns(x);T&&T.classList.remove(h)}),a.current=y):a.current=null,l.current||d||o)return;const b=m instanceof HTMLElement?es(m):[],w=es(e.current);if(w?.every(v=>v instanceof HTMLElement)&&b&&b.every(v=>v instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const v=Dg(e.current);v&&(v.style.zIndex="1"),w.forEach((x,M)=>{const k=b[M];if(!k)return;x.style.position="relative",x.style.overflow="hidden";const T=ts(x);T&&T.classList.add(p);const N=ns(x);N&&N.classList.add(h);const C=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),v&&(v.style.zIndex=""),T&&T.classList.remove(p),N&&N.classList.remove(h),x.style.position="",x.style.overflow="",x.contains(k)&&x.removeChild(k)};k.style.pointerEvents="none",k.style.position="absolute",k.style.overflow="hidden",k.setAttribute("aria-hidden","true");const E=Ng(k);E&&(E.style.opacity="0");const D=ts(k);D&&(D.classList.add(f?n[Qe.caption_before_exit]:n[Qe.caption_after_exit]),D.addEventListener("animationend",C));const A=ns(k);A&&A.classList.add(f?n[Qe.weeks_before_exit]:n[Qe.weeks_after_exit]),x.insertBefore(k,x.firstChild)})}})}function Lg(e,t,n,r){const o=e[0],s=e[e.length-1],{ISOWeek:a,fixedWeeks:i,broadcastCalendar:l}=n??{},{addDays:u,differenceInCalendarDays:d,differenceInCalendarMonths:f,endOfBroadcastWeek:p,endOfISOWeek:h,endOfMonth:m,endOfWeek:y,isAfter:b,startOfBroadcastWeek:w,startOfISOWeek:v,startOfWeek:x}=r,M=l?w(o,r):a?v(o):x(o),k=l?p(s):a?h(m(s)):y(m(s)),T=d(k,M),N=f(s,o)+1,C=[];for(let A=0;A<=T;A++){const L=u(M,A);if(t&&b(L,t))break;C.push(L)}const D=(l?35:42)*N;if(i&&C.length<D){const A=D-C.length;for(let L=0;L<A;L++){const $=u(C[C.length-1],1);C.push($)}}return C}function Pg(e){const t=[];return e.reduce((n,r)=>{const o=r.weeks.reduce((s,a)=>s.concat(a.days.slice()),t.slice());return n.concat(o.slice())},t.slice())}function Ig(e,t,n,r){const{numberOfMonths:o=1}=n,s=[];for(let a=0;a<o;a++){const i=r.addMonths(e,a);if(t&&i>t)break;s.push(i)}return s}function Zi(e,t,n,r){const{month:o,defaultMonth:s,today:a=r.today(),numberOfMonths:i=1}=e;let l=o||s||a;const{differenceInCalendarMonths:u,addMonths:d,startOfMonth:f}=r;if(n&&u(n,l)<i-1){const p=-1*(i-1);l=d(n,p)}return t&&u(l,t)<0&&(l=t),f(l)}function Og(e,t,n,r){const{addDays:o,endOfBroadcastWeek:s,endOfISOWeek:a,endOfMonth:i,endOfWeek:l,getISOWeek:u,getWeek:d,startOfBroadcastWeek:f,startOfISOWeek:p,startOfWeek:h}=r,m=e.reduce((y,b)=>{const w=n.broadcastCalendar?f(b,r):n.ISOWeek?p(b):h(b),v=n.broadcastCalendar?s(b):n.ISOWeek?a(i(b)):l(i(b)),x=t.filter(N=>N>=w&&N<=v),M=n.broadcastCalendar?35:42;if(n.fixedWeeks&&x.length<M){const N=t.filter(C=>{const E=M-x.length;return C>v&&C<=o(v,E)});x.push(...N)}const k=x.reduce((N,C)=>{const E=n.ISOWeek?u(C):d(C),D=N.find(L=>L.weekNumber===E),A=new Bi(C,b,r);return D?D.days.push(A):N.push(new Th(E,[A])),N},[]),T=new Sh(b,k);return y.push(T),y},[]);return n.reverseMonths?m.reverse():m}function $g(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:o,startOfDay:s,startOfMonth:a,endOfMonth:i,addYears:l,endOfYear:u,newDate:d,today:f}=t,{fromYear:p,toYear:h,fromMonth:m,toMonth:y}=e;!n&&m&&(n=m),!n&&p&&(n=t.newDate(p,0,1)),!r&&y&&(r=y),!r&&h&&(r=d(h,11,31));const b=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=a(n):p?n=d(p,0,1):!n&&b&&(n=o(l(e.today??f(),-100))),r?r=i(r):h?r=d(h,11,31):!r&&b&&(r=u(e.today??f())),[n&&s(n),r&&s(r)]}function _g(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:o,numberOfMonths:s=1}=n,{startOfMonth:a,addMonths:i,differenceInCalendarMonths:l}=r,u=o?s:1,d=a(e);if(!t)return i(d,u);if(!(l(t,e)<s))return i(d,u)}function Hg(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:o,numberOfMonths:s}=n,{startOfMonth:a,addMonths:i,differenceInCalendarMonths:l}=r,u=o?s??1:1,d=a(e);if(!t)return i(d,-u);if(!(l(d,t)<=0))return i(d,-u)}function zg(e){const t=[];return e.reduce((n,r)=>n.concat(r.weeks.slice()),t.slice())}function Or(e,t){const[n,r]=g.useState(e);return[t===void 0?n:t,r]}function Bg(e,t){const[n,r]=$g(e,t),{startOfMonth:o,endOfMonth:s}=t,a=Zi(e,n,r,t),[i,l]=Or(a,e.month?a:void 0);g.useEffect(()=>{const T=Zi(e,n,r,t);l(T)},[e.timeZone]);const u=Ig(i,r,e,t),d=Lg(u,e.endMonth?s(e.endMonth):void 0,e,t),f=Og(u,d,e,t),p=zg(f),h=Pg(f),m=Hg(i,n,e,t),y=_g(i,r,e,t),{disableNavigation:b,onMonthChange:w}=e,v=T=>p.some(N=>N.days.some(C=>C.isEqualTo(T))),x=T=>{if(b)return;let N=o(T);n&&N<o(n)&&(N=o(n)),r&&N>o(r)&&(N=o(r)),l(N),w?.(N)};return{months:f,weeks:p,days:h,navStart:n,navEnd:r,previousMonth:m,nextMonth:y,goToMonth:x,goToDay:T=>{v(T)||x(T.date)}}}var ft;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(ft||(ft={}));function Qi(e){return!e[Ne.disabled]&&!e[Ne.hidden]&&!e[Ne.outside]}function Wg(e,t,n,r){let o,s=-1;for(const a of e){const i=t(a);Qi(i)&&(i[Ne.focused]&&s<ft.FocusedModifier?(o=a,s=ft.FocusedModifier):r?.isEqualTo(a)&&s<ft.LastFocused?(o=a,s=ft.LastFocused):n(a.date)&&s<ft.Selected?(o=a,s=ft.Selected):i[Ne.today]&&s<ft.Today&&(o=a,s=ft.Today))}return o||(o=e.find(a=>Qi(t(a)))),o}function Fg(e,t,n,r,o,s,a){const{ISOWeek:i,broadcastCalendar:l}=s,{addDays:u,addMonths:d,addWeeks:f,addYears:p,endOfBroadcastWeek:h,endOfISOWeek:m,endOfWeek:y,max:b,min:w,startOfBroadcastWeek:v,startOfISOWeek:x,startOfWeek:M}=a;let T={day:u,week:f,month:d,year:p,startOfWeek:N=>l?v(N,a):i?x(N):M(N),endOfWeek:N=>l?h(N):i?m(N):y(N)}[e](n,t==="after"?1:-1);return t==="before"&&r?T=b([r,T]):t==="after"&&o&&(T=w([o,T])),T}function Ji(e,t,n,r,o,s,a,i=0){if(i>365)return;const l=Fg(e,t,n.date,r,o,s,a),u=!!(s.disabled&&kt(l,s.disabled,a)),d=!!(s.hidden&&kt(l,s.hidden,a)),f=l,p=new Bi(l,f,a);return!u&&!d?p:Ji(e,t,p,r,o,s,a,i+1)}function Ug(e,t,n,r,o){const{autoFocus:s}=e,[a,i]=g.useState(),l=Wg(t.days,n,r||(()=>!1),a),[u,d]=g.useState(s?l:void 0);return{isFocusTarget:y=>!!l?.isEqualTo(y),setFocused:d,focused:u,blur:()=>{i(u),d(void 0)},moveFocus:(y,b)=>{if(!u)return;const w=Ji(y,b,u,t.navStart,t.navEnd,e,o);w&&(e.disableNavigation&&!t.days.some(x=>x.isEqualTo(w))||(t.goToDay(w),d(w)))}}}function jg(e,t){const{selected:n,required:r,onSelect:o}=e,[s,a]=Or(n,o?n:void 0),i=o?n:s,{isSameDay:l}=t,u=h=>i?.some(m=>l(m,h))??!1,{min:d,max:f}=e;return{selected:i,select:(h,m,y)=>{let b=[...i??[]];if(u(h)){if(i?.length===d||r&&i?.length===1)return;b=i?.filter(w=>!l(w,h))}else i?.length===f?b=[h]:b=[...b,h];return o||a(b),o?.(b,h,m,y),b},isSelected:u}}function Yg(e,t,n=0,r=0,o=!1,s=ut){const{from:a,to:i}=t||{},{isSameDay:l,isAfter:u,isBefore:d}=s;let f;if(!a&&!i)f={from:e,to:n>0?void 0:e};else if(a&&!i)l(a,e)?n===0?f={from:a,to:e}:o?f={from:a,to:void 0}:f=void 0:d(e,a)?f={from:e,to:a}:f={from:a,to:e};else if(a&&i)if(l(a,e)&&l(i,e))o?f={from:a,to:i}:f=void 0;else if(l(a,e))f={from:a,to:n>0?void 0:e};else if(l(i,e))f={from:e,to:n>0?void 0:e};else if(d(e,a))f={from:e,to:i};else if(u(e,a))f={from:a,to:e};else if(u(e,i))f={from:a,to:e};else throw new Error("Invalid range");if(f?.from&&f?.to){const p=s.differenceInCalendarDays(f.to,f.from);r>0&&p>r?f={from:e,to:void 0}:n>1&&p<n&&(f={from:e,to:void 0})}return f}function qg(e,t,n=ut){const r=Array.isArray(t)?t:[t];let o=e.from;const s=n.differenceInCalendarDays(e.to,e.from),a=Math.min(s,6);for(let i=0;i<=a;i++){if(r.includes(o.getDay()))return!0;o=n.addDays(o,1)}return!1}function Ri(e,t,n=ut){return wt(e,t.from,!1,n)||wt(e,t.to,!1,n)||wt(t,e.from,!1,n)||wt(t,e.to,!1,n)}function Vg(e,t,n=ut){const r=Array.isArray(t)?t:[t];if(r.filter(i=>typeof i!="function").some(i=>typeof i=="boolean"?i:n.isDate(i)?wt(e,i,!1,n):qi(i,n)?i.some(l=>wt(e,l,!1,n)):Jo(i)?i.from&&i.to?Ri(e,{from:i.from,to:i.to},n):!1:Yi(i)?qg(e,i.dayOfWeek,n):Fi(i)?n.isAfter(i.before,i.after)?Ri(e,{from:n.addDays(i.after,1),to:n.addDays(i.before,-1)},n):kt(e.from,i,n)||kt(e.to,i,n):Ui(i)||ji(i)?kt(e.from,i,n)||kt(e.to,i,n):!1))return!0;const a=r.filter(i=>typeof i=="function");if(a.length){let i=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let u=0;u<=l;u++){if(a.some(d=>d(i)))return!0;i=n.addDays(i,1)}}return!1}function Kg(e,t){const{disabled:n,excludeDisabled:r,selected:o,required:s,onSelect:a}=e,[i,l]=Or(o,a?o:void 0),u=a?o:i;return{selected:u,select:(p,h,m)=>{const{min:y,max:b}=e,w=p?Yg(p,u,y,b,s,t):void 0;return r&&n&&w?.from&&w.to&&Vg({from:w.from,to:w.to},n,t)&&(w.from=p,w.to=void 0),a||l(w),a?.(w,p,h,m),w},isSelected:p=>u&&wt(u,p,!1,t)}}function Gg(e,t){const{selected:n,required:r,onSelect:o}=e,[s,a]=Or(n,o?n:void 0),i=o?n:s,{isSameDay:l}=t;return{selected:i,select:(f,p,h)=>{let m=f;return!r&&i&&i&&l(f,i)&&(m=void 0),o||a(m),o?.(m,f,p,h),m},isSelected:f=>i?l(i,f):!1}}function Xg(e,t){const n=Gg(e,t),r=jg(e,t),o=Kg(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return o;default:return}}function Zg(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new Ye(t.today,t.timeZone)),t.month&&(t.month=new Ye(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new Ye(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new Ye(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new Ye(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new Ye(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(ue=>new Ye(ue,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new Ye(t.selected.from,t.timeZone):void 0,to:t.selected.to?new Ye(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:r,labels:o,dateLib:s,locale:a,classNames:i}=g.useMemo(()=>{const ue={...Qo,...t.locale};return{dateLib:new Ze({locale:ue,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:tg(t.components),formatters:dg(t.formatters),labels:{...Eg,...t.labels},locale:ue,classNames:{...Ro(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:l,mode:u,navLayout:d,numberOfMonths:f=1,onDayBlur:p,onDayClick:h,onDayFocus:m,onDayKeyDown:y,onDayMouseEnter:b,onDayMouseLeave:w,onNextClick:v,onPrevClick:x,showWeekNumber:M,styles:k}=t,{formatCaption:T,formatDay:N,formatMonthDropdown:C,formatWeekNumber:E,formatWeekNumberHeader:D,formatWeekdayName:A,formatYearDropdown:L}=r,$=Bg(t,s),{days:_,months:B,navStart:U,navEnd:K,previousMonth:O,nextMonth:P,goToMonth:V}=$,X=Rh(_,t,U,K,s),{isSelected:G,select:Z,selected:ee}=Xg(t,s)??{},{blur:z,focused:F,isFocusTarget:j,moveFocus:Q,setFocused:pe}=Ug(t,$,X,G??(()=>!1),s),{labelDayButton:be,labelGridcell:Le,labelGrid:Fe,labelMonthDropdown:nt,labelNav:jt,labelPrevious:Tr,labelNext:Er,labelWeekday:Lo,labelWeekNumber:Po,labelWeekNumberHeader:Io,labelYearDropdown:Oo}=o,Fn=g.useMemo(()=>pg(s,t.ISOWeek),[s,t.ISOWeek]),Mr=u!==void 0||h!==void 0,Un=g.useCallback(()=>{O&&(V(O),x?.(O))},[O,V,x]),jn=g.useCallback(()=>{P&&(V(P),v?.(P))},[V,P,v]),$o=g.useCallback((ue,Te)=>ae=>{ae.preventDefault(),ae.stopPropagation(),pe(ue),Z?.(ue.date,Te,ae),h?.(ue.date,Te,ae)},[Z,h,pe]),Ea=g.useCallback((ue,Te)=>ae=>{pe(ue),m?.(ue.date,Te,ae)},[m,pe]),Ma=g.useCallback((ue,Te)=>ae=>{z(),p?.(ue.date,Te,ae)},[z,p]),Da=g.useCallback((ue,Te)=>ae=>{const fe={ArrowLeft:[ae.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[ae.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[ae.shiftKey?"year":"week","after"],ArrowUp:[ae.shiftKey?"year":"week","before"],PageUp:[ae.shiftKey?"year":"month","before"],PageDown:[ae.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(fe[ae.key]){ae.preventDefault(),ae.stopPropagation();const[Pe,he]=fe[ae.key];Q(Pe,he)}y?.(ue.date,Te,ae)},[Q,y,t.dir]),Na=g.useCallback((ue,Te)=>ae=>{b?.(ue.date,Te,ae)},[b]),_o=g.useCallback((ue,Te)=>ae=>{w?.(ue.date,Te,ae)},[w]),Aa=g.useCallback(ue=>Te=>{const ae=Number(Te.target.value),fe=s.setMonth(s.startOfMonth(ue),ae);V(fe)},[s,V]),Nt=g.useCallback(ue=>Te=>{const ae=Number(Te.target.value),fe=s.setYear(s.startOfMonth(ue),ae);V(fe)},[s,V]),{className:Yn,style:qn}=g.useMemo(()=>({className:[i[ne.Root],t.className].filter(Boolean).join(" "),style:{...k?.[ne.Root],...t.style}}),[i,t.className,t.style,k]),La=ng(t),rt=g.useRef(null);Ag(rt,!!t.animate,{classNames:i,months:B,focused:F,dateLib:s});const Yt={dayPickerProps:t,selected:ee,select:Z,isSelected:G,months:B,nextMonth:P,previousMonth:O,goToMonth:V,getModifiers:X,components:n,classNames:i,styles:k,labels:o,formatters:r};return g.createElement(Wi.Provider,{value:Yt},g.createElement(n.Root,{rootRef:t.animate?rt:void 0,className:Yn,style:qn,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...La},g.createElement(n.Months,{className:i[ne.Months],style:k?.[ne.Months]},!t.hideNavigation&&!d&&g.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[ne.Nav],style:k?.[ne.Nav],"aria-label":jt(),onPreviousClick:Un,onNextClick:jn,previousMonth:O,nextMonth:P}),B.map((ue,Te)=>g.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:i[ne.Month],style:k?.[ne.Month],key:Te,displayIndex:Te,calendarMonth:ue},d==="around"&&!t.hideNavigation&&Te===0&&g.createElement(n.PreviousMonthButton,{type:"button",className:i[ne.PreviousMonthButton],tabIndex:O?void 0:-1,"aria-disabled":O?void 0:!0,"aria-label":Tr(O),onClick:Un,"data-animated-button":t.animate?"true":void 0},g.createElement(n.Chevron,{disabled:O?void 0:!0,className:i[ne.Chevron],orientation:t.dir==="rtl"?"right":"left"})),g.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:i[ne.MonthCaption],style:k?.[ne.MonthCaption],calendarMonth:ue,displayIndex:Te},l?.startsWith("dropdown")?g.createElement(n.DropdownNav,{className:i[ne.Dropdowns],style:k?.[ne.Dropdowns]},(()=>{const ae=l==="dropdown"||l==="dropdown-months"?g.createElement(n.MonthsDropdown,{key:"month",className:i[ne.MonthsDropdown],"aria-label":nt(),classNames:i,components:n,disabled:!!t.disableNavigation,onChange:Aa(ue.date),options:ug(ue.date,U,K,r,s),style:k?.[ne.Dropdown],value:s.getMonth(ue.date)}):g.createElement("span",{key:"month"},C(ue.date,s)),fe=l==="dropdown"||l==="dropdown-years"?g.createElement(n.YearsDropdown,{key:"year",className:i[ne.YearsDropdown],"aria-label":Oo(s.options),classNames:i,components:n,disabled:!!t.disableNavigation,onChange:Nt(ue.date),options:hg(U,K,r,s,!!t.reverseYears),style:k?.[ne.Dropdown],value:s.getYear(ue.date)}):g.createElement("span",{key:"year"},L(ue.date,s));return s.getMonthYearOrder()==="year-first"?[fe,ae]:[ae,fe]})(),g.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},T(ue.date,s.options,s))):g.createElement(n.CaptionLabel,{className:i[ne.CaptionLabel],role:"status","aria-live":"polite"},T(ue.date,s.options,s))),d==="around"&&!t.hideNavigation&&Te===f-1&&g.createElement(n.NextMonthButton,{type:"button",className:i[ne.NextMonthButton],tabIndex:P?void 0:-1,"aria-disabled":P?void 0:!0,"aria-label":Er(P),onClick:jn,"data-animated-button":t.animate?"true":void 0},g.createElement(n.Chevron,{disabled:P?void 0:!0,className:i[ne.Chevron],orientation:t.dir==="rtl"?"left":"right"})),Te===f-1&&d==="after"&&!t.hideNavigation&&g.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[ne.Nav],style:k?.[ne.Nav],"aria-label":jt(),onPreviousClick:Un,onNextClick:jn,previousMonth:O,nextMonth:P}),g.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":Fe(ue.date,s.options,s)||void 0,className:i[ne.MonthGrid],style:k?.[ne.MonthGrid]},!t.hideWeekdays&&g.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:i[ne.Weekdays],style:k?.[ne.Weekdays]},M&&g.createElement(n.WeekNumberHeader,{"aria-label":Io(s.options),className:i[ne.WeekNumberHeader],style:k?.[ne.WeekNumberHeader],scope:"col"},D()),Fn.map(ae=>g.createElement(n.Weekday,{"aria-label":Lo(ae,s.options,s),className:i[ne.Weekday],key:String(ae),style:k?.[ne.Weekday],scope:"col"},A(ae,s.options,s)))),g.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:i[ne.Weeks],style:k?.[ne.Weeks]},ue.weeks.map(ae=>g.createElement(n.Week,{className:i[ne.Week],key:ae.weekNumber,style:k?.[ne.Week],week:ae},M&&g.createElement(n.WeekNumber,{week:ae,style:k?.[ne.WeekNumber],"aria-label":Po(ae.weekNumber,{locale:a}),className:i[ne.WeekNumber],scope:"row",role:"rowheader"},E(ae.weekNumber,s)),ae.days.map(fe=>{const{date:Pe}=fe,he=X(fe);if(he[Ne.focused]=!he.hidden&&!!F?.isEqualTo(fe),he[st.selected]=G?.(Pe)||he.selected,Jo(ee)){const{from:Ue,to:qt}=ee;he[st.range_start]=!!(Ue&&qt&&s.isSameDay(Pe,Ue)),he[st.range_end]=!!(Ue&&qt&&s.isSameDay(Pe,qt)),he[st.range_middle]=wt(ee,Pe,!0,s)}const Pa=fg(he,k,t.modifiersStyles),Ho=eg(he,i,t.modifiersClassNames),Vn=!Mr&&!he.hidden?Le(Pe,he,s.options,s):void 0;return g.createElement(n.Day,{key:`${s.format(Pe,"yyyy-MM-dd")}_${s.format(fe.displayMonth,"yyyy-MM")}`,day:fe,modifiers:he,className:Ho.join(" "),style:Pa,role:"gridcell","aria-selected":he.selected||void 0,"aria-label":Vn,"data-day":s.format(Pe,"yyyy-MM-dd"),"data-month":fe.outside?s.format(Pe,"yyyy-MM"):void 0,"data-selected":he.selected||void 0,"data-disabled":he.disabled||void 0,"data-hidden":he.hidden||void 0,"data-outside":fe.outside||void 0,"data-focused":he.focused||void 0,"data-today":he.today||void 0},!he.hidden&&Mr?g.createElement(n.DayButton,{className:i[ne.DayButton],style:k?.[ne.DayButton],type:"button",day:fe,modifiers:he,disabled:he.disabled||void 0,tabIndex:j(fe)?0:-1,"aria-label":be(Pe,he,s.options,s),onClick:$o(fe,he),onBlur:Ma(fe,he),onFocus:Ea(fe,he),onKeyDown:Da(fe,he),onMouseEnter:Na(fe,he),onMouseLeave:_o(fe,he)},N(Pe,s.options,s)):!he.hidden&&N(fe.date,s.options,s))})))))))),t.footer&&g.createElement(n.Footer,{className:i[ne.Footer],style:k?.[ne.Footer],role:"status","aria-live":"polite"},t.footer)))}function el(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=el(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function tl(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=el(e))&&(r&&(r+=" "),r+=t);return r}const rs="-",Qg=e=>{const t=Rg(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const i=a.split(rs);return i[0]===""&&i.length!==1&&i.shift(),nl(i,t)||Jg(a)},getConflictingClassGroupIds:(a,i)=>{const l=n[a]||[];return i&&r[a]?[...l,...r[a]]:l}}},nl=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?nl(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(rs);return t.validators.find(({validator:a})=>a(s))?.classGroupId},rl=/^\[(.+)\]$/,Jg=e=>{if(rl.test(e)){const t=rl.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Rg=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)os(n[o],r,o,t);return r},os=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:ol(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(em(o)){os(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,a])=>{os(a,ol(t,s),n,r)})})},ol=(e,t)=>{let n=e;return t.split(rs).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},em=e=>e.isThemeGetter,tm=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return o(s,a),a},set(s,a){n.has(s)?n.set(s,a):o(s,a)}}},ss="!",as=":",nm=as.length,rm=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let a=0,i=0,l=0,u;for(let m=0;m<o.length;m++){let y=o[m];if(a===0&&i===0){if(y===as){s.push(o.slice(l,m)),l=m+nm;continue}if(y==="/"){u=m;continue}}y==="["?a++:y==="]"?a--:y==="("?i++:y===")"&&i--}const d=s.length===0?o:o.substring(l),f=om(d),p=f!==d,h=u&&u>l?u-l:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:h}};if(t){const o=t+as,s=r;r=a=>a.startsWith(o)?s(a.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},om=e=>e.endsWith(ss)?e.substring(0,e.length-1):e.startsWith(ss)?e.substring(1):e,sm=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let s=[];return r.forEach(a=>{a[0]==="["||t[a]?(o.push(...s.sort(),a),s=[]):s.push(a)}),o.push(...s.sort()),o}},am=e=>({cache:tm(e.cacheSize),parseClassName:rm(e),sortModifiers:sm(e),...Qg(e)}),im=/\s+/,lm=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,a=[],i=e.trim().split(im);let l="";for(let u=i.length-1;u>=0;u-=1){const d=i[u],{isExternal:f,modifiers:p,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=n(d);if(f){l=d+(l.length>0?" "+l:l);continue}let b=!!y,w=r(b?m.substring(0,y):m);if(!w){if(!b){l=d+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=d+(l.length>0?" "+l:l);continue}b=!1}const v=s(p).join(":"),x=h?v+ss:v,M=x+w;if(a.includes(M))continue;a.push(M);const k=o(w,b);for(let T=0;T<k.length;++T){const N=k[T];a.push(x+N)}l=d+(l.length>0?" "+l:l)}return l};function cm(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=sl(t))&&(r&&(r+=" "),r+=n);return r}const sl=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=sl(e[r]))&&(n&&(n+=" "),n+=t);return n};function dm(e,...t){let n,r,o,s=a;function a(l){const u=t.reduce((d,f)=>f(d),e());return n=am(u),r=n.cache.get,o=n.cache.set,s=i,i(l)}function i(l){const u=r(l);if(u)return u;const d=lm(l,n);return o(l,d),d}return function(){return s(cm.apply(null,arguments))}}const _e=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},al=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,il=/^\((?:(\w[\w-]*):)?(.+)\)$/i,um=/^\d+\/\d+$/,fm=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,gm=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mm=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vn=e=>um.test(e),de=e=>!!e&&!Number.isNaN(Number(e)),$t=e=>!!e&&Number.isInteger(Number(e)),is=e=>e.endsWith("%")&&de(e.slice(0,-1)),xt=e=>fm.test(e),bm=()=>!0,ym=e=>pm.test(e)&&!hm.test(e),ll=()=>!1,vm=e=>gm.test(e),wm=e=>mm.test(e),km=e=>!J(e)&&!R(e),xm=e=>wn(e,pl,ll),J=e=>al.test(e),en=e=>wn(e,hl,ym),ls=e=>wn(e,Mm,de),cl=e=>wn(e,ul,ll),Cm=e=>wn(e,fl,wm),$r=e=>wn(e,gl,vm),R=e=>il.test(e),sr=e=>kn(e,hl),Sm=e=>kn(e,Dm),dl=e=>kn(e,ul),Tm=e=>kn(e,pl),Em=e=>kn(e,fl),_r=e=>kn(e,gl,!0),wn=(e,t,n)=>{const r=al.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},kn=(e,t,n=!1)=>{const r=il.exec(e);return r?r[1]?t(r[1]):n:!1},ul=e=>e==="position"||e==="percentage",fl=e=>e==="image"||e==="url",pl=e=>e==="length"||e==="size"||e==="bg-size",hl=e=>e==="length",Mm=e=>e==="number",Dm=e=>e==="family-name",gl=e=>e==="shadow",Nm=dm(()=>{const e=_e("color"),t=_e("font"),n=_e("text"),r=_e("font-weight"),o=_e("tracking"),s=_e("leading"),a=_e("breakpoint"),i=_e("container"),l=_e("spacing"),u=_e("radius"),d=_e("shadow"),f=_e("inset-shadow"),p=_e("text-shadow"),h=_e("drop-shadow"),m=_e("blur"),y=_e("perspective"),b=_e("aspect"),w=_e("ease"),v=_e("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...M(),R,J],T=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],C=()=>[R,J,l],E=()=>[vn,"full","auto",...C()],D=()=>[$t,"none","subgrid",R,J],A=()=>["auto",{span:["full",$t,R,J]},$t,R,J],L=()=>[$t,"auto",R,J],$=()=>["auto","min","max","fr",R,J],_=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...C()],K=()=>[vn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],O=()=>[e,R,J],P=()=>[...M(),dl,cl,{position:[R,J]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",Tm,xm,{size:[R,J]}],G=()=>[is,sr,en],Z=()=>["","none","full",u,R,J],ee=()=>["",de,sr,en],z=()=>["solid","dashed","dotted","double"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>[de,is,dl,cl],Q=()=>["","none",m,R,J],pe=()=>["none",de,R,J],be=()=>["none",de,R,J],Le=()=>[de,R,J],Fe=()=>[vn,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xt],breakpoint:[xt],color:[bm],container:[xt],"drop-shadow":[xt],ease:["in","out","in-out"],font:[km],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xt],shadow:[xt],spacing:["px",de],text:[xt],"text-shadow":[xt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",vn,J,R,b]}],container:["container"],columns:[{columns:[de,J,R,i]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[$t,"auto",R,J]}],basis:[{basis:[vn,"full","auto",i,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[de,vn,"auto","initial","none",J]}],grow:[{grow:["",de,R,J]}],shrink:[{shrink:["",de,R,J]}],order:[{order:[$t,"first","last","none",R,J]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[..._(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",..._()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":_()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[i,"screen",...K()]}],"min-w":[{"min-w":[i,"screen","none",...K()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[a]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",n,sr,en]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,R,ls]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",is,J]}],"font-family":[{font:[Sm,J,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,R,J]}],"line-clamp":[{"line-clamp":[de,"none",R,ls]}],leading:[{leading:[s,...C()]}],"list-image":[{"list-image":["none",R,J]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",R,J]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:[de,"from-font","auto",R,en]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[de,"auto",R,J]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",R,J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",R,J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:P()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$t,R,J],radial:["",R,J],conic:[$t,R,J]},Em,Cm]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...z(),"hidden","none"]}],"divide-style":[{divide:[...z(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[de,R,J]}],"outline-w":[{outline:["",de,sr,en]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",d,_r,$r]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",f,_r,$r]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[de,en]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",p,_r,$r]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[de,R,J]}],"mix-blend":[{"mix-blend":[...F(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":F()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[de]}],"mask-image-linear-from-pos":[{"mask-linear-from":j()}],"mask-image-linear-to-pos":[{"mask-linear-to":j()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":j()}],"mask-image-t-to-pos":[{"mask-t-to":j()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":j()}],"mask-image-r-to-pos":[{"mask-r-to":j()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":j()}],"mask-image-b-to-pos":[{"mask-b-to":j()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":j()}],"mask-image-l-to-pos":[{"mask-l-to":j()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":j()}],"mask-image-x-to-pos":[{"mask-x-to":j()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":j()}],"mask-image-y-to-pos":[{"mask-y-to":j()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[R,J]}],"mask-image-radial-from-pos":[{"mask-radial-from":j()}],"mask-image-radial-to-pos":[{"mask-radial-to":j()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[de]}],"mask-image-conic-from-pos":[{"mask-conic-from":j()}],"mask-image-conic-to-pos":[{"mask-conic-to":j()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:P()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",R,J]}],filter:[{filter:["","none",R,J]}],blur:[{blur:Q()}],brightness:[{brightness:[de,R,J]}],contrast:[{contrast:[de,R,J]}],"drop-shadow":[{"drop-shadow":["","none",h,_r,$r]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",de,R,J]}],"hue-rotate":[{"hue-rotate":[de,R,J]}],invert:[{invert:["",de,R,J]}],saturate:[{saturate:[de,R,J]}],sepia:[{sepia:["",de,R,J]}],"backdrop-filter":[{"backdrop-filter":["","none",R,J]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[de,R,J]}],"backdrop-contrast":[{"backdrop-contrast":[de,R,J]}],"backdrop-grayscale":[{"backdrop-grayscale":["",de,R,J]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[de,R,J]}],"backdrop-invert":[{"backdrop-invert":["",de,R,J]}],"backdrop-opacity":[{"backdrop-opacity":[de,R,J]}],"backdrop-saturate":[{"backdrop-saturate":[de,R,J]}],"backdrop-sepia":[{"backdrop-sepia":["",de,R,J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",R,J]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[de,"initial",R,J]}],ease:[{ease:["linear","initial",w,R,J]}],delay:[{delay:[de,R,J]}],animate:[{animate:["none",v,R,J]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,R,J]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:Le()}],"skew-x":[{"skew-x":Le()}],"skew-y":[{"skew-y":Le()}],transform:[{transform:[R,J,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fe()}],"translate-x":[{"translate-x":Fe()}],"translate-y":[{"translate-y":Fe()}],"translate-z":[{"translate-z":Fe()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",R,J]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",R,J]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[de,sr,en,ls]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function ie(...e){return Nm(tl(e))}function ml(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Hr(...e){return t=>{let n=!1;const r=e.map(o=>{const s=ml(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():ml(e[o],null)}}}}function qe(...e){return S.useCallback(Hr(...e),e)}function ar(e){const t=Lm(e),n=S.forwardRef((r,o)=>{const{children:s,...a}=r,i=S.Children.toArray(s),l=i.find(Im);if(l){const u=l.props.children,d=i.map(f=>f===l?S.Children.count(u)>1?S.Children.only(null):S.isValidElement(u)?u.props.children:null:f);return c.jsx(t,{...a,ref:o,children:S.isValidElement(u)?S.cloneElement(u,void 0,d):null})}return c.jsx(t,{...a,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var Am=ar("Slot");function Lm(e){const t=S.forwardRef((n,r)=>{const{children:o,...s}=n;if(S.isValidElement(o)){const a=$m(o),i=Om(s,o.props);return o.type!==S.Fragment&&(i.ref=r?Hr(r,a):a),S.cloneElement(o,i)}return S.Children.count(o)>1?S.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bl=Symbol("radix.slottable");function Pm(e){const t=({children:n})=>c.jsx(c.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=bl,t}function Im(e){return S.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bl}function Om(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...i)=>{const l=s(...i);return o(...i),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function $m(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const yl=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,vl=tl,cs=((e,t)=>n=>{var r;if(t?.variants==null)return vl(e,n?.class,n?.className);const{variants:o,defaultVariants:s}=t,a=Object.keys(o).map(u=>{const d=n?.[u],f=s?.[u];if(d===null)return null;const p=yl(d)||yl(f);return o[u][p]}),i=n&&Object.entries(n).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:p,...h}=d;return Object.entries(h).every(m=>{let[y,b]=m;return Array.isArray(b)?b.includes({...s,...i}[y]):{...s,...i}[y]===b})?[...u,f,p]:u},[]);return vl(e,a,l,n?.class,n?.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-transparent shadow-xs hover:bg-accent dark:bg-transparent dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function _t({className:e,variant:t,size:n,asChild:r=!1,...o}){const s=r?Am:"button";return c.jsx(s,{"data-slot":"button",className:ie(cs({variant:t,size:n,className:e})),...o})}function _m({className:e,classNames:t,showOutsideDays:n=!0,captionLayout:r="label",buttonVariant:o="ghost",formatters:s,components:a,...i}){const l=Ro();return c.jsx(Zg,{showOutsideDays:n,className:ie("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:r,formatters:{formatMonthDropdown:u=>u.toLocaleString("default",{month:"short"}),...s},classNames:{root:ie("w-fit",l.root),months:ie("flex gap-4 flex-col md:flex-row relative",l.months),month:ie("flex flex-col w-full gap-4",l.month),nav:ie("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",l.nav),button_previous:ie(cs({variant:o}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",l.button_previous),button_next:ie(cs({variant:o}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",l.button_next),month_caption:ie("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",l.month_caption),dropdowns:ie("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",l.dropdowns),dropdown_root:ie("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",l.dropdown_root),dropdown:ie("absolute bg-popover inset-0 opacity-0",l.dropdown),caption_label:ie("select-none font-medium",r==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",l.caption_label),table:"w-full border-collapse",weekdays:ie("flex",l.weekdays),weekday:ie("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",l.weekday),week:ie("flex w-full mt-2",l.week),week_number_header:ie("select-none w-(--cell-size)",l.week_number_header),week_number:ie("text-[0.8rem] select-none text-muted-foreground",l.week_number),day:ie("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",l.day),range_start:ie("rounded-l-md bg-accent",l.range_start),range_middle:ie("rounded-none",l.range_middle),range_end:ie("rounded-r-md bg-accent",l.range_end),today:ie("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",l.today),outside:ie("text-muted-foreground aria-selected:text-muted-foreground",l.outside),disabled:ie("text-muted-foreground opacity-50",l.disabled),hidden:ie("invisible",l.hidden),...t},components:{Root:({className:u,rootRef:d,...f})=>c.jsx("div",{"data-slot":"calendar",ref:d,className:ie(u),...f}),Chevron:({className:u,orientation:d,...f})=>d==="left"?c.jsx(I.ChevronLeftIcon,{className:ie("size-4",u),...f}):d==="right"?c.jsx(I.ChevronRightIcon,{className:ie("size-4",u),...f}):c.jsx(I.ChevronDownIcon,{className:ie("size-4",u),...f}),DayButton:Hm,WeekNumber:({children:u,...d})=>c.jsx("td",{...d,children:c.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:u})}),...a},...i})}function Hm({className:e,day:t,modifiers:n,...r}){const o=Ro(),s=S.useRef(null);return S.useEffect(()=>{n.focused&&s.current?.focus()},[n.focused]),c.jsx(_t,{ref:s,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:ie("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",o.day,e),...r})}let xn=null;const wl=new Map,zm=new Map;function zr(){if(!xn)return;const e=xn;xn=null,setTimeout(()=>{try{e.root.unmount()}catch{}e.container.remove()},0)}function Bm(e){return xn?.pillDate===e}function Wm({currentDate:e,theme:t,position:n,onSelectDate:r,onClose:o}){const s=g.useRef(null),a=Br(e);g.useEffect(()=>{const v=x=>{x.key==="Escape"&&(x.stopPropagation(),x.preventDefault(),o())};return document.addEventListener("keydown",v,!0),()=>document.removeEventListener("keydown",v,!0)},[o]),g.useEffect(()=>{const v=M=>{s.current&&!s.current.contains(M.target)&&(M.target.closest(".date-pill")||o())},x=setTimeout(()=>{document.addEventListener("mousedown",v,!0)},50);return()=>{clearTimeout(x),document.removeEventListener("mousedown",v,!0)}},[o]);const i=g.useCallback(v=>{v&&r(Sn(v)),o()},[r,o]),l=g.useCallback(v=>{const x=new Date;x.setDate(x.getDate()+v),r(Sn(x)),o()},[r,o]),u=g.useCallback(()=>{const x=new Date().getDay(),M=x===0?1:8-x,k=new Date;k.setDate(k.getDate()+M),r(Sn(k)),o()},[r,o]),d=new Date,f=d.toDateString(),p=new Date(d);p.setDate(p.getDate()+1);const h=p.toDateString(),m=d.getDay(),y=m===0?1:8-m,b=new Date(d);b.setDate(b.getDate()+y);const w=b.toDateString();return c.jsxs("div",{ref:s,className:ie("date-picker-portal",t==="dark"?"dark":""),"data-theme":t,style:{position:"fixed",top:n.top,left:n.left,zIndex:99999,pointerEvents:"auto",animation:n.direction==="above"?"picker-slide-up 0.15s ease-out":"picker-slide-down 0.15s ease-out",transformOrigin:n.direction==="above"?"bottom center":"top center"},children:[c.jsx("div",{className:"date-picker-arrow",style:{position:"absolute",left:Math.max(12,Math.min(n.pillCenter-n.left,280))+"px",...n.direction==="below"?{top:"-6px"}:{bottom:"-6px"},width:"12px",height:"12px",transform:n.direction==="below"?"rotate(45deg)":"rotate(225deg)",zIndex:-1}}),c.jsx("div",{className:"date-picker-popup bg-popover text-popover-foreground border border-border rounded-lg shadow-xl overflow-hidden",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("div",{className:"flex justify-center p-1",children:c.jsx(_m,{mode:"single",selected:a,onSelect:i})}),c.jsx("div",{className:"border-t border-border"}),c.jsxs("div",{className:"flex items-center justify-center gap-2 px-3 py-3",children:[c.jsx(_t,{variant:"outline",size:"sm",className:ie("rounded-full text-xs",a.toDateString()===f&&"ring-2 ring-primary"),onClick:()=>l(0),children:"Today"}),c.jsx(_t,{variant:"outline",size:"sm",className:ie("rounded-full text-xs",a.toDateString()===h&&"ring-2 ring-primary"),onClick:()=>l(1),children:"Tomorrow"}),c.jsx(_t,{variant:"outline",size:"sm",className:ie("rounded-full text-xs",a.toDateString()===w&&"ring-2 ring-primary"),onClick:u,children:"Next Monday"})]})]})})]})}function Fm(e,t,n){if(Bm(t)){zr();return}zr();const r=e.getBoundingClientRect(),o=window.innerWidth,s=window.innerHeight,a=320,i=420,l=10,u=16,d=s-r.bottom-l-u,f=r.top-l-u,p=d>=i?"below":f>=i?"above":d>=f?"below":"above";let h;p==="below"?h=r.bottom+l:h=r.top-i-l;const m=r.left+r.width/2;let y=m-a/2;y+a>o-u&&(y=o-a-u),y<u&&(y=u);const b=document.createElement("div");b.setAttribute("data-date-picker-standalone",t),b.style.cssText="position:fixed;top:0;left:0;width:0;height:0;overflow:visible;z-index:99999;pointer-events:auto;",document.body.appendChild(b),["mousedown","mouseup","click","pointerdown","pointerup","touchstart","touchend","focusin","focusout"].forEach(k=>{b.addEventListener(k,T=>{T.stopPropagation()},!1)});const v=Mf.createRoot(b);xn={container:b,root:v,pillDate:t};const x=()=>{zr()},M=k=>{const T=wl.get(t);T&&T(k)};v.render(c.jsx(Wm,{currentDate:t,theme:n,position:{top:h,left:y,direction:p,pillCenter:m},onSelectDate:M,onClose:x}))}function Um({node:e,updateAttributes:t,selected:n}){const r=g.useRef(null),o=e.attrs.date||Cn(),s=kl(o),a=Wr(o),i=g.useCallback(()=>{if(!r.current)return"";const l=r.current.closest(".markdown-editor-container");if(l){const d=l.getAttribute("data-theme");if(d)return d}return r.current.closest("[data-theme]")?.getAttribute("data-theme")||""},[]);return g.useEffect(()=>(wl.set(o,l=>{t({date:l})}),zm.set(o,i),()=>{}),[o,t,i]),g.useEffect(()=>{const l=r.current;if(!l)return;const u=d=>{d.preventDefault(),d.stopPropagation();const f=l.getAttribute("data-date")||Cn(),p=i();Fm(l,f,p)};return l.addEventListener("click",u),()=>l.removeEventListener("click",u)},[i]),g.useEffect(()=>{const l=r.current?.closest(".ProseMirror")||document,u=()=>{xn&&zr()};return l.addEventListener("scroll",u,{passive:!0}),()=>{l.removeEventListener("scroll",u)}},[]),c.jsx(je.NodeViewWrapper,{as:"span",className:"inline",children:c.jsxs("span",{ref:r,className:`date-pill ${a} ${n?"ProseMirror-selectednode":""} cursor-pointer`,contentEditable:!1,"data-type":"date-pill","data-date":o,children:[c.jsx(I.Calendar,{size:14,className:"date-icon"}),c.jsx("span",{className:"date-text",children:s})]})})}function Br(e){const t=e.split("-");if(t.length===3)return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));const n=new Date(e);return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function Cn(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function ir(e){const t=new Date;return t.setDate(t.getDate()+e),`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function Sn(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function kl(e){const t=Br(e),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(r);o.setDate(o.getDate()+1);const s=new Date(r);s.setDate(s.getDate()-1);const a=r.getDay(),i=a===0?1:8-a,l=new Date(r);if(l.setDate(l.getDate()+i),t.getTime()===r.getTime())return"Today";if(t.getTime()===o.getTime())return"Tomorrow";if(t.getTime()===s.getTime())return"Yesterday";if(t.getTime()===l.getTime())return"Next Monday";const u={month:"short",day:"numeric"};return t.getFullYear()!==r.getFullYear()&&(u.year="numeric"),t.toLocaleDateString("en-US",u)}function jm(e){return Br(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function Ht(e){const t=e.trim(),n=t.toLowerCase();if(n==="today")return Cn();if(n==="tomorrow")return ir(1);if(n==="yesterday")return ir(-1);if(n==="next monday"){const i=new Date().getDay(),l=i===0?1:8-i;return ir(l)}const r=t.match(/^([A-Za-z]+)\s+(\d{1,2})(?:,?\s*(\d{4}))?$/);if(r){const i={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,oct:9,october:9,nov:10,november:10,dec:11,december:11}[r[1].toLowerCase()];if(i!==void 0){const l=parseInt(r[2],10),u=r[3]?parseInt(r[3],10):new Date().getFullYear(),d=new Date(u,i,l);return Sn(d)}}if(t.match(/^(\d{4})-(\d{2})-(\d{2})$/))return t;const s=t.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(s){const a=new Date(parseInt(s[3],10),parseInt(s[1],10)-1,parseInt(s[2],10));return Sn(a)}return null}function Wr(e){const t=Br(e),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(r);return o.setDate(o.getDate()+7),t.getTime()===r.getTime()?"date-today":t<r?"date-overdue":t<=o?"date-upcoming":""}const Ym=new ge.PluginKey("datePillPaste"),xl=me.Node.create({name:"datePill",group:"inline",inline:!0,atom:!0,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{date:{default:Cn(),parseHTML:e=>e.getAttribute("data-date"),renderHTML:e=>({"data-date":e.date})}}},parseHTML(){return[{tag:'span[data-type="date-pill"]'}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.date,r=kl(n),o=Wr(n);return["span",me.mergeAttributes(this.options.HTMLAttributes,t,{"data-type":"date-pill",class:`date-pill ${o}`.trim()}),["span",{class:"date-icon"},"📅"],["span",{class:"date-text"},r]]},addNodeView(){return je.ReactNodeViewRenderer(Um,{stopEvent:({event:e})=>e.type==="click"||e.type==="mousedown"})},addCommands(){return{insertDatePill:e=>({commands:t})=>{const n=e||Cn();return t.insertContent({type:this.name,attrs:{date:n}})},updateDatePill:e=>({commands:t})=>t.updateAttributes(this.name,{date:e})}},addKeyboardShortcuts(){return{"Mod-Shift-d":()=>this.editor.commands.insertDatePill()}},addInputRules(){const e=new me.InputRule({find:/@today\s$/,handler:({range:d,chain:f})=>{f().deleteRange(d).insertDatePill(Cn()).run()}}),t=new me.InputRule({find:/@tomorrow\s$/,handler:({range:d,chain:f})=>{f().deleteRange(d).insertDatePill(ir(1)).run()}}),n=new me.InputRule({find:/@yesterday\s$/,handler:({range:d,chain:f})=>{f().deleteRange(d).insertDatePill(ir(-1)).run()}}),r=new me.InputRule({find:/@(\d{4}-\d{2}-\d{2})\s$/,handler:({range:d,chain:f,match:p})=>{f().deleteRange(d).insertDatePill(p[1]).run()}}),o=new me.InputRule({find:/@([A-Za-z]{3})\s?(\d{1,2})\s$/,handler:({range:d,chain:f,match:p})=>{const m={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}[p[1].toLowerCase()];if(m!==void 0){const y=new Date().getFullYear(),b=new Date(y,m,parseInt(p[2],10));f().deleteRange(d).insertDatePill(Sn(b)).run()}}}),s=new me.InputRule({find:/@([A-Za-z]{3,9}\s+\d{1,2},?\s*\d{4})@$/,handler:({range:d,chain:f,match:p})=>{const h=Ht(p[1]);h&&f().deleteRange(d).insertDatePill(h).run()}}),a=new me.InputRule({find:/@(today|tomorrow|yesterday|next monday)@$/i,handler:({range:d,chain:f,match:p})=>{const h=Ht(p[1]);h&&f().deleteRange(d).insertDatePill(h).run()}}),i=new me.InputRule({find:/@(\d{4}-\d{2}-\d{2})@$/,handler:({range:d,chain:f,match:p})=>{f().deleteRange(d).insertDatePill(p[1]).run()}}),l=new me.InputRule({find:/@([A-Za-z]{3,9}\s+\d{1,2})@$/,handler:({range:d,chain:f,match:p})=>{const h=Ht(p[1]);h&&f().deleteRange(d).insertDatePill(h).run()}}),u=new me.InputRule({find:/@(\d{1,2}\/\d{1,2}\/\d{4})@$/,handler:({range:d,chain:f,match:p})=>{const h=Ht(p[1]);h&&f().deleteRange(d).insertDatePill(h).run()}});return[e,t,n,r,o,s,a,i,l,u]},addProseMirrorPlugins(){const e=this.type;return[new ge.Plugin({key:Ym,props:{handlePaste(t,n){const r=n.clipboardData;if(!r)return!1;const o=r.getData("text/plain"),s=r.getData("text/html");if(s&&s.includes('data-type="date-pill"'))return!1;const a=/@([^@\n]+)@/g;let i=!1,l;const u=new RegExp(a.source,a.flags);for(;(l=u.exec(o))!==null;)if(Ht(l[1])){i=!0;break}if(!i)return!1;const{state:d}=t,{tr:f,schema:p}=d,h=[];let m=0;const y=new RegExp(a.source,a.flags);let b;for(;(b=y.exec(o))!==null;){const M=b[1],k=Ht(M);if(k){const T=o.slice(m,b.index);T&&h.push(p.text(T)),h.push(e.create({date:k})),m=b.index+b[0].length}}const w=o.slice(m);if(w&&h.push(p.text(w)),h.length===0)return!1;const v=p.nodes.doc.create(null,p.nodes.paragraph.create(null,h)),{$from:x}=d.selection;if(x.parent.type.name==="paragraph"){const M=f;let k=d.selection.from;for(const T of h)M.insert(k,T),k+=T.nodeSize;M.delete(d.selection.from,d.selection.to),t.dispatch(M)}else f.replaceSelectionWith(v),t.dispatch(f);return n.preventDefault(),!0}}})]}});function qm({node:e,selected:t}){const n=g.useRef(null),r=e.attrs.tag||"",o=g.useCallback(s=>{s.preventDefault(),s.stopPropagation()},[]);return c.jsx(je.NodeViewWrapper,{as:"span",className:"inline",children:c.jsxs("span",{ref:n,className:`tag-pill ${t?"ProseMirror-selectednode":""}`,contentEditable:!1,"data-type":"tag-pill","data-tag":r,onClick:o,children:[c.jsx(I.Hash,{size:14,className:"tag-icon",strokeWidth:2.5}),c.jsx("span",{className:"tag-text",children:r})]})})}function Tn(e){return/[a-zA-Z]/.test(e)&&/^[a-zA-Z0-9_-]+$/.test(e)}function lr(e){return e.toLowerCase().trim()}const Vm=new ge.PluginKey("tagPillPaste"),Cl=me.Node.create({name:"tagPill",group:"inline",inline:!0,atom:!0,addOptions(){return{HTMLAttributes:{},onTagClick:void 0}},addAttributes(){return{tag:{default:"",parseHTML:e=>e.getAttribute("data-tag"),renderHTML:e=>({"data-tag":e.tag})}}},parseHTML(){return[{tag:'span[data-type="tag-pill"]'}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.tag;return["span",me.mergeAttributes(this.options.HTMLAttributes,t,{"data-type":"tag-pill",class:"tag-pill"}),["span",{class:"tag-icon"},"#"],["span",{class:"tag-text"},n]]},addNodeView(){return je.ReactNodeViewRenderer(qm,{stopEvent:({event:e})=>e.type==="click"||e.type==="mousedown"})},addCommands(){return{insertTagPill:e=>({commands:t})=>{const n=lr(e);return Tn(n)?t.insertContent({type:this.name,attrs:{tag:n}}):!1}}},addInputRules(){return[new me.InputRule({find:/(?:^|\s)#([a-zA-Z][a-zA-Z0-9_-]*|[a-zA-Z0-9_-]*[a-zA-Z][a-zA-Z0-9_-]*)\s$/,handler:({range:t,chain:n,match:r})=>{const o=lr(r[1]);if(Tn(o)){const a=r[0].startsWith(" ")?1:0,i=t.from+a;n().deleteRange({from:i,to:t.to}).insertTagPill(o).run()}}})]},addProseMirrorPlugins(){const e=this.type;return[new ge.Plugin({key:Vm,props:{handlePaste(t,n){const r=n.clipboardData;if(!r)return!1;const o=r.getData("text/plain"),s=r.getData("text/html");if(s&&s.includes('data-type="tag-pill"'))return!1;const a=/(?:^|\s)#([a-zA-Z][a-zA-Z0-9_-]*|[a-zA-Z0-9_-]*[a-zA-Z][a-zA-Z0-9_-]*)/g;let i=!1,l;const u=new RegExp(a.source,a.flags);for(;(l=u.exec(o))!==null;)if(Tn(l[1])){i=!0;break}if(!i)return!1;const{state:d}=t,{tr:f,schema:p}=d,h=[];let m=0;const y=/(?:^|\s)#([a-zA-Z][a-zA-Z0-9_-]*|[a-zA-Z0-9_-]*[a-zA-Z][a-zA-Z0-9_-]*)/g;let b;for(;(b=y.exec(o))!==null;){const x=lr(b[1]);if(Tn(x)){const M=b[0],k=M.startsWith(" ")||M.startsWith(`
`)?1:0,T=o.slice(m,b.index+k);T&&h.push(p.text(T)),h.push(e.create({tag:x})),m=b.index+M.length}}const w=o.slice(m);if(w&&h.push(p.text(w)),h.length===0)return!1;const{$from:v}=d.selection;if(v.parent.type.name==="paragraph"){const x=f;let M=d.selection.from;for(const k of h)x.insert(M,k),M+=k.nodeSize;x.delete(d.selection.from,d.selection.to),t.dispatch(x)}else{const x=p.nodes.doc.create(null,p.nodes.paragraph.create(null,h));f.replaceSelectionWith(x),t.dispatch(f)}return n.preventDefault(),!0}}})]}});function Sl({isOpen:e,onClose:t,onInsert:n,position:r}){const[o,s]=g.useState(""),[a,i]=g.useState(""),[l,u]=g.useState(""),[d,f]=g.useState(!1),p=g.useRef(null),h=g.useRef(null);g.useEffect(()=>{e&&(s(""),i(""),u(""),setTimeout(()=>{p.current?.focus()},100))},[e]),g.useEffect(()=>{if(!e)return;const v=k=>{h.current&&!h.current.contains(k.target)&&t()},x=k=>{k.key==="Escape"&&t()},M=setTimeout(()=>{document.addEventListener("mousedown",v)},100);return document.addEventListener("keydown",x),()=>{clearTimeout(M),document.removeEventListener("mousedown",v),document.removeEventListener("keydown",x)}},[e,t]);const m=v=>{if(!v.trim())return u("Please enter an image URL"),!1;try{const x=new URL(v);if(!["http:","https:","data:"].includes(x.protocol))return u("URL must start with http://, https://, or be a data URL"),!1}catch{return u("Please enter a valid URL"),!1}return u(""),!0},y=async()=>{if(!m(o))return;f(!0);const v=new window.Image;v.onload=()=>{f(!1),n(o.trim(),a.trim()),t()},v.onerror=()=>{f(!1),n(o.trim(),a.trim()),t()},setTimeout(()=>{d&&(f(!1),n(o.trim(),a.trim()),t())},3e3),v.src=o.trim()},b=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),y())};if(!e)return null;const w=r?{top:r.top,left:Math.min(r.left,typeof window<"u"?window.innerWidth-340:r.left)}:{top:"50%",left:"50%"};return c.jsxs("div",{ref:h,className:"image-url-dialog fixed z-50",style:{top:(typeof w.top=="number",w.top),left:typeof w.left=="number"?Math.max(8,w.left):w.left,transform:r?void 0:"translate(-50%, -50%)"},children:[c.jsxs("div",{className:"image-url-dialog-header",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(I.Image,{size:16,className:"text-primary"}),c.jsx("span",{className:"font-medium text-sm",children:"Insert Image from URL"})]}),c.jsx("button",{onClick:t,className:"image-url-dialog-close","aria-label":"Close",children:c.jsx(I.X,{size:16})})]}),c.jsxs("div",{className:"image-url-dialog-content",children:[c.jsxs("div",{className:"image-url-dialog-field",children:[c.jsxs("label",{className:"image-url-dialog-label",children:[c.jsx(I.Link2,{size:12}),"Image URL"]}),c.jsx("input",{ref:p,type:"url",value:o,onChange:v=>{s(v.target.value),l&&u("")},onKeyDown:b,placeholder:"https://example.com/image.jpg",className:`image-url-dialog-input ${l?"error":""}`}),l&&c.jsx("span",{className:"image-url-dialog-error",children:l})]}),c.jsxs("div",{className:"image-url-dialog-field",children:[c.jsxs("label",{className:"image-url-dialog-label",children:[c.jsx(I.Type,{size:12}),"Alt Text (optional)"]}),c.jsx("input",{type:"text",value:a,onChange:v=>i(v.target.value),onKeyDown:b,placeholder:"Describe the image",className:"image-url-dialog-input"})]}),c.jsxs("div",{className:"image-url-dialog-actions",children:[c.jsx("button",{onClick:t,className:"image-url-dialog-btn image-url-dialog-btn-cancel",children:"Cancel"}),c.jsx("button",{onClick:y,disabled:d||!o.trim(),className:"image-url-dialog-btn image-url-dialog-btn-insert",children:d?"Validating...":"Insert Image"})]})]})]})}const Km=[{title:"Paragraph",icon:c.jsx(I.Type,{size:16}),command:e=>e.chain().focus().setParagraph().run(),keywords:["text","normal","p"]},{title:"Heading 1",icon:c.jsx(I.Heading1,{size:16}),command:e=>e.chain().focus().toggleHeading({level:1}).run(),keywords:["h1","title","large"]},{title:"Heading 2",icon:c.jsx(I.Heading2,{size:16}),command:e=>e.chain().focus().toggleHeading({level:2}).run(),keywords:["h2","subtitle"]},{title:"Heading 3",icon:c.jsx(I.Heading3,{size:16}),command:e=>e.chain().focus().toggleHeading({level:3}).run(),keywords:["h3","subheading"]},{title:"Heading 4",icon:c.jsx(I.Heading4,{size:16}),command:e=>e.chain().focus().toggleHeading({level:4}).run(),keywords:["h4","small heading"]},{title:"Heading 5",icon:c.jsx(I.Heading5,{size:16}),command:e=>e.chain().focus().toggleHeading({level:5}).run(),keywords:["h5","minor heading"]},{title:"Bullet List",icon:c.jsx(I.List,{size:16}),command:e=>e.chain().focus().toggleBulletList().run(),keywords:["ul","unordered","bullets"]},{title:"Numbered List",icon:c.jsx(I.ListOrdered,{size:16}),command:e=>e.chain().focus().toggleOrderedList().run(),keywords:["ol","ordered","numbers"]},{title:"Task List",icon:c.jsx(I.CheckSquare,{size:16}),command:e=>e.chain().focus().toggleTaskList().run(),keywords:["todo","checkbox","tasks"]},{title:"Quote",icon:c.jsx(I.Quote,{size:16}),command:e=>e.chain().focus().toggleBlockquote().run(),keywords:["blockquote","citation"]},{title:"Code Block",icon:c.jsx(I.Code2,{size:16}),command:e=>e.chain().focus().toggleCodeBlock().run(),keywords:["code","pre","syntax"]},{title:"Table",icon:c.jsx(I.Table,{size:16}),command:e=>e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),keywords:["grid","spreadsheet"]},{title:"Image",icon:c.jsx(I.Image,{size:16}),command:()=>{},keywords:["picture","photo","img"],isImageCommand:!0},{title:"Divider",icon:c.jsx(I.Minus,{size:16}),command:e=>e.chain().focus().setHorizontalRule().run(),keywords:["hr","separator","line"]},{title:"Info Callout",icon:c.jsx(I.Info,{size:16,className:"text-blue-400"}),command:e=>e.chain().focus().toggleCallout({type:"info"}).run(),keywords:["note","tip","information"]},{title:"Note Callout",icon:c.jsx(I.StickyNote,{size:16,className:"text-purple-400"}),command:e=>e.chain().focus().toggleCallout({type:"note"}).run(),keywords:["memo","remember"]},{title:"Prompt Callout",icon:c.jsx(I.MessageSquareText,{size:16,className:"text-amber-400"}),command:e=>e.chain().focus().toggleCallout({type:"prompt"}).run(),keywords:["question","ask","prompt"]},{title:"Resources Callout",icon:c.jsx(I.BookOpen,{size:16,className:"text-green-400"}),command:e=>e.chain().focus().toggleCallout({type:"resources"}).run(),keywords:["links","reference","reading"]},{title:"To-Do Callout",icon:c.jsx(I.ListTodo,{size:16,className:"text-cyan-400"}),command:e=>e.chain().focus().toggleCallout({type:"todo"}).run(),keywords:["task","action","checklist"]},{title:"Date",icon:c.jsx(I.Calendar,{size:16,className:"text-cyan-400"}),command:e=>e.chain().focus().insertDatePill().run(),keywords:["date","today","calendar","time","schedule"]},{title:"Wiki Link",icon:c.jsx(I.Link2,{size:16,className:"text-cyan-400"}),command:e=>{const t=window.prompt("Enter page name:");t&&e.chain().focus().insertContent(`[[${t}]]`).run()},keywords:["wiki","internal","page","link","backlink"]}],Gm=32,Xm=8,Zm=320,Qm=210,Fr=12;function Tl(e){try{const t=window.getSelection();if(t&&t.rangeCount>0){const o=t.getRangeAt(0),s=o.getBoundingClientRect();if(s.width===0&&s.height===0&&s.top===0){const a=document.createElement("span");a.textContent="​",o.cloneRange().insertNode(a);const l=a.getBoundingClientRect(),u={top:l.top,bottom:l.bottom,left:l.left};return a.parentNode?.removeChild(a),t.removeAllRanges(),t.addRange(o),u}return{top:s.top,bottom:s.bottom,left:s.left}}const n=e.state.selection.from,r=e.view.coordsAtPos(n);return{top:r.top,bottom:r.bottom,left:r.left}}catch{return null}}function El({editor:e}){const[t,n]=g.useState(!1),[r,o]=g.useState(""),[s,a]=g.useState(0),[i,l]=g.useState(null),[u,d]=g.useState(!1),[f,p]=g.useState({top:0,left:0}),[h,m]=g.useState("below"),y=g.useRef(null),b=g.useRef(-1),w=g.useRef(!1);g.useEffect(()=>{w.current=t},[t]);const v=Km.filter(E=>{if(!r)return!0;const D=r.toLowerCase();return E.title.toLowerCase().includes(D)||E.keywords?.some(A=>A.includes(D))}),x=Math.min(v.length*Gm+Xm,Zm);g.useLayoutEffect(()=>{if(!t||!i)return;const{top:E,bottom:D,left:A}=i,L=window.innerHeight,$=window.innerWidth,_=L-D-Fr,B=E-Fr;let U;if(_>=x?U="below":B>=x?U="above":U=_>=B?"below":"above",m(U),y.current){const K=Math.max(Fr,Math.min(A,$-Qm-Fr)),O=U==="below"?D+4:E-x-4;y.current.style.top=`${O}px`,y.current.style.left=`${K}px`}},[t,i,x,v.length]);const M=g.useCallback(()=>{const{state:E}=e,{selection:D}=E,A=D.from,L=b.current;if(L>=0&&L<=A)e.chain().focus().deleteRange({from:L,to:A}).run();else{const{$from:$}=D,B=$.parent.textBetween(0,$.parentOffset,void 0,"￼").lastIndexOf("/");if(B!==-1){const U=$.pos-($.parentOffset-B);e.chain().focus().deleteRange({from:U,to:$.pos}).run()}}},[e]),k=g.useCallback(()=>{n(!1),o(""),a(0),b.current=-1,l(null)},[]),T=g.useCallback(E=>{const D=v[E];if(D){if(M(),D.isImageCommand){const{state:A}=e,L=e.view.coordsAtPos(A.selection.from);p({top:L.bottom+8,left:L.left}),d(!0)}else D.command(e);k()}},[e,v,M,k]),N=g.useCallback((E,D)=>{e.chain().focus().setImage({src:E,alt:D}).run()},[e]);if(g.useEffect(()=>{if(!e)return;const E=()=>{if(w.current)return;const{state:D}=e,{selection:A}=D,{$from:L}=A;if(L.parentOffset===0)return;const $=L.parent.textBetween(0,L.parentOffset,void 0,"￼");if(!$.endsWith("/"))return;const _=$.length>1?$.slice(-2,-1):"";if(_&&_!==" "&&_!==`
`)return;b.current=L.pos-1;const B=Tl(e);B&&(l(B),n(!0),o(""),a(0))};return e.on("update",E),()=>{e.off("update",E)}},[e]),g.useEffect(()=>{if(!e||!t)return;const E=e.view.dom,D=A=>{w.current&&(A.key==="ArrowDown"?(A.preventDefault(),A.stopPropagation(),a(L=>(L+1)%v.length)):A.key==="ArrowUp"?(A.preventDefault(),A.stopPropagation(),a(L=>(L-1+v.length)%v.length)):A.key==="Enter"?(A.preventDefault(),A.stopPropagation(),T(s)):A.key==="Escape"&&(A.preventDefault(),A.stopPropagation(),k()))};return E.addEventListener("keydown",D,!0),()=>{E.removeEventListener("keydown",D,!0)}},[e,t,s,v,T,k]),g.useEffect(()=>{if(!e||!t)return;const E=()=>{if(!w.current||b.current<0)return;const{state:D}=e,{selection:A}=D,L=A.from,$=b.current;if(L<=$){k();return}try{const _=D.doc.textBetween($+1,L,void 0,"￼");if(_.includes(`
`)){k();return}o(_),a(0);const B=Tl(e);B&&l(B)}catch{k()}};return e.on("update",E),e.on("selectionUpdate",E),()=>{e.off("update",E),e.off("selectionUpdate",E)}},[e,t,k]),g.useEffect(()=>{if(!t)return;const E=D=>{y.current&&!y.current.contains(D.target)&&k()};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[t,k]),g.useEffect(()=>{t&&v.length===0&&r.length>2&&k()},[t,v.length,r,k]),g.useEffect(()=>{s>=v.length&&a(Math.max(0,v.length-1))},[v.length,s]),g.useEffect(()=>{if(!t||!y.current)return;const E=y.current.querySelector(".slash-item.is-selected");E&&E.scrollIntoView({block:"nearest"})},[t,s]),u)return c.jsx(Sl,{isOpen:u,onClose:()=>d(!1),onInsert:N,position:f});if(!t||v.length===0)return null;const C=h==="below"?"slash-menu-below":"slash-menu-above";return c.jsx(vt,{children:c.jsx("div",{ref:y,className:`slash-menu ${C}`,style:{position:"fixed",top:0,left:0},children:v.map((E,D)=>c.jsxs("div",{className:`slash-item ${D===s?"is-selected":""}`,onClick:A=>{A.preventDefault(),A.stopPropagation(),T(D)},onMouseEnter:()=>a(D),children:[c.jsx("span",{className:"slash-icon",children:E.icon}),c.jsx("span",{className:"slash-label",children:E.title})]},E.title))})})}const Jm=340,Rm=36,eb=8,tb=240,Ur=8;function Ml(e){try{const t=window.getSelection();if(t&&t.rangeCount>0){const o=t.getRangeAt(0),s=o.getBoundingClientRect();if(s.width===0&&s.height===0&&s.top===0){const a=document.createElement("span");a.textContent="​",o.cloneRange().insertNode(a);const l=a.getBoundingClientRect(),u={top:l.top,bottom:l.bottom,left:l.left};return a.parentNode?.removeChild(a),t.removeAllRanges(),t.addRange(o),u}return{top:s.top,bottom:s.bottom,left:s.left}}const n=e.state.selection.from,r=e.view.coordsAtPos(n);return{top:r.top,bottom:r.bottom,left:r.left}}catch{return null}}function nb({editor:e,onSearch:t,onCreateItem:n}){const[r,o]=g.useState(!1),[s,a]=g.useState(""),[i,l]=g.useState([]),[u,d]=g.useState(0),[f,p]=g.useState(null),[h,m]=g.useState("below"),[y,b]=g.useState(!1),w=g.useRef(!1),v=g.useRef(null),x=g.useRef(-1),M=g.useRef(null);g.useEffect(()=>{w.current=r},[r]);const k=g.useCallback(()=>{o(!1),a(""),l([]),d(0),x.current=-1},[]),T=g.useCallback(A=>{const L=x.current;if(L<0)return;const{state:$}=e,_=$.selection.from;try{const B=$.tr.delete(L,_),U=$.schema.marks.wikiLink;if(U){const K=U.create({pageName:A}),O=$.schema.text(A,[K]);B.insert(L,O);const P=L+A.length;B.setSelection(ge.TextSelection.create(B.doc,P)),B.removeStoredMark(U)}else B.insertText(`[[${A}]]`,L);e.view.dispatch(B),e.view.focus()}catch(B){console.warn("WikiLinkAutocomplete: Error inserting link",B)}k()},[e,k]);g.useEffect(()=>{if(!e)return;const A=()=>{if(w.current)return;const{state:L}=e,{selection:$}=L,{$from:_}=$;if(_.parentOffset<2||!_.parent.textBetween(0,_.parentOffset,void 0,"￼").endsWith("[["))return;x.current=_.pos-2;const U=Ml(e);U&&(p(U),o(!0),a(""),l([]),d(0))};return e.on("update",A),()=>{e.off("update",A)}},[e]),g.useEffect(()=>{if(!e||!r)return;const A=e.view.dom,L=$=>{if(w.current){if($.key==="ArrowDown"){$.preventDefault();const _=i.length+(s.trim()?1:0)-1;d(B=>Math.min(B+1,_));return}if($.key==="ArrowUp"){$.preventDefault(),d(_=>Math.max(_-1,0));return}if($.key==="Enter"||$.key==="Tab"){$.preventDefault(),$.stopPropagation(),u<i.length?T(i[u].title):s.trim()&&n?(n(s.trim()),k()):s.trim()&&T(s.trim());return}if($.key==="Escape"){$.preventDefault(),k();return}$.key==="]"&&setTimeout(()=>{const{state:_}=e,{$from:B}=_.selection;B.parent.textBetween(0,B.parentOffset,void 0,"￼").endsWith("]]")&&k()},0)}};return A.addEventListener("keydown",L,!0),()=>{A.removeEventListener("keydown",L,!0)}},[e,r,i,u,s,T,k,n]),g.useEffect(()=>{if(!e||!r)return;const A=()=>{const L=x.current;if(L<0){k();return}const{state:$}=e,_=$.selection.from;if(_<=L){k();return}try{const B=$.doc.textBetween(L+2,_,void 0,"￼");if(B.includes(`
`)||B.includes("]]")){k();return}a(B),d(0);const U=Ml(e);U&&p(U)}catch{k()}};return e.on("update",A),e.on("selectionUpdate",A),()=>{e.off("update",A),e.off("selectionUpdate",A)}},[e,r,k]),g.useEffect(()=>{if(r){if(M.current&&clearTimeout(M.current),!s.trim()){b(!0),M.current=setTimeout(async()=>{try{const A=await t("");l(A)}catch{l([])}b(!1)},100);return}return b(!0),M.current=setTimeout(async()=>{try{const A=await t(s.trim());l(A)}catch{l([])}b(!1)},150),()=>{M.current&&clearTimeout(M.current)}}},[r,s,t]),g.useEffect(()=>{if(!r)return;const A=L=>{v.current&&!v.current.contains(L.target)&&k()};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[r,k]),g.useEffect(()=>{if(!r||!v.current)return;const A=v.current.querySelector(".wikilink-item.is-selected");A&&A.scrollIntoView({block:"nearest"})},[r,u]);const N=i.length+(s.trim()?1:0),C=Math.min(Math.max(N,1)*Rm+eb,tb);if(g.useLayoutEffect(()=>{if(!r||!f)return;const{top:A,bottom:L,left:$}=f,_=window.innerHeight,B=window.innerWidth,U=_-L-Ur,K=A-Ur;let O;if(U>=C?O="below":K>=C?O="above":O=U>=K?"below":"above",m(O),v.current){const P=Math.max(Ur,Math.min($,B-Jm-Ur)),V=O==="below"?L+4:A-C-4;v.current.style.top=`${V}px`,v.current.style.left=`${P}px`}},[r,f,C,N]),!r)return null;const E=s.trim()&&!i.some(A=>A.title.toLowerCase()===s.trim().toLowerCase()),D=h==="below"?"slash-menu-below":"slash-menu-above";return c.jsx(vt,{children:c.jsxs("div",{ref:v,className:`wikilink-menu ${D}`,style:{position:"fixed",top:0,left:0},children:[y&&i.length===0&&c.jsx("div",{className:"wikilink-item wikilink-loading",children:c.jsx("span",{className:"wikilink-label",style:{color:"var(--muted-foreground)"},children:"Searching..."})}),i.map((A,L)=>c.jsxs("div",{className:`wikilink-item ${L===u?"is-selected":""}`,onMouseDown:$=>{$.preventDefault(),T(A.title)},onMouseEnter:()=>d(L),children:[c.jsx("span",{className:"wikilink-icon",children:c.jsx(I.FileText,{size:14})}),c.jsx("span",{className:"wikilink-label",children:A.title}),c.jsx("span",{className:"wikilink-type",children:A.type})]},A.id)),E&&c.jsxs("div",{className:`wikilink-item wikilink-create ${i.length===u?"is-selected":""}`,onMouseDown:A=>{A.preventDefault(),n?(n(s.trim()),k()):T(s.trim())},onMouseEnter:()=>d(i.length),children:[c.jsx("span",{className:"wikilink-icon",children:c.jsx(I.Plus,{size:14})}),c.jsxs("span",{className:"wikilink-label",children:["Create “",s.trim(),"”"]})]}),!y&&i.length===0&&!s.trim()&&c.jsx("div",{className:"wikilink-item wikilink-loading",children:c.jsx("span",{className:"wikilink-label",style:{color:"var(--muted-foreground)"},children:"Type to search items..."})})]})})}function le(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function En(e,t=[]){let n=[];function r(s,a){const i=S.createContext(a),l=n.length;n=[...n,a];const u=f=>{const{scope:p,children:h,...m}=f,y=p?.[e]?.[l]||i,b=S.useMemo(()=>m,Object.values(m));return c.jsx(y.Provider,{value:b,children:h})};u.displayName=s+"Provider";function d(f,p){const h=p?.[e]?.[l]||i,m=S.useContext(h);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const o=()=>{const s=n.map(a=>S.createContext(a));return function(i){const l=i?.[e]||s;return S.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return o.scopeName=e,[r,rb(o,...t)]}function rb(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const a=r.reduce((i,{useScope:l,scopeName:u})=>{const f=l(s)[`__scope${u}`];return{...i,...f}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var zt=globalThis?.document?S.useLayoutEffect:()=>{},ob=S[" useInsertionEffect ".trim().toString()]||zt;function ds({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,s,a]=sb({defaultProp:t,onChange:n}),i=e!==void 0,l=i?e:o;{const d=S.useRef(e!==void 0);S.useEffect(()=>{const f=d.current;f!==i&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,r])}const u=S.useCallback(d=>{if(i){const f=ab(d)?d(e):d;f!==e&&a.current?.(f)}else s(d)},[i,e,s,a]);return[l,u]}function sb({defaultProp:e,onChange:t}){const[n,r]=S.useState(e),o=S.useRef(n),s=S.useRef(t);return ob(()=>{s.current=t},[t]),S.useEffect(()=>{o.current!==n&&(s.current?.(n),o.current=n)},[n,o]),[n,r,s]}function ab(e){return typeof e=="function"}var ib=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Be=ib.reduce((e,t)=>{const n=ar(`Primitive.${t}`),r=S.forwardRef((o,s)=>{const{asChild:a,...i}=o,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...i,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Dl(e,t){e&&ti.flushSync(()=>e.dispatchEvent(t))}function Nl(e){const t=e+"CollectionProvider",[n,r]=En(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:b,children:w}=y,v=g.useRef(null),x=g.useRef(new Map).current;return c.jsx(o,{scope:b,itemMap:x,collectionRef:v,children:w})};a.displayName=t;const i=e+"CollectionSlot",l=ar(i),u=g.forwardRef((y,b)=>{const{scope:w,children:v}=y,x=s(i,w),M=qe(b,x.collectionRef);return c.jsx(l,{ref:M,children:v})});u.displayName=i;const d=e+"CollectionItemSlot",f="data-radix-collection-item",p=ar(d),h=g.forwardRef((y,b)=>{const{scope:w,children:v,...x}=y,M=g.useRef(null),k=qe(b,M),T=s(d,w);return g.useEffect(()=>(T.itemMap.set(M,{ref:M,...x}),()=>void T.itemMap.delete(M))),c.jsx(p,{[f]:"",ref:k,children:v})});h.displayName=d;function m(y){const b=s(e+"CollectionConsumer",y);return g.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((T,N)=>x.indexOf(T.ref.current)-x.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:h},m,r]}var lb=S.createContext(void 0);function Al(e){const t=S.useContext(lb);return e||t||"ltr"}function Ct(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...n)=>t.current?.(...n),[])}function cb(e,t=globalThis?.document){const n=Ct(e);S.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var db="DismissableLayer",us="dismissableLayer.update",ub="dismissableLayer.pointerDownOutside",fb="dismissableLayer.focusOutside",Ll,Pl=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fs=S.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:i,...l}=e,u=S.useContext(Pl),[d,f]=S.useState(null),p=d?.ownerDocument??globalThis?.document,[,h]=S.useState({}),m=qe(t,N=>f(N)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(b),v=d?y.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,M=v>=w,k=gb(N=>{const C=N.target,E=[...u.branches].some(D=>D.contains(C));!M||E||(o?.(N),a?.(N),N.defaultPrevented||i?.())},p),T=mb(N=>{const C=N.target;[...u.branches].some(D=>D.contains(C))||(s?.(N),a?.(N),N.defaultPrevented||i?.())},p);return cb(N=>{v===u.layers.size-1&&(r?.(N),!N.defaultPrevented&&i&&(N.preventDefault(),i()))},p),S.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Ll=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Il(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Ll)}},[d,p,n,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Il())},[d,u]),S.useEffect(()=>{const N=()=>h({});return document.addEventListener(us,N),()=>document.removeEventListener(us,N)},[]),c.jsx(Be.div,{...l,ref:m,style:{pointerEvents:x?M?"auto":"none":void 0,...e.style},onFocusCapture:le(e.onFocusCapture,T.onFocusCapture),onBlurCapture:le(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:le(e.onPointerDownCapture,k.onPointerDownCapture)})});fs.displayName=db;var pb="DismissableLayerBranch",hb=S.forwardRef((e,t)=>{const n=S.useContext(Pl),r=S.useRef(null),o=qe(t,r);return S.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),c.jsx(Be.div,{...e,ref:o})});hb.displayName=pb;function gb(e,t=globalThis?.document){const n=Ct(e),r=S.useRef(!1),o=S.useRef(()=>{});return S.useEffect(()=>{const s=i=>{if(i.target&&!r.current){let l=function(){Ol(ub,n,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=l,t.addEventListener("click",o.current,{once:!0})):l()}else t.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function mb(e,t=globalThis?.document){const n=Ct(e),r=S.useRef(!1);return S.useEffect(()=>{const o=s=>{s.target&&!r.current&&Ol(fb,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Il(){const e=new CustomEvent(us);document.dispatchEvent(e)}function Ol(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Dl(o,s):o.dispatchEvent(s)}var ps=0;function bb(){S.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$l()),document.body.insertAdjacentElement("beforeend",e[1]??$l()),ps++,()=>{ps===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ps--}},[])}function $l(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var hs="focusScope.autoFocusOnMount",gs="focusScope.autoFocusOnUnmount",_l={bubbles:!1,cancelable:!0},yb="FocusScope",Hl=S.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...a}=e,[i,l]=S.useState(null),u=Ct(o),d=Ct(s),f=S.useRef(null),p=qe(t,y=>l(y)),h=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let y=function(x){if(h.paused||!i)return;const M=x.target;i.contains(M)?f.current=M:Bt(f.current,{select:!0})},b=function(x){if(h.paused||!i)return;const M=x.relatedTarget;M!==null&&(i.contains(M)||Bt(f.current,{select:!0}))},w=function(x){if(document.activeElement===document.body)for(const k of x)k.removedNodes.length>0&&Bt(i)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const v=new MutationObserver(w);return i&&v.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),v.disconnect()}}},[r,i,h.paused]),S.useEffect(()=>{if(i){Wl.add(h);const y=document.activeElement;if(!i.contains(y)){const w=new CustomEvent(hs,_l);i.addEventListener(hs,u),i.dispatchEvent(w),w.defaultPrevented||(vb(Sb(zl(i)),{select:!0}),document.activeElement===y&&Bt(i))}return()=>{i.removeEventListener(hs,u),setTimeout(()=>{const w=new CustomEvent(gs,_l);i.addEventListener(gs,d),i.dispatchEvent(w),w.defaultPrevented||Bt(y??document.body,{select:!0}),i.removeEventListener(gs,d),Wl.remove(h)},0)}}},[i,u,d,h]);const m=S.useCallback(y=>{if(!n&&!r||h.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(b&&w){const v=y.currentTarget,[x,M]=wb(v);x&&M?!y.shiftKey&&w===M?(y.preventDefault(),n&&Bt(x,{select:!0})):y.shiftKey&&w===x&&(y.preventDefault(),n&&Bt(M,{select:!0})):w===v&&y.preventDefault()}},[n,r,h.paused]);return c.jsx(Be.div,{tabIndex:-1,...a,ref:p,onKeyDown:m})});Hl.displayName=yb;function vb(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Bt(r,{select:t}),document.activeElement!==n)return}function wb(e){const t=zl(e),n=Bl(t,e),r=Bl(t.reverse(),e);return[n,r]}function zl(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Bl(e,t){for(const n of e)if(!kb(n,{upTo:t}))return n}function kb(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xb(e){return e instanceof HTMLInputElement&&"select"in e}function Bt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&xb(e)&&t&&e.select()}}var Wl=Cb();function Cb(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Fl(e,t),e.unshift(t)},remove(t){e=Fl(e,t),e[0]?.resume()}}}function Fl(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Sb(e){return e.filter(t=>t.tagName!=="A")}var Tb=S[" useId ".trim().toString()]||(()=>{}),Eb=0;function jr(e){const[t,n]=S.useState(Tb());return zt(()=>{n(r=>r??String(Eb++))},[e]),e||(t?`radix-${t}`:"")}const Mb=["top","right","bottom","left"],Wt=Math.min,Je=Math.max,Yr=Math.round,qr=Math.floor,pt=e=>({x:e,y:e}),Db={left:"right",right:"left",bottom:"top",top:"bottom"},Nb={start:"end",end:"start"};function ms(e,t,n){return Je(e,Wt(t,n))}function St(e,t){return typeof e=="function"?e(t):e}function Tt(e){return e.split("-")[0]}function Mn(e){return e.split("-")[1]}function bs(e){return e==="x"?"y":"x"}function ys(e){return e==="y"?"height":"width"}const Ab=new Set(["top","bottom"]);function ht(e){return Ab.has(Tt(e))?"y":"x"}function vs(e){return bs(ht(e))}function Lb(e,t,n){n===void 0&&(n=!1);const r=Mn(e),o=vs(e),s=ys(o);let a=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Vr(a)),[a,Vr(a)]}function Pb(e){const t=Vr(e);return[ws(e),t,ws(t)]}function ws(e){return e.replace(/start|end/g,t=>Nb[t])}const Ul=["left","right"],jl=["right","left"],Ib=["top","bottom"],Ob=["bottom","top"];function $b(e,t,n){switch(e){case"top":case"bottom":return n?t?jl:Ul:t?Ul:jl;case"left":case"right":return t?Ib:Ob;default:return[]}}function _b(e,t,n,r){const o=Mn(e);let s=$b(Tt(e),n==="start",r);return o&&(s=s.map(a=>a+"-"+o),t&&(s=s.concat(s.map(ws)))),s}function Vr(e){return e.replace(/left|right|bottom|top/g,t=>Db[t])}function Hb(e){return{top:0,right:0,bottom:0,left:0,...e}}function Yl(e){return typeof e!="number"?Hb(e):{top:e,right:e,bottom:e,left:e}}function Kr(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function ql(e,t,n){let{reference:r,floating:o}=e;const s=ht(t),a=vs(t),i=ys(a),l=Tt(t),u=s==="y",d=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[i]/2-o[i]/2;let h;switch(l){case"top":h={x:d,y:r.y-o.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-o.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Mn(t)){case"start":h[a]-=p*(n&&u?-1:1);break;case"end":h[a]+=p*(n&&u?-1:1);break}return h}const zb=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:a}=n,i=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:f}=ql(u,r,l),p=r,h={},m=0;for(let y=0;y<i.length;y++){const{name:b,fn:w}=i[y],{x:v,y:x,data:M,reset:k}=await w({x:d,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:h,rects:u,platform:a,elements:{reference:e,floating:t}});d=v??d,f=x??f,h={...h,[b]:{...h[b],...M}},k&&m<=50&&(m++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(u=k.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):k.rects),{x:d,y:f}=ql(u,p,l)),y=-1)}return{x:d,y:f,placement:p,strategy:o,middlewareData:h}};async function cr(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:a,elements:i,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=St(t,e),m=Yl(h),b=i[p?f==="floating"?"reference":"floating":f],w=Kr(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(i.floating)),boundary:u,rootBoundary:d,strategy:l})),v=f==="floating"?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(i.floating)),M=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},k=Kr(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:v,offsetParent:x,strategy:l}):v);return{top:(w.top-k.top+m.top)/M.y,bottom:(k.bottom-w.bottom+m.bottom)/M.y,left:(w.left-k.left+m.left)/M.x,right:(k.right-w.right+m.right)/M.x}}const Bb=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:a,elements:i,middlewareData:l}=t,{element:u,padding:d=0}=St(e,t)||{};if(u==null)return{};const f=Yl(d),p={x:n,y:r},h=vs(o),m=ys(h),y=await a.getDimensions(u),b=h==="y",w=b?"top":"left",v=b?"bottom":"right",x=b?"clientHeight":"clientWidth",M=s.reference[m]+s.reference[h]-p[h]-s.floating[m],k=p[h]-s.reference[h],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=T?T[x]:0;(!N||!await(a.isElement==null?void 0:a.isElement(T)))&&(N=i.floating[x]||s.floating[m]);const C=M/2-k/2,E=N/2-y[m]/2-1,D=Wt(f[w],E),A=Wt(f[v],E),L=D,$=N-y[m]-A,_=N/2-y[m]/2+C,B=ms(L,_,$),U=!l.arrow&&Mn(o)!=null&&_!==B&&s.reference[m]/2-(_<L?D:A)-y[m]/2<0,K=U?_<L?_-L:_-$:0;return{[h]:p[h]+K,data:{[h]:B,centerOffset:_-B-K,...U&&{alignmentOffset:K}},reset:U}}}),Wb=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:a,initialPlacement:i,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...b}=St(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=Tt(o),v=ht(i),x=Tt(i)===i,M=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=p||(x||!y?[Vr(i)]:Pb(i)),T=m!=="none";!p&&T&&k.push(..._b(i,y,m,M));const N=[i,...k],C=await cr(t,b),E=[];let D=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&E.push(C[w]),f){const _=Lb(o,a,M);E.push(C[_[0]],C[_[1]])}if(D=[...D,{placement:o,overflows:E}],!E.every(_=>_<=0)){var A,L;const _=(((A=s.flip)==null?void 0:A.index)||0)+1,B=N[_];if(B&&(!(f==="alignment"?v!==ht(B):!1)||D.every(O=>ht(O.placement)===v?O.overflows[0]>0:!0)))return{data:{index:_,overflows:D},reset:{placement:B}};let U=(L=D.filter(K=>K.overflows[0]<=0).sort((K,O)=>K.overflows[1]-O.overflows[1])[0])==null?void 0:L.placement;if(!U)switch(h){case"bestFit":{var $;const K=($=D.filter(O=>{if(T){const P=ht(O.placement);return P===v||P==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(P=>P>0).reduce((P,V)=>P+V,0)]).sort((O,P)=>O[1]-P[1])[0])==null?void 0:$[0];K&&(U=K);break}case"initialPlacement":U=i;break}if(o!==U)return{reset:{placement:U}}}return{}}}};function Vl(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Kl(e){return Mb.some(t=>e[t]>=0)}const Fb=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=St(e,t);switch(r){case"referenceHidden":{const s=await cr(t,{...o,elementContext:"reference"}),a=Vl(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Kl(a)}}}case"escaped":{const s=await cr(t,{...o,altBoundary:!0}),a=Vl(s,n.floating);return{data:{escapedOffsets:a,escaped:Kl(a)}}}default:return{}}}}},Gl=new Set(["left","top"]);async function Ub(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=Tt(n),i=Mn(n),l=ht(n)==="y",u=Gl.has(a)?-1:1,d=s&&l?-1:1,f=St(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return i&&typeof m=="number"&&(h=i==="end"?m*-1:m),l?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const jb=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:a,middlewareData:i}=t,l=await Ub(t,e);return a===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:a}}}}},Yb=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:i={fn:b=>{let{x:w,y:v}=b;return{x:w,y:v}}},...l}=St(e,t),u={x:n,y:r},d=await cr(t,l),f=ht(Tt(o)),p=bs(f);let h=u[p],m=u[f];if(s){const b=p==="y"?"top":"left",w=p==="y"?"bottom":"right",v=h+d[b],x=h-d[w];h=ms(v,h,x)}if(a){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",v=m+d[b],x=m-d[w];m=ms(v,m,x)}const y=i.fn({...t,[p]:h,[f]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:s,[f]:a}}}}}},qb=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:a}=t,{offset:i=0,mainAxis:l=!0,crossAxis:u=!0}=St(e,t),d={x:n,y:r},f=ht(o),p=bs(f);let h=d[p],m=d[f];const y=St(i,t),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const x=p==="y"?"height":"width",M=s.reference[p]-s.floating[x]+b.mainAxis,k=s.reference[p]+s.reference[x]-b.mainAxis;h<M?h=M:h>k&&(h=k)}if(u){var w,v;const x=p==="y"?"width":"height",M=Gl.has(Tt(o)),k=s.reference[f]-s.floating[x]+(M&&((w=a.offset)==null?void 0:w[f])||0)+(M?0:b.crossAxis),T=s.reference[f]+s.reference[x]+(M?0:((v=a.offset)==null?void 0:v[f])||0)-(M?b.crossAxis:0);m<k?m=k:m>T&&(m=T)}return{[p]:h,[f]:m}}}},Vb=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:a,elements:i}=t,{apply:l=()=>{},...u}=St(e,t),d=await cr(t,u),f=Tt(o),p=Mn(o),h=ht(o)==="y",{width:m,height:y}=s.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=p===(await(a.isRTL==null?void 0:a.isRTL(i.floating))?"start":"end")?"left":"right"):(w=f,b=p==="end"?"top":"bottom");const v=y-d.top-d.bottom,x=m-d.left-d.right,M=Wt(y-d[b],v),k=Wt(m-d[w],x),T=!t.middlewareData.shift;let N=M,C=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),T&&!p){const D=Je(d.left,0),A=Je(d.right,0),L=Je(d.top,0),$=Je(d.bottom,0);h?C=m-2*(D!==0||A!==0?D+A:Je(d.left,d.right)):N=y-2*(L!==0||$!==0?L+$:Je(d.top,d.bottom))}await l({...t,availableWidth:C,availableHeight:N});const E=await a.getDimensions(i.floating);return m!==E.width||y!==E.height?{reset:{rects:!0}}:{}}}};function Gr(){return typeof window<"u"}function Dn(e){return Xl(e)?(e.nodeName||"").toLowerCase():"#document"}function Re(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){var t;return(t=(Xl(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Xl(e){return Gr()?e instanceof Node||e instanceof Re(e).Node:!1}function at(e){return Gr()?e instanceof Element||e instanceof Re(e).Element:!1}function mt(e){return Gr()?e instanceof HTMLElement||e instanceof Re(e).HTMLElement:!1}function Zl(e){return!Gr()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Re(e).ShadowRoot}const Kb=new Set(["inline","contents"]);function dr(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=it(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Kb.has(o)}const Gb=new Set(["table","td","th"]);function Xb(e){return Gb.has(Dn(e))}const Zb=[":popover-open",":modal"];function Xr(e){return Zb.some(t=>{try{return e.matches(t)}catch{return!1}})}const Qb=["transform","translate","scale","rotate","perspective"],Jb=["transform","translate","scale","rotate","perspective","filter"],Rb=["paint","layout","strict","content"];function ks(e){const t=xs(),n=at(e)?it(e):e;return Qb.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Jb.some(r=>(n.willChange||"").includes(r))||Rb.some(r=>(n.contain||"").includes(r))}function ey(e){let t=Ft(e);for(;mt(t)&&!Nn(t);){if(ks(t))return t;if(Xr(t))return null;t=Ft(t)}return null}function xs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ty=new Set(["html","body","#document"]);function Nn(e){return ty.has(Dn(e))}function it(e){return Re(e).getComputedStyle(e)}function Zr(e){return at(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ft(e){if(Dn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Zl(e)&&e.host||gt(e);return Zl(t)?t.host:t}function Ql(e){const t=Ft(e);return Nn(t)?e.ownerDocument?e.ownerDocument.body:e.body:mt(t)&&dr(t)?t:Ql(t)}function ur(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Ql(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),a=Re(o);if(s){const i=Cs(a);return t.concat(a,a.visualViewport||[],dr(o)?o:[],i&&n?ur(i):[])}return t.concat(o,ur(o,[],n))}function Cs(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Jl(e){const t=it(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=mt(e),s=o?e.offsetWidth:n,a=o?e.offsetHeight:r,i=Yr(n)!==s||Yr(r)!==a;return i&&(n=s,r=a),{width:n,height:r,$:i}}function Ss(e){return at(e)?e:e.contextElement}function An(e){const t=Ss(e);if(!mt(t))return pt(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=Jl(t);let a=(s?Yr(n.width):n.width)/r,i=(s?Yr(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!i||!Number.isFinite(i))&&(i=1),{x:a,y:i}}const ny=pt(0);function Rl(e){const t=Re(e);return!xs()||!t.visualViewport?ny:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ry(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Re(e)?!1:t}function tn(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Ss(e);let a=pt(1);t&&(r?at(r)&&(a=An(r)):a=An(e));const i=ry(s,n,r)?Rl(s):pt(0);let l=(o.left+i.x)/a.x,u=(o.top+i.y)/a.y,d=o.width/a.x,f=o.height/a.y;if(s){const p=Re(s),h=r&&at(r)?Re(r):r;let m=p,y=Cs(m);for(;y&&r&&h!==m;){const b=An(y),w=y.getBoundingClientRect(),v=it(y),x=w.left+(y.clientLeft+parseFloat(v.paddingLeft))*b.x,M=w.top+(y.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,f*=b.y,l+=x,u+=M,m=Re(y),y=Cs(m)}}return Kr({width:d,height:f,x:l,y:u})}function Qr(e,t){const n=Zr(e).scrollLeft;return t?t.left+n:tn(gt(e)).left+n}function ec(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Qr(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function oy(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",a=gt(r),i=t?Xr(t.floating):!1;if(r===a||i&&s)return n;let l={scrollLeft:0,scrollTop:0},u=pt(1);const d=pt(0),f=mt(r);if((f||!f&&!s)&&((Dn(r)!=="body"||dr(a))&&(l=Zr(r)),mt(r))){const h=tn(r);u=An(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const p=a&&!f&&!s?ec(a,l):pt(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function sy(e){return Array.from(e.getClientRects())}function ay(e){const t=gt(e),n=Zr(e),r=e.ownerDocument.body,o=Je(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Je(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Qr(e);const i=-n.scrollTop;return it(r).direction==="rtl"&&(a+=Je(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:a,y:i}}const tc=25;function iy(e,t){const n=Re(e),r=gt(e),o=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,i=0,l=0;if(o){s=o.width,a=o.height;const d=xs();(!d||d&&t==="fixed")&&(i=o.offsetLeft,l=o.offsetTop)}const u=Qr(r);if(u<=0){const d=r.ownerDocument,f=d.body,p=getComputedStyle(f),h=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(r.clientWidth-f.clientWidth-h);m<=tc&&(s-=m)}else u<=tc&&(s+=u);return{width:s,height:a,x:i,y:l}}const ly=new Set(["absolute","fixed"]);function cy(e,t){const n=tn(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=mt(e)?An(e):pt(1),a=e.clientWidth*s.x,i=e.clientHeight*s.y,l=o*s.x,u=r*s.y;return{width:a,height:i,x:l,y:u}}function nc(e,t,n){let r;if(t==="viewport")r=iy(e,n);else if(t==="document")r=ay(gt(e));else if(at(t))r=cy(t,n);else{const o=Rl(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Kr(r)}function rc(e,t){const n=Ft(e);return n===t||!at(n)||Nn(n)?!1:it(n).position==="fixed"||rc(n,t)}function dy(e,t){const n=t.get(e);if(n)return n;let r=ur(e,[],!1).filter(i=>at(i)&&Dn(i)!=="body"),o=null;const s=it(e).position==="fixed";let a=s?Ft(e):e;for(;at(a)&&!Nn(a);){const i=it(a),l=ks(a);!l&&i.position==="fixed"&&(o=null),(s?!l&&!o:!l&&i.position==="static"&&!!o&&ly.has(o.position)||dr(a)&&!l&&rc(e,a))?r=r.filter(d=>d!==a):o=i,a=Ft(a)}return t.set(e,r),r}function uy(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?Xr(t)?[]:dy(t,this._c):[].concat(n),r],i=a[0],l=a.reduce((u,d)=>{const f=nc(t,d,o);return u.top=Je(f.top,u.top),u.right=Wt(f.right,u.right),u.bottom=Wt(f.bottom,u.bottom),u.left=Je(f.left,u.left),u},nc(t,i,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function fy(e){const{width:t,height:n}=Jl(e);return{width:t,height:n}}function py(e,t,n){const r=mt(t),o=gt(t),s=n==="fixed",a=tn(e,!0,s,t);let i={scrollLeft:0,scrollTop:0};const l=pt(0);function u(){l.x=Qr(o)}if(r||!r&&!s)if((Dn(t)!=="body"||dr(o))&&(i=Zr(t)),r){const h=tn(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else o&&u();s&&!r&&o&&u();const d=o&&!r&&!s?ec(o,i):pt(0),f=a.left+i.scrollLeft-l.x-d.x,p=a.top+i.scrollTop-l.y-d.y;return{x:f,y:p,width:a.width,height:a.height}}function Ts(e){return it(e).position==="static"}function oc(e,t){if(!mt(e)||it(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return gt(e)===n&&(n=n.ownerDocument.body),n}function sc(e,t){const n=Re(e);if(Xr(e))return n;if(!mt(e)){let o=Ft(e);for(;o&&!Nn(o);){if(at(o)&&!Ts(o))return o;o=Ft(o)}return n}let r=oc(e,t);for(;r&&Xb(r)&&Ts(r);)r=oc(r,t);return r&&Nn(r)&&Ts(r)&&!ks(r)?n:r||ey(e)||n}const hy=async function(e){const t=this.getOffsetParent||sc,n=this.getDimensions,r=await n(e.floating);return{reference:py(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gy(e){return it(e).direction==="rtl"}const my={convertOffsetParentRelativeRectToViewportRelativeRect:oy,getDocumentElement:gt,getClippingRect:uy,getOffsetParent:sc,getElementRects:hy,getClientRects:sy,getDimensions:fy,getScale:An,isElement:at,isRTL:gy};function ac(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function by(e,t){let n=null,r;const o=gt(e);function s(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function a(i,l){i===void 0&&(i=!1),l===void 0&&(l=1),s();const u=e.getBoundingClientRect(),{left:d,top:f,width:p,height:h}=u;if(i||t(),!p||!h)return;const m=qr(f),y=qr(o.clientWidth-(d+p)),b=qr(o.clientHeight-(f+h)),w=qr(d),x={rootMargin:-m+"px "+-y+"px "+-b+"px "+-w+"px",threshold:Je(0,Wt(1,l))||1};let M=!0;function k(T){const N=T[0].intersectionRatio;if(N!==l){if(!M)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!ac(u,e.getBoundingClientRect())&&a(),M=!1}try{n=new IntersectionObserver(k,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(k,x)}n.observe(e)}return a(!0),s}function yy(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Ss(e),d=o||s?[...u?ur(u):[],...ur(t)]:[];d.forEach(w=>{o&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const f=u&&i?by(u,n):null;let p=-1,h=null;a&&(h=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let m,y=l?tn(e):null;l&&b();function b(){const w=tn(e);y&&!ac(y,w)&&n(),y=w,m=requestAnimationFrame(b)}return n(),()=>{var w;d.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f?.(),(w=h)==null||w.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const vy=jb,wy=Yb,ky=Wb,xy=Vb,Cy=Fb,ic=Bb,Sy=qb,Ty=(e,t,n)=>{const r=new Map,o={platform:my,...n},s={...o.platform,_c:r};return zb(e,t,{...o,platform:s})};var Ey=typeof document<"u",My=function(){},Jr=Ey?g.useLayoutEffect:My;function Rr(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Rr(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Rr(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function lc(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function cc(e,t){const n=lc(e);return Math.round(t*n)/n}function Es(e){const t=S.useRef(e);return Jr(()=>{t.current=e}),t}function Dy(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:a}={},transform:i=!0,whileElementsMounted:l,open:u}=e,[d,f]=S.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=S.useState(r);Rr(p,r)||h(r);const[m,y]=S.useState(null),[b,w]=S.useState(null),v=S.useCallback(O=>{O!==T.current&&(T.current=O,y(O))},[]),x=S.useCallback(O=>{O!==N.current&&(N.current=O,w(O))},[]),M=s||m,k=a||b,T=S.useRef(null),N=S.useRef(null),C=S.useRef(d),E=l!=null,D=Es(l),A=Es(o),L=Es(u),$=S.useCallback(()=>{if(!T.current||!N.current)return;const O={placement:t,strategy:n,middleware:p};A.current&&(O.platform=A.current),Ty(T.current,N.current,O).then(P=>{const V={...P,isPositioned:L.current!==!1};_.current&&!Rr(C.current,V)&&(C.current=V,ti.flushSync(()=>{f(V)}))})},[p,t,n,A,L]);Jr(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const _=S.useRef(!1);Jr(()=>(_.current=!0,()=>{_.current=!1}),[]),Jr(()=>{if(M&&(T.current=M),k&&(N.current=k),M&&k){if(D.current)return D.current(M,k,$);$()}},[M,k,$,D,E]);const B=S.useMemo(()=>({reference:T,floating:N,setReference:v,setFloating:x}),[v,x]),U=S.useMemo(()=>({reference:M,floating:k}),[M,k]),K=S.useMemo(()=>{const O={position:n,left:0,top:0};if(!U.floating)return O;const P=cc(U.floating,d.x),V=cc(U.floating,d.y);return i?{...O,transform:"translate("+P+"px, "+V+"px)",...lc(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:V}},[n,i,U.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:$,refs:B,elements:U,floatingStyles:K}),[d,$,B,U,K])}const Ny=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ic({element:r.current,padding:o}).fn(n):{}:r?ic({element:r,padding:o}).fn(n):{}}}},Ay=(e,t)=>({...vy(e),options:[e,t]}),Ly=(e,t)=>({...wy(e),options:[e,t]}),Py=(e,t)=>({...Sy(e),options:[e,t]}),Iy=(e,t)=>({...ky(e),options:[e,t]}),Oy=(e,t)=>({...xy(e),options:[e,t]}),$y=(e,t)=>({...Cy(e),options:[e,t]}),_y=(e,t)=>({...Ny(e),options:[e,t]});var Hy="Arrow",dc=S.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return c.jsx(Be.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});dc.displayName=Hy;var zy=dc;function By(e){const[t,n]=S.useState(void 0);return zt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let a,i;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,i=u.blockSize}else a=e.offsetWidth,i=e.offsetHeight;n({width:a,height:i})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Ms="Popper",[uc,eo]=En(Ms),[Wy,fc]=uc(Ms),pc=e=>{const{__scopePopper:t,children:n}=e,[r,o]=S.useState(null);return c.jsx(Wy,{scope:t,anchor:r,onAnchorChange:o,children:n})};pc.displayName=Ms;var hc="PopperAnchor",gc=S.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=fc(hc,n),a=S.useRef(null),i=qe(t,a),l=S.useRef(null);return S.useEffect(()=>{const u=l.current;l.current=r?.current||a.current,u!==l.current&&s.onAnchorChange(l.current)}),r?null:c.jsx(Be.div,{...o,ref:i})});gc.displayName=hc;var Ds="PopperContent",[Fy,Uy]=uc(Ds),mc=S.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:a=0,arrowPadding:i=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:m,...y}=e,b=fc(Ds,n),[w,v]=S.useState(null),x=qe(t,j=>v(j)),[M,k]=S.useState(null),T=By(M),N=T?.width??0,C=T?.height??0,E=r+(s!=="center"?"-"+s:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],L=A.length>0,$={padding:D,boundary:A.filter(Yy),altBoundary:L},{refs:_,floatingStyles:B,placement:U,isPositioned:K,middlewareData:O}=Dy({strategy:"fixed",placement:E,whileElementsMounted:(...j)=>yy(...j,{animationFrame:h==="always"}),elements:{reference:b.anchor},middleware:[Ay({mainAxis:o+C,alignmentAxis:a}),l&&Ly({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Py():void 0,...$}),l&&Iy({...$}),Oy({...$,apply:({elements:j,rects:Q,availableWidth:pe,availableHeight:be})=>{const{width:Le,height:Fe}=Q.reference,nt=j.floating.style;nt.setProperty("--radix-popper-available-width",`${pe}px`),nt.setProperty("--radix-popper-available-height",`${be}px`),nt.setProperty("--radix-popper-anchor-width",`${Le}px`),nt.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),M&&_y({element:M,padding:i}),qy({arrowWidth:N,arrowHeight:C}),p&&$y({strategy:"referenceHidden",...$})]}),[P,V]=vc(U),X=Ct(m);zt(()=>{K&&X?.()},[K,X]);const G=O.arrow?.x,Z=O.arrow?.y,ee=O.arrow?.centerOffset!==0,[z,F]=S.useState();return zt(()=>{w&&F(window.getComputedStyle(w).zIndex)},[w]),c.jsx("div",{ref:_.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:K?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(Fy,{scope:n,placedSide:P,onArrowChange:k,arrowX:G,arrowY:Z,shouldHideArrow:ee,children:c.jsx(Be.div,{"data-side":P,"data-align":V,...y,ref:x,style:{...y.style,animation:K?void 0:"none"}})})})});mc.displayName=Ds;var bc="PopperArrow",jy={top:"bottom",right:"left",bottom:"top",left:"right"},yc=S.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=Uy(bc,r),a=jy[s.placedSide];return c.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:c.jsx(zy,{...o,ref:n,style:{...o.style,display:"block"}})})});yc.displayName=bc;function Yy(e){return e!==null}var qy=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,a=o.arrow?.centerOffset!==0,i=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[u,d]=vc(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(o.arrow?.x??0)+i/2,h=(o.arrow?.y??0)+l/2;let m="",y="";return u==="bottom"?(m=a?f:`${p}px`,y=`${-l}px`):u==="top"?(m=a?f:`${p}px`,y=`${r.floating.height+l}px`):u==="right"?(m=`${-l}px`,y=a?f:`${h}px`):u==="left"&&(m=`${r.floating.width+l}px`,y=a?f:`${h}px`),{data:{x:m,y}}}});function vc(e){const[t,n="center"]=e.split("-");return[t,n]}var wc=pc,kc=gc,xc=mc,Cc=yc,Vy="Portal",Ns=S.forwardRef((e,t)=>{const{container:n,...r}=e,[o,s]=S.useState(!1);zt(()=>s(!0),[]);const a=n||o&&globalThis?.document?.body;return a?Yo.createPortal(c.jsx(Be.div,{...r,ref:t}),a):null});Ns.displayName=Vy;function Ky(e,t){return S.useReducer((n,r)=>t[n][r]??n,e)}var nn=e=>{const{present:t,children:n}=e,r=Gy(t),o=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=qe(r.ref,Xy(o));return typeof n=="function"||r.isPresent?S.cloneElement(o,{ref:s}):null};nn.displayName="Presence";function Gy(e){const[t,n]=S.useState(),r=S.useRef(null),o=S.useRef(e),s=S.useRef("none"),a=e?"mounted":"unmounted",[i,l]=Ky(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=to(r.current);s.current=i==="mounted"?u:"none"},[i]),zt(()=>{const u=r.current,d=o.current;if(d!==e){const p=s.current,h=to(u);e?l("MOUNT"):h==="none"||u?.display==="none"?l("UNMOUNT"):l(d&&p!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,l]),zt(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const y=to(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&y&&(l("ANIMATION_END"),!o.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},p=h=>{h.target===t&&(s.current=to(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:S.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function to(e){return e?.animationName||"none"}function Xy(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var As="rovingFocusGroup.onEntryFocus",Zy={bubbles:!1,cancelable:!0},fr="RovingFocusGroup",[Ls,Sc,Qy]=Nl(fr),[Jy,Tc]=En(fr,[Qy]),[Ry,ev]=Jy(fr),Ec=S.forwardRef((e,t)=>c.jsx(Ls.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(Ls.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(tv,{...e,ref:t})})}));Ec.displayName=fr;var tv=S.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,p=S.useRef(null),h=qe(t,p),m=Al(s),[y,b]=ds({prop:a,defaultProp:i??null,onChange:l,caller:fr}),[w,v]=S.useState(!1),x=Ct(u),M=Sc(n),k=S.useRef(!1),[T,N]=S.useState(0);return S.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(As,x),()=>C.removeEventListener(As,x)},[x]),c.jsx(Ry,{scope:n,orientation:r,dir:m,loop:o,currentTabStopId:y,onItemFocus:S.useCallback(C=>b(C),[b]),onItemShiftTab:S.useCallback(()=>v(!0),[]),onFocusableItemAdd:S.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:S.useCallback(()=>N(C=>C-1),[]),children:c.jsx(Be.div,{tabIndex:w||T===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:le(e.onMouseDown,()=>{k.current=!0}),onFocus:le(e.onFocus,C=>{const E=!k.current;if(C.target===C.currentTarget&&E&&!w){const D=new CustomEvent(As,Zy);if(C.currentTarget.dispatchEvent(D),!D.defaultPrevented){const A=M().filter(U=>U.focusable),L=A.find(U=>U.active),$=A.find(U=>U.id===y),B=[L,$,...A].filter(Boolean).map(U=>U.ref.current);Nc(B,d)}}k.current=!1}),onBlur:le(e.onBlur,()=>v(!1))})})}),Mc="RovingFocusGroupItem",Dc=S.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,children:a,...i}=e,l=jr(),u=s||l,d=ev(Mc,n),f=d.currentTabStopId===u,p=Sc(n),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:y}=d;return S.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),c.jsx(Ls.ItemSlot,{scope:n,id:u,focusable:r,active:o,children:c.jsx(Be.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:le(e.onMouseDown,b=>{r?d.onItemFocus(u):b.preventDefault()}),onFocus:le(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:le(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=ov(b,d.orientation,d.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=p().filter(M=>M.focusable).map(M=>M.ref.current);if(w==="last")x.reverse();else if(w==="prev"||w==="next"){w==="prev"&&x.reverse();const M=x.indexOf(b.currentTarget);x=d.loop?sv(x,M+1):x.slice(M+1)}setTimeout(()=>Nc(x))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:y!=null}):a})})});Dc.displayName=Mc;var nv={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rv(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ov(e,t,n){const r=rv(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return nv[r]}function Nc(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function sv(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var av=Ec,iv=Dc,lv=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ln=new WeakMap,no=new WeakMap,ro={},Ps=0,Ac=function(e){return e&&(e.host||Ac(e.parentNode))},cv=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Ac(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},dv=function(e,t,n,r){var o=cv(t,Array.isArray(e)?e:[e]);ro[n]||(ro[n]=new WeakMap);var s=ro[n],a=[],i=new Set,l=new Set(o),u=function(f){!f||i.has(f)||(i.add(f),u(f.parentNode))};o.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(i.has(p))d(p);else try{var h=p.getAttribute(r),m=h!==null&&h!=="false",y=(Ln.get(p)||0)+1,b=(s.get(p)||0)+1;Ln.set(p,y),s.set(p,b),a.push(p),y===1&&m&&no.set(p,!0),b===1&&p.setAttribute(n,"true"),m||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(t),i.clear(),Ps++,function(){a.forEach(function(f){var p=Ln.get(f)-1,h=s.get(f)-1;Ln.set(f,p),s.set(f,h),p||(no.has(f)||f.removeAttribute(r),no.delete(f)),h||f.removeAttribute(n)}),Ps--,Ps||(Ln=new WeakMap,Ln=new WeakMap,no=new WeakMap,ro={})}},uv=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=lv(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),dv(r,o,n,"aria-hidden")):function(){return null}},bt=function(){return bt=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},bt.apply(this,arguments)};function Lc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function fv(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;var oo="right-scroll-bar-position",so="width-before-scroll-bar",pv="with-scroll-bars-hidden",hv="--removed-body-scroll-bar-size";function Is(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function gv(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var mv=typeof window<"u"?S.useLayoutEffect:S.useEffect,Pc=new WeakMap;function bv(e,t){var n=gv(null,function(r){return e.forEach(function(o){return Is(o,r)})});return mv(function(){var r=Pc.get(n);if(r){var o=new Set(r),s=new Set(e),a=n.current;o.forEach(function(i){s.has(i)||Is(i,null)}),s.forEach(function(i){o.has(i)||Is(i,a)})}Pc.set(n,e)},[e]),n}function yv(e){return e}function vv(e,t){t===void 0&&(t=yv);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(i){return i!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(i){return s(i)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var i=n;n=[],i.forEach(s),a=n}var l=function(){var d=a;a=[],d.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return o}function wv(e){e===void 0&&(e={});var t=vv(null);return t.options=bt({async:!0,ssr:!1},e),t}var Ic=function(e){var t=e.sideCar,n=Lc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,bt({},n))};Ic.isSideCarExport=!0;function kv(e,t){return e.useMedium(t),Ic}var Oc=wv(),Os=function(){},ao=S.forwardRef(function(e,t){var n=S.useRef(null),r=S.useState({onScrollCapture:Os,onWheelCapture:Os,onTouchMoveCapture:Os}),o=r[0],s=r[1],a=e.forwardProps,i=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,p=e.sideCar,h=e.noRelative,m=e.noIsolation,y=e.inert,b=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,x=e.gapMode,M=Lc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,T=bv([n,t]),N=bt(bt({},M),o);return S.createElement(S.Fragment,null,d&&S.createElement(k,{sideCar:Oc,removeScrollBar:u,shards:f,noRelative:h,noIsolation:m,inert:y,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:x}),a?S.cloneElement(S.Children.only(i),bt(bt({},N),{ref:T})):S.createElement(v,bt({},N,{className:l,ref:T}),i))});ao.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ao.classNames={fullWidth:so,zeroRight:oo};var xv=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cv(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=xv();return t&&e.setAttribute("nonce",t),e}function Sv(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Tv(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ev=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Cv())&&(Sv(t,n),Tv(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Mv=function(){var e=Ev();return function(t,n){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},$c=function(){var e=Mv(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Dv={left:0,top:0,right:0,gap:0},$s=function(e){return parseInt(e||"",10)||0},Nv=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[$s(n),$s(r),$s(o)]},Av=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Dv;var t=Nv(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Lv=$c(),Pn="data-scroll-locked",Pv=function(e,t,n,r){var o=e.left,s=e.top,a=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(pv,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(Pn,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(oo,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(so,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(oo," .").concat(oo,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(so," .").concat(so,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pn,`] {
    `).concat(hv,": ").concat(i,`px;
  }
`)},_c=function(){var e=parseInt(document.body.getAttribute(Pn)||"0",10);return isFinite(e)?e:0},Iv=function(){S.useEffect(function(){return document.body.setAttribute(Pn,(_c()+1).toString()),function(){var e=_c()-1;e<=0?document.body.removeAttribute(Pn):document.body.setAttribute(Pn,e.toString())}},[])},Ov=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Iv();var s=S.useMemo(function(){return Av(o)},[o]);return S.createElement(Lv,{styles:Pv(s,!t,o,n?"":"!important")})},_s=!1;if(typeof window<"u")try{var io=Object.defineProperty({},"passive",{get:function(){return _s=!0,!0}});window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{_s=!1}var In=_s?{passive:!1}:!1,$v=function(e){return e.tagName==="TEXTAREA"},Hc=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!$v(e)&&n[t]==="visible")},_v=function(e){return Hc(e,"overflowY")},Hv=function(e){return Hc(e,"overflowX")},zc=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Bc(e,r);if(o){var s=Wc(e,r),a=s[1],i=s[2];if(a>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zv=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Bv=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Bc=function(e,t){return e==="v"?_v(t):Hv(t)},Wc=function(e,t){return e==="v"?zv(t):Bv(t)},Wv=function(e,t){return e==="h"&&t==="rtl"?-1:1},Fv=function(e,t,n,r,o){var s=Wv(e,window.getComputedStyle(t).direction),a=s*r,i=n.target,l=t.contains(i),u=!1,d=a>0,f=0,p=0;do{if(!i)break;var h=Wc(e,i),m=h[0],y=h[1],b=h[2],w=y-b-s*m;(m||w)&&Bc(e,i)&&(f+=w,p+=m);var v=i.parentNode;i=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&i!==document.body||l&&(t.contains(i)||t===i));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(u=!0),u},lo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Fc=function(e){return[e.deltaX,e.deltaY]},Uc=function(e){return e&&"current"in e?e.current:e},Uv=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jv=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Yv=0,On=[];function qv(e){var t=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),o=S.useState(Yv++)[0],s=S.useState($c)[0],a=S.useRef(e);S.useEffect(function(){a.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var y=fv([e.lockRef.current],(e.shards||[]).map(Uc),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var i=S.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var w=lo(y),v=n.current,x="deltaX"in y?y.deltaX:v[0]-w[0],M="deltaY"in y?y.deltaY:v[1]-w[1],k,T=y.target,N=Math.abs(x)>Math.abs(M)?"h":"v";if("touches"in y&&N==="h"&&T.type==="range")return!1;var C=zc(N,T);if(!C)return!0;if(C?k=N:(k=N==="v"?"h":"v",C=zc(N,T)),!C)return!1;if(!r.current&&"changedTouches"in y&&(x||M)&&(r.current=k),!k)return!0;var E=r.current||k;return Fv(E,b,y,E==="h"?x:M)},[]),l=S.useCallback(function(y){var b=y;if(!(!On.length||On[On.length-1]!==s)){var w="deltaY"in b?Fc(b):lo(b),v=t.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&Uv(k.delta,w)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var x=(a.current.shards||[]).map(Uc).filter(Boolean).filter(function(k){return k.contains(b.target)}),M=x.length>0?i(b,x[0]):!a.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),u=S.useCallback(function(y,b,w,v){var x={name:y,delta:b,target:w,should:v,shadowParent:Vv(w)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(M){return M!==x})},1)},[]),d=S.useCallback(function(y){n.current=lo(y),r.current=void 0},[]),f=S.useCallback(function(y){u(y.type,Fc(y),y.target,i(y,e.lockRef.current))},[]),p=S.useCallback(function(y){u(y.type,lo(y),y.target,i(y,e.lockRef.current))},[]);S.useEffect(function(){return On.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,In),document.addEventListener("touchmove",l,In),document.addEventListener("touchstart",d,In),function(){On=On.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,In),document.removeEventListener("touchmove",l,In),document.removeEventListener("touchstart",d,In)}},[]);var h=e.removeScrollBar,m=e.inert;return S.createElement(S.Fragment,null,m?S.createElement(s,{styles:jv(o)}):null,h?S.createElement(Ov,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Vv(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Kv=kv(Oc,qv);var jc=S.forwardRef(function(e,t){return S.createElement(ao,bt({},e,{ref:t,sideCar:Kv}))});jc.classNames=ao.classNames;var Hs=["Enter"," "],Gv=["ArrowDown","PageUp","Home"],Yc=["ArrowUp","PageDown","End"],Xv=[...Gv,...Yc],Zv={ltr:[...Hs,"ArrowRight"],rtl:[...Hs,"ArrowLeft"]},Qv={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pr="Menu",[hr,Jv,Rv]=Nl(pr),[rn,qc]=En(pr,[Rv,eo,Tc]),co=eo(),Vc=Tc(),[ew,on]=rn(pr),[tw,gr]=rn(pr),Kc=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:a=!0}=e,i=co(t),[l,u]=S.useState(null),d=S.useRef(!1),f=Ct(s),p=Al(o);return S.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),c.jsx(wc,{...i,children:c.jsx(ew,{scope:t,open:n,onOpenChange:f,content:l,onContentChange:u,children:c.jsx(tw,{scope:t,onClose:S.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:a,children:r})})})};Kc.displayName=pr;var nw="MenuAnchor",zs=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=co(n);return c.jsx(kc,{...o,...r,ref:t})});zs.displayName=nw;var Bs="MenuPortal",[rw,Gc]=rn(Bs,{forceMount:void 0}),Xc=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=on(Bs,t);return c.jsx(rw,{scope:t,forceMount:n,children:c.jsx(nn,{present:n||s.open,children:c.jsx(Ns,{asChild:!0,container:o,children:r})})})};Xc.displayName=Bs;var tt="MenuContent",[ow,Ws]=rn(tt),Zc=S.forwardRef((e,t)=>{const n=Gc(tt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=on(tt,e.__scopeMenu),a=gr(tt,e.__scopeMenu);return c.jsx(hr.Provider,{scope:e.__scopeMenu,children:c.jsx(nn,{present:r||s.open,children:c.jsx(hr.Slot,{scope:e.__scopeMenu,children:a.modal?c.jsx(sw,{...o,ref:t}):c.jsx(aw,{...o,ref:t})})})})}),sw=S.forwardRef((e,t)=>{const n=on(tt,e.__scopeMenu),r=S.useRef(null),o=qe(t,r);return S.useEffect(()=>{const s=r.current;if(s)return uv(s)},[]),c.jsx(Fs,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),aw=S.forwardRef((e,t)=>{const n=on(tt,e.__scopeMenu);return c.jsx(Fs,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),iw=ar("MenuContent.ScrollLock"),Fs=S.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,disableOutsideScroll:m,...y}=e,b=on(tt,n),w=gr(tt,n),v=co(n),x=Vc(n),M=Jv(n),[k,T]=S.useState(null),N=S.useRef(null),C=qe(t,N,b.onContentChange),E=S.useRef(0),D=S.useRef(""),A=S.useRef(0),L=S.useRef(null),$=S.useRef("right"),_=S.useRef(0),B=m?jc:S.Fragment,U=m?{as:iw,allowPinchZoom:!0}:void 0,K=P=>{const V=D.current+P,X=M().filter(j=>!j.disabled),G=document.activeElement,Z=X.find(j=>j.ref.current===G)?.textValue,ee=X.map(j=>j.textValue),z=vw(ee,V,Z),F=X.find(j=>j.textValue===z)?.ref.current;(function j(Q){D.current=Q,window.clearTimeout(E.current),Q!==""&&(E.current=window.setTimeout(()=>j(""),1e3))})(V),F&&setTimeout(()=>F.focus())};S.useEffect(()=>()=>window.clearTimeout(E.current),[]),bb();const O=S.useCallback(P=>$.current===L.current?.side&&kw(P,L.current?.area),[]);return c.jsx(ow,{scope:n,searchRef:D,onItemEnter:S.useCallback(P=>{O(P)&&P.preventDefault()},[O]),onItemLeave:S.useCallback(P=>{O(P)||(N.current?.focus(),T(null))},[O]),onTriggerLeave:S.useCallback(P=>{O(P)&&P.preventDefault()},[O]),pointerGraceTimerRef:A,onPointerGraceIntentChange:S.useCallback(P=>{L.current=P},[]),children:c.jsx(B,{...U,children:c.jsx(Hl,{asChild:!0,trapped:o,onMountAutoFocus:le(s,P=>{P.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:c.jsx(fs,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,children:c.jsx(av,{asChild:!0,...x,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:T,onEntryFocus:le(l,P=>{w.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(xc,{role:"menu","aria-orientation":"vertical","data-state":pd(b.open),"data-radix-menu-content":"",dir:w.dir,...v,...y,ref:C,style:{outline:"none",...y.style},onKeyDown:le(y.onKeyDown,P=>{const X=P.target.closest("[data-radix-menu-content]")===P.currentTarget,G=P.ctrlKey||P.altKey||P.metaKey,Z=P.key.length===1;X&&(P.key==="Tab"&&P.preventDefault(),!G&&Z&&K(P.key));const ee=N.current;if(P.target!==ee||!Xv.includes(P.key))return;P.preventDefault();const F=M().filter(j=>!j.disabled).map(j=>j.ref.current);Yc.includes(P.key)&&F.reverse(),bw(F)}),onBlur:le(e.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(E.current),D.current="")}),onPointerMove:le(e.onPointerMove,br(P=>{const V=P.target,X=_.current!==P.clientX;if(P.currentTarget.contains(V)&&X){const G=P.clientX>_.current?"right":"left";$.current=G,_.current=P.clientX}}))})})})})})})});Zc.displayName=tt;var lw="MenuGroup",Us=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return c.jsx(Be.div,{role:"group",...r,ref:t})});Us.displayName=lw;var cw="MenuLabel",Qc=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return c.jsx(Be.div,{...r,ref:t})});Qc.displayName=cw;var uo="MenuItem",Jc="menu.itemSelect",fo=S.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=S.useRef(null),a=gr(uo,e.__scopeMenu),i=Ws(uo,e.__scopeMenu),l=qe(t,s),u=S.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const p=new CustomEvent(Jc,{bubbles:!0,cancelable:!0});f.addEventListener(Jc,h=>r?.(h),{once:!0}),Dl(f,p),p.defaultPrevented?u.current=!1:a.onClose()}};return c.jsx(Rc,{...o,ref:l,disabled:n,onClick:le(e.onClick,d),onPointerDown:f=>{e.onPointerDown?.(f),u.current=!0},onPointerUp:le(e.onPointerUp,f=>{u.current||f.currentTarget?.click()}),onKeyDown:le(e.onKeyDown,f=>{const p=i.searchRef.current!=="";n||p&&f.key===" "||Hs.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});fo.displayName=uo;var Rc=S.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,a=Ws(uo,n),i=Vc(n),l=S.useRef(null),u=qe(t,l),[d,f]=S.useState(!1),[p,h]=S.useState("");return S.useEffect(()=>{const m=l.current;m&&h((m.textContent??"").trim())},[s.children]),c.jsx(hr.ItemSlot,{scope:n,disabled:r,textValue:o??p,children:c.jsx(iv,{asChild:!0,...i,focusable:!r,children:c.jsx(Be.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:le(e.onPointerMove,br(m=>{r?a.onItemLeave(m):(a.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(e.onPointerLeave,br(m=>a.onItemLeave(m))),onFocus:le(e.onFocus,()=>f(!0)),onBlur:le(e.onBlur,()=>f(!1))})})})}),dw="MenuCheckboxItem",ed=S.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return c.jsx(sd,{scope:e.__scopeMenu,checked:n,children:c.jsx(fo,{role:"menuitemcheckbox","aria-checked":po(n)?"mixed":n,...o,ref:t,"data-state":Ys(n),onSelect:le(o.onSelect,()=>r?.(po(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ed.displayName=dw;var td="MenuRadioGroup",[uw,fw]=rn(td,{value:void 0,onValueChange:()=>{}}),nd=S.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=Ct(r);return c.jsx(uw,{scope:e.__scopeMenu,value:n,onValueChange:s,children:c.jsx(Us,{...o,ref:t})})});nd.displayName=td;var rd="MenuRadioItem",od=S.forwardRef((e,t)=>{const{value:n,...r}=e,o=fw(rd,e.__scopeMenu),s=n===o.value;return c.jsx(sd,{scope:e.__scopeMenu,checked:s,children:c.jsx(fo,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":Ys(s),onSelect:le(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});od.displayName=rd;var js="MenuItemIndicator",[sd,pw]=rn(js,{checked:!1}),ad=S.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=pw(js,n);return c.jsx(nn,{present:r||po(s.checked)||s.checked===!0,children:c.jsx(Be.span,{...o,ref:t,"data-state":Ys(s.checked)})})});ad.displayName=js;var hw="MenuSeparator",id=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return c.jsx(Be.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});id.displayName=hw;var gw="MenuArrow",ld=S.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=co(n);return c.jsx(Cc,{...o,...r,ref:t})});ld.displayName=gw;var mw="MenuSub",[M1,cd]=rn(mw),mr="MenuSubTrigger",dd=S.forwardRef((e,t)=>{const n=on(mr,e.__scopeMenu),r=gr(mr,e.__scopeMenu),o=cd(mr,e.__scopeMenu),s=Ws(mr,e.__scopeMenu),a=S.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:l}=s,u={__scopeMenu:e.__scopeMenu},d=S.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return S.useEffect(()=>d,[d]),S.useEffect(()=>{const f=i.current;return()=>{window.clearTimeout(f),l(null)}},[i,l]),c.jsx(zs,{asChild:!0,...u,children:c.jsx(Rc,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":pd(n.open),...e,ref:Hr(t,o.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(e.onPointerMove,br(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:le(e.onPointerLeave,br(f=>{d();const p=n.content?.getBoundingClientRect();if(p){const h=n.content?.dataset.side,m=h==="right",y=m?-5:5,b=p[m?"left":"right"],w=p[m?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x:b,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x:b,y:p.bottom}],side:h}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:le(e.onKeyDown,f=>{const p=s.searchRef.current!=="";e.disabled||p&&f.key===" "||Zv[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});dd.displayName=mr;var ud="MenuSubContent",fd=S.forwardRef((e,t)=>{const n=Gc(tt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=on(tt,e.__scopeMenu),a=gr(tt,e.__scopeMenu),i=cd(ud,e.__scopeMenu),l=S.useRef(null),u=qe(t,l);return c.jsx(hr.Provider,{scope:e.__scopeMenu,children:c.jsx(nn,{present:r||s.open,children:c.jsx(hr.Slot,{scope:e.__scopeMenu,children:c.jsx(Fs,{id:i.contentId,"aria-labelledby":i.triggerId,...o,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{a.isUsingKeyboardRef.current&&l.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:le(e.onFocusOutside,d=>{d.target!==i.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:le(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:le(e.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),p=Qv[a.dir].includes(d.key);f&&p&&(s.onOpenChange(!1),i.trigger?.focus(),d.preventDefault())})})})})})});fd.displayName=ud;function pd(e){return e?"open":"closed"}function po(e){return e==="indeterminate"}function Ys(e){return po(e)?"indeterminate":e?"checked":"unchecked"}function bw(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function yw(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function vw(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=yw(e,Math.max(s,0));o.length===1&&(a=a.filter(u=>u!==n));const l=a.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function ww(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const i=t[s],l=t[a],u=i.x,d=i.y,f=l.x,p=l.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(o=!o)}return o}function kw(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ww(n,t)}function br(e){return t=>t.pointerType==="mouse"?e(t):void 0}var xw=Kc,Cw=zs,Sw=Xc,Tw=Zc,Ew=Us,Mw=Qc,Dw=fo,Nw=ed,Aw=nd,Lw=od,Pw=ad,Iw=id,Ow=ld,$w=dd,_w=fd,ho="DropdownMenu",[Hw]=En(ho,[qc]),Ke=qc(),[zw,hd]=Hw(ho),gd=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=Ke(t),u=S.useRef(null),[d,f]=ds({prop:o,defaultProp:s??!1,onChange:a,caller:ho});return c.jsx(zw,{scope:t,triggerId:jr(),triggerRef:u,contentId:jr(),open:d,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(p=>!p),[f]),modal:i,children:c.jsx(xw,{...l,open:d,onOpenChange:f,dir:r,modal:i,children:n})})};gd.displayName=ho;var md="DropdownMenuTrigger",bd=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,s=hd(md,n),a=Ke(n);return c.jsx(Cw,{asChild:!0,...a,children:c.jsx(Be.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Hr(t,s.triggerRef),onPointerDown:le(e.onPointerDown,i=>{!r&&i.button===0&&i.ctrlKey===!1&&(s.onOpenToggle(),s.open||i.preventDefault())}),onKeyDown:le(e.onKeyDown,i=>{r||(["Enter"," "].includes(i.key)&&s.onOpenToggle(),i.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});bd.displayName=md;var Bw="DropdownMenuPortal",yd=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ke(t);return c.jsx(Sw,{...r,...n})};yd.displayName=Bw;var vd="DropdownMenuContent",wd=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=hd(vd,n),s=Ke(n),a=S.useRef(!1);return c.jsx(Tw,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:t,onCloseAutoFocus:le(e.onCloseAutoFocus,i=>{a.current||o.triggerRef.current?.focus(),a.current=!1,i.preventDefault()}),onInteractOutside:le(e.onInteractOutside,i=>{const l=i.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!o.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wd.displayName=vd;var Ww="DropdownMenuGroup",Fw=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Ew,{...o,...r,ref:t})});Fw.displayName=Ww;var Uw="DropdownMenuLabel",jw=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Mw,{...o,...r,ref:t})});jw.displayName=Uw;var Yw="DropdownMenuItem",kd=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Dw,{...o,...r,ref:t})});kd.displayName=Yw;var qw="DropdownMenuCheckboxItem",Vw=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Nw,{...o,...r,ref:t})});Vw.displayName=qw;var Kw="DropdownMenuRadioGroup",Gw=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Aw,{...o,...r,ref:t})});Gw.displayName=Kw;var Xw="DropdownMenuRadioItem",Zw=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Lw,{...o,...r,ref:t})});Zw.displayName=Xw;var Qw="DropdownMenuItemIndicator",Jw=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Pw,{...o,...r,ref:t})});Jw.displayName=Qw;var Rw="DropdownMenuSeparator",xd=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Iw,{...o,...r,ref:t})});xd.displayName=Rw;var ek="DropdownMenuArrow",tk=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(Ow,{...o,...r,ref:t})});tk.displayName=ek;var nk="DropdownMenuSubTrigger",rk=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx($w,{...o,...r,ref:t})});rk.displayName=nk;var ok="DropdownMenuSubContent",sk=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Ke(n);return c.jsx(_w,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sk.displayName=ok;var ak=gd,ik=bd,lk=yd,ck=wd,dk=kd,uk=xd;function qs({...e}){return c.jsx(ak,{"data-slot":"dropdown-menu",...e})}function Vs({...e}){return c.jsx(ik,{"data-slot":"dropdown-menu-trigger",...e})}function Ks({className:e,sideOffset:t=4,...n}){return c.jsx(lk,{children:c.jsx(ck,{"data-slot":"dropdown-menu-content",sideOffset:t,className:ie("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Oe({className:e,inset:t,variant:n="default",...r}){return c.jsx(dk,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:ie("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Gs({className:e,...t}){return c.jsx(uk,{"data-slot":"dropdown-menu-separator",className:ie("bg-border -mx-1 my-1 h-px",e),...t})}var fk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pk="VisuallyHidden",Cd=S.forwardRef((e,t)=>c.jsx(Be.span,{...e,ref:t,style:{...fk,...e.style}}));Cd.displayName=pk;var hk=Cd,[go]=En("Tooltip",[eo]),mo=eo(),Sd="TooltipProvider",gk=700,Xs="tooltip.open",[mk,Zs]=go(Sd),Td=e=>{const{__scopeTooltip:t,delayDuration:n=gk,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,a=S.useRef(!0),i=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(mk,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:i,onPointerInTransitChange:S.useCallback(u=>{i.current=u},[]),disableHoverableContent:o,children:s})};Td.displayName=Sd;var yr="Tooltip",[bk,vr]=go(yr),Ed=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o,onOpenChange:s,disableHoverableContent:a,delayDuration:i}=e,l=Zs(yr,e.__scopeTooltip),u=mo(t),[d,f]=S.useState(null),p=jr(),h=S.useRef(0),m=a??l.disableHoverableContent,y=i??l.delayDuration,b=S.useRef(!1),[w,v]=ds({prop:r,defaultProp:o??!1,onChange:N=>{N?(l.onOpen(),document.dispatchEvent(new CustomEvent(Xs))):l.onClose(),s?.(N)},caller:yr}),x=S.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),M=S.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b.current=!1,v(!0)},[v]),k=S.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v(!1)},[v]),T=S.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{b.current=!0,v(!0),h.current=0},y)},[y,v]);return S.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),c.jsx(wc,{...u,children:c.jsx(bk,{scope:t,contentId:p,open:w,stateAttribute:x,trigger:d,onTriggerChange:f,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayedRef.current?T():M()},[l.isOpenDelayedRef,T,M]),onTriggerLeave:S.useCallback(()=>{m?k():(window.clearTimeout(h.current),h.current=0)},[k,m]),onOpen:M,onClose:k,disableHoverableContent:m,children:n})})};Ed.displayName=yr;var Qs="TooltipTrigger",Md=S.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=vr(Qs,n),s=Zs(Qs,n),a=mo(n),i=S.useRef(null),l=qe(t,i,o.onTriggerChange),u=S.useRef(!1),d=S.useRef(!1),f=S.useCallback(()=>u.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(kc,{asChild:!0,...a,children:c.jsx(Be.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:le(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:le(e.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:le(e.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:le(e.onFocus,()=>{u.current||o.onOpen()}),onBlur:le(e.onBlur,o.onClose),onClick:le(e.onClick,o.onClose)})})});Md.displayName=Qs;var Js="TooltipPortal",[yk,vk]=go(Js,{forceMount:void 0}),Dd=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,s=vr(Js,t);return c.jsx(yk,{scope:t,forceMount:n,children:c.jsx(nn,{present:n||s.open,children:c.jsx(Ns,{asChild:!0,container:o,children:r})})})};Dd.displayName=Js;var $n="TooltipContent",Nd=S.forwardRef((e,t)=>{const n=vk($n,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,a=vr($n,e.__scopeTooltip);return c.jsx(nn,{present:r||a.open,children:a.disableHoverableContent?c.jsx(Ad,{side:o,...s,ref:t}):c.jsx(wk,{side:o,...s,ref:t})})}),wk=S.forwardRef((e,t)=>{const n=vr($n,e.__scopeTooltip),r=Zs($n,e.__scopeTooltip),o=S.useRef(null),s=qe(t,o),[a,i]=S.useState(null),{trigger:l,onClose:u}=n,d=o.current,{onPointerInTransitChange:f}=r,p=S.useCallback(()=>{i(null),f(!1)},[f]),h=S.useCallback((m,y)=>{const b=m.currentTarget,w={x:m.clientX,y:m.clientY},v=Sk(w,b.getBoundingClientRect()),x=Tk(w,v),M=Ek(y.getBoundingClientRect()),k=Dk([...x,...M]);i(k),f(!0)},[f]);return S.useEffect(()=>()=>p(),[p]),S.useEffect(()=>{if(l&&d){const m=b=>h(b,d),y=b=>h(b,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",y)}}},[l,d,h,p]),S.useEffect(()=>{if(a){const m=y=>{const b=y.target,w={x:y.clientX,y:y.clientY},v=l?.contains(b)||d?.contains(b),x=!Mk(w,a);v?p():x&&(p(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,a,u,p]),c.jsx(Ad,{...e,ref:s})}),[kk,xk]=go(yr,{isInside:!1}),Ck=Pm("TooltipContent"),Ad=S.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:a,...i}=e,l=vr($n,n),u=mo(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(Xs,d),()=>document.removeEventListener(Xs,d)),[d]),S.useEffect(()=>{if(l.trigger){const f=p=>{p.target?.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),c.jsx(fs,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:c.jsxs(xc,{"data-state":l.stateAttribute,...u,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(Ck,{children:r}),c.jsx(kk,{scope:n,isInside:!0,children:c.jsx(hk,{id:l.contentId,role:"tooltip",children:o||r})})]})})});Nd.displayName=$n;var Ld="TooltipArrow",Pd=S.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=mo(n);return xk(Ld,n).isInside?null:c.jsx(Cc,{...o,...r,ref:t})});Pd.displayName=Ld;function Sk(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Tk(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Ek(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function Mk(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const i=t[s],l=t[a],u=i.x,d=i.y,f=l.x,p=l.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(o=!o)}return o}function Dk(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Nk(t)}function Nk(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(o.y-a.y)>=(s.y-a.y)*(o.x-a.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(o.y-a.y)>=(s.y-a.y)*(o.x-a.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Ak=Td,Lk=Ed,Pk=Md,Ik=Dd,Ok=Nd,$k=Pd;function _k({delayDuration:e=0,...t}){return c.jsx(Ak,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Rs({...e}){return c.jsx(_k,{children:c.jsx(Lk,{"data-slot":"tooltip",...e})})}function ea({...e}){return c.jsx(Pk,{"data-slot":"tooltip-trigger",...e})}function ta({className:e,sideOffset:t=0,children:n,...r}){return c.jsx(Ik,{children:c.jsxs(Ok,{"data-slot":"tooltip-content",sideOffset:t,className:ie("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,c.jsx($k,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const $e=({onClick:e,isActive:t,disabled:n,children:r,tooltip:o})=>{const s=c.jsx("button",{onClick:e,disabled:n,className:`
        flex items-center justify-center w-8 h-8 rounded-md shrink-0
        transition-all duration-100 ease-out touch-manipulation
        ${t?"bg-secondary text-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
        ${n?"opacity-50 cursor-not-allowed":""}
      `,children:r});return o?c.jsxs(Rs,{children:[c.jsx(ea,{asChild:!0,children:s}),c.jsx(ta,{side:"bottom",className:"text-xs",children:o})]}):s},_n=()=>c.jsx("div",{className:"w-px h-5 bg-border mx-0.5 shrink-0"}),Id=g.memo(function({editor:t,onCopyMarkdown:n,onOpenLinkPopover:r,className:o="",autoReorderChecklist:s=!1,aiEnabled:a=!1,onAISparklesClick:i}){const l=g.useRef(null),[u,d]=g.useState(!1),[f,p]=g.useState(void 0),h=je.useEditorState({editor:t,selector:({editor:T})=>({canUndo:T.can().undo(),canRedo:T.can().redo(),isBold:T.isActive("bold"),isItalic:T.isActive("italic"),isUnderline:T.isActive("underline"),isStrike:T.isActive("strike"),isCode:T.isActive("code"),isHighlight:T.isActive("highlight"),isH1:T.isActive("heading",{level:1}),isH2:T.isActive("heading",{level:2}),isH3:T.isActive("heading",{level:3}),isH4:T.isActive("heading",{level:4}),isH5:T.isActive("heading",{level:5}),isBlockquote:T.isActive("blockquote"),isBulletList:T.isActive("bulletList"),isOrderedList:T.isActive("orderedList"),isTaskList:T.isActive("taskList"),isCodeBlock:T.isActive("codeBlock"),isLink:T.isActive("link")})}),m=g.useCallback(()=>{const{view:T}=t,{from:N}=T.state.selection,C=T.coordsAtPos(N);p({top:C.bottom+8,left:C.left}),d(!0)},[t]),y=g.useCallback((T,N)=>{t.chain().focus().setImage({src:T,alt:N}).run(),d(!1)},[t]),b=g.useCallback(()=>{t.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},[t]),w=g.useCallback(T=>{t.chain().focus().insertCallout({type:T}).run()},[t]),v=g.useRef(new Map),x=g.useRef(new Map),M=g.useCallback(T=>{const{doc:N,tr:C}=T.state;let E=!1;const D=new Set(["taskList","bulletList","orderedList"]),A=T.view.dom.querySelectorAll('ul[data-type="taskList"], ul:not([data-type]), ol');v.current.clear(),A.forEach(($,_)=>{$.querySelectorAll(":scope > li").forEach(U=>{const K=U,O=(K.textContent||"").trim().substring(0,50);v.current.set(`${_}-${O}`,K.getBoundingClientRect())})});const L=[];N.descendants(($,_,B,U)=>{if(!D.has($.type.name))return!0;let K=!1;if($.forEach(P=>{P.type.name==="taskItem"&&(K=!0)}),!K)return!0;let O=0;return N.nodesBetween(0,_,P=>(D.has(P.type.name)&&O++,!0)),L.push({node:$,pos:_,depth:O}),!0}),L.sort(($,_)=>_.depth-$.depth);for(const{node:$,pos:_}of L){const B=[];let U=0;$.forEach(z=>{B.push({node:z,isTask:z.type.name==="taskItem",checked:z.type.name==="taskItem"&&z.attrs.checked===!0,originalIndex:U++})});const K=B.filter(z=>z.isTask&&!z.checked),O=B.filter(z=>z.isTask&&z.checked),P=[...B],V=B.map((z,F)=>({index:F,isTask:z.isTask})).filter(z=>z.isTask).map(z=>z.index),X=[...K,...O];if(V.forEach((z,F)=>{P[z]=X[F]}),!P.some((z,F)=>z.node!==B[F].node))continue;const Z=$.type.create($.attrs,P.map(z=>z.node)),ee=C.mapping.map(_);C.replaceWith(ee,ee+$.nodeSize,Z),E=!0}E&&(T.view.dispatch(C),requestAnimationFrame(()=>{T.view.dom.querySelectorAll('ul[data-type="taskList"], ul:not([data-type]), ol').forEach(_=>{const B=_.querySelectorAll(":scope > li"),U=new Map;v.current.forEach((K,O)=>{const P=O.replace(/^\d+-/,"");U.set(P,K)}),B.forEach(K=>{const O=K,P=(O.textContent||"").trim().substring(0,50),V=U.get(P);if(!V)return;const X=O.getBoundingClientRect(),G=V.top-X.top;if(Math.abs(G)<2)return;O.style.transform=`translateY(${G}px)`,O.style.transition="none",O.style.zIndex="1",O.offsetHeight,O.style.transition="transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)",O.style.transform="translateY(0)";const Z=()=>{O.style.transform="",O.style.transition="",O.style.zIndex="",O.removeEventListener("transitionend",Z)};O.addEventListener("transitionend",Z),setTimeout(Z,400)})})}))},[]);g.useEffect(()=>{if(!s||!t)return;const T=new Map;t.state.doc.descendants((C,E)=>(C.type.name==="taskItem"&&T.set(E,C.attrs.checked===!0),!0)),x.current=T;const N=({transaction:C})=>{if(!C.docChanged)return;const E=new Map;t.state.doc.descendants((L,$)=>(L.type.name==="taskItem"&&E.set($,L.attrs.checked===!0),!0));const D=x.current;let A=!1;if(D.size>0&&E.size>0){let L=0,$=0;D.forEach(_=>{_&&L++}),E.forEach(_=>{_&&$++}),L!==$&&(A=!0)}x.current=E,A&&setTimeout(()=>{M(t)},150)};return t.on("transaction",N),()=>{t.off("transaction",N)}},[t,s,M]);const k=g.useCallback(()=>{M(t)},[t,M]);return c.jsxs("div",{className:`flex items-center gap-0.5 px-2 py-1.5 border-b border-border/30 bg-muted/30 overflow-x-auto scrollbar-hide editor-toolbar ${o}`,children:[c.jsx($e,{onClick:()=>t.chain().focus().undo().run(),disabled:!h?.canUndo,tooltip:"Undo (Ctrl+Z)",children:c.jsx(I.Undo,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().redo().run(),disabled:!h?.canRedo,tooltip:"Redo (Ctrl+Shift+Z)",children:c.jsx(I.Redo,{size:16})}),c.jsx(_n,{}),c.jsx($e,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:h?.isBold,tooltip:"Bold (Ctrl+B)",children:c.jsx(I.Bold,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:h?.isItalic,tooltip:"Italic (Ctrl+I)",children:c.jsx(I.Italic,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:h?.isUnderline,tooltip:"Underline (Ctrl+U)",children:c.jsx(I.Underline,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:h?.isStrike,tooltip:"Strikethrough",children:c.jsx(I.Strikethrough,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleCode().run(),isActive:h?.isCode,tooltip:"Inline Code (Ctrl+E)",children:c.jsx(I.Code,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleHighlight().run(),isActive:h?.isHighlight,tooltip:"Highlight",children:c.jsx(I.Highlighter,{size:16})}),c.jsx($e,{onClick:()=>r?.(),isActive:h?.isLink,tooltip:"Link (Ctrl+K)",children:c.jsx(I.Link,{size:16})}),c.jsx(_n,{}),c.jsxs(qs,{children:[c.jsx(Vs,{asChild:!0,children:c.jsxs("button",{className:`
              flex items-center gap-1 h-8 px-2 rounded-md shrink-0
              transition-all duration-100 ease-out touch-manipulation
              text-xs font-semibold
              ${h?.isH1||h?.isH2||h?.isH3||h?.isH4||h?.isH5?"bg-secondary text-foreground":"bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80"}
            `,children:[c.jsx("span",{className:"min-w-[18px] text-center",children:h?.isH1?"H1":h?.isH2?"H2":h?.isH3?"H3":h?.isH4?"H4":h?.isH5?"H5":"P"}),c.jsx(I.ChevronDown,{size:12,strokeWidth:2.5,className:"flex-shrink-0"})]})}),c.jsxs(Ks,{align:"start",className:"min-w-[130px]",children:[c.jsxs(Oe,{onClick:()=>t.chain().focus().setParagraph().run(),className:!h?.isH1&&!h?.isH2&&!h?.isH3&&!h?.isH4&&!h?.isH5?"bg-accent font-medium":"",children:[c.jsx("span",{className:"w-6 text-xs font-semibold text-muted-foreground",children:"P"}),"Paragraph"]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),className:h?.isH1?"bg-accent font-medium":"",children:[c.jsx("span",{className:"w-6 text-xs font-semibold text-muted-foreground",children:"H1"}),c.jsx("span",{className:"font-semibold",children:"Heading 1"})]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),className:h?.isH2?"bg-accent font-medium":"",children:[c.jsx("span",{className:"w-6 text-xs font-semibold text-muted-foreground",children:"H2"}),c.jsx("span",{className:"font-semibold",children:"Heading 2"})]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),className:h?.isH3?"bg-accent font-medium":"",children:[c.jsx("span",{className:"w-6 text-xs font-semibold text-muted-foreground",children:"H3"}),c.jsx("span",{className:"font-semibold",children:"Heading 3"})]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeading({level:4}).run(),className:h?.isH4?"bg-accent font-medium":"",children:[c.jsx("span",{className:"w-6 text-xs font-semibold text-muted-foreground",children:"H4"}),c.jsx("span",{className:"font-semibold",children:"Heading 4"})]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeading({level:5}).run(),className:h?.isH5?"bg-accent font-medium":"",children:[c.jsx("span",{className:"w-6 text-xs font-semibold text-muted-foreground",children:"H5"}),c.jsx("span",{className:"font-semibold",children:"Heading 5"})]})]})]}),c.jsx(_n,{}),c.jsx($e,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:h?.isBulletList,tooltip:"Bullet List",children:c.jsx(I.List,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:h?.isOrderedList,tooltip:"Numbered List",children:c.jsx(I.ListOrdered,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleTaskList().run(),isActive:h?.isTaskList,tooltip:"Task List",children:c.jsx(I.CheckSquare,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleBlockquote().run(),isActive:h?.isBlockquote,tooltip:"Quote",children:c.jsx(I.Quote,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().toggleCodeBlock().run(),isActive:h?.isCodeBlock,tooltip:"Code Block",children:c.jsx(I.Code2,{size:16})}),c.jsx($e,{onClick:()=>{h?.isTaskList?t.chain().focus().sinkListItem("taskItem").run():(h?.isBulletList||h?.isOrderedList)&&t.chain().focus().sinkListItem("listItem").run()},disabled:!h?.isBulletList&&!h?.isOrderedList&&!h?.isTaskList,tooltip:"Indent (Tab)",children:c.jsx(I.IndentIncrease,{size:16})}),c.jsx($e,{onClick:()=>{h?.isTaskList?t.chain().focus().liftListItem("taskItem").run():(h?.isBulletList||h?.isOrderedList)&&t.chain().focus().liftListItem("listItem").run()},disabled:!h?.isBulletList&&!h?.isOrderedList&&!h?.isTaskList,tooltip:"Outdent (Shift+Tab)",children:c.jsx(I.IndentDecrease,{size:16})}),c.jsx(_n,{}),c.jsx($e,{onClick:b,tooltip:"Insert Table (3×3)",children:c.jsx(I.Table,{size:16})}),c.jsx($e,{onClick:m,tooltip:"Insert Image",children:c.jsx(I.Image,{size:16})}),c.jsx($e,{onClick:()=>t.chain().focus().setHorizontalRule().run(),tooltip:"Horizontal Rule",children:c.jsx(I.Minus,{size:16})}),c.jsxs(qs,{children:[c.jsx(Vs,{asChild:!0,children:c.jsx("button",{className:"flex items-center justify-center w-8 h-8 rounded-md shrink-0 transition-all duration-100 ease-out touch-manipulation bg-transparent text-foreground hover:bg-secondary active:bg-secondary/80",title:"Insert Callout",children:c.jsx(I.Info,{size:16})})}),c.jsxs(Ks,{align:"start",children:[c.jsxs(Oe,{onClick:()=>w("info"),children:[c.jsx(I.Info,{size:16,className:"mr-2",style:{color:"#3F78BB"}})," Info"]}),c.jsxs(Oe,{onClick:()=>w("note"),children:[c.jsx(I.BookOpen,{size:16,className:"mr-2",style:{color:"#FF8200"}})," Note"]}),c.jsxs(Oe,{onClick:()=>w("prompt"),children:[c.jsx(I.PenLine,{size:16,className:"mr-2",style:{color:"#B244B3"}})," Prompt"]}),c.jsxs(Oe,{onClick:()=>w("resources"),children:[c.jsx(I.Library,{size:16,className:"mr-2",style:{color:"#63B148"}})," Resources"]}),c.jsxs(Oe,{onClick:()=>w("todo"),children:[c.jsx(I.ListTodo,{size:16,className:"mr-2",style:{color:"#4479B3"}})," Todo"]})]})]}),t.isActive("table")&&c.jsxs(qs,{children:[c.jsx(Vs,{asChild:!0,children:c.jsxs(_t,{variant:"ghost",size:"sm",className:"h-8 px-1.5 gap-1 bg-primary/10 shrink-0",children:[c.jsx(I.Table,{size:16}),c.jsx("span",{className:"text-xs hidden sm:inline",children:"Table"})]})}),c.jsxs(Ks,{align:"start",className:"w-56",children:[c.jsxs(Oe,{onClick:()=>t.chain().focus().addColumnBefore().run(),disabled:!t.can().addColumnBefore(),children:[c.jsx(I.Columns,{size:16,className:"mr-2"})," Add Column Before"]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().addColumnAfter().run(),disabled:!t.can().addColumnAfter(),children:[c.jsx(I.Columns,{size:16,className:"mr-2"})," Add Column After"]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().deleteColumn().run(),disabled:!t.can().deleteColumn(),children:[c.jsx(I.Trash2,{size:16,className:"mr-2 text-destructive"})," Delete Column"]}),c.jsx(Gs,{}),c.jsxs(Oe,{onClick:()=>t.chain().focus().addRowBefore().run(),disabled:!t.can().addRowBefore(),children:[c.jsx(I.Rows,{size:16,className:"mr-2"})," Add Row Before"]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().addRowAfter().run(),disabled:!t.can().addRowAfter(),children:[c.jsx(I.Rows,{size:16,className:"mr-2"})," Add Row After"]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().deleteRow().run(),disabled:!t.can().deleteRow(),children:[c.jsx(I.Trash2,{size:16,className:"mr-2 text-destructive"})," Delete Row"]}),c.jsx(Gs,{}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeaderRow().run(),disabled:!t.can().toggleHeaderRow(),children:[c.jsx(I.ToggleLeft,{size:16,className:"mr-2"})," Toggle Header Row"]}),c.jsxs(Oe,{onClick:()=>t.chain().focus().toggleHeaderColumn().run(),disabled:!t.can().toggleHeaderColumn(),children:[c.jsx(I.ToggleLeft,{size:16,className:"mr-2"})," Toggle Header Column"]}),c.jsx(Gs,{}),c.jsxs(Oe,{onClick:()=>t.chain().focus().deleteTable().run(),disabled:!t.can().deleteTable(),className:"text-destructive",children:[c.jsx(I.Trash2,{size:16,className:"mr-2"})," Delete Table"]})]})]}),c.jsx(Sl,{isOpen:u,onClose:()=>d(!1),onInsert:y,position:f}),c.jsx(_n,{}),c.jsx($e,{onClick:k,tooltip:"Sort tasks: unchecked first, checked last",children:c.jsx(I.ArrowUpDown,{size:16})}),a&&c.jsxs(c.Fragment,{children:[c.jsx(_n,{}),c.jsxs(Rs,{children:[c.jsx(ea,{asChild:!0,children:c.jsx("button",{ref:l,onClick:()=>{l.current&&i?.(l.current)},className:`
                  flex items-center justify-center w-8 h-8 rounded-md shrink-0
                  transition-all duration-100 ease-out touch-manipulation
                  bg-transparent text-muted-foreground hover:bg-secondary active:bg-secondary/80
                  hover:text-foreground
                `,children:c.jsx(I.Sparkles,{size:16})})}),c.jsx(ta,{side:"bottom",className:"text-xs",children:"AI Writing Assistant"})]})]}),c.jsx("div",{className:"flex-1 min-w-2"}),n&&c.jsxs(Rs,{children:[c.jsx(ea,{asChild:!0,children:c.jsxs(_t,{variant:"ghost",size:"sm",className:"h-8 px-2 gap-1 shrink-0",onClick:n,children:[c.jsx(I.Copy,{size:16}),c.jsx("span",{className:"text-xs hidden md:inline",children:"Copy MD"})]})}),c.jsx(ta,{side:"bottom",className:"text-xs",children:"Copy content as Markdown"})]})]})});function Od({editor:e,isOpen:t,onClose:n,focusTrigger:r=0,initialSearchQuery:o,editorMode:s="wysiwyg",rawMarkdown:a="",onRawMarkdownChange:i,onMatchesChange:l}){const u=s==="markdown",[d,f]=g.useState(""),[p,h]=g.useState(""),[m,y]=g.useState(!1),[b,w]=g.useState(!1),[v,x]=g.useState(!1),[M,k]=g.useState(!1),[T,N]=g.useState([]),[C,E]=g.useState(0),[D,A]=g.useState(null),[L,$]=g.useState(!1),_=g.useRef(!1),B=g.useRef(null),U=g.useRef(null),K=g.useRef(!1);g.useEffect(()=>{t&&o&&o.trim()&&f(o)},[t,o,r]);const O=g.useCallback(()=>{if(!d||!e){N([]),E(0),A(null);return}const z=[];let F;try{if(b)F=new RegExp(d,m?"g":"gi");else{let j=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");v&&(j=`\\b${j}\\b`),F=new RegExp(j,m?"g":"gi")}A(null)}catch(j){A(j.message),N([]);return}if(u){let j;for(;(j=F.exec(a))!==null;)z.push({from:j.index,to:j.index+j[0].length,text:j[0]})}else{const{doc:j}=e.state;j.descendants((Q,pe)=>{if(Q.isText&&Q.text){let be;for(;(be=F.exec(Q.text))!==null;)z.push({from:pe+be.index,to:pe+be.index+be[0].length,text:be[0]})}return!0})}N(z),z.length>0&&C>=z.length&&E(0)},[d,m,b,v,e,C,u,a]);g.useEffect(()=>{O()},[O]),g.useEffect(()=>{u&&l&&(t&&T.length>0?l(T,C):l([],0))},[u,t,T,C,l]),g.useEffect(()=>{if(!e)return;if(u){typeof e.commands.clearSearchHighlight=="function"&&e.commands.clearSearchHighlight();return}const z=typeof e.commands.setSearchHighlight=="function";t&&d&&z?e.commands.setSearchHighlight({searchTerm:d,caseSensitive:m,useRegex:b,currentMatchIndex:C}):z&&e.commands.clearSearchHighlight()},[e,t,d,m,b,C,u,T,a]),g.useEffect(()=>{!t&&e&&(typeof e.commands.clearSearchHighlight=="function"&&e.commands.clearSearchHighlight(),l&&l([],0),_.current||typeof e.commands.clearAllOccurrences=="function"&&(e.commands.clearAllOccurrences(),$(!1)),_.current=!1)},[t,e,l]),g.useEffect(()=>{if(T.length>0&&C<T.length){const z=T[C];if(u){const j=document.querySelector(".syntax-textarea");if(j&&K.current){const Q=parseInt(getComputedStyle(j).lineHeight)||22,be=a.substring(0,z.from).split(`
`).length;j.scrollTop=Math.max(0,(be-3)*Q)}K.current&&(K.current=!1);return}const F=e.view.domAtPos(z.from);F.node&&F.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"}),K.current&&(K.current=!1)}},[C,T,e,u,a]),g.useEffect(()=>{t&&B.current&&(B.current.focus(),B.current.select())},[t,r]);const P=g.useCallback(()=>{T.length!==0&&(K.current=!0,E(z=>(z+1)%T.length))},[T.length]),V=g.useCallback(()=>{T.length!==0&&(K.current=!0,E(z=>(z-1+T.length)%T.length))},[T.length]),X=g.useCallback(()=>{if(T.length===0||C>=T.length)return;const z=T[C];if(u&&i){const F=a.substring(0,z.from)+p+a.substring(z.to);i(F),setTimeout(O,10);return}e.chain().focus().setTextSelection({from:z.from,to:z.to}).deleteSelection().insertContent(p).run(),setTimeout(O,10)},[T,C,p,e,O,u,a,i]),G=g.useCallback(()=>{if(T.length===0)return;if(u&&i){const F=[...T].sort((Q,pe)=>pe.from-Q.from);let j=a;F.forEach(Q=>{j=j.substring(0,Q.from)+p+j.substring(Q.to)}),i(j),setTimeout(O,10);return}const z=[...T].sort((F,j)=>j.from-F.from);e.chain().focus(),z.forEach(F=>{e.chain().setTextSelection({from:F.from,to:F.to}).deleteSelection().insertContent(p).run()}),setTimeout(O,10)},[T,p,e,O,u,a,i]),Z=g.useCallback(()=>{if(T.length===0||!d||!(typeof e.commands.selectAllOccurrences=="function"))return;e.commands.selectAllOccurrences({searchTerm:d,caseSensitive:m,useRegex:b,wholeWord:v})&&($(!0),_.current=!0,typeof e.commands.clearSearchHighlight=="function"&&e.commands.clearSearchHighlight(),n(),e.commands.focus())},[T,d,m,b,v,e,n]),ee=g.useCallback(z=>{z.key==="Enter"?(z.preventDefault(),z.shiftKey?V():P(),B.current?.focus()):z.key==="Escape"?(z.preventDefault(),n()):z.key==="h"&&(z.ctrlKey||z.metaKey)?(z.preventDefault(),k(F=>!F)):z.key==="l"&&(z.ctrlKey||z.metaKey)&&z.shiftKey&&(z.preventDefault(),Z())},[P,V,n,Z]);return t?c.jsxs("div",{className:"find-replace-panel",onKeyDown:ee,children:[c.jsxs("div",{className:"find-replace-row",children:[c.jsxs("div",{className:"find-replace-input-wrapper",children:[c.jsx(I.Search,{size:14,className:"find-replace-icon"}),c.jsx("input",{ref:B,type:"text",placeholder:"Find...",value:d,onChange:z=>f(z.target.value),className:`find-replace-input ${D?"has-error":""}`}),D&&c.jsx("span",{className:"find-replace-error",title:D,children:"!"})]}),c.jsx("span",{className:"find-replace-count",children:T.length>0?`${C+1} of ${T.length}`:d?"No results":""}),c.jsx("button",{onClick:V,disabled:T.length===0,className:"find-replace-btn",title:"Previous match (Shift+Enter)",children:c.jsx(I.ChevronUp,{size:16})}),c.jsx("button",{onClick:P,disabled:T.length===0,className:"find-replace-btn",title:"Next match (Enter)",children:c.jsx(I.ChevronDown,{size:16})}),c.jsx("button",{onClick:Z,disabled:T.length===0,className:`find-replace-btn ${L?"active":""}`,title:`Select all occurrences (${navigator.platform?.includes("Mac")?"⌘":"Ctrl"}+Shift+L) — Apply formatting to all ${T.length} matches`,children:c.jsx(I.MousePointerClick,{size:16})}),c.jsx("div",{className:"find-replace-separator"}),c.jsx("button",{onClick:()=>y(z=>!z),className:`find-replace-btn ${m?"active":""}`,title:"Match case",children:c.jsx(I.CaseSensitive,{size:16})}),c.jsx("button",{onClick:()=>x(z=>!z),className:`find-replace-btn ${v?"active":""}`,title:"Match whole word",children:c.jsx(I.WholeWord,{size:16})}),c.jsx("button",{onClick:()=>w(z=>!z),className:`find-replace-btn ${b?"active":""}`,title:"Use regex",children:c.jsx(I.Regex,{size:16})}),c.jsx("button",{onClick:()=>k(z=>!z),className:`find-replace-btn ${M?"active":""}`,title:"Toggle replace (Ctrl+H)",children:c.jsx(I.Replace,{size:16})}),c.jsx("button",{onClick:n,className:"find-replace-btn",title:"Close (Escape)",children:c.jsx(I.X,{size:16})})]}),M&&c.jsxs("div",{className:"find-replace-row",children:[c.jsxs("div",{className:"find-replace-input-wrapper",children:[c.jsx(I.Replace,{size:14,className:"find-replace-icon"}),c.jsx("input",{ref:U,type:"text",placeholder:"Replace with...",value:p,onChange:z=>h(z.target.value),className:"find-replace-input"})]}),c.jsx("button",{onClick:X,disabled:T.length===0,className:"find-replace-btn replace-btn",title:"Replace current",children:"Replace"}),c.jsxs("button",{onClick:G,disabled:T.length===0,className:"find-replace-btn replace-btn",title:"Replace all",children:[c.jsx(I.ReplaceAll,{size:14}),"All"]})]})]}):null}const Et=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"⌘":"Ctrl",Hk=({editor:e})=>{const[t,n]=g.useState(!1),[r,o]=g.useState(0),[s,a]=g.useState(0),[i,l]=g.useState(""),[u,d]=g.useState(""),[f,p]=g.useState(!1),[h,m]=g.useState(!1);g.useEffect(()=>{if(!e)return;const N=()=>{const E=e.storage.selectAllOccurrences;E?(n(E.isActive),o(E.ranges.length),a(E.allMatches.length),l(E.searchTerm),d(E.typedBuffer),p(E.isTypingReplace),m(E.isIncremental)):(n(!1),o(0),a(0))},C=()=>{N()};return e.on("transaction",C),N(),()=>{e.off("transaction",C)}},[e]);const y=g.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("bold"),e.commands.focus()},[e]),b=g.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("italic"),e.commands.focus()},[e]),w=g.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("underline"),e.commands.focus()},[e]),v=g.useCallback(()=>{e.commands.toggleMarkOnAllOccurrences("strike"),e.commands.focus()},[e]),x=g.useCallback(()=>{e.commands.deleteAllOccurrences(),e.commands.focus()},[e]),M=g.useCallback(()=>{e.commands.clearAllOccurrences(),e.commands.focus()},[e]),k=g.useCallback(()=>{e.commands.selectNextOccurrence(),e.commands.focus()},[e]),T=g.useCallback(()=>{i&&(e.commands.selectAllOccurrences({searchTerm:i,caseSensitive:!1,useRegex:!1,wholeWord:!1}),e.commands.focus())},[e,i]);return!t||r===0?null:c.jsxs("div",{className:"select-all-action-bar",children:[c.jsxs("div",{className:"select-all-action-bar-inner",children:[c.jsxs("div",{className:"select-all-action-bar-count",children:[c.jsx("span",{className:"select-all-action-bar-count-number",children:h&&s>0?`${r}/${s}`:r}),c.jsx("span",{className:"select-all-action-bar-count-label",children:"selected"})]}),c.jsx("div",{className:"select-all-action-bar-preview",children:f?c.jsxs(c.Fragment,{children:[c.jsx(I.Type,{size:12,className:"select-all-action-bar-preview-icon"}),c.jsx("span",{className:"select-all-action-bar-preview-old",children:i}),c.jsx("span",{className:"select-all-action-bar-preview-arrow",children:"→"}),c.jsx("span",{className:"select-all-action-bar-preview-new",children:u||"∅"})]}):c.jsx(c.Fragment,{children:c.jsxs("span",{className:"select-all-action-bar-preview-term",children:['"',i,'"']})})}),c.jsx("div",{className:"select-all-action-bar-separator"}),h&&r<s&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:k,className:"select-all-action-bar-btn select-all-action-bar-btn-primary",title:`Select next occurrence (${Et}+D)`,children:c.jsx(I.Plus,{size:14})}),c.jsx("button",{onClick:T,className:"select-all-action-bar-btn select-all-action-bar-btn-secondary",title:`Select all remaining (${Et}+Shift+L)`,children:"All"}),c.jsx("div",{className:"select-all-action-bar-separator"})]}),c.jsx("button",{onClick:y,className:"select-all-action-bar-btn",title:`Bold all occurrences (${Et}+B)`,children:c.jsx(I.Bold,{size:14})}),c.jsx("button",{onClick:b,className:"select-all-action-bar-btn",title:`Italic all occurrences (${Et}+I)`,children:c.jsx(I.Italic,{size:14})}),c.jsx("button",{onClick:w,className:"select-all-action-bar-btn",title:`Underline all occurrences (${Et}+U)`,children:c.jsx(I.Underline,{size:14})}),c.jsx("button",{onClick:v,className:"select-all-action-bar-btn",title:"Strikethrough all occurrences",children:c.jsx(I.Strikethrough,{size:14})}),c.jsx("div",{className:"select-all-action-bar-separator"}),c.jsx("button",{onClick:x,className:"select-all-action-bar-btn select-all-action-bar-btn-danger",title:"Delete all occurrences",children:c.jsx(I.Trash2,{size:14})}),c.jsx("button",{onClick:M,className:"select-all-action-bar-btn",title:"Exit select all mode (Escape)",children:c.jsx(I.X,{size:14})})]}),c.jsx("div",{className:"select-all-action-bar-hint",children:h&&r<s?c.jsxs(c.Fragment,{children:[c.jsxs("kbd",{children:[Et,"+D"]})," next · ",c.jsxs("kbd",{children:[Et,"+Shift+L"]})," all · Type to replace · ",c.jsx("kbd",{children:"Esc"})," to exit · ",c.jsxs("kbd",{children:[Et,"+Z"]})," undo"]}):c.jsxs(c.Fragment,{children:["Type to replace all · ",c.jsx("kbd",{children:"Esc"})," to exit · ",c.jsx("kbd",{children:"Backspace"})," to delete · ",c.jsxs("kbd",{children:[Et,"+Z"]})," undo"]})})]})},$d=g.memo(Hk),bo="-dismissed";function zk(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return t}function _d(e,t={}){const{storageKey:n="paragon-editor-content",debounceMs:r=1e3,enabled:o=!0,onSave:s,onRecover:a}=t,[i,l]=g.useState({status:"idle",lastSaved:null,hasRecoverableContent:!1,error:null}),u=g.useRef(null),d=g.useRef(""),f=g.useRef(0);g.useEffect(()=>{if(o&&!(!e||e.isDestroyed))try{const w=localStorage.getItem(n),v=localStorage.getItem(n+bo);if(w&&!v){let x="";try{x=e.getHTML()||""}catch{return}w!==x&&w.length>50&&l(M=>({...M,hasRecoverableContent:!0}))}}catch(w){console.warn("useAutoSave: Error checking for recoverable content",w)}},[e,n,o]);const p=g.useCallback(()=>{if(!(!e||!o||e.isDestroyed))try{const w=e.getHTML(),v=zk(w);if(v===f.current&&w.length===d.current.length){l(x=>({...x,status:"saved"}));return}if(w.length<20)return;l(x=>({...x,status:"saving"})),localStorage.setItem(n,w),localStorage.setItem(n+"-timestamp",new Date().toISOString()),d.current=w,f.current=v,l(x=>({...x,status:"saved",lastSaved:new Date,error:null})),s?.(w),setTimeout(()=>{l(x=>x.status==="saved"?{...x,status:"idle"}:x)},2e3)}catch(w){console.error("useAutoSave: Error saving content",w),l(v=>({...v,status:"error",error:w instanceof Error?w.message:"Failed to save"}))}},[e,n,o,s]);g.useEffect(()=>{if(!e||!o||e.isDestroyed)return;const w=()=>{e.isDestroyed||(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{p()},r))};return e.on("update",w),()=>{e.off("update",w),u.current&&clearTimeout(u.current)}},[e,r,o,p]),g.useEffect(()=>{if(!e||!o||e.isDestroyed)return;const w=()=>{if(!e.isDestroyed)try{const v=e.getHTML();v.length>=20&&(localStorage.setItem(n,v),localStorage.setItem(n+"-timestamp",new Date().toISOString()))}catch(v){console.warn("useAutoSave: Error saving on unload",v)}};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[e,n,o]);const h=g.useCallback(()=>{u.current&&clearTimeout(u.current),p()},[p]),m=g.useCallback(()=>{try{localStorage.removeItem(n),localStorage.removeItem(n+"-timestamp"),localStorage.removeItem(n+bo),d.current="",l({status:"idle",lastSaved:null,hasRecoverableContent:!1,error:null})}catch(w){console.warn("useAutoSave: Error clearing content",w)}},[n]),y=g.useCallback(()=>{if(!e||e.isDestroyed)return null;try{const w=localStorage.getItem(n);return w&&e&&!e.isDestroyed?(l(v=>({...v,hasRecoverableContent:!1})),queueMicrotask(()=>{if(e&&!e.isDestroyed)try{e.commands.setContent(w),d.current=w,localStorage.removeItem(n+bo),a?.(w)}catch(v){console.warn("useAutoSave: Error setting content during recovery",v)}}),w):null}catch(w){return console.warn("useAutoSave: Error recovering content",w),null}},[e,n,a]),b=g.useCallback(()=>{try{localStorage.setItem(n+bo,"true"),l(w=>({...w,hasRecoverableContent:!1}))}catch(w){console.warn("useAutoSave: Error dismissing recovery",w)}},[n]);return{...i,save:h,clear:m,recover:y,dismissRecovery:b}}const Bk=200;function Hd(e,t={}){const{debounceMs:n=500,extendedStats:r=!1,enabled:o=!0}=t,[s,a]=g.useState({words:0,characters:0,charactersWithSpaces:0,paragraphs:0,sentences:0,readingTime:0,isCalculating:!1}),i=g.useRef(null),l=g.useRef(""),u=g.useCallback(d=>{const f=d.trim(),p=f.length>0?f.split(/\s+/).filter(v=>v.length>0).length:0,h=f.replace(/\s/g,"").length,m=d.length;let y=0,b=0;r&&(y=f.length>0?f.split(/\n\s*\n/).filter(v=>v.trim().length>0).length:0,b=f.length>0?(f.match(/[.!?]+/g)||[]).length:0);const w=Math.max(1,Math.ceil(p/Bk));return{words:p,characters:h,charactersWithSpaces:m,paragraphs:y,sentences:b,readingTime:w,isCalculating:!1}},[r]);return g.useEffect(()=>{if(!e||!o)return;const d=()=>{i.current&&clearTimeout(i.current),a(f=>({...f,isCalculating:!0})),i.current=setTimeout(()=>{try{const f=e.getText();if(f===l.current){a(h=>({...h,isCalculating:!1}));return}l.current=f;const p=u(f);a(p)}catch(f){console.warn("useWordCount: Error calculating word count",f),a(p=>({...p,isCalculating:!1}))}},n)};return d(),e.on("update",d),()=>{e.off("update",d),i.current&&clearTimeout(i.current)}},[e,n,o,u]),s}function zd({status:e,lastSaved:t,className:n=""}){const r=o=>{if(!o)return"";const a=new Date().getTime()-o.getTime(),i=Math.floor(a/1e3),l=Math.floor(i/60),u=Math.floor(l/60);return i<10?"Just now":i<60?`${i}s ago`:l<60?`${l}m ago`:u<24?`${u}h ago`:o.toLocaleDateString()};return c.jsxs("div",{className:`auto-save-indicator flex items-center gap-1.5 text-xs ${n}`,title:t?`Last saved: ${t.toLocaleString()}`:"Not saved yet",children:[e==="idle"&&t&&c.jsxs(c.Fragment,{children:[c.jsx(I.Cloud,{className:"w-3.5 h-3.5 text-muted-foreground"}),c.jsxs("span",{className:"text-muted-foreground",children:["Saved ",r(t)]})]}),e==="saving"&&c.jsxs(c.Fragment,{children:[c.jsx(I.Loader2,{className:"w-3.5 h-3.5 text-cyan-500 animate-spin"}),c.jsx("span",{className:"text-cyan-500",children:"Saving..."})]}),e==="saved"&&c.jsxs(c.Fragment,{children:[c.jsx(I.Check,{className:"w-3.5 h-3.5 text-emerald-500"}),c.jsx("span",{className:"text-emerald-500",children:"Saved"})]}),e==="error"&&c.jsxs(c.Fragment,{children:[c.jsx(I.CloudOff,{className:"w-3.5 h-3.5 text-red-500"}),c.jsx("span",{className:"text-red-500",children:"Save failed"})]})]})}function Bd({onRecover:e,onDismiss:t,className:n=""}){return c.jsxs("div",{className:`recovery-banner flex items-center justify-between gap-4 px-4 py-3 rounded-lg ${n}`,children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx(I.AlertCircle,{className:"w-5 h-5 recovery-banner-icon flex-shrink-0"}),c.jsx("span",{className:"text-sm recovery-banner-text",children:"We found unsaved content from your last session."})]}),c.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[c.jsxs("button",{onClick:e,className:"recovery-banner-btn flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-md transition-colors duration-150",children:[c.jsx(I.RotateCcw,{className:"w-4 h-4"}),"Recover"]}),c.jsx("button",{onClick:t,className:"recovery-banner-dismiss p-2 rounded-md transition-colors duration-150",title:"Dismiss","aria-label":"Dismiss recovery banner",children:c.jsx(I.X,{className:"w-5 h-5"})})]})]})}const Wk=/\[\[([^\[\]]+)\]\]$/,Wd=me.Mark.create({name:"wikiLink",addOptions(){return{HTMLAttributes:{},onWikiLinkClick:void 0,validateLink:void 0,linkClass:"wiki-link",invalidLinkClass:"wiki-link-invalid"}},addAttributes(){return{pageName:{default:null,parseHTML:e=>e.getAttribute("data-page-name"),renderHTML:e=>e.pageName?{"data-page-name":e.pageName}:{}}}},parseHTML(){return[{tag:"span[data-wiki-link]"}]},renderHTML({HTMLAttributes:e}){const t=e["data-page-name"]||"",n=this.options.validateLink?this.options.validateLink(t):!0;return["span",me.mergeAttributes(this.options.HTMLAttributes,e,{"data-wiki-link":"",class:n?this.options.linkClass:`${this.options.linkClass} ${this.options.invalidLinkClass}`}),0]},addCommands(){return{setWikiLink:e=>({commands:t})=>t.setMark(this.name,e),unsetWikiLink:()=>({commands:e})=>e.unsetMark(this.name)}},addInputRules(){return this.type,[new me.InputRule({find:Wk,handler:({state:e,range:t,match:n,chain:r})=>{try{const o=n[1];if(!o)return;const s=t.from,a=t.to;r().deleteRange({from:s,to:a}).insertContentAt(s,{type:"text",text:o,marks:[{type:"wikiLink",attrs:{pageName:o}}]}).run()}catch(o){console.warn("WikiLinkSafe: Error in input rule",o)}}})]},onCreate(){const{onWikiLinkClick:e}=this.options;if(!e)return;const t=n=>{const r=n.target;if(r.hasAttribute("data-wiki-link")){const o=r.getAttribute("data-page-name");o&&(n.preventDefault(),e(o))}};this.editor.view.dom.addEventListener("click",t),this._clickHandler=t},onDestroy(){const e=this._clickHandler;e&&this.editor.view.dom.removeEventListener("click",e)}}),Mt={header:/^#{1,6}\s+/m,bold:/\*\*[^*]+\*\*/,highlight:/==[^=]+==/,codeBlock:/```[\s\S]*?```/,list:/^\s*[-*]\s+/m,taskList:/^\s*[-*]\s*\[[ x]\]/im,link:/\[.+\]\(.+\)/,table:/^\|[^\n]+\n\|[-:\s|]+/m,callout:/```(?:info|note|prompt|resources|todo|ad-\w+)\s*\n[\s\S]*?```/},Fk=["info","note","prompt","resources","todo"];function Uk(e){return e.length<3?!1:!!(Mt.header.test(e)||Mt.bold.test(e)||Mt.list.test(e)||Mt.taskList.test(e)||Mt.codeBlock.test(e)||Mt.callout.test(e)||Mt.highlight.test(e)||Mt.link.test(e)||Mt.table.test(e))}function jk(e){const t=e.split(/\s*\\?\|\s*/).map(s=>s.trim());let n="",r="left",o=null;return t.length===1?n=t[0]:t.length===2?(n=t[0],/^\d+$/.test(t[1])?o=t[1]:["left","center","right"].includes(t[1])&&(r=t[1])):t.length===3&&(n=t[0],["left","center","right"].includes(t[1])&&(r=t[1]),/^\d+$/.test(t[2])&&(o=t[2])),{alt:n,align:r,width:o}}function Yk(e,t){const{alt:n,align:r,width:o}=jk(e),s={left:"margin-right: auto;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto;"}[r]||"margin-right: auto;",a=o?` width="${o}" style="width: ${o}px"`:"";return`<figure class="image-resizer" style="${s}"><img src="${t.trim()}" alt="${n}" data-align="${r}"${a} /></figure>`}function yo(e){let t=e;return t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)","g"),"<em>$1</em>"),t=t.replace(/~~(.+?)~~/g,"<s>$1</s>"),t=t.replace(/`([^`]+)`/g,"<code>$1</code>"),t=t.replace(/==(.+?)==/g,"<mark>$1</mark>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),t}function Fd(e){if(!/!\[[^\]]*\]\([^)]+\)/.test(e))return`<p>${yo(e)}</p>`;const n=/(!\[[^\]]*\]\([^)]+\))/g,r=e.split(n).filter(s=>s.trim()),o=[];for(const s of r){const a=s.match(/^!\[([^\]]*)\]\(([^)]+)\)$/);a?o.push(Yk(a[1],a[2])):o.push(`<p>${yo(s.trim())}</p>`)}return o.join("")}function qk(e){const t=e.match(/^( *)/),n=t?t[1].length:0,r=Math.floor(n/2),o=e.trimStart(),s=o.match(/^-\s*\[(x| )\]\s*(.*)$/);if(s)return{type:"task",depth:r,text:s[2].trim(),checked:s[1]==="x"};const a=o.match(/^-\s+(.+)$/);if(a)return{type:"ul",depth:r,text:a[1].trim()};const i=o.match(/^\d+\.\s+(.+)$/);return i?{type:"ol",depth:r,text:i[2].trim()}:null}function Vk(e){if(e.length===0)return"";const t=(o,s)=>{let a="",i=o;const l=e[i]?.type||"ul",u=l==="task",d=u?'<ul data-type="taskList">':`<${l==="ol"?"ol":"ul"}>`,f=u?"</ul>":`</${l==="ol"?"ol":"ul"}>`;for(a+=d;i<e.length&&e[i].depth>=s;){const p=e[i];if(p.depth===s){if(u?a+=`<li data-type="taskItem" data-checked="${p.checked||!1}"><p>${yo(p.text)}</p>`:a+=`<li><p>${yo(p.text)}</p>`,i+1<e.length&&e[i+1].depth>s){const h=t(i+1,e[i+1].depth);a+=h.html,i=h.nextIdx}else i++;a+="</li>"}else i++}return a+=f,{html:a,nextIdx:i}},n=Math.min(...e.map(o=>o.depth));return t(0,n).html}function Ud(e){if(!e.trim())return"<p></p>";const t=/<br\s*\/?>/i.test(e),n=/(?:^|<br\s*\/?>)\s*(?:- |\d+\. )/i.test(e);if(!t&&!n)return Fd(e);const r=e.split(/<br\s*\/?>/i).filter(i=>i.trim()),o=[];let s=[];const a=()=>{s.length!==0&&(o.push(Vk(s)),s=[])};for(const i of r){const l=qk(i);if(l){if(s.length>0){const u=s[0].type;l.depth===0&&l.type!==u&&a()}s.push(l)}else a(),o.push(Fd(i.trim()))}return a(),o.join("")}function Kk(e){const t=e.trim().split(`
`);if(t.length<2)return"";const r=t[0].split("|").map(i=>i.trim()).filter(i=>i.length>0);if(r.length===0||!t[1].includes("-"))return"";const s=t.slice(2);let a="<table><thead><tr>";for(const i of r)a+="<th>"+Ud(i)+"</th>";a+="</tr></thead><tbody>";for(const i of s){if(!i.trim())continue;const l=i.split("|"),u=[];for(let d=0;d<l.length;d++){const f=l[d].trim();d===0&&f===""&&i.trim().startsWith("|")||d===l.length-1&&f===""&&i.trim().endsWith("|")||u.push(f)}if(u.length!==0){a+="<tr>";for(let d=0;d<r.length;d++){const f=u[d]||"";a+="<td>"+Ud(f)+"</td>"}a+="</tr>"}}return a+="</tbody></table>",a}function Gk(e){let t=e;const n=/^(\|[^\n]*(?:\n\|[^\n]*)*)/gm,r=[];t=t.replace(n,i=>{const l=i.split(`
`);if(l.length>=2){const u=l[1];if(/^\|?[\s\-:|]+\|?$/.test(u)&&u.includes("-")){const d=Kk(i);if(d){const f=`MANUSTABLEPLACEHOLDER${r.length}END`;return r.push(d),f}}}return i});const o=[];t=t.replace(/```(ad-\w+)\s*\n([\s\S]*?)```/g,(i,l,u)=>{let d=u.trim();d=d.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),d=d.replace(/__([^_]+)__/g,"<strong>$1</strong>"),d=d.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),d=d.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),d=d.replace(/`([^`]+)`/g,"<code>$1</code>");const f="info";d.startsWith("<")||(d=`<p>${d}</p>`);const p=`MANUSCODEPLACEHOLDER${o.length}END`;return o.push(`<div data-callout="" data-type="${f}" class="callout callout-${f}">${d}</div>`),p}),Fk.forEach(i=>{const l=new RegExp(`\`\`\`${i}\\s*\\n([\\s\\S]*?)\`\`\``,"g");t=t.replace(l,(u,d)=>{let f=d.trim();f=f.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),f=f.replace(/__([^_]+)__/g,"<strong>$1</strong>"),f=f.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),f=f.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),f=f.replace(/`([^`]+)`/g,"<code>$1</code>"),f.startsWith("<")||(f=`<p>${f}</p>`);const p=`MANUSCODEPLACEHOLDER${o.length}END`;return o.push(`<div data-callout="" data-type="${i}" class="callout callout-${i}">${f}</div>`),p})}),t=t.replace(/```([\w-]*)\n([\s\S]*?)```/g,(i,l,u)=>{const d=l||"plaintext",f=u.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),p=`MANUSCODEPLACEHOLDER${o.length}END`;return o.push(`<pre><code class="language-${d}">${f}</code></pre>`),p}),t=t.replace(/`([^`]+)`/g,"<code>$1</code>"),t=t.replace(/^(#{1,6})\s+(.+)$/gm,(i,l,u)=>{const d=l.length;return`<h${d}>${u}</h${d}>`}),t=t.replace(/^(\s*)[-*]\s*\[x\]\s+(.+)$/gim,'$1<li data-type="taskItem" data-checked="true"><p>$2</p></li>'),t=t.replace(/^(\s*)[-*]\s*\[\s*\]\s+(.+)$/gim,'$1<li data-type="taskItem" data-checked="false"><p>$2</p></li>'),t=t.replace(/^(\s*)[-*]\s+(?!\[)(.+)$/gm,"$1<li><p>$2</p></li>"),t=t.replace(/^(\s*)\d+\.\s+(.+)$/gm,"$1<li><p>$2</p></li>"),t=t.replace(/(<li data-type="taskItem"[^>]*>[\s\S]*?<\/li>\n?)+/g,'<ul data-type="taskList">$&</ul>'),t=t.replace(/(<li><p>[\s\S]*?<\/p><\/li>\n?)+/g,"<ul>$&</ul>"),t=t.replace(/^>\s+(.+)$/gm,"<blockquote><p>$1</p></blockquote>"),t=t.replace(/^[-*_]{3,}$/gm,"<hr>"),t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),t=t.replace(/__([^_]+)__/g,"<strong>$1</strong>"),t=t.replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>"),t=t.replace(new RegExp("(?<!_)_([^_]+)_(?!_)","g"),"<em>$1</em>"),t=t.replace(/~~([^~]+)~~/g,"<s>$1</s>"),t=t.replace(new RegExp("(?<!`)==((?:(?!==)[^\\n])+)==(?!`)","g"),"<mark>$1</mark>"),t=t.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(i,l,u)=>{const d=l.split("|").map(y=>y.trim());let f="",p="left",h=null;d.length===1?f=d[0]:d.length===2?(f=d[0],/^\d+$/.test(d[1])?h=d[1]:["left","center","right"].includes(d[1])?p=d[1]:f=l):d.length===3?(f=d[0],["left","center","right"].includes(d[1])&&(p=d[1]),/^\d+$/.test(d[2])&&(h=d[2])):f=l;const m=h?` width="${h}" style="width: ${h}px"`:"";return`<img src="${u.trim()}" alt="${f}" data-align="${p}"${m}>`}),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),t=t.split(`
`).map(i=>{const l=i.trim();return l?/^<[a-z]/.test(l)||/^<\//.test(l)||l.startsWith("MANUSTABLEPLACEHOLDER")||l.startsWith("MANUSCODEPLACEHOLDER")?i:`<p>${l}</p>`:""}).join(`
`),t=t.replace(/<p>\s*<\/p>/g,"");for(let i=0;i<r.length;i++)t=t.replace(`MANUSTABLEPLACEHOLDER${i}END`,r[i]);for(let i=0;i<o.length;i++)t=t.replace(`MANUSCODEPLACEHOLDER${i}END`,o[i]);return t}const jd=me.Extension.create({name:"markdownPasteSafe",addOptions(){return{enableMarkdownPaste:!0}},addProseMirrorPlugins(){if(!this.options.enableMarkdownPaste)return[];const e=this.editor;return[new ge.Plugin({key:new ge.PluginKey("markdownPaste"),props:{handlePaste(t,n,r){const o=n.clipboardData;if(!o)return!1;const s=o.getData("text/html");if(s&&s.trim())return!1;const a=o.getData("text/plain");if(!a||!Uk(a))return!1;n.preventDefault();const i=Gk(a);return e.commands.insertContent(i,{parseOptions:{preserveWhitespace:!1}}),!0}}})]}}),Yd=new ge.PluginKey("collapsibleHeading");function vo(e,t,n){return`h${t}-${n}-${e.textContent.slice(0,50)}`}let Hn=null;function na(e,t,n){const r=[],o=[];e.descendants((l,u)=>{if(l.type.name==="heading"&&n.levels.includes(l.attrs.level)){const d=vo(l,l.attrs.level,u);o.push({pos:u,level:l.attrs.level,id:d,isCollapsed:t.collapsedHeadings.has(d),nodeSize:l.nodeSize})}});const s=[];for(let l=0;l<o.length;l++){const u=o[l];if(u.isCollapsed){const d=u.pos+u.nodeSize;let f=e.content.size;for(let p=l+1;p<o.length;p++)if(o[p].level<=u.level){f=o[p].pos;break}d<f&&s.push({start:d,end:f})}}const a=[];for(const l of s)if(a.length===0)a.push(l);else{const u=a[a.length-1];l.start<=u.end?u.end=Math.max(u.end,l.end):a.push(l)}function i(l){for(const u of a)if(l>=u.start&&l<u.end)return!0;return!1}return e.descendants((l,u)=>{if(l.type.name==="heading"&&n.levels.includes(l.attrs.level)){const d=vo(l,l.attrs.level,u),f=t.collapsedHeadings.has(d),p=i(u);r.push(Me.Decoration.node(u,u+l.nodeSize,{class:`collapsible-heading collapsible-heading-level-${l.attrs.level} ${f?"is-collapsed":"is-expanded"}${p?" collapsible-heading-hidden":""}`,"data-heading-id":d,"data-heading-level":String(l.attrs.level)}));const h=Me.Decoration.widget(u+l.nodeSize-1,()=>{const m=document.querySelector(`button.collapsible-heading-chevron[data-heading-id="${d}"]`);if(m){m.classList.contains("collapsed")!==f&&(m.classList.remove("collapsed","expanded"),m.classList.add(f?"collapsed":"expanded"),m.title=f?"Click to expand":"Click to collapse");const v=m.parentElement;if(v)return v}const y=document.createElement("span");y.className="collapsible-heading-chevron-wrapper",y.setAttribute("contenteditable","false");const b=document.createElement("button");return b.className=`collapsible-heading-chevron ${f?"collapsed":"expanded"}`,b.setAttribute("data-heading-id",d),b.setAttribute("data-heading-level",String(l.attrs.level)),b.setAttribute("contenteditable","false"),b.setAttribute("tabindex","-1"),b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',b.title=f?"Click to expand":"Click to collapse",b.addEventListener("click",w=>{w.preventDefault(),w.stopPropagation();const v=b.classList.contains("collapsed");b.classList.remove("collapsed","expanded"),b.classList.add(v?"expanded":"collapsed"),b.title=v?"Click to collapse":"Click to expand",t.collapsedHeadings.has(d)?t.collapsedHeadings.delete(d):t.collapsedHeadings.add(d),Hn&&Hn.dispatch(Hn.state.tr.setMeta("collapsibleHeading",{toggled:d}))}),y.appendChild(b),y},{side:1,key:`chevron-${d}`});r.push(h)}else l.isBlock&&i(u)&&r.push(Me.Decoration.node(u,u+l.nodeSize,{class:"collapsible-heading-hidden"}))}),Me.DecorationSet.create(e,r)}const qd=me.Extension.create({name:"collapsibleHeading",addOptions(){return{levels:[1,2,3,4,5,6]}},addStorage(){return{collapsedHeadings:new Set}},addCommands(){return{toggleHeadingCollapse:e=>({editor:t,tr:n})=>{const r=this.storage,o=n.doc.nodeAt(e);if(!o||o.type.name!=="heading")return!1;const s=vo(o,o.attrs.level,e);return r.collapsedHeadings.has(s)?r.collapsedHeadings.delete(s):r.collapsedHeadings.add(s),t.view.dispatch(n.setMeta("collapsibleHeading",{toggled:s})),!0},expandAllHeadings:()=>({editor:e,tr:t})=>(this.storage.collapsedHeadings.clear(),e.view.dispatch(t.setMeta("collapsibleHeading",{expandAll:!0})),!0),collapseAllHeadings:()=>({editor:e,tr:t})=>{const n=this.storage;return t.doc.descendants((o,s)=>{o.type.name==="heading"&&n.collapsedHeadings.add(vo(o,o.attrs.level,s))}),e.view.dispatch(t.setMeta("collapsibleHeading",{collapseAll:!0})),!0}}},addProseMirrorPlugins(){const e=this.storage,t=this.options;return[new ge.Plugin({key:Yd,view(n){return Hn=n,{update(r){Hn=r},destroy(){Hn=null}}},state:{init(n,r){return{collapsedHeadings:new Set,decorations:na(r.doc,e,t),docVersion:0}},apply(n,r,o,s){return n.getMeta("collapsibleHeading")||n.docChanged?{collapsedHeadings:new Set(e.collapsedHeadings),decorations:na(s.doc,e,t),docVersion:r.docVersion+1}:{...r,decorations:r.decorations.map(n.mapping,n.doc)}}},props:{decorations(n){const r=Yd.getState(n);return r?.decorations?r.decorations:na(n.doc,e,t)}}})]}}),Xk=/\[([^\]]+)\]\(([^)]+)\)$/,Zk=/^(https?:\/\/|www\.)[^\s]+$/i,Vd=me.Extension.create({name:"markdownLinkInputRule",addInputRules(){return[new me.InputRule({find:Xk,handler:({state:e,range:t,match:n,chain:r})=>{const o=n[1];let s=n[2];s&&!s.startsWith("http://")&&!s.startsWith("https://")&&(s.startsWith("www."),s="https://"+s),r().deleteRange(t).insertContent({type:"text",text:o,marks:[{type:"link",attrs:{href:s,target:"_blank",rel:"noopener noreferrer"}}]}).run()}})]},addProseMirrorPlugins(){const e=this.editor;return[new ge.Plugin({key:new ge.PluginKey("pasteUrlAsLink"),props:{handlePaste(t,n){const r=n.clipboardData;if(!r)return!1;const o=r.getData("text/plain");if(!o)return!1;const s=o.trim();if(!Zk.test(s))return!1;const{state:a}=t,{selection:i}=a,{from:l,to:u,empty:d}=i;let f=s;if(!f.startsWith("http://")&&!f.startsWith("https://")&&(f.startsWith("www."),f="https://"+f),!d&&a.doc.textBetween(l,u))return e.chain().focus().extendMarkRange("link").setLink({href:f}).run(),!0;const p=a.schema.marks.link.create({href:f}),h=a.tr;return h.insertText(f,l,u),h.addMark(l,l+f.length,p),t.dispatch(h),!0}}})]}}),Qk=["info","note","prompt","resources","todo"],Kd=me.Extension.create({name:"calloutInputRule",addProseMirrorPlugins(){const e=this.editor;return[new ge.Plugin({key:new ge.PluginKey("calloutInputRule"),props:{handleKeyDown(t,n){if(n.key!=="Enter")return!1;const{state:r}=t,{selection:o,doc:s}=r,{$from:a}=o,i=a.start();a.end();const l=s.textBetween(i,a.pos,""),u=l.trim();for(const d of Qk)if(u===`\`\`\`${d}`){n.preventDefault();const f=r.tr,p=i+l.indexOf("```");f.delete(p,a.pos);const h=e.schema.nodes.callout,m=e.schema.nodes.paragraph;if(h&&m){const y=m.create(),b=h.create({type:d},Df.Fragment.from(y));f.insert(p,b);const w=f.doc.resolve(p+2);f.setSelection(ge.TextSelection.near(w)),t.dispatch(f)}return!0}return!1}}})]}}),wo=new ge.PluginKey("searchHighlight"),Gd=me.Extension.create({name:"searchHighlight",addOptions(){return{searchTerm:"",caseSensitive:!1,useRegex:!1,currentMatchIndex:0}},addStorage(){return{searchTerm:"",caseSensitive:!1,useRegex:!1,currentMatchIndex:0}},addCommands(){return{setSearchHighlight:e=>({editor:t,tr:n,dispatch:r})=>(this.storage.searchTerm=e.searchTerm??this.storage.searchTerm,this.storage.caseSensitive=e.caseSensitive??this.storage.caseSensitive,this.storage.useRegex=e.useRegex??this.storage.useRegex,this.storage.currentMatchIndex=e.currentMatchIndex??this.storage.currentMatchIndex,r&&r(n.setMeta(wo,{update:!0})),!0),clearSearchHighlight:()=>({editor:e,tr:t,dispatch:n})=>(this.storage.searchTerm="",this.storage.caseSensitive=!1,this.storage.useRegex=!1,this.storage.currentMatchIndex=0,n&&n(t.setMeta(wo,{update:!0})),!0)}},addProseMirrorPlugins(){const e=this.storage;return[new ge.Plugin({key:wo,state:{init(){return Me.DecorationSet.empty},apply(t,n,r,o){const{searchTerm:s,caseSensitive:a,useRegex:i,currentMatchIndex:l}=e,u=t.getMeta(wo),d=t.docChanged;if(!s)return Me.DecorationSet.empty;if(!d&&!u)return n.map(t.mapping,o.doc);const f=[];let p=0;try{let h;if(i)h=new RegExp(s,a?"g":"gi");else{const m=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");h=new RegExp(m,a?"g":"gi")}o.doc.descendants((m,y)=>{if(m.isText&&m.text){let b;for(;(b=h.exec(m.text))!==null;){const w=y+b.index,v=y+b.index+b[0].length,x=p===l;f.push(Me.Decoration.inline(w,v,{class:x?"search-highlight-current":"search-highlight"})),p++}}return!0})}catch{return Me.DecorationSet.empty}return Me.DecorationSet.create(o.doc,f)}},props:{decorations(t){return this.getState(t)}}})]}}),Jk=new ge.PluginKey("tabIndent");function Rk(e){const{$from:t}=e.selection;for(let n=t.depth;n>=0;n--){const r=t.node(n);if(r.type.name==="taskItem")return"taskItem";if(r.type.name==="listItem")return"listItem"}return null}const Xd=me.Extension.create({name:"tabIndent",priority:1e3,addProseMirrorPlugins(){return[new ge.Plugin({key:Jk,props:{handleKeyDown(e,t){if(t.key!=="Tab")return!1;const{state:n,dispatch:r}=e,o=Rk(n);if(!o)return t.preventDefault(),!0;t.preventDefault();const s=n.schema.nodes[o];if(!s)return!0;if(t.shiftKey){if(!Lr.liftListItem(s)(n,r)){const l=o==="taskItem"?"listItem":"taskItem",u=n.schema.nodes[l];u&&Lr.liftListItem(u)(n,r)}}else if(!Lr.sinkListItem(s)(n,r)){const l=o==="taskItem"?"listItem":"taskItem",u=n.schema.nodes[l];u&&Lr.sinkListItem(u)(n,r)}return!0}}})]}}),ex=new ge.PluginKey("expandSelection");function ra(e){e.lastExpandedFrom=-1,e.lastExpandedTo=-1,e.expansionDepth=0,e.isExpanding=!1}const tx=new Set(["bulletList","orderedList","taskList","mixedList"]);function nx(e,t,n){const r=e.resolve(t);for(let o=r.depth;o>=1;o--)if(r.node(o).isTextblock){const a=r.start(o),i=r.end(o);if(a<t||i>n)return{from:a,to:i}}return null}function rx(e,t,n){const r=e.resolve(t);let o=-1;for(let i=r.depth;i>=1;i--){const l=r.node(i);tx.has(l.type.name)&&(o=i)}if(o===-1)return null;const s=r.start(o),a=r.end(o);return s<t||a>n?{from:s,to:a}:null}function ox(e){const t=[];if(e.forEach((r,o)=>{r.type.name==="heading"&&t.push({level:r.attrs.level,from:o})}),t.length===0)return[];const n=[];for(let r=0;r<t.length;r++){const o=t[r];let s=e.content.size;for(let a=r+1;a<t.length;a++)if(t[a].level<=o.level){s=t[a].from;break}n.push({level:o.level,from:o.from,to:s})}return n}function sx(e,t,n){const r=e.filter(o=>o.from<=t&&o.to>=n);return r.sort((o,s)=>o.to-o.from-(s.to-s.from)),r}function ax(e,t,n){const r=[];let o=t,s=n;const a=nx(e,o,s);a&&(a.from<o||a.to>s)&&(r.push(a),o=a.from,s=a.to);const i=rx(e,o,s);i&&(i.from<o||i.to>s)&&(r.push(i),o=i.from,s=i.to);const l=ox(e);if(l.length>0){const u=sx(l,o,s);for(const d of u)(d.from<o||d.to>s)&&(r.push({from:d.from,to:d.to}),o=d.from,s=d.to)}return(o>0||s<e.content.size)&&r.push({from:0,to:e.content.size}),r}const ix=me.Extension.create({name:"expandSelection",priority:1e3,addStorage(){return{lastExpandedFrom:-1,lastExpandedTo:-1,expansionDepth:0,isExpanding:!1}},addKeyboardShortcuts(){return{"Mod-ArrowUp":({editor:e})=>{e.commands.setTextSelection(0);const t=e.view;return t.dispatch(t.state.tr.scrollIntoView()),!0},"Mod-ArrowDown":({editor:e})=>{const t=e.state.doc.content.size;e.commands.setTextSelection(t);const n=e.view;return n.dispatch(n.state.tr.scrollIntoView()),!0},"Mod-a":({editor:e})=>{const t=this.storage,{doc:n,selection:r}=e.state,{from:o,to:s}=r;if(t.expansionDepth>0&&o===t.lastExpandedFrom&&s===t.lastExpandedTo||(t.expansionDepth=0),r instanceof ge.AllSelection||o===0&&s===n.content.size)return!0;const i=ax(n,o,s);let l=null;for(const u of i)if(u.from<o||u.to>s){l=u;break}return l?(t.lastExpandedFrom=l.from,t.lastExpandedTo=l.to,t.expansionDepth++,t.isExpanding=!0,l.from===0&&l.to===n.content.size?e.commands.selectAll():e.commands.setTextSelection({from:l.from,to:l.to}),t.isExpanding=!1,!0):(t.lastExpandedFrom=0,t.lastExpandedTo=n.content.size,t.expansionDepth++,t.isExpanding=!0,e.commands.selectAll(),t.isExpanding=!1,!0)}}},addProseMirrorPlugins(){const e=this.storage;return[new ge.Plugin({key:ex,props:{handleClick(){return ra(e),!1},handleTextInput(){return ra(e),!1},handleKeyDown(t,n){return(n.metaKey||n.ctrlKey)&&(n.key==="a"||n.key==="A")&&!n.shiftKey||["Meta","Control","Alt","Shift"].includes(n.key)||e.expansionDepth>0&&!e.isExpanding&&ra(e),!1}}})]}}),We=new ge.PluginKey("selectAllOccurrences");function Zd(e,t,n,r,o){const s=[];if(!t)return s;let a;try{if(r)a=new RegExp(t,n?"g":"gi");else{let i=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o&&(i=`\\b${i}\\b`),a=new RegExp(i,n?"g":"gi")}}catch{return s}return e.descendants((i,l)=>{if(i.isText&&i.text){let u;for(;(u=a.exec(i.text))!==null;)s.push({from:l+u.index,to:l+u.index+u[0].length,text:u[0]})}return!0}),s}function Ut(e,t){const n=We.getState(e.state);if(!n)return[];const r=[];return n.find().forEach(o=>{if(o.from===o.to)return;const s=e.state.doc.textBetween(o.from,o.to,"");r.push({from:o.from,to:o.to,text:s})}),r}function lx(e,t){for(let n=0;n<e.length;n++)if(e[n].from>=t)return n;return 0}function He(e){e.isActive=!1,e.ranges=[],e.searchTerm="",e.typedBuffer="",e.isTypingReplace=!1,e.allMatches=[],e.nextMatchIndex=0,e.isIncremental=!1,e.undoStack=[],e.redoStack=[]}const Qd=me.Extension.create({name:"selectAllOccurrences",addStorage(){return{isActive:!1,ranges:[],searchTerm:"",caseSensitive:!1,useRegex:!1,wholeWord:!1,typedBuffer:"",isTypingReplace:!1,originalTermLength:0,allMatches:[],nextMatchIndex:0,isIncremental:!1,undoStack:[],redoStack:[]}},addCommands(){return{selectAllOccurrences:e=>({editor:t,tr:n,dispatch:r})=>{const{searchTerm:o,caseSensitive:s=!1,useRegex:a=!1,wholeWord:i=!1}=e;if(!o)return!1;const l=Zd(t.state.doc,o,s,a,i);return l.length===0?!1:(this.storage.isActive=!0,this.storage.ranges=l,this.storage.searchTerm=o,this.storage.caseSensitive=s,this.storage.useRegex=a,this.storage.wholeWord=i,this.storage.typedBuffer="",this.storage.isTypingReplace=!1,this.storage.originalTermLength=o.length,this.storage.allMatches=l,this.storage.nextMatchIndex=l.length,this.storage.isIncremental=!1,this.storage.undoStack=[],this.storage.redoStack=[],r&&r(n.setMeta(We,{activate:!0})),!0)},selectNextOccurrence:()=>({editor:e,tr:t,dispatch:n})=>{const r=this.storage;if(!r.isActive){const{state:o}=e,{from:s,to:a}=o.selection;let i="";if(s!==a)i=o.doc.textBetween(s,a,"");else{const f=o.doc.resolve(s),p=f.parent;if(p.isTextblock){const h=p.textContent,m=f.parentOffset;let y=m,b=m;for(;y>0&&/\w/.test(h[y-1]);)y--;for(;b<h.length&&/\w/.test(h[b]);)b++;y<b&&(i=h.slice(y,b))}}if(!i)return!1;const l=Zd(o.doc,i,!1,!1,!1);if(l.length===0)return!1;const u=lx(l,s),d=l[u];return r.isActive=!0,r.ranges=[d],r.searchTerm=i,r.caseSensitive=!1,r.useRegex=!1,r.wholeWord=!1,r.typedBuffer="",r.isTypingReplace=!1,r.originalTermLength=i.length,r.allMatches=l,r.nextMatchIndex=(u+1)%l.length,r.isIncremental=!0,r.undoStack=[],r.redoStack=[],n&&n(t.setMeta(We,{activate:!0})),setTimeout(()=>{try{const f=e.view.domAtPos(d.from);f.node&&f.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},20),!0}if(r.isIncremental&&r.allMatches.length>0){const o=r.nextMatchIndex,s=r.allMatches[o];return r.ranges.some(i=>i.from===s.from&&i.to===s.to)?!1:(r.ranges=[...r.ranges,s],r.nextMatchIndex=(o+1)%r.allMatches.length,r.ranges.length>=r.allMatches.length&&(r.isIncremental=!1),n&&n(t.setMeta(We,{activate:!0})),setTimeout(()=>{try{const i=e.view.domAtPos(s.from);i.node&&i.node.parentElement?.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},20),!0)}return!1},clearAllOccurrences:()=>({tr:e,dispatch:t})=>(He(this.storage),t&&t(e.setMeta(We,{deactivate:!0})),!0),toggleMarkOnAllOccurrences:e=>({editor:t,tr:n,dispatch:r})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;const o=t.schema.marks[e];if(!o)return!1;const{ranges:s}=this.storage,a=s.every(i=>{let l=!0;return t.state.doc.nodesBetween(i.from,i.to,u=>{u.isText&&!o.isInSet(u.marks)&&(l=!1)}),l});if(r){for(const i of s)a?n.removeMark(i.from,i.to,o):n.addMark(i.from,i.to,o.create());r(n)}return setTimeout(()=>{try{const i=t.view;if(i){const l=Ut(i,this.storage);this.storage.ranges=l,l.length===0&&He(this.storage)}}catch{}},10),!0},deleteAllOccurrences:()=>({editor:e,tr:t,dispatch:n})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;if(n){const r=[...this.storage.ranges].sort((o,s)=>s.from-o.from);for(const o of r)t.delete(o.from,o.to);n(t)}return He(this.storage),!0},replaceAllOccurrences:e=>({editor:t,tr:n,dispatch:r})=>{if(!this.storage.isActive||this.storage.ranges.length===0)return!1;if(r){const o=[...this.storage.ranges].sort((s,a)=>a.from-s.from);for(const s of o)n.replaceWith(s.from,s.to,t.schema.text(e));r(n)}return e?setTimeout(()=>{try{const o=t.view;if(o){const s=Ut(o,this.storage);this.storage.ranges=s,this.storage.searchTerm=e,s.length===0&&He(this.storage)}}catch{}},10):He(this.storage),!0},getOccurrencesState:()=>()=>!0}},addKeyboardShortcuts(){return{"Mod-d":()=>this.editor.commands.selectNextOccurrence()}},addProseMirrorPlugins(){const e=this.storage;return[new ge.Plugin({key:We,state:{init(){return Me.DecorationSet.empty},apply(t,n,r,o){const s=t.getMeta(We);if(s?.deactivate||!e.isActive)return Me.DecorationSet.empty;if(s?.activate||s?.refresh){const a=[];for(const i of e.ranges){a.push(Me.Decoration.inline(i.from,i.to,{class:"select-all-occurrence-highlight","data-occurrence":"true"}));const l=document.createElement("span");l.className="select-all-multi-cursor",l.setAttribute("aria-hidden","true"),a.push(Me.Decoration.widget(i.to,l,{side:1,key:`cursor-${i.from}-${i.to}`}))}return Me.DecorationSet.create(o.doc,a)}return t.docChanged?n.map(t.mapping,o.doc):n}},props:{decorations(t){return this.getState(t)},handleClick(t,n){if(!e.isActive)return!1;if(!e.ranges.some(o=>n>=o.from&&n<=o.to)){He(e);const{tr:o}=t.state;t.dispatch(o.setMeta(We,{deactivate:!0}))}return!1},handleKeyDown(t,n){if(!e.isActive)return!1;if(n.key==="Escape"){He(e);const{tr:r}=t.state;return t.dispatch(r.setMeta(We,{deactivate:!0})),!0}if((n.metaKey||n.ctrlKey)&&n.key==="z"&&!n.shiftKey){if(n.preventDefault(),e.isTypingReplace&&e.undoStack.length>0){e.redoStack.push(e.typedBuffer);const o=e.undoStack.pop();return e.typedBuffer=o,o===""&&(e.isTypingReplace=!1),Ra.undo(t.state,t.dispatch),setTimeout(()=>{const s=Ut(t);e.ranges=s,s.length===0&&He(e)},10),!0}He(e);const{tr:r}=t.state;return t.dispatch(r.setMeta(We,{deactivate:!0})),!1}if((n.metaKey||n.ctrlKey)&&(n.key==="z"&&n.shiftKey||n.key==="y")){if(n.preventDefault(),e.redoStack.length>0){e.undoStack.push(e.isTypingReplace?e.typedBuffer:"");const o=e.redoStack.pop();return e.typedBuffer=o,e.isTypingReplace=!0,Ra.redo(t.state,t.dispatch),setTimeout(()=>{const s=Ut(t);e.ranges=s,s.length===0&&He(e)},10),!0}He(e);const{tr:r}=t.state;return t.dispatch(r.setMeta(We,{deactivate:!0})),!1}if(n.metaKey||n.ctrlKey)return!1;if(n.key==="Backspace"){if(n.preventDefault(),e.isTypingReplace&&e.typedBuffer.length>0){e.undoStack.push(e.typedBuffer),e.typedBuffer=e.typedBuffer.slice(0,-1);const r=Ut(t);if(r.length===0){He(e);const{tr:i}=t.state;return t.dispatch(i.setMeta(We,{deactivate:!0})),!0}const o=e.typedBuffer.length>0?e.typedBuffer:e.searchTerm,s=[...r].sort((i,l)=>l.from-i.from),{tr:a}=t.state;for(const i of s)a.replaceWith(i.from,i.to,t.state.schema.text(o));t.dispatch(a),e.typedBuffer.length===0&&(e.isTypingReplace=!1),setTimeout(()=>{const i=Ut(t);e.ranges=i,i.length===0&&He(e)},10)}else if(!e.isTypingReplace){const r=[...e.ranges].sort((a,i)=>i.from-a.from),{tr:o}=t.state;for(const a of r)o.delete(a.from,a.to);t.dispatch(o),He(e);const{tr:s}=t.state;t.dispatch(s.setMeta(We,{deactivate:!0}))}return!0}if(n.key==="Delete"){n.preventDefault();const r=[...e.ranges].sort((a,i)=>i.from-a.from),{tr:o}=t.state;for(const a of r)o.delete(a.from,a.to);t.dispatch(o),He(e);const{tr:s}=t.state;return t.dispatch(s.setMeta(We,{deactivate:!0})),!0}if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(n.key)){He(e);const{tr:r}=t.state;return t.dispatch(r.setMeta(We,{deactivate:!0})),!1}if(n.key==="Enter"){He(e);const{tr:r}=t.state;return t.dispatch(r.setMeta(We,{deactivate:!0})),!1}return!1},handleTextInput(t,n,r,o){if(!e.isActive||!o)return!1;const s=Ut(t);if(s.length===0){He(e);const{tr:l}=t.state;return t.dispatch(l.setMeta(We,{deactivate:!0})),!0}e.undoStack.push(e.isTypingReplace?e.typedBuffer:""),e.redoStack=[],e.isTypingReplace?e.typedBuffer+=o:(e.isTypingReplace=!0,e.typedBuffer=o);const a=[...s].sort((l,u)=>u.from-l.from),{tr:i}=t.state;for(const l of a)i.replaceWith(l.from,l.to,t.state.schema.text(e.typedBuffer));return t.dispatch(i),setTimeout(()=>{const l=Ut(t);e.ranges=l,l.length===0&&He(e)},10),!0}}})]}});function cx(){return`${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function dx(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):n(new Error("Failed to read file"))},r.onerror=()=>n(new Error("Failed to read file")),r.readAsDataURL(e)})}function ux(e,t){const[n,r]=e.split(","),o=n.match(/:(.*?);/),s=o?o[1]:"image/jpeg",a=atob(r),i=new Uint8Array(a.length);for(let l=0;l<a.length;l++)i[l]=a.charCodeAt(l);return new File([i],t,{type:s})}function fx(e,t){return t.includes(e.type)}function px(e){return new Promise(t=>{const n=new window.Image;n.onload=()=>{t({width:n.width,height:n.height})},n.onerror=()=>{t({width:400,height:300})},n.src=e})}async function hx(e,t,n){return new Promise((r,o)=>{const s=new window.Image,a=new FileReader;a.onload=i=>{s.src=i.target?.result},a.onerror=()=>o(new Error("Failed to read file")),s.onload=()=>{let i=s.width,l=s.height;if(i>t){const b=t/i;i=t,l=Math.round(l*b)}const u=document.createElement("canvas");u.width=i,u.height=l;const d=u.getContext("2d");if(!d){o(new Error("Failed to get canvas context"));return}d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(s,0,0,i,l);const f=e.type==="image/png"||e.type==="image/gif",p=f?"image/png":"image/jpeg",h=f?void 0:n,m=u.toDataURL(p,h),y=ux(m,e.name);r({dataUrl:m,file:y,width:i,height:l})},s.onerror=()=>o(new Error("Failed to load image")),a.readAsDataURL(e)})}function gx(e,t,n){e.view.state.doc.descendants((r,o)=>{if(r.type.name==="resizableImage"&&r.attrs.src===t&&r.attrs.alt===n){try{const{state:s,dispatch:a}=e.view,i=s.tr.delete(o,o+r.nodeSize);a(i)}catch{}return!1}return!0})}async function Jd(e,t,n){if(!n.onImageUpload)return n.onUploadError?.("Image upload not available. Please connect Dropbox in Settings."),!1;if(!fx(e,n.allowedMimeTypes))return n.onUploadError?.(`Invalid file type: ${e.type}. Allowed types: ${n.allowedMimeTypes.join(", ")}`),!1;if(e.size>n.maxFileSize){const o=(n.maxFileSize/1048576).toFixed(1),s=(e.size/(1024*1024)).toFixed(1);return n.onUploadError?.(`File too large: ${s}MB. Maximum size: ${o}MB`),!1}const r=cx();try{n.onUploadStart?.();let o,s,a;const i=["image/jpeg","image/png","image/webp"].includes(e.type);if(n.enableCompression&&i){const f=await hx(e,n.maxCompressedWidth,n.compressionQuality);o=f.dataUrl,a=f.file,s=Math.min(f.width,600)}else{o=await dx(e),a=e;const f=await px(o);s=Math.min(f.width,600)}t.chain().focus().setImage({src:o,alt:e.name,width:s}).run();const{state:l}=t.view,u=l.selection.from-1,d=l.doc.nodeAt(u);if(d&&d.type.name==="resizableImage"){const f=t.view.nodeDOM(u);if(f){const p=f instanceof HTMLElement?f:f.dom;p&&p.classList.add("image-uploading")}}try{const f=await n.onImageUpload(a,{fileName:e.name,mimeType:a.type,fileSize:a.size,uploadId:r});let p=!1;return t.view.state.doc.descendants((h,m)=>{if(p)return!1;if(h.type.name==="resizableImage"&&h.attrs.src===o&&h.attrs.alt===e.name){try{const{state:y,dispatch:b}=t.view,w=y.doc.nodeAt(m);if(w){const v=y.tr.setNodeMarkup(m,void 0,{...w.attrs,src:f});b(v)}}catch(y){console.warn("Failed to replace placeholder with uploaded reference:",y)}return p=!0,!1}return!0}),t.view.state.doc.descendants((h,m)=>{if(h.type.name==="resizableImage"&&h.attrs.src===f){const y=t.view.nodeDOM(m);if(y){const b=y instanceof HTMLElement?y:y.dom;b&&b.classList.remove("image-uploading")}return!1}return!0}),n.onUploadComplete?.(),!0}catch(f){return console.warn("Image upload failed, removing placeholder:",f),gx(t,o,e.name),n.onUploadError?.(`Upload failed: ${f instanceof Error?f.message:"Unknown error"}`),n.onUploadComplete?.(),!1}}catch(o){return n.onUploadError?.(`Failed to process image: ${o instanceof Error?o.message:"Unknown error"}`),!1}}function Rd(e){const t=[];if(e.items)for(let n=0;n<e.items.length;n++){const r=e.items[n];if(r.kind==="file"&&r.type.startsWith("image/")){const o=r.getAsFile();o&&t.push(o)}}if(t.length===0&&e.files)for(let n=0;n<e.files.length;n++){const r=e.files[n];r.type.startsWith("image/")&&t.push(r)}return t}const eu=me.Extension.create({name:"imageUpload",addOptions(){return{maxFileSize:10*1024*1024,allowedMimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],enableCompression:!0,maxCompressedWidth:1200,compressionQuality:.8,onUploadStart:void 0,onUploadComplete:void 0,onUploadError:void 0,onImageUpload:void 0}},addProseMirrorPlugins(){const e=this.options,t=this.editor;return[new ge.Plugin({key:new ge.PluginKey("imageUpload"),props:{handlePaste(n,r){const o=r.clipboardData;if(!o)return!1;const s=Rd(o);return s.length===0?!1:(r.preventDefault(),s.forEach(a=>{Jd(a,t,e)}),!0)},handleDrop(n,r,o,s){if(s)return!1;const a=r.dataTransfer;if(!a)return!1;const i=Rd(a);if(i.length===0)return!1;r.preventDefault();const l=n.posAtCoords({left:r.clientX,top:r.clientY});if(l){const u=n.state.tr.setSelection(ge.TextSelection.near(n.state.doc.resolve(l.pos)));n.dispatch(u)}return i.forEach(u=>{Jd(u,t,e)}),!0}}})]}});function tu({containerRef:e,enabled:t=!0}){const[n,r]=g.useState(!1),[o,s]=g.useState(0),a=g.useCallback(d=>{d.preventDefault(),d.stopPropagation(),d.dataTransfer?.types.includes("Files")&&(s(f=>f+1),r(!0))},[]),i=g.useCallback(d=>{d.preventDefault(),d.stopPropagation(),s(f=>{const p=f-1;return p===0&&r(!1),p})},[]),l=g.useCallback(d=>{d.preventDefault(),d.stopPropagation()},[]),u=g.useCallback(d=>{d.preventDefault(),d.stopPropagation(),r(!1),s(0)},[]);return g.useEffect(()=>{if(!t||!e.current)return;const d=e.current;return d.addEventListener("dragenter",a),d.addEventListener("dragleave",i),d.addEventListener("dragover",l),d.addEventListener("drop",u),()=>{d.removeEventListener("dragenter",a),d.removeEventListener("dragleave",i),d.removeEventListener("dragover",l),d.removeEventListener("drop",u)}},[t,e,a,i,l,u]),n?c.jsx("div",{className:"image-drop-zone",children:c.jsxs("div",{className:"image-drop-zone-content",children:[c.jsx("div",{className:"image-drop-zone-icon",children:c.jsx(I.ImagePlus,{className:"w-12 h-12"})}),c.jsxs("div",{className:"image-drop-zone-text",children:[c.jsx("span",{className:"image-drop-zone-title",children:"Drop image here"}),c.jsx("span",{className:"image-drop-zone-subtitle",children:"Release to insert image into the editor"})]})]})}):null}function mx({src:e,alt:t,position:n,onSave:r,onDelete:o,onClose:s}){const[a,i]=g.useState(e),[l,u]=g.useState(t),d=g.useRef(null),f=g.useRef(null);g.useEffect(()=>{f.current?.focus(),f.current?.select()},[]),g.useEffect(()=>{const b=v=>{d.current&&!d.current.contains(v.target)&&s()},w=setTimeout(()=>{document.addEventListener("mousedown",b)},100);return()=>{clearTimeout(w),document.removeEventListener("mousedown",b)}},[s]),g.useEffect(()=>{const b=w=>{w.key==="Escape"?s():w.key==="Enter"&&(w.metaKey||w.ctrlKey)&&p()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a,l,s]);const p=()=>{a.trim()&&r(a.trim(),l.trim())},m=(()=>{let x=n.x-160,M=n.y+10;return x+320>window.innerWidth-16&&(x=window.innerWidth-320-16),x<16&&(x=16),M+280>window.innerHeight-16&&(M=n.y-280-10),M<16&&(M=16),{left:x,top:M}})(),y=c.jsxs("div",{ref:d,className:"image-edit-popover",style:{position:"fixed",left:m.left,top:m.top},children:[c.jsxs("div",{className:"image-edit-popover-header",children:[c.jsx("span",{className:"image-edit-popover-title",children:"Edit Image"}),c.jsx("button",{onClick:s,className:"image-edit-popover-close","aria-label":"Close",children:c.jsx(I.X,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"image-edit-popover-content",children:[c.jsxs("div",{className:"image-edit-popover-field",children:[c.jsxs("label",{className:"image-edit-popover-label",children:[c.jsx(I.Link,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:"Image URL"})]}),c.jsx("input",{ref:f,type:"text",value:a,onChange:b=>i(b.target.value),placeholder:"https://example.com/image.jpg",className:"image-edit-popover-input"})]}),c.jsxs("div",{className:"image-edit-popover-field",children:[c.jsxs("label",{className:"image-edit-popover-label",children:[c.jsx(I.Type,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:"Alt Text"})]}),c.jsx("input",{type:"text",value:l,onChange:b=>u(b.target.value),placeholder:"Describe the image...",className:"image-edit-popover-input"})]})]}),c.jsxs("div",{className:"image-edit-popover-footer",children:[c.jsx("button",{onClick:o,className:"image-edit-popover-btn image-edit-popover-btn-delete",title:"Delete image",children:c.jsx(I.Trash2,{className:"w-4 h-4"})}),c.jsxs("div",{className:"image-edit-popover-actions",children:[c.jsx("button",{onClick:s,className:"image-edit-popover-btn image-edit-popover-btn-cancel",children:"Cancel"}),c.jsxs("button",{onClick:p,className:"image-edit-popover-btn image-edit-popover-btn-save",disabled:!a.trim(),children:[c.jsx(I.Check,{className:"w-4 h-4"}),"Save"]})]})]})]});return c.jsx(vt,{children:y})}function ko(e){const t=[],n=e.split(`
`);let r=0,o=!1,s="";for(let a=0;a<n.length;a++){const i=n[a],l=r;if(i.startsWith("```")){o?(o=!1,t.push({type:"code-block",content:i,start:l,end:l+i.length})):(o=!0,s=i.slice(3).trim(),t.push({type:"code-block",content:"```",start:l,end:l+3}),s&&t.push({type:"code-block-lang",content:s,start:l+3,end:l+3+s.length})),r+=i.length+1;continue}if(o){t.push({type:"code-block",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}const u=i.match(/^(#{1,6})\s+(.*)$/);if(u){const v=u[1].length;t.push({type:`heading${v}`,content:i,start:l,end:l+i.length}),r+=i.length+1;continue}if(/^(-{3,}|\*{3,}|_{3,})$/.test(i.trim())){t.push({type:"horizontal-rule",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}if(i.startsWith(">")){t.push({type:"blockquote",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}if(/^\|?[\s-:|]+\|?$/.test(i)&&i.includes("-")){t.push({type:"table-separator",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}if(i.includes("|")&&(i.startsWith("|")||i.trim().includes(" | "))){t.push({type:"table-cell",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}const d=i.match(/^(\s*[-*+]\s+)\[([xX ])\]\s+(.*)$/);if(d){const v=d[2].toLowerCase()==="x";t.push({type:v?"task-checked":"task-list",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}if(i.match(/^(\s*[-*+])\s+(.*)$/)){t.push({type:"list-bullet",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}if(i.match(/^(\s*\d+\.)\s+(.*)$/)){t.push({type:"list-number",content:i,start:l,end:l+i.length}),r+=i.length+1;continue}let h=0;const m=[{regex:/@[A-Z][a-z]{2}\s+\d{1,2},\s+\d{4}@/g,type:"date-pill"},{regex:/\*\*\*(.+?)\*\*\*|___(.+?)___/g,type:"bold-italic"},{regex:/\*\*(.+?)\*\*|__(.+?)__/g,type:"bold"},{regex:/\*(.+?)\*|_(.+?)_/g,type:"italic"},{regex:/~~(.+?)~~/g,type:"strikethrough"},{regex:/`([^`]+)`/g,type:"code-inline"},{regex:/!\[([^\]]*)\]\(([^)]+)\)/g,type:"image"},{regex:/\[([^\]]+)\]\(([^)]+)\)/g,type:"link"}],y=[];for(const v of m){let x;for(v.regex.lastIndex=0;(x=v.regex.exec(i))!==null;)y.push({start:l+x.index,end:l+x.index+x[0].length,type:v.type,content:x[0]})}y.sort((v,x)=>v.start-x.start);const b=[];let w=l;for(const v of y)v.start>=w&&(b.push(v),w=v.end);for(const v of b)v.start>l+h&&t.push({type:"text",content:i.substring(h,v.start-l),start:l+h,end:v.start}),t.push({type:v.type,content:v.content,start:v.start,end:v.end}),h=v.end-l;h<i.length&&t.push({type:"text",content:i.substring(h),start:l+h,end:l+i.length}),r+=i.length+1}return t}function nu(e){return{heading1:"md-heading md-h1",heading2:"md-heading md-h2",heading3:"md-heading md-h3",heading4:"md-heading md-h4",heading5:"md-heading md-h5",heading6:"md-heading md-h6",bold:"md-bold",italic:"md-italic","bold-italic":"md-bold-italic",strikethrough:"md-strikethrough","code-inline":"md-code-inline","code-block":"md-code-block","code-block-lang":"md-code-lang",link:"md-link","link-text":"md-link-text","link-url":"md-link-url",image:"md-image","list-bullet":"md-list-bullet","list-number":"md-list-number","task-list":"md-task","task-checked":"md-task-checked",blockquote:"md-blockquote","horizontal-rule":"md-hr","table-header":"md-table-header","table-separator":"md-table-separator","table-cell":"md-table-cell","date-pill":"md-date-pill",text:"md-text"}[e]||"md-text"}function sn(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function xo(e,t,n,r){if(t.length===0&&(!n||n.length===0))return sn(e);let o="";const s=e.split(`
`);let a=0;if(!n||n.length===0){for(let l=0;l<s.length;l++){const u=s[l],d=a+u.length,f=t.filter(h=>h.start>=a&&h.start<d);let p=a;for(const h of f)h.start>p&&(o+=sn(e.substring(p,h.start))),o+=`<span class="${nu(h.type)}">${sn(h.content)}</span>`,p=h.end;p<d&&(o+=sn(e.substring(p,d))),l<s.length-1&&(o+=`
`),a=d+1}return o}const i=new Map;n.forEach((l,u)=>{for(let d=l.from;d<l.to;d++)i.set(d,{matchIdx:u,isCurrent:u===r})}),a=0;for(let l=0;l<s.length;l++){const u=s[l],d=a+u.length,f=t.filter(h=>h.start>=a&&h.start<d);let p=a;for(const h of f)h.start>p&&(o+=oa(e,p,h.start,null,i)),o+=oa(e,h.start,h.end,nu(h.type),i),p=h.end;p<d&&(o+=oa(e,p,d,null,i)),l<s.length-1&&(o+=`
`),a=d+1}return o}function oa(e,t,n,r,o){let s="",a=t;for(;a<n;){const i=o.get(a);if(i){const l=a;for(;a<n&&o.get(a)?.matchIdx===i.matchIdx;)a++;const u=sn(e.substring(l,a)),d=i.isCurrent?"search-highlight search-highlight-current":"search-highlight";r?s+=`<span class="${r}"><mark class="${d}">${u}</mark></span>`:s+=`<mark class="${d}">${u}</mark>`}else{const l=a;for(;a<n&&!o.has(a);)a++;const u=sn(e.substring(l,a));r?s+=`<span class="${r}">${u}</span>`:s+=u}}return s}function bx({content:e,onChange:t,placeholder:n="Write your markdown here...",editable:r=!0,autofocus:o=!1,className:s="",searchMatches:a,currentMatchIndex:i,autoClosePairs:l=!0}){const u=g.useRef(null),d=g.useRef(null),f=g.useRef(null),p=g.useRef(null),h=5e3,m=80,[y,b]=g.useState(()=>{const C=ko(e);return xo(e,C,a,i)}),w=g.useRef(null),v=g.useMemo(()=>{if(e.length<=h){const C=ko(e),E=xo(e,C,a,i);return w.current&&(clearTimeout(w.current),w.current=null),E}return null},[e,a,i]);g.useEffect(()=>{if(e.length<=h){const C=ko(e);b(xo(e,C,a,i));return}return w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{const C=ko(e);b(xo(e,C,a,i)),w.current=null},m),()=>{w.current&&clearTimeout(w.current)}},[e,a,i]);const x=v??y,M=g.useCallback(()=>{const C=u.current,E=d.current,D=f.current;if(C){const A=D?.parentElement,L=A?A.clientHeight:200;C.style.height="auto";const $=Math.max(C.scrollHeight,L,200);C.style.height=`${$}px`,E&&(E.style.height=`${$}px`)}},[]);g.useEffect(()=>{const C=u.current;if(!C)return;const E=D=>{const A=C.closest(".editor-content-wrapper");if(!A)return;const{scrollTop:L,scrollHeight:$,clientHeight:_}=A,B=L<=0,U=L+_>=$-1;(D.deltaY>0&&!U||D.deltaY<0&&!B)&&(D.preventDefault(),A.scrollTop+=D.deltaY)};return C.addEventListener("wheel",E,{passive:!1}),()=>C.removeEventListener("wheel",E)},[]);const k=g.useCallback(()=>{},[]);g.useEffect(()=>{M()},[e,M]),g.useEffect(()=>{o&&u.current&&u.current.focus()},[o]),g.useEffect(()=>{if(p.current&&u.current){const{start:C,end:E}=p.current;u.current.selectionStart=C,u.current.selectionEnd=E,p.current=null}},[e]);const T=g.useCallback(C=>{const E=C.target;p.current={start:E.selectionStart,end:E.selectionEnd},t(E.value)},[t]),N=g.useCallback(C=>{const E=C.currentTarget,D=E.selectionStart,A=E.selectionEnd,L=E.value,$=D!==A;if(l){if(C.key==="`"&&!C.ctrlKey&&!C.metaKey){if(C.preventDefault(),$){const _=L.substring(D,A),B=L.substring(0,D)+"`"+_+"`"+L.substring(A);p.current={start:D+1,end:A+1},t(B)}else if(L[D]==="`")p.current={start:D+1,end:D+1},t(L),E.selectionStart=E.selectionEnd=D+1;else{const _=L.substring(0,D)+"``"+L.substring(A);p.current={start:D+1,end:D+1},t(_)}return}if(C.key==="*"&&!C.ctrlKey&&!C.metaKey){if(L[D-1]==="*"&&L[D],$){C.preventDefault();const U=L.substring(D,A),K=L.substring(0,D)+"*"+U+"*"+L.substring(A);p.current={start:D+1,end:A+1},t(K);return}if(L[D]==="*"){C.preventDefault(),p.current={start:D+1,end:D+1},t(L.substring(0,D)+L.substring(D));return}C.preventDefault();const B=L.substring(0,D)+"**"+L.substring(A);p.current={start:D+1,end:D+1},t(B);return}if(C.key==="_"&&!C.ctrlKey&&!C.metaKey){if($){C.preventDefault();const B=L.substring(D,A),U=L.substring(0,D)+"_"+B+"_"+L.substring(A);p.current={start:D+1,end:A+1},t(U);return}if(L[D]==="_"){C.preventDefault(),p.current={start:D+1,end:D+1},t(L.substring(0,D)+L.substring(D));return}C.preventDefault();const _=L.substring(0,D)+"__"+L.substring(A);p.current={start:D+1,end:D+1},t(_);return}if(C.key==="~"&&!C.ctrlKey&&!C.metaKey){if($){C.preventDefault();const B=L.substring(D,A),U=L.substring(0,D)+"~"+B+"~"+L.substring(A);p.current={start:D+1,end:A+1},t(U);return}if(L[D]==="~"){C.preventDefault(),p.current={start:D+1,end:D+1},t(L.substring(0,D)+L.substring(D));return}C.preventDefault();const _=L.substring(0,D)+"~~"+L.substring(A);p.current={start:D+1,end:D+1},t(_);return}if(C.key==="["&&!C.ctrlKey&&!C.metaKey){if(C.preventDefault(),$){const _=L.substring(D,A),B=L.substring(0,D)+"["+_+"]()"+L.substring(A);p.current={start:A+3,end:A+3},t(B)}else{const _=L.substring(0,D)+"[]()"+L.substring(A);p.current={start:D+1,end:D+1},t(_)}return}if(C.key==="]"&&!C.ctrlKey&&!C.metaKey&&L[D]==="]"){C.preventDefault(),p.current={start:D+1,end:D+1},t(L.substring(0,D)+L.substring(D));return}if(C.key===")"&&!C.ctrlKey&&!C.metaKey&&L[D]===")"){C.preventDefault(),p.current={start:D+1,end:D+1},t(L.substring(0,D)+L.substring(D));return}if(C.key==="Backspace"&&!$&&D>0){const _=L[D-1],B=L[D],U=[["`","`"],["*","*"],["_","_"],["~","~"],["[","]"]];for(const[K,O]of U)if(_===K&&B===O){C.preventDefault();const P=L.substring(0,D-1)+L.substring(D+1);p.current={start:D-1,end:D-1},t(P);return}if(_==="["&&L.substring(D,D+3)==="]()"){C.preventDefault();const K=L.substring(0,D-1)+L.substring(D+3);p.current={start:D-1,end:D-1},t(K);return}}}if(C.key==="Tab")if(C.preventDefault(),C.shiftKey){const _=L.substring(0,D),B=L.substring(D,A),U=L.substring(A),O=_.lastIndexOf(`
`)+1,P=_.substring(0,O),V=_.substring(O),X=(V+B).split(`
`),G=X.map(z=>z.startsWith("  ")?z.substring(2):z.startsWith("	")?z.substring(1):z),Z=P+G.join(`
`)+U,ee=(V+B).length-G.join(`
`).length;p.current={start:Math.max(O,D-(X[0].length-G[0].length)),end:A-ee},t(Z)}else if(D===A){const _=L.substring(0,D)+"  "+L.substring(A);p.current={start:D+2,end:D+2},t(_)}else{const _=L.substring(0,D),B=L.substring(D,A),U=L.substring(A),O=_.lastIndexOf(`
`)+1,P=_.substring(0,O),X=(_.substring(O)+B).split(`
`),G=X.map(ee=>"  "+ee),Z=P+G.join(`
`)+U;p.current={start:D+2,end:A+X.length*2},t(Z)}},[t,l]);return c.jsxs("div",{ref:f,className:`syntax-highlighted-editor ${s}`,children:[c.jsx("div",{ref:d,className:"syntax-highlight-overlay",dangerouslySetInnerHTML:{__html:x||`<span class="md-placeholder">${sn(n)}</span>`},"aria-hidden":"true"}),c.jsx("textarea",{ref:u,value:e,onChange:T,onKeyDown:N,onScroll:k,placeholder:"",disabled:!r,className:"syntax-textarea",spellCheck:!1})]})}let ru=0,sa=0,ou=0;function yx(e){sa++,ou=e}const vx=g.memo(function({visible:t,onClose:n,editor:r}){const[o,s]=g.useState(!1),[a,i]=g.useState({fps:0,frameTime:0,frameTimeMax:0,memoryUsed:0,memoryTotal:0,renderCount:0,transactionCount:0,lastTransactionTime:0,domNodes:0,longFrames:0}),l=g.useRef([]),u=g.useRef(performance.now()),d=g.useRef(0),f=g.useRef(0),p=g.useRef(0),h=g.useRef(0),[m,y]=g.useState(new Array(60).fill(0)),[b,w]=g.useState(new Array(60).fill(0));g.useEffect(()=>{if(!t||!r)return;const N=()=>{const C=performance.now();queueMicrotask(()=>{const E=performance.now()-C;yx(E)})};return r.on("transaction",N),()=>{r.off("transaction",N)}},[t,r]),g.useEffect(()=>{if(!t)return;let N=0,C=performance.now(),E=0;const D=A=>{const L=A-u.current;if(u.current=A,l.current.push({time:A,duration:L}),l.current.length>120&&(l.current=l.current.slice(-120)),L>16.67&&f.current++,N++,A-C>=1e3){E=N,N=0,C=A;const $=l.current.slice(-60),_=$.length>0?$.reduce((G,Z)=>G+Z.duration,0)/$.length:0,B=$.length>0?Math.max(...$.map(G=>G.duration)):0,U=performance.memory,K=U?U.usedJSHeapSize/(1024*1024):0,O=U?U.jsHeapSizeLimit/(1024*1024):0,P=document.querySelectorAll("*").length,V=ru-p.current,X=sa-h.current;p.current=ru,h.current=sa,i({fps:E,frameTime:Math.round(_*100)/100,frameTimeMax:Math.round(B*100)/100,memoryUsed:Math.round(K*10)/10,memoryTotal:Math.round(O),renderCount:V,transactionCount:X,lastTransactionTime:Math.round(ou*100)/100,domNodes:P,longFrames:f.current}),y(G=>[...G.slice(1),E]),w(G=>[...G.slice(1),_]),f.current=0}d.current=requestAnimationFrame(D)};return d.current=requestAnimationFrame(D),()=>{cancelAnimationFrame(d.current)}},[t]);const v=g.useCallback(()=>{n?.()},[n]),x=g.useCallback(()=>{s(N=>!N)},[]);if(!t)return null;const M=N=>N>=55?"#4ade80":N>=30?"#fbbf24":"#f87171",k=N=>N<=16.67?"#4ade80":N<=33.33?"#fbbf24":"#f87171",T=(N,C,E)=>{const L=N.map(($,_)=>{const B=_/(N.length-1)*120,U=24-Math.min($,C)/C*24;return`${B},${U}`}).join(" ");return c.jsx("svg",{width:120,height:24,className:"perf-sparkline",children:c.jsx("polyline",{points:L,fill:"none",stroke:E,strokeWidth:"1.5",strokeLinejoin:"round"})})};return c.jsxs("div",{className:"perf-profiler-overlay",children:[c.jsxs("div",{className:"perf-profiler-header",children:[c.jsxs("div",{className:"perf-profiler-title",children:[c.jsx(I.Activity,{size:14}),c.jsx("span",{children:"Performance"})]}),c.jsxs("div",{className:"perf-profiler-actions",children:[c.jsx("button",{onClick:x,title:o?"Expand":"Minimize",children:o?c.jsx(I.Maximize2,{size:12}):c.jsx(I.Minimize2,{size:12})}),c.jsx("button",{onClick:v,title:"Close profiler",children:c.jsx(I.X,{size:12})})]})]}),!o&&c.jsxs("div",{className:"perf-profiler-body",children:[c.jsxs("div",{className:"perf-section",children:[c.jsxs("div",{className:"perf-row",children:[c.jsx("span",{className:"perf-label",children:"FPS"}),c.jsx("span",{className:"perf-value",style:{color:M(a.fps)},children:a.fps})]}),T(m,70,M(a.fps))]}),c.jsxs("div",{className:"perf-section",children:[c.jsxs("div",{className:"perf-row",children:[c.jsx("span",{className:"perf-label",children:"Frame Time"}),c.jsxs("span",{className:"perf-value",style:{color:k(a.frameTime)},children:[a.frameTime,"ms"]})]}),c.jsxs("div",{className:"perf-row perf-row-sub",children:[c.jsx("span",{className:"perf-label-sub",children:"Max"}),c.jsxs("span",{className:"perf-value-sub",style:{color:k(a.frameTimeMax)},children:[a.frameTimeMax,"ms"]})]}),c.jsxs("div",{className:"perf-row perf-row-sub",children:[c.jsxs("span",{className:"perf-label-sub",children:["Jank (",">"," 16.7ms)"]}),c.jsxs("span",{className:"perf-value-sub",style:{color:a.longFrames>3?"#f87171":"#4ade80"},children:[a.longFrames,"/s"]})]}),T(b,50,k(a.frameTime))]}),c.jsxs("div",{className:"perf-section",children:[c.jsxs("div",{className:"perf-row",children:[c.jsx("span",{className:"perf-label",children:"Renders/s"}),c.jsx("span",{className:"perf-value",children:a.renderCount})]}),c.jsxs("div",{className:"perf-row",children:[c.jsx("span",{className:"perf-label",children:"Transactions/s"}),c.jsx("span",{className:"perf-value",children:a.transactionCount})]}),c.jsxs("div",{className:"perf-row perf-row-sub",children:[c.jsx("span",{className:"perf-label-sub",children:"Last TX time"}),c.jsxs("span",{className:"perf-value-sub",children:[a.lastTransactionTime,"ms"]})]})]}),c.jsxs("div",{className:"perf-section",children:[c.jsxs("div",{className:"perf-row",children:[c.jsx("span",{className:"perf-label",children:"DOM Nodes"}),c.jsx("span",{className:"perf-value",children:a.domNodes.toLocaleString()})]}),a.memoryTotal>0&&c.jsxs("div",{className:"perf-row",children:[c.jsx("span",{className:"perf-label",children:"Memory"}),c.jsxs("span",{className:"perf-value",children:[a.memoryUsed,"MB / ",a.memoryTotal,"MB"]})]})]})]})]})});class wx extends g.Component{constructor(t){super(t),this.handleRetry=()=>{this.setState(n=>({hasError:!1,error:null,errorInfo:null,showDetails:!1,retryCount:n.retryCount+1,copied:!1})),this.props.onRetry?.()},this.handleClearContent=()=>{this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1,retryCount:0,copied:!1}),this.props.onClearContent?.()},this.handleCopyError=()=>{const{error:n,errorInfo:r}=this.state;if(!n)return;const o=[`Error: ${n.message}`,"","Stack trace:",n.stack||"(no stack trace)","","Component stack:",r?.componentStack||"(no component stack)"].join(`
`);navigator.clipboard.writeText(o).then(()=>{this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)}).catch(()=>{})},this.toggleDetails=()=>{this.setState(n=>({showDetails:!n.showDetails}))},this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1,retryCount:0,copied:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){this.setState({errorInfo:n}),console.error("[Paragon EditorErrorBoundary] Editor crashed:",t,n),this.props.onError?.(t,n)}componentDidUpdate(t){t.resetKey!==this.props.resetKey&&this.state.hasError&&this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1,retryCount:0,copied:!1})}render(){if(this.state.hasError){const{error:t,showDetails:n,retryCount:r,copied:o}=this.state,s=r>=2;return c.jsx("div",{className:ie("flex-1 flex items-center justify-center p-6",this.props.className),children:c.jsxs("div",{className:"flex flex-col items-center max-w-md w-full text-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:c.jsx(I.AlertTriangle,{className:"w-6 h-6 text-destructive"})}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Editor encountered an error"}),c.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s?"The editor keeps crashing. The content may be malformed — try clearing it to recover.":"Something went wrong while rendering the editor. Your content is safe — try one of the recovery options below."})]}),c.jsxs("div",{className:"flex flex-col gap-2 w-full max-w-xs",children:[c.jsxs(_t,{variant:"default",size:"sm",className:"w-full gap-2",onClick:this.handleRetry,children:[c.jsx(I.RotateCcw,{className:"w-4 h-4"}),"Retry ",r>0&&`(${r})`]}),s&&this.props.onClearContent&&c.jsxs(_t,{variant:"ghost",size:"sm",className:"w-full gap-2 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:this.handleClearContent,children:[c.jsx(I.Trash2,{className:"w-4 h-4"}),"Clear Content & Retry"]})]}),t&&c.jsxs("div",{className:"w-full max-w-xs",children:[c.jsxs("button",{onClick:this.toggleDetails,className:ie("flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors mx-auto","cursor-pointer"),children:[n?c.jsx(I.ChevronDown,{className:"w-3 h-3"}):c.jsx(I.ChevronRight,{className:"w-3 h-3"}),"Error details"]}),n&&c.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 border border-border text-left overflow-auto max-h-40",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-[10px] uppercase tracking-wider text-muted-foreground/60 font-medium",children:"Error"}),c.jsx("button",{onClick:this.handleCopyError,className:"flex items-center gap-1 text-[10px] text-muted-foreground hover:text-foreground transition-colors cursor-pointer",children:o?c.jsxs(c.Fragment,{children:[c.jsx(I.CheckCircle2,{className:"w-3 h-3 text-green-500"}),c.jsx("span",{className:"text-green-500",children:"Copied"})]}):c.jsxs(c.Fragment,{children:[c.jsx(I.Copy,{className:"w-3 h-3"}),c.jsx("span",{children:"Copy"})]})})]}),c.jsx("p",{className:"text-xs font-mono text-muted-foreground break-all",children:t.message}),t.stack&&c.jsx("pre",{className:"text-[10px] font-mono text-muted-foreground/70 mt-2 whitespace-pre-wrap break-all",children:t.stack.split(`
`).slice(1,6).join(`
`)})]})]})]})})}return this.props.children}}function kx({scrollContainerRef:e,hideDelay:t=1200}){return null}function xx(e,t){switch(t.type){case"start-streaming":return{status:"streaming",action:t.action,actionLabel:t.actionLabel,inputText:t.inputText,result:"",selectionRange:t.selectionRange};case"append-chunk":return e.status!=="streaming"?e:{...e,result:e.result+t.text};case"complete":return e.status!=="streaming"?e:{...e,status:"complete"};case"error":return{status:"error",message:t.message,action:e.status==="streaming"?e.action:void 0};case"reset":return{status:"idle"};default:return e}}function Cx(e){const[t,n]=g.useReducer(xx,{status:"idle"}),r=g.useRef(null),o=g.useCallback(async(i,l,u,d,f)=>{if(e){n({type:"start-streaming",action:i,actionLabel:l,inputText:u,selectionRange:d});try{const p=e(i,u,f);if(Symbol.asyncIterator in Object(p))for await(const h of p)n({type:"append-chunk",text:h});else{const h=await p;n({type:"append-chunk",text:h})}n({type:"complete"})}catch(p){if(p instanceof DOMException&&p.name==="AbortError"){n({type:"reset"});return}const h=p instanceof Error?p.message:"AI action failed";n({type:"error",message:h})}}},[e]),s=g.useCallback(()=>{r.current?.(),n({type:"reset"})},[]),a=g.useCallback(()=>{n({type:"reset"})},[]);return{state:t,executeAction:o,abort:s,reset:a}}const Sx={SpellCheck:I.SpellCheck,RefreshCw:I.RefreshCw,Minimize2:I.Minimize2,Maximize2:I.Maximize2,FileText:I.FileText,MessageSquare:I.MessageSquare,Sparkles:I.Sparkles};function Tx({actions:e,scope:t,onAction:n,onClose:r,position:o}){const[s,a]=g.useState(""),[i,l]=g.useState(!1),u=g.useRef(null),d=g.useRef(null),f=e.filter(b=>b.scope===t||b.scope==="both");g.useEffect(()=>{const b=v=>{u.current&&!u.current.contains(v.target)&&r()},w=setTimeout(()=>{document.addEventListener("mousedown",b)},50);return()=>{clearTimeout(w),document.removeEventListener("mousedown",b)}},[r]),g.useEffect(()=>{const b=w=>{w.key==="Escape"&&r()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),g.useEffect(()=>{i&&d.current&&d.current.focus()},[i]);const h=g.useCallback(()=>{const w=f.length*40+(i?56:0)+16,v=window.innerWidth,x=window.innerHeight;let M=o.top,k=o.left;return k+260>v-8&&(k=v-260-8),k<8&&(k=8),M+w>x-8&&(M=o.top-w-8),M<8&&(M=8),{top:M,left:k}},[o,f.length,i])(),m=()=>{s.trim()&&(n("custom",s.trim()),a(""),l(!1))},y=c.jsx("div",{ref:u,className:"ai-dropdown-menu",style:{position:"fixed",top:h.top,left:h.left},children:c.jsxs("div",{className:`
          bg-popover text-popover-foreground border border-border
          rounded-lg shadow-lg overflow-hidden
          w-[260px] py-1
          animate-in fade-in-0 zoom-in-95 duration-100
        `,children:[c.jsx("div",{className:"px-2 py-1.5",children:c.jsxs("div",{className:"flex items-center gap-2 bg-secondary/50 rounded-md px-2.5 py-1.5 border border-border/50",children:[c.jsx(I.MessageSquare,{size:14,className:"text-muted-foreground shrink-0"}),c.jsx("input",{ref:d,type:"text",placeholder:"Modify with prompt…",value:s,onChange:b=>a(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),m()),b.stopPropagation()},onFocus:()=>l(!0),className:`
                flex-1 bg-transparent text-sm text-foreground
                placeholder:text-muted-foreground
                outline-none min-w-0
              `})]})}),c.jsx("div",{className:"h-px bg-border mx-2 my-0.5"}),f.filter(b=>!b.showCustomPrompt).map(b=>{const w=b.icon?Sx[b.icon]:I.Sparkles;return c.jsxs("button",{className:`
                  flex items-center gap-2.5 w-full px-3 py-2 text-sm text-left
                  hover:bg-secondary/80 transition-colors duration-75
                  text-foreground
                `,onMouseDown:v=>{v.preventDefault(),n(b.id)},children:[w&&c.jsx(w,{size:15,className:"text-muted-foreground shrink-0"}),c.jsx("span",{children:b.label})]},b.id)})]})});return c.jsx(vt,{onMouseDown:b=>b.preventDefault(),children:y})}function Ex({state:e,position:t,onReplace:n,onInsert:r,onRetry:o,onDiscard:s}){const a=g.useRef(null),i=g.useRef(null),[l,u]=g.useState(!1),[d,f]=g.useState(0);g.useEffect(()=>{if(a.current){const k=new ResizeObserver(T=>{for(const N of T)f(N.contentRect.height)});return k.observe(a.current),()=>k.disconnect()}},[]),g.useEffect(()=>{i.current&&e.status==="streaming"&&(i.current.scrollTop=i.current.scrollHeight)},[e.status==="streaming"?e.result:""]),g.useEffect(()=>{const k=T=>{T.key==="Escape"&&s()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[s]);const p=g.useMemo(()=>{const C=window.innerWidth,E=window.innerHeight;let D=t.selectionCenterX-380/2;D+380>C-8&&(D=C-380-8),D<8&&(D=8);const A=E-t.selectionBottom-8,L=t.selectionTop-8,$=d||200;let _,B=!1;return A>=$||A>=L?_=t.selectionBottom+8:(_=t.selectionTop-8-$,B=!0),_<8&&(_=8),_+$>E-8&&(_=E-$-8),{top:_,left:D,placedAbove:B}},[t,d]),h=e.status==="streaming"||e.status==="complete"?e.result:"",m=e.status==="streaming"||e.status==="complete"?e.actionLabel:"",y=e.status==="streaming",b=e.status==="complete",w=e.status==="error",v=g.useCallback(()=>{navigator.clipboard.writeText(h),u(!0),setTimeout(()=>u(!1),1500)},[h]);if(e.status==="idle")return null;const x=p.placedAbove?"animate-in fade-in-0 slide-in-from-bottom-2 duration-150":"animate-in fade-in-0 slide-in-from-top-2 duration-150",M=c.jsx("div",{ref:a,className:"ai-result-popover",style:{position:"fixed",top:p.top,left:p.left},children:c.jsxs("div",{className:`
          bg-popover text-popover-foreground border border-border
          rounded-lg shadow-xl overflow-hidden
          w-[380px] max-w-[calc(100vw-16px)]
          ${x}
        `,children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-secondary/30",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[y&&c.jsx(I.Loader2,{size:12,className:"animate-spin"}),c.jsx("span",{className:"font-medium",children:w?"Error":m}),y&&c.jsx("span",{className:"opacity-60",children:"Generating…"})]}),c.jsx("button",{className:"p-0.5 rounded hover:bg-secondary transition-colors",onMouseDown:k=>{k.preventDefault(),s()},title:"Discard",children:c.jsx(I.X,{size:14,className:"text-muted-foreground"})})]}),c.jsx("div",{ref:i,className:"px-3 py-2.5 max-h-[200px] overflow-y-auto text-sm leading-relaxed",children:w?c.jsx("div",{className:"text-destructive",children:e.message}):c.jsxs("div",{className:"whitespace-pre-wrap",children:[h,y&&c.jsx("span",{className:"inline-block w-0.5 h-4 bg-primary animate-pulse ml-0.5 align-text-bottom"})]})}),c.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 border-t border-border bg-secondary/20",children:[(b||w)&&c.jsxs(c.Fragment,{children:[b&&c.jsxs(c.Fragment,{children:[c.jsx(zn,{icon:I.Replace,label:"Replace",onClick:n,primary:!0}),c.jsx(zn,{icon:I.Plus,label:"Insert",onClick:r}),c.jsx(zn,{icon:l?I.Check:I.Copy,label:l?"Copied":"Copy",onClick:v})]}),c.jsx(zn,{icon:I.RotateCcw,label:"Retry",onClick:o}),c.jsx("div",{className:"flex-1"}),c.jsx(zn,{icon:I.X,label:"Discard",onClick:s})]}),y&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex-1"}),c.jsx(zn,{icon:I.X,label:"Stop",onClick:s})]})]})]})});return c.jsx(vt,{onMouseDown:k=>k.preventDefault(),children:M})}function zn({icon:e,label:t,onClick:n,primary:r=!1}){return c.jsxs("button",{className:`
        flex items-center gap-1 px-2 py-1 rounded text-xs font-medium
        transition-colors duration-75
        ${r?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}
      `,onMouseDown:o=>{o.preventDefault(),n()},children:[c.jsx(e,{size:12}),c.jsx("span",{children:t})]})}const su="paragon-editor-toc-width",Mx=280,au=200,iu=500;function lu(){try{const e=localStorage.getItem(su);if(e){const t=parseInt(e,10);if(!isNaN(t)&&t>=au&&t<=iu)return t}}catch{}return Mx}function Dx(e){try{localStorage.setItem(su,String(e))}catch{}}function Nx(e,t,n){const r=[];return e.state.doc.descendants((s,a)=>{if(s.type.name==="heading"){const i=s.attrs.level;if(i>=t&&i<=n){const l=s.textContent;l.trim()&&r.push({id:`toc-heading-${a}`,text:l.trim(),level:i,pos:a})}}}),r}function Ax(e){if(e.length===0)return[];const t=[],n=[];for(const r of e){const o={...r,children:[]};for(;n.length>0&&n[n.length-1].level>=r.level;)n.pop();if(n.length===0)t.push(o);else{const s=n[n.length-1].item;s.children||(s.children=[]),s.children.push(o)}n.push({item:o,level:r.level})}return t}function cu(e,t){try{const n=e.state.doc.resolve(t),r=e.view.nodeDOM(n.before(n.depth+1));if(r instanceof HTMLElement)return r;const o=e.view.nodeDOM(t);if(o instanceof HTMLElement)return o}catch{}return null}const aa=g.memo(function({editor:t,visible:n=!0,onVisibilityChange:r,title:o="",minLevel:s=1,maxLevel:a=4,showLevelIndicators:i=!1,highlightActive:l=!0,treeView:u=!1,className:d="",width:f,position:p="right",scrollOffset:h=20,onItemClick:m,renderItem:y,showToggleButton:b=!0,scrollContainerRef:w}){const[v,x]=g.useState([]),[M,k]=g.useState(null),[T,N]=g.useState(n),[C,E]=g.useState(new Set),[D,A]=g.useState(()=>{if(f){const F=parseInt(f,10);return isNaN(F)?lu():F}return lu()}),L=g.useRef(null),$=g.useRef(null),_=g.useRef(!1),B=g.useRef(0),U=g.useRef(0);g.useEffect(()=>{N(n)},[n]);const K=g.useCallback(F=>{F.preventDefault(),F.stopPropagation(),_.current=!0,B.current=F.clientX,U.current=D,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[D]);g.useEffect(()=>{const F=Q=>{if(!_.current)return;const pe=p==="right"?B.current-Q.clientX:Q.clientX-B.current,be=Math.min(iu,Math.max(au,U.current+pe));A(be)},j=()=>{_.current&&(_.current=!1,document.body.style.cursor="",document.body.style.userSelect="",A(Q=>(Dx(Q),Q)))};return document.addEventListener("mousemove",F),document.addEventListener("mouseup",j),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",j)}},[p]);const O=g.useCallback(()=>{if(!t||t.isDestroyed)return;const F=Nx(t,s,a);x(F),M&&!F.find(j=>j.id===M)&&k(null)},[t,s,a,M]);g.useEffect(()=>{if(!t)return;const F=()=>{$.current&&clearTimeout($.current),$.current=setTimeout(()=>O(),300)};return O(),t.on("update",F),t.on("create",F),()=>{t.off("update",F),t.off("create",F),$.current&&clearTimeout($.current)}},[t,O]),g.useEffect(()=>{if(!t||!l||!T||v.length===0)return;const F=w?.current||t.view.dom.closest(".editor-content-wrapper");if(!F)return;const j=()=>{const be=F.getBoundingClientRect();let Le=null;for(let Fe=v.length-1;Fe>=0;Fe--){const nt=v[Fe],jt=cu(t,nt.pos);if(jt&&jt.getBoundingClientRect().top-be.top<=h+10){Le=nt.id;break}}!Le&&v.length>0&&(Le=v[0].id),k(Le)};let Q;const pe=()=>{cancelAnimationFrame(Q),Q=requestAnimationFrame(j)};return F.addEventListener("scroll",pe,{passive:!0}),j(),()=>{F.removeEventListener("scroll",pe),cancelAnimationFrame(Q)}},[t,v,l,T,h,w]);const P=g.useCallback(F=>{if(!t||t.isDestroyed)return;const j=cu(t,F.pos);if(j){const Q=w?.current||t.view.dom.closest(".editor-content-wrapper");if(Q){const pe=Q.getBoundingClientRect(),Le=j.getBoundingClientRect().top-pe.top+Q.scrollTop;Q.scrollTo({top:Le-h,behavior:"smooth"})}else j.scrollIntoView({behavior:"smooth",block:"start"})}try{t.commands.setTextSelection(F.pos+1)}catch{}k(F.id),m?.(F)},[t,h,m,w]),V=g.useCallback(()=>{const F=!T;N(F),r?.(F)},[T,r]),X=g.useCallback(F=>{E(j=>{const Q=new Set(j);return Q.has(F)?Q.delete(F):Q.add(F),Q})},[]),G=g.useCallback((F,j,Q=0)=>{if(y)return y(F,j,()=>P(F));const pe=(F.level-s)*14,be=u&&F.children&&F.children.length>0,Le=C.has(F.id);return c.jsx("div",{className:`toc-item ${j?"toc-item-active":""} toc-level-${F.level}`,style:{paddingLeft:`${pe+10}px`},children:c.jsxs("button",{className:"toc-item-button",onClick:()=>P(F),title:F.text,children:[be&&c.jsx("span",{className:"toc-collapse-toggle",onClick:Fe=>{Fe.stopPropagation(),X(F.id)},children:c.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:Le?c.jsx("path",{d:"M3.5 2L7 5L3.5 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}):c.jsx("path",{d:"M2 3.5L5 7L8 3.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),i&&c.jsxs("span",{className:"toc-level-indicator",children:["H",F.level]}),c.jsx("span",{className:"toc-item-text",children:F.text})]})},F.id)},[y,P,u,s,i,C,X]),Z=g.useCallback((F,j=0)=>F.map(Q=>{const pe=M===Q.id,be=C.has(Q.id),Le=Q.children&&Q.children.length>0;return c.jsxs("div",{children:[G(Q,pe,j),Le&&!be&&c.jsx("div",{className:"toc-children",children:Z(Q.children,j+1)})]},Q.id)}),[M,C,G]),ee=g.useCallback(()=>v.map(F=>{const j=M===F.id;return G(F,j)}),[v,M,G]);if(!t)return null;const z=u?Ax(v):[];return c.jsxs(c.Fragment,{children:[b&&c.jsx("button",{className:`toc-toggle-button toc-toggle-${p}`,onClick:V,title:T?"Hide Table of Contents":"Show Table of Contents",children:T?c.jsx(I.PanelRightClose,{size:16}):c.jsx(I.PanelRightOpen,{size:16})}),c.jsxs("div",{ref:L,className:`toc-sidebar ${T?"toc-visible":"toc-hidden"} toc-${p} ${d}`,style:{width:T?`${D}px`:"0px"},children:[T&&c.jsx("div",{className:`toc-resize-handle toc-resize-${p}`,onMouseDown:K}),c.jsxs("div",{className:"toc-inner",children:[o&&c.jsx("div",{className:"toc-header",children:c.jsx("span",{className:"toc-title",children:o})}),c.jsx("div",{className:"toc-content toc-content-with-toggle",children:v.length===0?c.jsxs("div",{className:"toc-empty",children:[c.jsx("p",{children:"No headings yet"}),c.jsx("p",{className:"toc-empty-hint",children:"Add headings to see the outline."})]}):c.jsx("div",{className:"toc-list",children:u?Z(z):ee()})})]})]})]})});function Lx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function ia(e,t){return Array(t+1).join(e)}function du(e){return e.replace(/^\n*/,"")}function uu(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}function fu(e){return uu(du(e))}var Px=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function la(e){return ca(e,Px)}var pu=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function hu(e){return ca(e,pu)}function Ix(e){return mu(e,pu)}var gu=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Ox(e){return ca(e,gu)}function $x(e){return mu(e,gu)}function ca(e,t){return t.indexOf(e.nodeName)>=0}function mu(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var Ve={};Ve.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}},Ve.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}},Ve.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var o=ia(r===1?"=":"-",e.length);return`

`+e+`
`+o+`

`}else return`

`+ia("#",r)+" "+e+`

`}},Ve.blockquote={filter:"blockquote",replacement:function(e){return e=fu(e).replace(/^/gm,"> "),`

`+e+`

`}},Ve.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}},Ve.listItem={filter:"li",replacement:function(e,t,n){var r=n.bulletListMarker+"   ",o=t.parentNode;if(o.nodeName==="OL"){var s=o.getAttribute("start"),a=Array.prototype.indexOf.call(o.children,t);r=(s?Number(s)+a:a+1)+".  "}var i=/\n$/.test(e);return e=fu(e)+(i?`
`:""),e=e.replace(/\n/gm,`
`+" ".repeat(r.length)),r+e+(t.nextSibling?`
`:"")}},Ve.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}},Ve.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var r=t.firstChild.getAttribute("class")||"",o=(r.match(/language-(\S+)/)||[null,""])[1],s=t.firstChild.textContent,a=n.fence.charAt(0),i=3,l=new RegExp("^"+a+"{3,}","gm"),u;u=l.exec(s);)u[0].length>=i&&(i=u[0].length+1);var d=ia(a,i);return`

`+d+o+`
`+s.replace(/\n$/,"")+`
`+d+`

`}},Ve.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}},Ve.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=Co(t.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+e+"]("+n+r+")"}},Ve.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var r=t.getAttribute("href"),o=Co(t.getAttribute("title"));o&&(o=' "'+o+'"');var s,a;switch(n.linkReferenceStyle){case"collapsed":s="["+e+"][]",a="["+e+"]: "+r+o;break;case"shortcut":s="["+e+"]",a="["+e+"]: "+r+o;break;default:var i=this.references.length+1;s="["+e+"]["+i+"]",a="["+i+"]: "+r+o}return this.references.push(a),s},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}},Ve.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},Ve.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},Ve.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}},Ve.image={filter:"img",replacement:function(e,t){var n=Co(t.getAttribute("alt")),r=t.getAttribute("src")||"",o=Co(t.getAttribute("title")),s=o?' "'+o+'"':"";return r?"!["+n+"]("+r+s+")":""}};function Co(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function bu(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}bu.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=da(this.array,e,this.options))||(t=da(this._keep,e,this.options))||(t=da(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function da(e,t,n){for(var r=0;r<e.length;r++){var o=e[r];if(_x(o,t,n))return o}}function _x(e,t,n){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Hx(e){var t=e.element,n=e.isBlock,r=e.isVoid,o=e.isPre||function(f){return f.nodeName==="PRE"};if(!(!t.firstChild||o(t))){for(var s=null,a=!1,i=null,l=yu(i,t,o);l!==t;){if(l.nodeType===3||l.nodeType===4){var u=l.data.replace(/[ \r\n\t]+/g," ");if((!s||/ $/.test(s.data))&&!a&&u[0]===" "&&(u=u.substr(1)),!u){l=ua(l);continue}l.data=u,s=l}else if(l.nodeType===1)n(l)||l.nodeName==="BR"?(s&&(s.data=s.data.replace(/ $/,"")),s=null,a=!1):r(l)||o(l)?(s=null,a=!0):s&&(a=!1);else{l=ua(l);continue}var d=yu(i,l,o);i=l,l=d}s&&(s.data=s.data.replace(/ $/,""),s.data||ua(s))}}function ua(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function yu(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var fa=typeof window<"u"?window:{};function zx(){var e=fa.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function Bx(){var e=function(){};return Wx()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function Wx(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{fa.ActiveXObject&&(e=!0)}return e}var Fx=zx()?fa.DOMParser:Bx();function Ux(e,t){var n;if(typeof e=="string"){var r=jx().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return Hx({element:n,isBlock:la,isVoid:hu,isPre:t.preformattedCode?Yx:null}),n}var pa;function jx(){return pa=pa||new Fx,pa}function Yx(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function qx(e,t){return e.isBlock=la(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=Vx(e),e.flankingWhitespace=Kx(e,t),e}function Vx(e){return!hu(e)&&!Ox(e)&&/^\s*$/i.test(e.textContent)&&!Ix(e)&&!$x(e)}function Kx(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=Gx(e.textContent);return n.leadingAscii&&vu("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&vu("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function Gx(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function vu(e,t,n){var r,o,s;return e==="left"?(r=t.previousSibling,o=/ $/):(r=t.nextSibling,o=/^ /),r&&(r.nodeType===3?s=o.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?s=!1:r.nodeType===1&&!la(r)&&(s=o.test(r.textContent))),s}var Xx=Array.prototype.reduce,Zx=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function So(e){if(!(this instanceof So))return new So(e);var t={rules:Ve,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=Lx({},t,e),this.rules=new bu(this.options)}So.prototype={turndown:function(e){if(!Rx(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=wu.call(this,new Ux(e,this.options));return Qx.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return Zx.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function wu(e){var t=this;return Xx.call(e.childNodes,function(n,r){r=new qx(r,t.options);var o="";return r.nodeType===3?o=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(o=Jx.call(t,r)),ku(n,o)},"")}function Qx(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=ku(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Jx(e){var t=this.rules.forNode(e),n=wu.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function ku(e,t){var n=uu(e),r=du(t),o=Math.max(e.length-n.length,t.length-r.length),s=`

`.substring(0,o);return n+s+r}function Rx(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}var xu=/highlight-(?:text|source)-([a-z0-9]+)/;function e0(e){e.addRule("highlightedCodeBlock",{filter:function(t){var n=t.firstChild;return t.nodeName==="DIV"&&xu.test(t.className)&&n&&n.nodeName==="PRE"},replacement:function(t,n,r){var o=n.className||"",s=(o.match(xu)||[null,""])[1];return`

`+r.fence+s+`
`+n.firstChild.textContent+`
`+r.fence+`

`}})}function t0(e){e.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var n0=Array.prototype.indexOf,r0=Array.prototype.every,Bn={};Bn.tableCell={filter:["th","td"],replacement:function(e,t){return Cu(e,t)}},Bn.tableRow={filter:"tr",replacement:function(e,t){var n="",r={left:":--",right:"--:",center:":-:"};if(ha(t))for(var o=0;o<t.childNodes.length;o++){var s="---",a=(t.childNodes[o].getAttribute("align")||"").toLowerCase();a&&(s=r[a]||s),n+=Cu(s,t.childNodes[o])}return`
`+e+(n?`
`+n:"")}},Bn.table={filter:function(e){return e.nodeName==="TABLE"&&ha(e.rows[0])},replacement:function(e){return e=e.replace(`

`,`
`),`

`+e+`

`}},Bn.tableSection={filter:["thead","tbody","tfoot"],replacement:function(e){return e}};function ha(e){var t=e.parentNode;return t.nodeName==="THEAD"||t.firstChild===e&&(t.nodeName==="TABLE"||o0(t))&&r0.call(e.childNodes,function(n){return n.nodeName==="TH"})}function o0(e){var t=e.previousSibling;return e.nodeName==="TBODY"&&(!t||t.nodeName==="THEAD"&&/^\s*$/i.test(t.textContent))}function Cu(e,t){var n=n0.call(t.parentNode.childNodes,t),r=" ";return n===0&&(r="| "),r+e+" |"}function s0(e){e.keep(function(n){return n.nodeName==="TABLE"&&!ha(n.rows[0])});for(var t in Bn)e.addRule(t,Bn[t])}function a0(e){e.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,n){return(n.checked?"[x]":"[ ]")+" "}})}function i0(e){e.use([e0,t0,s0,a0])}function l0(){return g.useMemo(()=>{const e=new So({headingStyle:"atx",codeBlockStyle:"fenced",bulletListMarker:"-",emDelimiter:"*",strongDelimiter:"**",blankReplacement:(a,i)=>i.nodeName==="P"?`

​

`:i.isBlock?`

`:""});e.use(i0),e.addRule("highlight",{filter:a=>a.nodeName==="MARK",replacement:a=>`==${a}==`}),e.addRule("resizableImage",{filter:"img",replacement:(a,i)=>{const l=i,u=l.getAttribute("src")||"",f=(l.getAttribute("alt")||"").replace(/\s*\|\s*(?:left|center|right)?\s*(?:\|\s*\d+)?\s*$/,"").trim(),p=l.getAttribute("width"),h=p?parseInt(p,10):null,m=l.getAttribute("data-align")||"left",y=[f],b=m!=="left",w=h&&h>0;return(b||w)&&y.push(b?m:"left"),w&&y.push(String(h)),`![${y.join(" | ")}](${u})`}}),e.addRule("taskListItem",{filter:a=>a.nodeName==="LI"&&a.getAttribute("data-type")==="taskItem",replacement:(a,i)=>{const l=i,u=l.querySelector('input[type="checkbox"]'),d=u?.hasAttribute("checked")||u?.checked||l.getAttribute("data-checked")==="true";return a=a.replace(/^\n+/,"").replace(/\n+$/,"").replace(/\n\n+/g,`

`),a=a.replace(/\n\n(- |\d+\. )/g,`
$1`),a=a.replace(/\u200B/g,"").trim(),`- [${d?"x":" "}] `+(a||"​").replace(/\n/gm,`
    `)+`
`}}),e.addRule("tightListParagraph",{filter:a=>a.nodeName==="P"&&a.parentNode!==null&&a.parentNode.nodeName==="LI",replacement:a=>a}),e.addRule("blankLinePreservation",{filter:a=>a.nodeName==="P"&&(a.textContent===""||a.textContent==="​")&&a.parentNode!==null&&a.parentNode.nodeName!=="LI",replacement:()=>`

​

`});function t(a){const i=a.getAttribute("src")||"",u=(a.getAttribute("alt")||"").replace(/\s*\|\s*(?:left|center|right)?\s*(?:\|\s*\d+)?\s*$/,"").trim(),d=a.getAttribute("width"),f=d?parseInt(d,10):null,p=a.getAttribute("data-align")||"left",h=[u],m=p!=="left",y=f&&f>0;return(m||y)&&h.push(m?p:"left"),y&&h.push(String(f)),`![${h.join(" \\| ")}](${i})`}function n(a){if(a.nodeType===Node.TEXT_NODE)return(a.textContent||"").replace(/\|/g,"\\|");if(a.nodeType===Node.ELEMENT_NODE){const i=a;if(i.nodeName==="IMG")return t(i);if(i.nodeName==="BR")return"";let l="";for(const u of Array.from(i.childNodes))l+=n(u);if(i.nodeName==="STRONG"||i.nodeName==="B")return`**${l}**`;if(i.nodeName==="EM"||i.nodeName==="I")return`*${l}*`;if(i.nodeName==="S"||i.nodeName==="DEL")return`~~${l}~~`;if(i.nodeName==="CODE")return`\`${l}\``;if(i.nodeName==="MARK")return`==${l}==`;if(i.nodeName==="A"){const u=i.getAttribute("href")||"";return`[${l}](${u})`}return l}return""}function r(a){let i="";for(const l of Array.from(a.childNodes))if(l.nodeType===Node.ELEMENT_NODE){const u=l,d=u.nodeName;if(d==="UL"||d==="OL"||d==="LABEL"||d==="INPUT")continue;i+=n(u)}else i+=n(l);return i.trim()}function o(a,i,l=0){const u="  ".repeat(l),d=a.nodeName;Array.from(a.childNodes).filter(p=>p.nodeType===Node.ELEMENT_NODE&&p.nodeName==="LI").forEach((p,h)=>{const m=p.getAttribute("data-type")==="taskItem",y=p.getAttribute("data-checked")==="true",b=r(p);m?i.push(`${u}- [${y?"x":" "}] ${b}`):d==="OL"?i.push(`${u}${h+1}. ${b}`):i.push(`${u}- ${b}`);const w=Array.from(p.childNodes).filter(v=>v.nodeType===Node.ELEMENT_NODE&&(v.nodeName==="UL"||v.nodeName==="OL"));for(const v of w)o(v,i,l+1)})}function s(a){const i=[];for(const l of Array.from(a.childNodes)){if(l.nodeType!==Node.ELEMENT_NODE){const p=(l.textContent||"").trim();p&&i.push(p.replace(/\|/g,"\\|"));continue}const u=l,d=u.nodeName;if(d==="UL"||d==="OL"){o(u,i,0);continue}if(d==="FIGURE"){const p=u.querySelector("img");p&&i.push(t(p));continue}if(d==="IMG"){i.push(t(u));continue}const f=n(u).trim();f&&i.push(f)}return i.join(" <br> ")||""}return e.addRule("table",{filter:"table",replacement:function(a,i){const l=i,u=Array.from(l.querySelectorAll("tr"));if(u.length===0)return"";const d=[];return u.forEach((f,p)=>{const h=Array.from(f.querySelectorAll("th, td")),m=h.map(y=>s(y));if(d.push("| "+m.join(" | ")+" |"),p===0){const y=h.map(()=>"---").join(" | ");d.push("| "+y+" |")}}),`

`+d.join(`
`)+`

`}}),e.addRule("tableCell",{filter:["th","td"],replacement:function(a){return a}}),e.addRule("datePill",{filter:a=>a.nodeName==="SPAN"&&a.getAttribute("data-type")==="date-pill",replacement:(a,i)=>{const l=i.getAttribute("data-date");return l?`@${jm(l)}@`:a}}),e.addRule("tagPill",{filter:a=>a.nodeName==="SPAN"&&a.getAttribute("data-type")==="tag-pill",replacement:(a,i)=>{const l=i.getAttribute("data-tag");return l?`#${l}`:a}}),e.addRule("wikiLink",{filter:a=>a.nodeName==="SPAN"&&a.hasAttribute("data-wiki-link"),replacement:(a,i)=>{const l=i.getAttribute("data-page-name");return l?`[[${l}]]`:a}}),e.addRule("callout",{filter:a=>a.nodeName==="DIV"&&a.hasAttribute("data-callout"),replacement:(a,i)=>{const l=i.getAttribute("data-type")||"info",u=a.trim().replace(/\n{3,}/g,`

`);return`

\`\`\`ad-${l}
${u}
\`\`\`

`}}),e},[])}function ga(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var an=ga();function Su(e){an=e}var wr={exec:()=>null};function we(e,t=""){let n=typeof e=="string"?e:e.source,r={replace:(o,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(Ge.caret,"$1"),n=n.replace(o,a),r},getRegex:()=>new RegExp(n,t)};return r}var c0=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ge={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},d0=/^(?:[ \t]*(?:\n|$))+/,u0=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,f0=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,kr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,p0=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ma=/(?:[*+-]|\d{1,9}[.)])/,Tu=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Eu=we(Tu).replace(/bull/g,ma).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),h0=we(Tu).replace(/bull/g,ma).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ba=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,g0=/^[^\n]+/,ya=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,m0=we(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ya).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),b0=we(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ma).getRegex(),To="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",va=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,y0=we("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",va).replace("tag",To).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mu=we(ba).replace("hr",kr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",To).getRegex(),v0=we(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Mu).getRegex(),wa={blockquote:v0,code:u0,def:m0,fences:f0,heading:p0,hr:kr,html:y0,lheading:Eu,list:b0,newline:d0,paragraph:Mu,table:wr,text:g0},Du=we("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",kr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",To).getRegex(),w0={...wa,lheading:h0,table:Du,paragraph:we(ba).replace("hr",kr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Du).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",To).getRegex()},k0={...wa,html:we(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",va).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:we(ba).replace("hr",kr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Eu).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},x0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,C0=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Nu=/^( {2,}|\\)\n(?!\s*$)/,S0=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Eo=/[\p{P}\p{S}]/u,ka=/[\s\p{P}\p{S}]/u,Au=/[^\s\p{P}\p{S}]/u,T0=we(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ka).getRegex(),Lu=/(?!~)[\p{P}\p{S}]/u,E0=/(?!~)[\s\p{P}\p{S}]/u,M0=/(?:[^\s\p{P}\p{S}]|~)/u,D0=we(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",c0?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Pu=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,N0=we(Pu,"u").replace(/punct/g,Eo).getRegex(),A0=we(Pu,"u").replace(/punct/g,Lu).getRegex(),Iu="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",L0=we(Iu,"gu").replace(/notPunctSpace/g,Au).replace(/punctSpace/g,ka).replace(/punct/g,Eo).getRegex(),P0=we(Iu,"gu").replace(/notPunctSpace/g,M0).replace(/punctSpace/g,E0).replace(/punct/g,Lu).getRegex(),I0=we("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Au).replace(/punctSpace/g,ka).replace(/punct/g,Eo).getRegex(),O0=we(/\\(punct)/,"gu").replace(/punct/g,Eo).getRegex(),$0=we(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_0=we(va).replace("(?:-->|$)","-->").getRegex(),H0=we("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_0).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Mo=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,z0=we(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Mo).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ou=we(/^!?\[(label)\]\[(ref)\]/).replace("label",Mo).replace("ref",ya).getRegex(),$u=we(/^!?\[(ref)\](?:\[\])?/).replace("ref",ya).getRegex(),B0=we("reflink|nolink(?!\\()","g").replace("reflink",Ou).replace("nolink",$u).getRegex(),_u=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,xa={_backpedal:wr,anyPunctuation:O0,autolink:$0,blockSkip:D0,br:Nu,code:C0,del:wr,emStrongLDelim:N0,emStrongRDelimAst:L0,emStrongRDelimUnd:I0,escape:x0,link:z0,nolink:$u,punctuation:T0,reflink:Ou,reflinkSearch:B0,tag:H0,text:S0,url:wr},W0={...xa,link:we(/^!?\[(label)\]\((.*?)\)/).replace("label",Mo).getRegex(),reflink:we(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Mo).getRegex()},Ca={...xa,emStrongRDelimAst:P0,emStrongLDelim:A0,url:we(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",_u).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:we(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",_u).getRegex()},F0={...Ca,br:we(Nu).replace("{2,}","*").getRegex(),text:we(Ca.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Do={normal:wa,gfm:w0,pedantic:k0},xr={normal:xa,gfm:Ca,breaks:F0,pedantic:W0},U0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hu=e=>U0[e];function Dt(e,t){if(t){if(Ge.escapeTest.test(e))return e.replace(Ge.escapeReplace,Hu)}else if(Ge.escapeTestNoEncode.test(e))return e.replace(Ge.escapeReplaceNoEncode,Hu);return e}function zu(e){try{e=encodeURI(e).replace(Ge.percentDecode,"%")}catch{return null}return e}function Bu(e,t){let n=e.replace(Ge.findPipe,(s,a,i)=>{let l=!1,u=a;for(;--u>=0&&i[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(Ge.splitPipe),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(Ge.slashPipe,"|");return r}function Cr(e,t,n){let r=e.length;if(r===0)return"";let o=0;for(;o<r&&e.charAt(r-o-1)===t;)o++;return e.slice(0,r-o)}function j0(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return n>0?-2:-1}function Wu(e,t,n,r,o){let s=t.href,a=t.title||null,i=e[1].replace(o.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:a,text:i,tokens:r.inlineTokens(i)};return r.state.inLink=!1,l}function Y0(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(r===null)return t;let o=r[1];return t.split(`
`).map(s=>{let a=s.match(n.other.beginningSpace);if(a===null)return s;let[i]=a;return i.length>=o.length?s.slice(o.length):s}).join(`
`)}var No=class{options;rules;lexer;constructor(e){this.options=e||an}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Cr(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],r=Y0(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let r=Cr(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Cr(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Cr(t[0],`
`).split(`
`),r="",o="",s=[];for(;n.length>0;){let a=!1,i=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))i.push(n[l]),a=!0;else if(!a)i.push(n[l]);else break;n=n.slice(l);let u=i.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,o=o?`${o}
${d}`:d;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=f,n.length===0)break;let p=s.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let h=p,m=h.raw+`
`+n.join(`
`),y=this.blockquote(m);s[s.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,o=o.substring(0,o.length-h.text.length)+y.text;break}else if(p?.type==="list"){let h=p,m=h.raw+`
`+n.join(`
`),y=this.list(m);s[s.length-1]=y,r=r.substring(0,r.length-p.raw.length)+y.raw,o=o.substring(0,o.length-h.raw.length)+y.raw,n=m.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let s=this.rules.other.listItemRegex(n),a=!1;for(;e;){let l=!1,u="",d="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),p=e.split(`
`,1)[0],h=!f.trim(),m=0;if(this.options.pedantic?(m=2,d=f.trimStart()):h?m=t[1].length+1:(m=t[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,d=f.slice(m),m+=t[1].length),h&&this.rules.other.blankLine.test(p)&&(u+=p+`
`,e=e.substring(p.length+1),l=!0),!l){let y=this.rules.other.nextBulletRegex(m),b=this.rules.other.hrRegex(m),w=this.rules.other.fencesBeginRegex(m),v=this.rules.other.headingBeginRegex(m),x=this.rules.other.htmlBeginRegex(m);for(;e;){let M=e.split(`
`,1)[0],k;if(p=M,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),k=p):k=p.replace(this.rules.other.tabCharGlobal,"    "),w.test(p)||v.test(p)||x.test(p)||y.test(p)||b.test(p))break;if(k.search(this.rules.other.nonSpaceChar)>=m||!p.trim())d+=`
`+k.slice(m);else{if(h||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||w.test(f)||v.test(f)||b.test(f))break;d+=`
`+p}!h&&!p.trim()&&(h=!0),u+=M+`
`,e=e.substring(M.length+1),f=k.slice(m)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0)),o.items.push({type:"list_item",raw:u,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=u}let i=o.items.at(-1);if(i)i.raw=i.raw.trimEnd(),i.text=i.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let u=this.rules.other.listTaskCheckbox.exec(l.raw);if(u){let d={type:"checkbox",raw:u[0]+" ",checked:u[0]!=="[ ]"};l.checked=d.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=d.raw+l.tokens[0].raw,l.tokens[0].text=d.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(d)):l.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):l.tokens.unshift(d)}}if(!o.loose){let u=l.tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=d}}if(o.loose)for(let l of o.items){l.loose=!0;for(let u of l.tokens)u.type==="text"&&(u.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=Bu(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?s.align.push("right"):this.rules.other.tableAlignCenter.test(a)?s.align.push("center"):this.rules.other.tableAlignLeft.test(a)?s.align.push("left"):s.align.push(null);for(let a=0;a<n.length;a++)s.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:s.align[a]});for(let a of o)s.rows.push(Bu(a,s.header.length).map((i,l)=>({text:i,tokens:this.lexer.inline(i),header:!1,align:s.align[l]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Cr(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=j0(t[2],"()");if(s===-2)return;if(s>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),Wu(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[r.toLowerCase()];if(!o){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return Wu(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...r[0]].length-1,s,a,i=o,l=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+o);(r=u.exec(t))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(a=[...s].length,r[3]||r[4]){i+=a;continue}else if((r[5]||r[6])&&o%3&&!((o+a)%3)){l+=a;continue}if(i-=a,i>0)continue;a=Math.min(a,a+i+l);let d=[...r[0]][0].length,f=e.slice(0,o+r.index+d+a);if(Math.min(o,a)%2){let h=f.slice(1,-1);return{type:"em",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}let p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=t[1],r="mailto:"+n):(n=t[1],r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},lt=class Ya{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||an,this.options.tokenizer=this.options.tokenizer||new No,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Ge,block:Do.normal,inline:xr.normal};this.options.pedantic?(n.block=Do.pedantic,n.inline=xr.pedantic):this.options.gfm&&(n.block=Do.gfm,this.options.breaks?n.inline=xr.breaks:n.inline=xr.gfm),this.tokenizer.rules=n}static get rules(){return{block:Do,inline:xr}}static lex(t,n){return new Ya(n).lex(t)}static lexInline(t,n){return new Ya(n).inlineTokens(t)}lex(t){t=t.replace(Ge.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],r=!1){for(this.options.pedantic&&(t=t.replace(Ge.tabCharGlobal,"    ").replace(Ge.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(a=>(o=a.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let a=n.at(-1);o.raw.length===1&&a!==void 0?a.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let a=n.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.text,this.inlineQueue.at(-1).src=a.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let a=n.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let s=t;if(this.options.extensions?.startBlock){let a=1/0,i=t.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},i),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=t.substring(0,a+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let a=n.at(-1);r&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):n.push(o),r=s.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let a=n.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+o.raw,a.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):n.push(o);continue}if(t){let a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r=t,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,o.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=o[2]?o[2].length:0,r=r.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let a=!1,i="";for(;t;){a||(i=""),a=!1;let l;if(this.options.extensions?.inline?.some(d=>(l=d.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let d=n.at(-1);l.type==="text"&&d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,r,i)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let u=t;if(this.options.extensions?.startInline){let d=1/0,f=t.slice(1),p;this.options.extensions.startInline.forEach(h=>{p=h.call({lexer:this},f),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(u=t.substring(0,d+1))}if(l=this.tokenizer.inlineText(u)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(i=l.raw.slice(-1)),a=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},Ao=class{options;parser;constructor(e){this.options=e||an}space(e){return""}code({text:e,lang:t,escaped:n}){let r=(t||"").match(Ge.notSpaceStart)?.[0],o=e.replace(Ge.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Dt(r)+'">'+(n?o:Dt(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:Dt(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,r="";for(let a=0;a<e.items.length;a++){let i=e.items[a];r+=this.listitem(i)}let o=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+o+s+`>
`+r+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let r="";for(let o=0;o<e.rows.length;o++){let s=e.rows[o];n="";for(let a=0;a<s.length;a++)n+=this.tablecell(s[a]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Dt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let r=this.parser.parseInline(n),o=zu(e);if(o===null)return r;e=o;let s='<a href="'+e+'"';return t&&(s+=' title="'+Dt(t)+'"'),s+=">"+r+"</a>",s}image({href:e,title:t,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let o=zu(e);if(o===null)return Dt(n);e=o;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Dt(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Dt(e.text)}},Sa=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},ct=class qa{options;renderer;textRenderer;constructor(t){this.options=t||an,this.options.renderer=this.options.renderer||new Ao,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sa}static parse(t,n){return new qa(n).parse(t)}static parseInline(t,n){return new qa(n).parseInline(t)}parse(t){let n="";for(let r=0;r<t.length;r++){let o=t[r];if(this.options.extensions?.renderers?.[o.type]){let a=o,i=this.options.extensions.renderers[a.type].call({parser:this},a);if(i!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){n+=i||"";continue}}let s=o;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(t,n=this.renderer){let r="";for(let o=0;o<t.length;o++){let s=t[o];if(this.options.extensions?.renderers?.[s.type]){let i=this.options.extensions.renderers[s.type].call({parser:this},s);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=i||"";continue}}let a=s;switch(a.type){case"escape":{r+=n.text(a);break}case"html":{r+=n.html(a);break}case"link":{r+=n.link(a);break}case"image":{r+=n.image(a);break}case"checkbox":{r+=n.checkbox(a);break}case"strong":{r+=n.strong(a);break}case"em":{r+=n.em(a);break}case"codespan":{r+=n.codespan(a);break}case"br":{r+=n.br(a);break}case"del":{r+=n.del(a);break}case"text":{r+=n.text(a);break}default:{let i='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return r}},Sr=class{options;block;constructor(e){this.options=e||an}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?lt.lex:lt.lexInline}provideParser(){return this.block?ct.parse:ct.parseInline}},q0=class{defaults=ga();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ct;Renderer=Ao;TextRenderer=Sa;Lexer=lt;Tokenizer=No;Hooks=Sr;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{let o=r;for(let s of o.header)n=n.concat(this.walkTokens(s.tokens,t));for(let s of o.rows)for(let a of s)n=n.concat(this.walkTokens(a.tokens,t));break}case"list":{let o=r;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let a=o[s].flat(1/0);n=n.concat(this.walkTokens(a,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=t.renderers[o.name];s?t.renderers[o.name]=function(...a){let i=o.renderer.apply(this,a);return i===!1&&(i=s.apply(this,a)),i}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),r.extensions=t),n.renderer){let o=this.defaults.renderer||new Ao(this.defaults);for(let s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let a=s,i=n.renderer[a],l=o[a];o[a]=(...u)=>{let d=i.apply(o,u);return d===!1&&(d=l.apply(o,u)),d||""}}r.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new No(this.defaults);for(let s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,i=n.tokenizer[a],l=o[a];o[a]=(...u)=>{let d=i.apply(o,u);return d===!1&&(d=l.apply(o,u)),d}}r.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Sr;for(let s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let a=s,i=n.hooks[a],l=o[a];Sr.passThroughHooks.has(s)?o[a]=u=>{if(this.defaults.async&&Sr.passThroughHooksRespectAsync.has(s))return(async()=>{let f=await i.call(o,u);return l.call(o,f)})();let d=i.call(o,u);return l.call(o,d)}:o[a]=(...u)=>{if(this.defaults.async)return(async()=>{let f=await i.apply(o,u);return f===!1&&(f=await l.apply(o,u)),f})();let d=i.apply(o,u);return d===!1&&(d=l.apply(o,u)),d}}r.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(a){let i=[];return i.push(s.call(this,a)),o&&(i=i.concat(o.call(this,a))),i}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return lt.lex(e,t??this.defaults)}parser(e,t){return ct.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},o={...this.defaults,...r},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let a=o.hooks?await o.hooks.preprocess(t):t,i=await(o.hooks?await o.hooks.provideLexer():e?lt.lex:lt.lexInline)(a,o),l=o.hooks?await o.hooks.processAllTokens(i):i;o.walkTokens&&await Promise.all(this.walkTokens(l,o.walkTokens));let u=await(o.hooks?await o.hooks.provideParser():e?ct.parse:ct.parseInline)(l,o);return o.hooks?await o.hooks.postprocess(u):u})().catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let a=(o.hooks?o.hooks.provideLexer():e?lt.lex:lt.lexInline)(t,o);o.hooks&&(a=o.hooks.processAllTokens(a)),o.walkTokens&&this.walkTokens(a,o.walkTokens);let i=(o.hooks?o.hooks.provideParser():e?ct.parse:ct.parseInline)(a,o);return o.hooks&&(i=o.hooks.postprocess(i)),i}catch(a){return s(a)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Dt(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}}},ln=new q0;function ke(e,t){return ln.parse(e,t)}ke.options=ke.setOptions=function(e){return ln.setOptions(e),ke.defaults=ln.defaults,Su(ke.defaults),ke},ke.getDefaults=ga,ke.defaults=an,ke.use=function(...e){return ln.use(...e),ke.defaults=ln.defaults,Su(ke.defaults),ke},ke.walkTokens=function(e,t){return ln.walkTokens(e,t)},ke.parseInline=ln.parseInline,ke.Parser=ct,ke.parser=ct.parse,ke.Renderer=Ao,ke.TextRenderer=Sa,ke.Lexer=lt,ke.lexer=lt.lex,ke.Tokenizer=No,ke.Hooks=Sr,ke.parse=ke,ke.options,ke.setOptions,ke.use,ke.walkTokens,ke.parseInline,ct.parse,lt.lex;function V0(e){const n=new DOMParser().parseFromString(`<div>${e}</div>`,"text/html"),r=n.body.firstElementChild;if(!r)return e;const o=a=>{Array.from(a.querySelectorAll("ul")).forEach(o);const l=Array.from(a.children).filter(f=>f.tagName==="LI");let u=!1,d=!1;l.forEach(f=>{f.querySelector(':scope > input[type="checkbox"]')?u=!0:d=!0}),u&&(l.forEach(f=>{const p=f.querySelector(':scope > input[type="checkbox"]');if(p){const h=p.hasAttribute("checked");f.setAttribute("data-type","taskItem"),f.setAttribute("data-checked",String(h)),p.remove();const m=Array.from(f.childNodes),y=[],b=[];if(m.forEach(w=>{if(w.nodeType===Node.ELEMENT_NODE){const v=w;v.tagName==="UL"||v.tagName==="OL"||v.tagName==="P"?b.push(w):y.push(w)}else y.push(w)}),f.innerHTML="",y.length>0){const w=n.createElement("p");y.forEach(v=>w.appendChild(v)),w.firstChild&&w.firstChild.nodeType===Node.TEXT_NODE&&(w.firstChild.textContent=(w.firstChild.textContent||"").replace(/^\s+/,"")),f.appendChild(w)}b.forEach(w=>f.appendChild(w))}}),u&&!d&&a.setAttribute("data-type","taskList"))};return Array.from(r.querySelectorAll(":scope > ul")).forEach(o),r.innerHTML}const K0=()=>{if(typeof window>"u")return!1;const e="ontouchstart"in window,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.innerWidth<768;return e&&(t||n)||t&&n},G0=g.forwardRef(function({content:t="",onChange:n,onHTMLChange:r,onMarkdownChange:o,placeholder:s='Start writing... Use "/" for commands',editable:a=!0,autofocus:i=!1,className:l="",showToolbar:u=!0,showWordCount:d=!0,theme:f,autoSave:p=!0,autoSaveKey:h="paragon-editor-content",autoSaveDelay:m=1e3,showRecoveryBanner:y=!0,showFloatingToolbar:b=!0,maxImageSize:w=5*1024*1024,onImageUploadStart:v,onImageUploadComplete:x,onImageUploadError:M,onImageUpload:k,resolveImageSrc:T,showModeToggle:N=!0,initialMode:C="wysiwyg",onModeChange:E,onReady:D,onFocus:A,onBlur:L,onSelectionChange:$,onDestroy:_,onSave:B,onRecover:U,onWikiLinkClick:K,validateWikiLink:O,onWikiLinkSearch:P,onLinkClick:V,findReplaceOpen:X,onFindReplaceChange:G,renderToolbar:Z,renderFooter:ee,disabledFeatures:z={},minHeight:F="200px",maxHeight:j,spellCheck:Q=!0,headingLevels:pe=[1,2,3,4,5,6],collapsibleHeadingLevels:be=[1,2,3],showTableOfContents:Le=!1,tocVisible:Fe=!0,onTocVisibilityChange:nt,tocTitle:jt="",tocMinLevel:Tr=1,tocMaxLevel:Er=4,tocShowLevelIndicators:Lo=!1,tocHighlightActive:Po=!0,tocTreeView:Io=!1,tocWidth:Oo="240px",tocPosition:Fn="right",tocScrollOffset:Mr=20,onTocItemClick:Un,renderTocItem:jn,tocShowToggleButton:$o=!0,autoClosePairs:Ea=!0,showPerformanceProfiler:Ma=!1,onPerformanceProfilerClose:Da,autoReorderChecklist:Na=!1,progressiveSelectAll:_o=!1,onEditorError:Aa,aiActions:Nt,onAIAction:Yn,onAISetupRequired:qn},La){const[rt]=g.useState(()=>K0()),[Yt,ue]=g.useState(C),[Te,ae]=g.useState(""),fe=g.useRef(C),Pe=g.useRef(""),he=g.useRef(null),[Pa,Ho]=g.useState(0),Vn=!!(Nt&&Nt.length>0&&Yn),{state:Ue,executeAction:qt,abort:e1,reset:Vt}=Cx(Yn),[Ia,Oa]=g.useState(null),[t1,n1]=g.useState({selectionTop:0,selectionBottom:0,selectionCenterX:0}),r1=g.useRef(Yn);r1.current=Yn;const Ku=g.useRef(qn);Ku.current=qn;const[o1,s1]=g.useState([]),[a1,i1]=g.useState(0),l1=g.useCallback((W,Y)=>{s1(W),i1(Y)},[]),$a=g.useRef(v),_a=g.useRef(x),Ha=g.useRef(M),za=g.useRef(k),Ba=g.useRef(T),Gu=g.useRef(K),Wa=g.useRef(O),Fa=g.useRef(P);$a.current=v,_a.current=x,Ha.current=M,za.current=k,Ba.current=T,Gu.current=K,Wa.current=O,Fa.current=P;const c1=g.useMemo(()=>{const W=[tf.configure({heading:{levels:pe},codeBlock:!1,dropcursor:{color:"var(--primary)",width:2},bulletList:!1,orderedList:!1,listItem:!1,link:!1,underline:!1,bold:{HTMLAttributes:{class:"font-bold"}},italic:{HTMLAttributes:{class:"italic"}}}),oi,si,li,nf.configure({placeholder:s,emptyEditorClass:"is-editor-empty"}),rf.configure({types:["heading","paragraph"]}),of.configure({multicolor:!0}),sf.configure({openOnClick:!1,autolink:!0,linkOnPaste:!0,HTMLAttributes:{rel:"noopener noreferrer",target:"_blank"}}),mf,bf,yf,vf,Vd,Gd,Qd,Xd];return z.tables||W.push(af.Table.configure({resizable:!rt,HTMLAttributes:{class:"editor-table"}}),lf,$f,_f,jf),z.taskLists||W.push(ai.configure({HTMLAttributes:{class:"task-list"}}),ii.configure({nested:!0,HTMLAttributes:{class:"task-item"}})),rt||W.push(di.configure({listItemTypes:["listItem","taskItem"]})),z.codeBlocks||W.push(Vf),z.callouts||W.push(Qf,Kd),z.collapsibleHeadings||W.push(qd.configure({levels:be})),z.images||W.push(hi.configure({allowBase64:!0,HTMLAttributes:{class:"editor-image"},onImageClick:Y=>{Bo({isOpen:!0,src:Y.src,alt:Y.alt,pos:Y.pos,position:{x:Y.rect.left+Y.rect.width/2,y:Y.rect.bottom}})},resolveImageSrc:Ba.current?((...Y)=>Ba.current(...Y)):void 0}),eu.configure({maxFileSize:w,onUploadStart:$a.current?((...Y)=>$a.current(...Y)):void 0,onUploadComplete:_a.current?((...Y)=>_a.current(...Y)):void 0,onUploadError:Ha.current?((...Y)=>Ha.current(...Y)):void 0,onImageUpload:za.current?((Y,te)=>za.current(Y,te)):void 0})),z.datePills||W.push(xl.configure({HTMLAttributes:{class:"date-pill"}})),z.tagPills||W.push(Cl.configure({HTMLAttributes:{class:"tag-pill"}})),z.wikiLinks||W.push(Wd.configure({onWikiLinkClick:Y=>{console.log("WikiLink clicked:",Y),Gu.current?.(Y)},validateLink:Y=>Wa.current?Wa.current(Y):!0})),_o&&W.push(ix),z.markdownPaste||W.push(jd.configure({enableMarkdownPaste:!0})),W},[s,rt,w,pe,be,z,_o]),At=g.useRef(null),cn=g.useRef(n),dn=g.useRef(r),Ua=g.useRef(o),Dr=g.useRef(null);cn.current=n,dn.current=r,Ua.current=o;const H=je.useEditor({immediatelyRender:!1,shouldRerenderOnTransaction:!1,onCreate:({editor:W})=>{window.__tiptapEditor=W,D?.(W)},onDestroy:()=>{_?.()},extensions:c1,content:t,editable:a,autofocus:i,editorProps:{attributes:{class:"tiptap-editor outline-none min-h-full",spellcheck:Q?"true":"false"},handleClick:(W,Y,te)=>{if(V){const re=te.target.closest("a");if(re){const ve=re.getAttribute("href");if(ve&&V(ve,te)===!1)return te.preventDefault(),!0}}return!1}},onUpdate:({editor:W})=>{At.current&&clearTimeout(At.current),At.current=setTimeout(()=>{if(W.isDestroyed)return;const Y=W.getHTML();(cn.current||dn.current)&&(cn.current?.(Y),dn.current?.(Y))},150)},onFocus:()=>{A?.()},onBlur:()=>{if(At.current&&(clearTimeout(At.current),At.current=null,H&&!H.isDestroyed)){const W=H.getHTML();if((cn.current||dn.current)&&(cn.current?.(W),dn.current?.(W)),fe.current==="wysiwyg"&&Dr.current){const Y=Dr.current.turndown(W);Pe.current=Y,Ua.current?.(Y)}}L?.()},onSelectionUpdate:({editor:W})=>{if($){const{from:Y,to:te,empty:Ce}=W.state.selection;$({from:Y,to:te,empty:Ce})}}});g.useEffect(()=>()=>{if(At.current&&(clearTimeout(At.current),At.current=null,H&&!H.isDestroyed)){const W=H.getHTML();if((cn.current||dn.current)&&(cn.current?.(W),dn.current?.(W)),fe.current==="wysiwyg"&&Dr.current){const Y=Dr.current.turndown(W);Pe.current=Y,Ua.current?.(Y)}}},[]);const[Xu,zo]=g.useState(!1),[Kn,Bo]=g.useState(null),[d1,u1]=g.useState(!1),f1=X!==void 0?X:d1,Kt=g.useCallback(W=>{u1(W),G?.(W)},[G]),[p1,ja]=g.useState(0),[h1,g1]=g.useState(""),Lt=_d(H,{storageKey:h,debounceMs:m,enabled:p,onSave:W=>{B?.(W)},onRecover:W=>{U?.(W)}}),Gt=l0();Dr.current=Gt;const Zu=g.useRef(!1);g.useEffect(()=>{if(!Zu.current&&C==="markdown"&&H&&!H.isDestroyed&&Gt){const W=H.getHTML(),Y=Gt.turndown(W);ae(Y),Pe.current=Y,Zu.current=!0}},[H,Gt,C]);const yt=g.useCallback(W=>{if(H){if(W==="markdown"&&fe.current==="wysiwyg"){const Y=H.getHTML(),te=Gt.turndown(Y);ae(te),Pe.current=te}else if(W==="wysiwyg"&&fe.current==="markdown"){const Y=["info","note","prompt","resources","todo"];let te=Pe.current;Y.forEach(se=>{const oe=new RegExp(`\`\`\`ad-${se}\\s*\\n([\\s\\S]*?)\`\`\``,"g");te=te.replace(oe,(Ee,ce)=>{const De=ke.parse(ce.trim(),{async:!1});return`<div data-callout="" data-type="${se}" class="callout callout-${se}">${De}</div>`})}),Y.forEach(se=>{const oe=new RegExp(`\`\`\`${se}\\s*\\n([\\s\\S]*?)\`\`\``,"g");te=te.replace(oe,(Ee,ce)=>{const De=ke.parse(ce.trim(),{async:!1});return`<div data-callout="" data-type="${se}" class="callout callout-${se}">${De}</div>`})}),te=te.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(se,oe,Ee)=>{const ce=oe.split("|").map(Pt=>Pt.trim());let De="",Xe="left",ze=null;ce.length===1?De=ce[0]:ce.length===2?(De=ce[0],/^\d+$/.test(ce[1])?ze=ce[1]:["left","center","right"].includes(ce[1])?Xe=ce[1]:De=oe):ce.length===3?(De=ce[0],["left","center","right"].includes(ce[1])&&(Xe=ce[1]),/^\d+$/.test(ce[2])&&(ze=ce[2])):De=oe;const Ae=ze?` width="${ze}" style="width: ${ze}px"`:"",Xt=` data-align="${Xe}"`;return`<img src="${Ee.trim()}" alt="${De}"${Xt}${Ae} />`}),te=te.replace(new RegExp("(?<!`)==((?:(?!==)[^\\n])+)==(?!`)","g"),"<mark>$1</mark>"),te=te.replace(/@([^@\n]+)@/g,(se,oe)=>{const Ee=Ht(oe);if(Ee){const ce=Wr(Ee);return`<span data-type="date-pill" data-date="${Ee}" class="date-pill ${ce}"><span class="date-icon">📅</span><span class="date-text">${oe.trim()}</span></span>`}return se}),te=te.replace(new RegExp("(?:^|(?<=\\s))#([a-zA-Z][a-zA-Z0-9_-]*|[a-zA-Z0-9_-]*[a-zA-Z][a-zA-Z0-9_-]*)(?=\\s|$|[.,;:!?)\\]])","gm"),(se,oe)=>{const Ee=lr(oe);return Tn(Ee)?`<span data-type="tag-pill" data-tag="${Ee}" class="tag-pill"><span class="tag-icon">#</span><span class="tag-text">${Ee}</span></span>`:se}),te=te.split(/(```[\s\S]*?```|`[^`\n]+`)/g).map((se,oe)=>oe%2===1?se:se.replace(/\[\[([^\[\]]+)\]\]/g,(Ee,ce)=>`<span data-wiki-link data-page-name="${ce.trim()}" class="wiki-link">${ce.trim()}</span>`)).join("");let re=ke.parse(te,{async:!1});re=V0(re);const ve=se=>{let oe=se;return oe=oe.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),oe=oe.replace(new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)","g"),"<em>$1</em>"),oe=oe.replace(/~~(.+?)~~/g,"<s>$1</s>"),oe=oe.replace(/`([^`]+)`/g,"<code>$1</code>"),oe=oe.replace(/==(.+?)==/g,"<mark>$1</mark>"),oe=oe.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>'),oe},ot=se=>{const oe=se.match(/data-align="([^"]*)"/),Ee=oe?oe[1]:"left";return`<figure class="image-resizer" style="${{left:"margin-right: auto;",center:"margin-left: auto; margin-right: auto;",right:"margin-left: auto;"}[Ee]||"margin-right: auto;"}">${se.trim()}</figure>`},fn=se=>{if(/<img\s/i.test(se)){const oe=/(<img\s[^>]*\/?>)/gi;return se.split(oe).filter(ce=>ce.trim()).map(ce=>/^<img\s/i.test(ce)?ot(ce):ce.trim()?`<p>${ve(ce.trim())}</p>`:"").join("")}if(/^!\[/.test(se)){const oe=se.match(/^!\[([^\]]*)\]\(([^)]+)\)$/);if(oe)return`<figure class="image-resizer" style="margin-right: auto;"><img src="${oe[2]}" alt="${oe[1]}" data-align="left" /></figure>`}return`<p>${ve(se)}</p>`},pn=se=>{const oe=se.match(/^( *)/),Ee=oe?oe[1].length:0,ce=Math.floor(Ee/2),De=se.trimStart(),Xe=De.match(/^-\s*\[(x| )\]\s*(.*)$/);if(Xe)return{type:"task",depth:ce,text:Xe[2].trim(),checked:Xe[1]==="x"};const ze=De.match(/^-\s+(.+)$/);if(ze)return{type:"ul",depth:ce,text:ze[1].trim()};const Ae=De.match(/^(\d+)\.\s+(.+)$/);return Ae?{type:"ol",depth:ce,text:Ae[2].trim(),index:parseInt(Ae[1],10)}:null},Gn=se=>{if(se.length===0)return"";const oe=(De,Xe)=>{let ze="",Ae=De;const Xt=se[Ae]?.type||"ul",Pt=Xt==="task",Zt=Pt?'<ul data-type="taskList">':`<${Xt==="ol"?"ol":"ul"}>`,Nr=Pt?"</ul>":`</${Xt==="ol"?"ol":"ul"}>`;for(ze+=Zt;Ae<se.length&&se[Ae].depth>=Xe;){const It=se[Ae];if(It.depth===Xe){if(Pt?ze+=`<li data-type="taskItem" data-checked="${It.checked||!1}"><p>${ve(It.text)}</p>`:ze+=`<li><p>${ve(It.text)}</p>`,Ae+1<se.length&&se[Ae+1].depth>Xe){const hn=oe(Ae+1,se[Ae+1].depth);ze+=hn.html,Ae=hn.nextIdx}else Ae++;ze+="</li>"}else Ae++}return ze+=Nr,{html:ze,nextIdx:Ae}},Ee=Math.min(...se.map(De=>De.depth));return oe(0,Ee).html};re=re.replace(/(<t[dh][^>]*>)([\s\S]*?)(<\/t[dh]>)/gi,(se,oe,Ee,ce)=>{const De=/<img\s/i.test(Ee),Xe=/<br\s*\/?>/i.test(Ee),ze=/(?:^|<br\s*\/?>)\s*(?:- |\d+\. )/i.test(Ee);if(!De&&!Xe&&!ze)return se;let Ae=Ee.trim();Ae=Ae.replace(/^<p>([\s\S]*)<\/p>$/i,"$1").trim();const Xt=Ae.split(/<br\s*\/?>/i).filter(It=>It.trim());if(Xt.length<=1&&!ze)return De?`${oe}${fn(Ae)}${ce}`:se;const Pt=[];let Zt=[];const Nr=()=>{Zt.length!==0&&(Pt.push(Gn(Zt)),Zt=[])};for(const It of Xt){const hn=pn(It);if(hn){if(Zt.length>0){const k1=Zt[0].type;hn.depth===0&&hn.type!==k1&&Nr()}Zt.push(hn)}else Nr(),Pt.push(fn(It.trim()))}return Nr(),`${oe}${Pt.join("")}${ce}`}),queueMicrotask(()=>{H.isDestroyed||H.commands.setContent(re)})}ue(W),fe.current=W,E?.(W)}},[H,Gt,E]),Qu=g.useCallback(W=>{ae(W),Pe.current=W,o?.(W)},[o]),un=Hd(H,{debounceMs:500,extendedStats:!1,enabled:d});g.useImperativeHandle(La,()=>({getEditor:()=>H,getHTML:()=>H?.getHTML()||"",getMarkdown:()=>H?Gt.turndown(H.getHTML()):"",getText:()=>H?.getText()||"",setContent:W=>{H&&!H.isDestroyed&&queueMicrotask(()=>{H.commands.setContent(W)})},clearContent:()=>{H&&!H.isDestroyed&&H.commands.clearContent()},focus:W=>{H&&!H.isDestroyed&&H.commands.focus(W)},blur:()=>{H&&!H.isDestroyed&&H.commands.blur()},isEmpty:()=>H?.isEmpty||!0,isFocused:()=>H?.isFocused||!1,getMode:()=>fe.current,setMode:W=>yt(W),toggleMode:()=>{const W=fe.current==="wysiwyg"?"markdown":"wysiwyg";return yt(W),W},getWordCount:()=>({words:un.words,characters:un.characters,charactersWithSpaces:un.charactersWithSpaces}),undo:()=>H?.commands.undo(),redo:()=>H?.commands.redo(),canUndo:()=>H?.can().undo()||!1,canRedo:()=>H?.can().redo()||!1,insertContent:W=>H?.commands.insertContent(W),insertImage:(W,Y="")=>H?.commands.setImage({src:W,alt:Y}),insertTable:(W=3,Y=3)=>H?.commands.insertTable({rows:W,cols:Y,withHeaderRow:!0}),insertCodeBlock:W=>{W?H?.commands.setCodeBlock({language:W}):H?.commands.setCodeBlock()},insertCallout:(W="info")=>H?.commands.insertCallout?.({type:W}),insertHorizontalRule:()=>H?.commands.setHorizontalRule(),toggleBold:()=>H?.commands.toggleBold(),toggleItalic:()=>H?.commands.toggleItalic(),toggleUnderline:()=>H?.commands.toggleUnderline(),toggleStrike:()=>H?.commands.toggleStrike(),toggleCode:()=>H?.commands.toggleCode(),toggleHighlight:()=>H?.commands.toggleHighlight(),setHeading:W=>{W===0?H?.commands.setParagraph():H?.commands.setHeading({level:W})},toggleBulletList:()=>H?.commands.toggleBulletList(),toggleOrderedList:()=>H?.commands.toggleOrderedList(),toggleTaskList:()=>H?.commands.toggleTaskList(),toggleBlockquote:()=>H?.commands.toggleBlockquote(),setLink:W=>H?.commands.setLink({href:W}),unsetLink:()=>H?.commands.unsetLink(),openFindReplace:()=>{Kt(!0),ja(W=>W+1)},closeFindReplace:()=>Kt(!1),save:()=>Lt.save(),clearSavedContent:()=>Lt.clear(),getSelectedText:()=>{if(!H)return"";const{from:W,to:Y}=H.state.selection;return H.state.doc.textBetween(W,Y," ")},isEditable:()=>H?.isEditable||!1,setEditable:W=>H?.setEditable(W),getTableOfContents:()=>{if(!H)return[];const W=[];return H.state.doc.descendants((Y,te)=>{if(Y.type.name==="heading"){const Ce=Y.attrs.level,re=Y.textContent.trim();re&&W.push({id:`toc-heading-${te}`,text:re,level:Ce,pos:te})}}),W},scrollToHeading:W=>{if(!(!H||H.isDestroyed))try{const Y=H.state.doc.resolve(W),te=H.view.nodeDOM(Y.before(Y.depth+1));if(te instanceof HTMLElement){const Ce=H.view.dom.closest(".editor-content-wrapper");if(Ce){const re=Ce.getBoundingClientRect(),ot=te.getBoundingClientRect().top-re.top+Ce.scrollTop;Ce.scrollTo({top:ot-20,behavior:"smooth"})}else te.scrollIntoView({behavior:"smooth",block:"start"})}H.commands.setTextSelection(W+1)}catch{}}}),[H,Gt,yt,un,Lt,Kt]),g.useEffect(()=>{const W={getMode:()=>fe.current,setMode:Y=>{if(Y!=="wysiwyg"&&Y!=="markdown"){console.error('Invalid mode. Use "wysiwyg" or "markdown"');return}yt(Y)},toggleMode:()=>{const Y=fe.current==="wysiwyg"?"markdown":"wysiwyg";return yt(Y),Y},switchToVisual:()=>{yt("wysiwyg")},switchToMarkdown:()=>{yt("markdown")},isVisualMode:()=>fe.current==="wysiwyg",isMarkdownMode:()=>fe.current==="markdown",getRawMarkdown:()=>fe.current==="markdown"?Pe.current:null,onModeChange:Y=>{const te=Ce=>{Y(Ce.detail.mode)};return window.addEventListener("paragon-editor-mode-change",te),()=>window.removeEventListener("paragon-editor-mode-change",te)}};return window.__paragonEditorModeAPI=W,console.log("Paragon Editor Mode API exposed globally as window.__paragonEditorModeAPI"),console.log("Available methods: getMode(), setMode(mode), toggleMode(), switchToVisual(), switchToMarkdown(), isVisualMode(), isMarkdownMode(), getRawMarkdown(), onModeChange(callback)"),()=>{delete window.__paragonEditorModeAPI}},[yt]),g.useEffect(()=>{window.dispatchEvent(new CustomEvent("paragon-editor-mode-change",{detail:{mode:Yt}}))},[Yt]),g.useEffect(()=>{if(!H||H.isDestroyed)return;const W=Y=>{if(!H.isDestroyed){if((Y.metaKey||Y.ctrlKey)&&Y.key==="k"){Y.preventDefault(),zo(!0);return}if(!rt&&(Y.metaKey||Y.ctrlKey)&&Y.key==="f"){if(Y.preventDefault(),H){const{state:te}=H,{from:Ce,to:re}=te.selection;if(Ce!==re){const ve=te.doc.textBetween(Ce,re," ");ve.trim()&&g1(ve.trim())}}Kt(!0),ja(te=>te+1);return}if(!rt&&(Y.metaKey||Y.ctrlKey)&&Y.key==="h"){Y.preventDefault(),Kt(!0);return}if(Y.key===" ")try{const{state:te}=H,{selection:Ce}=te,{$from:re}=Ce,ve=re.nodeBefore?.textContent||"";if(ve==="#####"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-5,to:re.pos}).setHeading({level:5}).run();return}if(ve==="####"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-4,to:re.pos}).setHeading({level:4}).run();return}if(ve==="###"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-3,to:re.pos}).setHeading({level:3}).run();return}if(ve==="##"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-2,to:re.pos}).setHeading({level:2}).run();return}if(ve==="#"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-1,to:re.pos}).setHeading({level:1}).run();return}if(ve==="-"||ve==="*"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-1,to:re.pos}).toggleBulletList().run();return}if(/^\d+\.$/.test(ve)){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-ve.length,to:re.pos}).toggleOrderedList().run();return}const ot=/^(-\s*)?\[([ x])?\]$/.exec(ve);if(ot){Y.preventDefault();const fn=ot[2]==="x",pn=te.schema.nodes.taskList,Gn=te.schema.nodes.taskItem;if(pn&&Gn){const se=te.tr,oe=re.pos-ve.length,Ee=re.pos;se.delete(oe,Ee);const De=se.doc.resolve(oe).blockRange();if(De){const Xe=[{type:pn,attrs:{}},{type:Gn,attrs:{checked:fn}}];se.wrap(De,Xe),H.view.dispatch(se);return}}H.chain().focus().deleteRange({from:re.pos-ve.length,to:re.pos}).toggleTaskList().run();return}if(ve===">"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-1,to:re.pos}).toggleBlockquote().run();return}if(ve==="```"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-3,to:re.pos}).toggleCodeBlock().run();return}if(ve==="---"||ve==="***"){Y.preventDefault(),H.chain().focus().deleteRange({from:re.pos-3,to:re.pos}).setHorizontalRule().run();return}}catch(te){console.warn("Space shortcut error:",te)}}};return document.addEventListener("keydown",W,!0),()=>document.removeEventListener("keydown",W,!0)},[H,rt,Kt]);const Ju=g.useCallback((W,Y)=>{if(!Vn){Ku.current?.();return}if(!H)return;let te={top:0,left:0};if(Y){const Ce=Y.getBoundingClientRect();te={top:Ce.bottom+4,left:Ce.left}}else{const{from:Ce,to:re}=H.state.selection,ve=H.view.coordsAtPos(Ce),ot=H.view.coordsAtPos(re);te={top:ot.bottom+8,left:(ve.left+ot.left)/2}}Oa({scope:W,position:te})},[Vn,H]),m1=g.useCallback((W,Y)=>{if(!H||!Nt)return;const te=Nt.find(Gn=>Gn.id===W);if(!te)return;const{from:Ce,to:re}=H.state.selection,ve=Ce!==re?H.state.doc.textBetween(Ce,re,`
`):"",ot=te.scope==="document"||!ve?H.getText():ve,fn=H.view.coordsAtPos(Ce),pn=H.view.coordsAtPos(re);n1({selectionTop:fn.top,selectionBottom:pn.bottom,selectionCenterX:(fn.left+pn.right)/2}),Oa(null),qt(W,te.label,ot,{from:Ce,to:re},Y)},[H,Nt,qt]),b1=g.useCallback(()=>{if(!H||Ue.status!=="complete")return;const{selectionRange:W,result:Y}=Ue;H.chain().focus().setTextSelection(W).deleteSelection().insertContent(Y).run(),Vt()},[H,Ue,Vt]),y1=g.useCallback(()=>{if(!H||Ue.status!=="complete")return;const{selectionRange:W,result:Y}=Ue;H.chain().focus().setTextSelection(W.to).insertContent(`
`+Y).run(),Vt()},[H,Ue,Vt]),v1=g.useCallback(()=>{if(!(Ue.status!=="complete"&&Ue.status!=="error"))if(Ue.status==="complete"){const{action:W,actionLabel:Y,inputText:te,selectionRange:Ce}=Ue;Vt(),qt(W,Y,te,Ce)}else Vt()},[Ue,Vt,qt]);if(!H)return c.jsx("div",{className:`markdown-editor-container ${l}`,"data-theme":f,children:c.jsxs("div",{className:"editor-loading",style:{padding:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.jsx("div",{style:{height:"1rem",width:"100%",borderRadius:"0.25rem",background:"var(--color-muted, #e5e7eb)",opacity:.5,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),c.jsx("div",{style:{height:"1rem",width:"83%",borderRadius:"0.25rem",background:"var(--color-muted, #e5e7eb)",opacity:.5,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),c.jsx("div",{style:{height:"1rem",width:"66%",borderRadius:"0.25rem",background:"var(--color-muted, #e5e7eb)",opacity:.5,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),c.jsx("div",{style:{height:"0.75rem"}}),c.jsx("div",{style:{height:"1rem",width:"100%",borderRadius:"0.25rem",background:"var(--color-muted, #e5e7eb)",opacity:.5,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),c.jsx("div",{style:{height:"1rem",width:"75%",borderRadius:"0.25rem",background:"var(--color-muted, #e5e7eb)",opacity:.5,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})]})});const Ru=c.jsx(Id,{editor:H,onOpenLinkPopover:()=>zo(!0),className:"flex-1",onOpenFindReplace:()=>{Kt(!0),ja(W=>W+1)},disabledFeatures:z,autoReorderChecklist:Na,aiEnabled:Vn||!!qn,onAISparklesClick:W=>Ju("document",W)}),ef=c.jsxs("div",{className:"editor-footer",children:[p&&c.jsx(zd,{status:Lt.status,lastSaved:Lt.lastSaved}),c.jsx("div",{className:"word-count",children:c.jsxs("span",{children:[un.words," words"]})})]}),w1={minHeight:F,...j&&{maxHeight:j,overflowY:"auto"}};return c.jsxs("div",{className:`markdown-editor-container ${l}`,"data-theme":f,children:[p&&y&&Lt.hasRecoverableContent&&c.jsx(Bd,{onRecover:()=>{Lt.recover()},onDismiss:Lt.dismissRecovery}),u&&c.jsxs("div",{className:"flex items-center bg-card/50 editor-toolbar-wrapper",children:[Z?Z(H,Ru):Ru,N&&c.jsxs("div",{className:"editor-mode-toggle mr-2 sm:mr-3",children:[c.jsx("button",{onClick:()=>yt("wysiwyg"),className:`editor-mode-toggle-btn ${Yt==="wysiwyg"?"active":""}`,title:"Visual Editor",children:c.jsx(I.Eye,{})}),c.jsx("button",{onClick:()=>yt("markdown"),className:`editor-mode-toggle-btn ${Yt==="markdown"?"active":""}`,title:"Raw Markdown",children:c.jsx(I.FileText,{})})]})]}),!rt&&c.jsx(Od,{editor:H,isOpen:f1,onClose:()=>Kt(!1),focusTrigger:p1,initialSearchQuery:h1,editorMode:Yt,rawMarkdown:Te,onRawMarkdownChange:Qu,onMatchesChange:l1}),c.jsx($d,{editor:H}),c.jsxs("div",{className:`editor-main-area ${Le?"editor-with-toc":""}`,children:[Le&&Fn==="left"&&c.jsx(aa,{editor:H,visible:Fe,onVisibilityChange:nt,title:jt,minLevel:Tr,maxLevel:Er,showLevelIndicators:Lo,highlightActive:Po,treeView:Io,width:Oo,position:Fn,scrollOffset:Mr,onItemClick:Un,renderItem:jn,showToggleButton:$o,scrollContainerRef:he}),c.jsxs(wx,{resetKey:`${t}-${Pa}`,onRetry:()=>Ho(W=>W+1),onClearContent:()=>{H&&H.commands.clearContent(),n?.(""),r?.(""),o?.(""),Ho(W=>W+1)},onError:Aa,children:[c.jsx("div",{className:"editor-content-wrapper",ref:he,style:w1,children:Yt==="wysiwyg"?c.jsxs(c.Fragment,{children:[c.jsx(je.EditorContent,{editor:H,className:"editor-content"}),!z.images&&!z.dragAndDrop&&c.jsx(tu,{containerRef:he,enabled:a}),!rt&&b&&c.jsx(pi,{editor:H,suppressWhenLinkPopoverOpen:Xu,aiEnabled:Vn||!!qn,onAISparklesClick:W=>Ju("selection",W)}),Ia&&Nt&&c.jsx(Tx,{actions:Nt,scope:Ia.scope,position:Ia.position,onAction:m1,onClose:()=>Oa(null)}),Ue.status!=="idle"&&c.jsx(Ex,{state:Ue,position:t1,onReplace:b1,onInsert:y1,onRetry:v1,onDiscard:()=>{e1(),Vt()}}),!z.slashCommands&&c.jsx(El,{editor:H,disabledFeatures:z}),!z.wikiLinks&&Fa.current&&c.jsx(nb,{editor:H,onSearch:Fa.current}),c.jsx(Kf,{editor:H,isOpen:Xu,onClose:()=>zo(!1)}),!rt&&c.jsx(Gf,{editor:H,onEditLink:()=>zo(!0)}),!z.images&&Kn?.isOpen&&c.jsx(mx,{src:Kn.src,alt:Kn.alt,position:Kn.position,onSave:(W,Y)=>{H.chain().focus().setNodeSelection(Kn.pos).updateAttributes("resizableImage",{src:W,alt:Y}).run(),Bo(null)},onDelete:()=>{H.chain().focus().setNodeSelection(Kn.pos).deleteSelection().run(),Bo(null)},onClose:()=>Bo(null)})]}):c.jsx(bx,{content:Te,onChange:Qu,placeholder:"Write your markdown here...",editable:a,autofocus:!0,searchMatches:o1,currentMatchIndex:a1,autoClosePairs:Ea})}),c.jsx(kx,{scrollContainerRef:he})]}),Le&&Fn==="right"&&c.jsx(aa,{editor:H,visible:Fe,onVisibilityChange:nt,title:jt,minLevel:Tr,maxLevel:Er,showLevelIndicators:Lo,highlightActive:Po,treeView:Io,width:Oo,position:Fn,scrollOffset:Mr,onItemClick:Un,renderItem:jn,showToggleButton:$o,scrollContainerRef:he})]}),d&&(ee?ee({words:un.words,characters:un.characters},Lt.status,ef):ef),c.jsx(vx,{visible:Ma,onClose:Da,editor:H})]})}),X0=me.Node.create({name:"callout",addOptions(){return{HTMLAttributes:{},types:["info","note","prompt","resources","todo"]}},content:"block+",group:"block",defining:!0,addAttributes(){return{type:{default:"info",parseHTML:e=>e.getAttribute("data-type")||"info",renderHTML:e=>({"data-type":e.type})}}},parseHTML(){return[{tag:"div[data-callout]"}]},renderHTML({node:e,HTMLAttributes:t}){const n=e.attrs.type;return["div",me.mergeAttributes(this.options.HTMLAttributes,t,{"data-callout":"","data-type":n,class:`callout callout-${n}`}),0]},addCommands(){return{setCallout:e=>({commands:t})=>t.wrapIn(this.name,e),toggleCallout:e=>({commands:t})=>t.toggleWrap(this.name,e),unsetCallout:()=>({commands:e})=>e.lift(this.name),insertCallout:e=>({chain:t})=>{const n=e?.type||"info";return t().insertContent({type:this.name,attrs:{type:n},content:[{type:"paragraph"}]}).focus().run()}}},addKeyboardShortcuts(){return{"Mod-Shift-c":()=>this.editor.commands.toggleCallout({type:"info"})}}}),Ta={name:"dark",description:"Dark theme inspired by VS Code and GitHub Dark",variables:{"--editor-bg":"oklch(0.13 0.01 250)","--editor-fg":"oklch(0.93 0.01 250)","--editor-border":"oklch(0.28 0.01 250)","--editor-primary":"oklch(0.7 0.15 220)","--editor-primary-fg":"oklch(0.13 0.01 250)","--editor-secondary":"oklch(0.22 0.01 250)","--editor-secondary-fg":"oklch(0.75 0.02 250)","--editor-muted":"oklch(0.25 0.01 250)","--editor-muted-fg":"oklch(0.6 0.02 250)","--editor-selection":"oklch(0.35 0.08 220 / 0.4)","--editor-cursor":"oklch(0.7 0.15 220)","--editor-code-bg":"oklch(0.17 0.01 250)","--editor-line-number":"oklch(0.45 0.02 250)","--editor-callout-info":"oklch(0.5 0.12 220)","--editor-callout-warning":"oklch(0.6 0.15 70)","--editor-callout-error":"oklch(0.5 0.15 25)","--editor-callout-success":"oklch(0.5 0.12 160)","--editor-callout-note":"oklch(0.5 0.12 280)","--syntax-keyword":"oklch(0.7 0.18 320)","--syntax-string":"oklch(0.7 0.12 160)","--syntax-number":"oklch(0.75 0.12 70)","--syntax-comment":"oklch(0.5 0.02 250)","--syntax-function":"oklch(0.75 0.15 280)","--syntax-variable":"oklch(0.8 0.1 220)"}},Fu={name:"light",description:"Light theme for bright environments",variables:{"--editor-bg":"oklch(0.99 0.005 250)","--editor-fg":"oklch(0.2 0.01 250)","--editor-border":"oklch(0.88 0.01 250)","--editor-primary":"oklch(0.55 0.2 220)","--editor-primary-fg":"oklch(0.99 0.005 250)","--editor-secondary":"oklch(0.95 0.01 250)","--editor-secondary-fg":"oklch(0.4 0.02 250)","--editor-muted":"oklch(0.92 0.01 250)","--editor-muted-fg":"oklch(0.5 0.02 250)","--editor-selection":"oklch(0.7 0.12 220 / 0.3)","--editor-cursor":"oklch(0.55 0.2 220)","--editor-code-bg":"oklch(0.96 0.005 250)","--editor-line-number":"oklch(0.6 0.02 250)","--editor-callout-info":"oklch(0.6 0.15 220)","--editor-callout-warning":"oklch(0.7 0.18 70)","--editor-callout-error":"oklch(0.6 0.18 25)","--editor-callout-success":"oklch(0.6 0.15 160)","--editor-callout-note":"oklch(0.6 0.15 280)","--syntax-keyword":"oklch(0.5 0.2 320)","--syntax-string":"oklch(0.45 0.15 160)","--syntax-number":"oklch(0.5 0.15 70)","--syntax-comment":"oklch(0.55 0.02 250)","--syntax-function":"oklch(0.5 0.18 280)","--syntax-variable":"oklch(0.45 0.12 220)"}},Uu={name:"sepia",description:"Warm sepia tones for comfortable reading",variables:{"--editor-bg":"oklch(0.95 0.02 80)","--editor-fg":"oklch(0.25 0.02 60)","--editor-border":"oklch(0.85 0.03 70)","--editor-primary":"oklch(0.55 0.15 50)","--editor-primary-fg":"oklch(0.98 0.01 80)","--editor-secondary":"oklch(0.9 0.025 75)","--editor-secondary-fg":"oklch(0.4 0.02 60)","--editor-muted":"oklch(0.88 0.02 75)","--editor-muted-fg":"oklch(0.5 0.02 60)","--editor-selection":"oklch(0.7 0.1 50 / 0.3)","--editor-cursor":"oklch(0.55 0.15 50)","--editor-code-bg":"oklch(0.92 0.02 75)","--editor-line-number":"oklch(0.6 0.02 60)","--editor-callout-info":"oklch(0.55 0.12 220)","--editor-callout-warning":"oklch(0.65 0.15 50)","--editor-callout-error":"oklch(0.55 0.15 25)","--editor-callout-success":"oklch(0.55 0.12 160)","--editor-callout-note":"oklch(0.55 0.12 280)","--syntax-keyword":"oklch(0.5 0.15 320)","--syntax-string":"oklch(0.45 0.12 160)","--syntax-number":"oklch(0.5 0.12 50)","--syntax-comment":"oklch(0.55 0.02 60)","--syntax-function":"oklch(0.5 0.15 280)","--syntax-variable":"oklch(0.45 0.1 220)"}},ju={name:"nord",description:"Arctic, north-bluish color palette",variables:{"--editor-bg":"oklch(0.23 0.02 240)","--editor-fg":"oklch(0.9 0.01 230)","--editor-border":"oklch(0.32 0.02 240)","--editor-primary":"oklch(0.72 0.1 210)","--editor-primary-fg":"oklch(0.23 0.02 240)","--editor-secondary":"oklch(0.28 0.02 240)","--editor-secondary-fg":"oklch(0.75 0.01 230)","--editor-muted":"oklch(0.35 0.02 240)","--editor-muted-fg":"oklch(0.6 0.01 230)","--editor-selection":"oklch(0.5 0.08 210 / 0.4)","--editor-cursor":"oklch(0.72 0.1 210)","--editor-code-bg":"oklch(0.26 0.02 240)","--editor-line-number":"oklch(0.5 0.01 230)","--editor-callout-info":"oklch(0.68 0.12 210)","--editor-callout-warning":"oklch(0.75 0.12 80)","--editor-callout-error":"oklch(0.65 0.15 15)","--editor-callout-success":"oklch(0.7 0.12 150)","--editor-callout-note":"oklch(0.7 0.1 280)","--syntax-keyword":"oklch(0.7 0.12 280)","--syntax-string":"oklch(0.7 0.1 150)","--syntax-number":"oklch(0.75 0.1 280)","--syntax-comment":"oklch(0.55 0.01 230)","--syntax-function":"oklch(0.72 0.1 210)","--syntax-variable":"oklch(0.9 0.01 230)"}},Wn={dark:Ta,light:Fu,sepia:Uu,nord:ju};function Yu(e,t){Object.entries(t.variables).forEach(([n,r])=>{e.style.setProperty(n,r)})}function Z0(e,t,n,r){const o=Wn[e]||Ta;return{name:t,description:n,variables:{...o.variables,...r}}}const qu=g.createContext(null);function Q0({children:e,defaultTheme:t="dark",containerRef:n}){const[r,o]=g.useState(t),s=Wn[r]||Wn.dark,a=g.useCallback(l=>{Wn[l]&&o(l)},[]);g.useEffect(()=>{n?.current&&Yu(n.current,s)},[s,n]);const i={theme:s,themeName:r,setTheme:a,availableThemes:Object.keys(Wn)};return c.jsx(qu.Provider,{value:i,children:e})}function J0(){const e=g.useContext(qu);if(!e)throw new Error("useEditorTheme must be used within an EditorThemeProvider");return e}const Vu=[{value:"plaintext",label:"Plain Text"},{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"jsx",label:"JSX"},{value:"tsx",label:"TSX"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"cpp",label:"C++"},{value:"c",label:"C"},{value:"csharp",label:"C#"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"ruby",label:"Ruby"},{value:"php",label:"PHP"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"scss",label:"SCSS"},{value:"json",label:"JSON"},{value:"yaml",label:"YAML"},{value:"markdown",label:"Markdown"},{value:"sql",label:"SQL"},{value:"bash",label:"Bash"},{value:"shell",label:"Shell"}];function R0({node:e,updateAttributes:t}){const[n,r]=g.useState(!1),o=e.attrs.language||"plaintext";Vu.find(a=>a.value===o)?.label;const s=g.useCallback(()=>{const a=e.textContent;navigator.clipboard.writeText(a).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)})},[e.textContent]);return c.jsxs(je.NodeViewWrapper,{className:"code-block-wrapper",children:[c.jsxs("div",{className:"code-block-controls",contentEditable:!1,children:[c.jsxs("div",{className:"code-block-language-wrapper",children:[c.jsx("select",{value:o,onChange:a=>t({language:a.target.value}),className:"code-block-language-select",children:Vu.map(({value:a,label:i})=>c.jsx("option",{value:a,children:i},a))}),c.jsx(I.ChevronDown,{size:12,className:"code-block-language-chevron"})]}),c.jsx("button",{onClick:s,className:`code-block-copy-btn ${n?"copied":""}`,title:n?"Copied!":"Copy code",children:n?c.jsx(I.Check,{size:14}):c.jsx(I.Copy,{size:14})})]}),c.jsx("pre",{className:"code-block-pre",children:c.jsx("code",{children:c.jsx(je.NodeViewContent,{})})})]})}q.AutoSaveIndicator=zd,q.Callout=X0,q.CalloutInputRule=Kd,q.CodeBlockComponent=R0,q.CollapsibleHeading=qd,q.CollapsibleList=di,q.DatePill=xl,q.EditorThemeProvider=Q0,q.EditorToolbar=Id,q.FindReplace=Od,q.FloatingToolbar=pi,q.ImageDropZone=tu,q.ImageUpload=eu,q.MarkdownEditor=G0,q.MarkdownLinkInputRule=Vd,q.MarkdownPasteSafe=jd,q.MixedBulletList=oi,q.MixedListItem=li,q.MixedOrderedList=si,q.MixedTaskItem=ii,q.MixedTaskList=ai,q.RecoveryBanner=Bd,q.ResizableImage=hi,q.SearchHighlight=Gd,q.SelectAllActionBar=$d,q.SelectAllOccurrences=Qd,q.SlashCommands=El,q.TabIndent=Xd,q.TableOfContents=aa,q.TagPill=Cl,q.WikiLinkSafe=Wd,q.applyTheme=Yu,q.createCustomTheme=Z0,q.darkTheme=Ta,q.getDateVariant=Wr,q.isValidTag=Tn,q.lightTheme=Fu,q.lowlight=ye,q.nordTheme=ju,q.normalizeTag=lr,q.parseDateFromMarkdown=Ht,q.sepiaTheme=Uu,q.themes=Wn,q.useAutoSave=_d,q.useEditorTheme=J0,q.useWordCount=Hd,Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=paragon.umd.cjs.map
